<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="뒤태지존의 끄적거림">
    <title>Back to the Essence - Java 컴파일에서 실행까지 - (1) - 뒤태지존의 끄적거림</title>
    <meta name="author" content="HomoEfficio">
    <meta name="description" content="뒤태지존의 끄적거림">
    
        <link rel="icon" href="/assets/images/favicon.ico">
    
    
        <link rel="alternative" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="Back to the Essence - Java 컴파일에서 실행까지 - (1)Java 11 JVM 스펙을 기준으로 Java 소스 코드가 어떻게 컴파일되고 실행되는지 살짝 깊게 알아보자. 이번엔 1탄 컴파일 편이다. 2탄은 여기에.. 컴파일전통적으로 컴파일이라고 하면 어떤 언어로 된 소스 코드를 기계가 인식할 수 있는 네이티브 코드로 변환하는 과정을 의미하지">
<meta name="keywords" content="Java,자바,JVM,Bytecode,Compile,JVM Spec,Lexical Analysis,Syntax Analysis,Symantic Analysis,Intermediate Code Generation,Code Optimization,Constant Pool,invokeinterface,invokevirtual,컴파일,바이트코드,JVM 명세,JVM 스펙,어휘 분석,구문 분석,의미 분석,중간 코드 생성,코드 최적화,상수 풀">
<meta property="og:type" content="blog">
<meta property="og:title" content="Back to the Essence - Java 컴파일에서 실행까지 - (1)">
<meta property="og:url" content="http://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/index.html">
<meta property="og:site_name" content="뒤태지존의 끄적거림">
<meta property="og:description" content="Back to the Essence - Java 컴파일에서 실행까지 - (1)Java 11 JVM 스펙을 기준으로 Java 소스 코드가 어떻게 컴파일되고 실행되는지 살짝 깊게 알아보자. 이번엔 1탄 컴파일 편이다. 2탄은 여기에.. 컴파일전통적으로 컴파일이라고 하면 어떤 언어로 된 소스 코드를 기계가 인식할 수 있는 네이티브 코드로 변환하는 과정을 의미하지">
<meta property="og:locale" content="ko">
<meta property="og:image" content="https://i.imgur.com/6Gixn4m.png">
<meta property="og:image" content="https://i.imgur.com/XgKJv8x.png">
<meta property="og:image" content="https://i.imgur.com/bjruQVw.png">
<meta property="og:image" content="https://i.imgur.com/ynDWnl2.gif">
<meta property="og:image" content="https://i.imgur.com/wROkyp1.jpg">
<meta property="og:updated_time" content="2019-01-30T15:15:11.417Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Back to the Essence - Java 컴파일에서 실행까지 - (1)">
<meta name="twitter:description" content="Back to the Essence - Java 컴파일에서 실행까지 - (1)Java 11 JVM 스펙을 기준으로 Java 소스 코드가 어떻게 컴파일되고 실행되는지 살짝 깊게 알아보자. 이번엔 1탄 컴파일 편이다. 2탄은 여기에.. 컴파일전통적으로 컴파일이라고 하면 어떤 언어로 된 소스 코드를 기계가 인식할 수 있는 네이티브 코드로 변환하는 과정을 의미하지">
<meta name="twitter:image" content="https://i.imgur.com/6Gixn4m.png">
    
        <meta rel="publisher" content="https://plus.google.com/+오명운"/>
    
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/30f0244ab86396288cdb62c3591c0c30?s=640"/>
    
    
        <meta property="og:image" content="/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/https:/i.gzn.jp/img/2018/09/26/java-11/00_m.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="http://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/https://i.gzn.jp/img/2018/09/26/java-11/00_m.png" />
    
    
        <meta property="og:image" content="/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/cover-jvm-01.jpg"/>
        <meta class="swiftype" name="image" data-type="enum" content="http://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/cover-jvm-01.jpg" />
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-79893978-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6494847158566766",
    enable_page_level_ads: true
  });
</script>
</head>

    <body>
        <div id="blog">
            <header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">뒤태지존의 끄적거림</a>
    </h1>
    
        <a class="header-right-picture" href="/#about">
            <img class="header-picture" src="https://www.gravatar.com/avatar/30f0244ab86396288cdb62c3591c0c30?s=90"/>
        </a>
    
</header>
            <nav id="sidebar" data-behavior="1">
    
    <div class="sidebar-profile">
        <a href="/#about">
            
            <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/30f0244ab86396288cdb62c3591c0c30?s=90"/>
            
        </a>
        <span class="sidebar-profile-name">HomoEfficio</span>
    </div>
    
    
    <ul class="sidebar-buttons">
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/ 
                    ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/all-categories
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">Categories</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/all-tags
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/all-archives
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">Archives</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link st-search-show-outputs"
                    href="#search
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">Search</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="#about
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">About me</span>
                </a>
        </li>
        
    </ul>
    
    <ul class="sidebar-buttons">
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="https://github.com/HomoEfficio" target="_blank">
            
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="mailto:homo.efficio@gmail.com" target="_blank">
            
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">Mail</span>
                </a>
        </li>
        
    </ul>
    
    <ul class="sidebar-buttons">
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/atom.xml
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>
            <div id="main" data-behavior="1">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
        <div class="post-header-cover" style="background-image:url('/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/cover-jvm-01.jpg');">
            <div class="post-header main-content-wrap">
    
        <h1 class="post-title" itemprop="headline">Back to the Essence - Java 컴파일에서 실행까지 - (1)</h1>
    
    <div class="post-meta">
    <time  itemprop="datePublished" content="Thu Jan 31 2019 00:00:57 GMT+0900">
        Jan 31, 2019
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Specification/">Specification</a>


    
</div>
</div>
        </div>
    
    <div class="post-content markdown main-content-wrap" itemprop="articleBody">
        
            <h1 id="Back-to-the-Essence-Java-컴파일에서-실행까지-1"><a href="#Back-to-the-Essence-Java-컴파일에서-실행까지-1" class="headerlink" title="Back to the Essence - Java 컴파일에서 실행까지 - (1)"></a>Back to the Essence - Java 컴파일에서 실행까지 - (1)</h1><p>Java 11 JVM 스펙을 기준으로 Java 소스 코드가 어떻게 컴파일되고 실행되는지 살짝 깊게 알아보자.</p>
<p>이번엔 1탄 컴파일 편이다. 2탄은 <a href="">여기</a>에..</p>
<h1 id="컴파일"><a href="#컴파일" class="headerlink" title="컴파일"></a>컴파일</h1><p>전통적으로 컴파일이라고 하면 어떤 언어로 된 소스 코드를 기계가 인식할 수 있는 네이티브 코드로 변환하는 과정을 의미하지만, 자바에서의 컴파일은 자바 언어로 된 코드를 JVM이 인식할 수 있는 JVM 명령어 코드(바이트코드)로 변환하는 것을 의미한다.<br>드물지만 자바에서의 컴파일도 일반적인 의미의 컴파일처럼 기계가 인식할 수 있는 코드로 변환하는 과정을 의미할 때도 있다. 대표적으로 JIT 컴파일러가 하는 컴파일은 바이트코드로 변환하는 것이 아니라 바이트코드를 네이티브 코드로 변환하는 것을 의미한다.</p>
<h2 id="실행-파일-생성-과정"><a href="#실행-파일-생성-과정" class="headerlink" title="실행 파일 생성 과정"></a>실행 파일 생성 과정</h2><p>자바 소스 코드를 컴파일하는 과정이 몇 단계로 구성되는지 구체적으로 스펙에 규정되어 있지는 않다. 참고로 C로 작성된 코드로부터 실행 파일을 만드는 과정은 보통 다음과 같이 4 단계로 구분한다.</p>
<ol>
<li>전처리(Pre-processing)<ul>
<li>주석 제거</li>
<li>매크로 인라인화</li>
<li>include 파일 인라인화</li>
</ul>
</li>
<li>컴파일(Compiling)<ul>
<li>컴파일러가 전처리 과정을 거친 C 소스 코드를 컴파일해서 어셈블리어 코드로 변환</li>
</ul>
</li>
<li>어셈블리(Assembly)<ul>
<li>어셈블러가 어셈블리어 코드를 기계어 코드로 변환</li>
</ul>
</li>
<li>링크(Linking)<ul>
<li>링커가 기계어 코드와 공유 라이브러리 등 다른 코드를 합쳐서 최종 실행 파일 생성</li>
</ul>
</li>
</ol>
<p>(참고: <a href="https://www.geeksforgeeks.org/compiling-a-c-program-behind-the-scenes/" target="_blank" rel="noopener">https://www.geeksforgeeks.org/compiling-a-c-program-behind-the-scenes/</a>)</p>
<p>컴파일과 어셈블리 단계를 그냥 컴파일 단계 하나로 합쳐서 보면 다음과 같은 그림으로 쉽게 이해할 수 있다.</p>
<ol>
<li><p>전처리</p>
<p> <img src="https://i.imgur.com/6Gixn4m.png" alt="Imgur"></p>
</li>
<li><p>컴파일</p>
<p> <img src="https://i.imgur.com/XgKJv8x.png" alt="Imgur"></p>
</li>
<li><p>링크</p>
<p> <img src="https://i.imgur.com/bjruQVw.png" alt="Imgur"></p>
</li>
</ol>
<p>(그림 참고: <a href="https://www.sitesbay.com/cprogramming/c-compile-link-program" target="_blank" rel="noopener">https://www.sitesbay.com/cprogramming/c-compile-link-program</a>)</p>
<p>참고로 중요하진 않지만 자바는 전처리 과정에서 주석이 있던 행 자체가 제거되지는 않는다. 바이트코드 내용 중에 자바 소스 코드의 행 번호와 바이트코드 명령어의 위치를 매핑해주는 부분이 있는데 이 때 표시되는 자바 소스 코드 행 번호는 주석이 있던 행이 제거되지 않은 상태 기준의 행 번호가 표시된다.</p>
<p>자바는 컴파일 결과로 나온 바이트코드가 JVM에 의해 실행되면서 네이티브 기계어 코드로 변환되므로, 프로그램 실행 전에 네이티브 기계어 코드를 만들어내는 어셈블리 단계가 없다고 볼 수 있다. 마찬가지로 링크 단계도 프로그램 실행 전에 수행되지 않고 JVM에 의해 프로그램이 실행될 때 동적으로 수행된다.</p>
<p>따라서 자바의 컴파일 절차는 아주 단순하다. 그림조차도 그릴 필요 없고 다음과 같이 표현할 수 있다.</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">자바 소스 코드 파일<span class="function"><span class="params">(.java)</span> -&gt;</span> javac 컴파일러<span class="function"> -&gt;</span> JVM 바이트코드(.class)</span><br></pre></td></tr></table></figure>
<p>앞에서 나온 C 컴파일 과정 그림에서 살펴본 것처럼 컴파일과 어셈블리 과정을 하나로 뭉쳐서 컴파일이라고 하기도 한다. 아래에서 살펴볼 일반적인 컴파일 세부 단계는 컴파일과 어셈블리 과정을 하나로 뭉친 개념이다.</p>
<h2 id="컴파일-세부-단계"><a href="#컴파일-세부-단계" class="headerlink" title="컴파일 세부 단계"></a>컴파일 세부 단계</h2><h3 id="1-Lexical-Analysis-어휘-분석"><a href="#1-Lexical-Analysis-어휘-분석" class="headerlink" title="1. Lexical Analysis(어휘 분석)"></a>1. Lexical Analysis(어휘 분석)</h3><p>Lexical Analyzer(Lexer 또는 Tokenizer라고도 한다)가 소스 코드에서 문자 단위로 읽어서 어휘소(lexeme)를 식별하고 어휘소를 설명하는 토큰 스트림(Token Stream)을 생성한다.</p>
<p>어휘소는 식별가능한 문자 시퀀스인데 다음과 같은 것들을 통칭한다.</p>
<ul>
<li>키워드(keywords): <code>public</code>, <code>class</code>, <code>main</code>, <code>for</code> 등</li>
<li>리터럴(literals): <code>1L</code>, <code>2.3f</code>, <code>&quot;Hello&quot;</code> 등</li>
<li>식별자(identifiers): 변수 이름, 상수 이름, 함수 이름 등</li>
<li>연산자(operators): <code>+</code>, <code>-</code> 등</li>
<li>구분 문자(punctuation characters): <code>,</code>, <code>[]</code>, <code>{}</code>, <code>()</code> 등</li>
</ul>
<p>토큰(Token)은 타입(키워드, 리터럴, 식별자 등)과 값(<code>public</code>, <code>1L</code>, <code>main</code> 등)으로 구성되며 어휘소를 설명하는 객체로 볼 수 있다.</p>
<p>식별자 토큰은 어휘 분석 단계에서 심볼 테이블에 저장되고 이후 단계에서 계속 사용된다.</p>
<h3 id="2-Syntax-Analysis-구문-분석"><a href="#2-Syntax-Analysis-구문-분석" class="headerlink" title="2. Syntax Analysis(구문 분석)"></a>2. Syntax Analysis(구문 분석)</h3><p>Syntax Analyzer(구문 분석기, 파서(Parser)라고도 한다)가 어휘 분석 결과로 나온 토큰 스트림이 언어의 스펙으로 정해진 문법 형식에 맞는지 검사해서, 맞지 않으면 컴파일 에러를 내고, 맞으면 파스 트리(Parse Tree)를 생성한다(구문 분석 단계의 결과로 나오는 파스 트리를 추상 구문 트리(Abstract Syntax Tree)라고 부르는 자료도 있다).</p>
<p>어휘 분석과 구문 분석 과정을 그림으로 요약하면 다음과 같다.</p>
<p><img src="https://i.imgur.com/ynDWnl2.gif" alt="Imgur"></p>
<p>(그림 출처: <a href="https://en.wikipedia.org/wiki/Compiler" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Compiler</a>)</p>
<p>위 그림에서 Parser 아래에 있는 트리가 파스 트리다.</p>
<h3 id="3-Symantic-Analysis-의미-분석"><a href="#3-Symantic-Analysis-의미-분석" class="headerlink" title="3. Symantic Analysis(의미 분석)"></a>3. Symantic Analysis(의미 분석)</h3><p>의미 분석 단계에서는 타입 검사, 자동 타입 변환 등이 수행된다. 예를 들어 다음과 같은 코드는 구문 분석 단계에서는 에러가 나지 않지만, 의미 분석 단계에서는 타입 검사가 수행되면서 에러가 발생한다.</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">int a</span> = <span class="string">"Hello"</span>;</span><br></pre></td></tr></table></figure>
<p>의미 분석 단계를 거치면서 파스 트리에 타입 관련 정보 등이 추가된다.</p>
<h3 id="4-Intermediate-Code-Generation-중간-코드-생성"><a href="#4-Intermediate-Code-Generation-중간-코드-생성" class="headerlink" title="4. Intermediate Code Generation(중간 코드 생성)"></a>4. Intermediate Code Generation(중간 코드 생성)</h3><p>의미 분석 단계를 통과한 파스 트리를 바탕으로 기계어로 변환하기 좋은 형태의 중간 언어로 된 중간 코드를 생성한다. 중간 코드를 만들어 사용하는 이유는 중간 언어가 없을 때의 문제점을 그림으로 보면 금방 이해가 된다.</p>
<p><img src="https://i.imgur.com/wROkyp1.jpg" alt="Imgur"></p>
<p>(그림 출처: <a href="https://www.slideshare.net/RamchandraRegmi/intermediate-code-generationramchandra-regmi" target="_blank" rel="noopener">https://www.slideshare.net/RamchandraRegmi/intermediate-code-generationramchandra-regmi</a>)</p>
<p>한 마디로 중간 단계를 하나 둬서 간접화를 통해 경우의 수를 낮추고 효율을 높이기 위해 중간 코드를 생성한다.</p>
<p>자바의 바이트코드가 바로 이 중간 코드에 해당한다고 볼 수 있다. 위 그림에서 4개의 언어를 나타내는 네모를 각각 자바, 클로저(Clojure), 스칼라, 코틀린이라고 하고, 녹색 네모를 바이트코드라고 생각하면 쉽게 이해할 수 있다.</p>
<p>어휘 분석에서 만들어져서, 구문 분석, 의미 분석 과정을 거치며 다듬어진 심볼 테이블은 중간 코드인 바이트코드 생성 단계에서 클래스나 인터페이스별 <a href="https://docs.oracle.com/javase/specs/jvms/se11/html/jvms-4.html#jvms-4.4" target="_blank" rel="noopener">상수 풀(Constant Pool)</a>을 만드는 데 사용된다. </p>
<p>상수 풀 안에 담겨 있는 대부분의 자료구조는 이름, 설명자(descriptor), 값 등 테이블에 정적으로 저장된 정보를 조합해서 엔티티를 직접 표현하지만, <code>CONSTANT_Dynamic_info</code>, <code>CONSTANT_InvokeDynamic_info</code>로 표현되는 자료구조는 런타임에 정해지는 동적인 엔티티를 간접적으로 표현한다.(참고: <a href="https://docs.oracle.com/javase/specs/jvms/se11/html/jvms-4.html#jvms-4.4.10" target="_blank" rel="noopener">https://docs.oracle.com/javase/specs/jvms/se11/html/jvms-4.html#jvms-4.4.10</a>)</p>
<p>상수 풀에 저장된 정보는 해당 클래스나 인터페이스가 실제 생성될 때 <a href="https://docs.oracle.com/javase/specs/jvms/se11/html/jvms-5.html#jvms-5.1" target="_blank" rel="noopener">런타임 상수 풀(Run-Time Constant Pool)</a>을 구성하는데 사용된다.</p>
<h3 id="5-Code-Optimization-중간-코드-최적화"><a href="#5-Code-Optimization-중간-코드-최적화" class="headerlink" title="5. Code Optimization(중간 코드 최적화)"></a>5. Code Optimization(중간 코드 최적화)</h3><p>말 그대로 중간 코드가 더 효율적인 기계어로 변환되도록 최적화하는 과정이 수행된다. 다음과 같이 매우 다양한 최적화 기법이 사용된다.</p>
<h4 id="핍홀-Peephole-최적화"><a href="#핍홀-Peephole-최적화" class="headerlink" title="핍홀(Peephole) 최적화"></a>핍홀(Peephole) 최적화</h4><ul>
<li>중복 명령어 제거</li>
<li>도달 불가능한 코드 제거</li>
<li>제어 흐름 최적화</li>
<li>비용 낮은 연산자로 변환 등</li>
</ul>
<h4 id="지역-최적화"><a href="#지역-최적화" class="headerlink" title="지역 최적화"></a>지역 최적화</h4><ul>
<li>지역 공통 부분식 제거</li>
<li>복사 전파</li>
<li>상수 폴딩 등</li>
</ul>
<h4 id="루프-최적화"><a href="#루프-최적화" class="headerlink" title="루프 최적화"></a>루프 최적화</h4><ul>
<li>코드 이동</li>
<li>귀납 변수 최적화</li>
<li>루프 융합/교환/전개 등</li>
</ul>
<h4 id="전역-최적화"><a href="#전역-최적화" class="headerlink" title="전역 최적화"></a>전역 최적화</h4><ul>
<li>전역 공통 부분식 제거</li>
<li>상수 폴딩 등</li>
</ul>
<p>이 외에도 다양한 최적화 기법이 사용되는데, 쉽게 감이 오는 루프 최적화의 코드 이동만 확인해보자. 실제로 최적화되는 것은 바이트코드지만 보기 편하게 자바 코드로 표현한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">100000</span> ; i++) &#123;</span><br><span class="line">    c[k] = <span class="number">2</span> * (p - q) * (n - k + <span class="number">1</span>) / (sqrt(n) + n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// i와 관계 없이 값이 고정되어 있는 식을 반복문 밖으로 옮겨서 불필요한 계산 반복을 제거</span></span><br><span class="line"></span><br><span class="line">factor = <span class="number">2</span> * (p - q);</span><br><span class="line">denominator = (sqrt(n) + n);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">100000</span> ; i++) &#123;</span><br><span class="line">    c[k] = factor * (n - k + <span class="number">1</span>) / denominator;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(참고: 컴파일러의 이해 - <a href="http://www.hanbit.co.kr/store/books/look.php?p_code=B4565472056" target="_blank" rel="noopener">http://www.hanbit.co.kr/store/books/look.php?p_code=B4565472056</a>)</p>
<h2 id="컴파일-과정-정리"><a href="#컴파일-과정-정리" class="headerlink" title="컴파일 과정 정리"></a>컴파일 과정 정리</h2><p>자바의 컴파일 과정은 여기까지다. 자바의 컴파일 과정을 한 마디로 요약하면 <strong>자바 코드를 자바 언어 스펙에 따라 분석/검증하고, JVM 스펙의 class 파일 구조에 맞는 바이트코드를 만들어내는 과정</strong> 이라고 할 수 있다.</p>
<p>바이트코드는 로딩, 링크 과정을 거쳐야 하지만 분명히 JVM에서 실행될 수 있는 코드다. 따라서 꼭 자바 언어 스펙을 따르는 자바가 아니라도, JVM 스펙의 class 파일 구조에 맞는 바이트코드를 만들어 낼 수 있다면 어떤 언어든 JVM에서 실행될 수 있다. 클로저(Clojure)나 스칼라, 코틀린 등이 JVM에서 실행될 수 있는 이유가 바로 여기에 있다.</p>
<p>자바 코드의 변수, 상수, 제어문, 연산, 인자, 메서드 호출, 배열, switch문, 예외 처리, finally, synchronization, 애너테이션, 모듈(Java 9 이후) 등이 바이트코드로 어떻게 변환되는지는 <a href="https://docs.oracle.com/javase/specs/jvms/se11/html/jvms-3.html" target="_blank" rel="noopener">JVM 스펙의 3장</a>에 나오는 예시를 통해 확인할 수 있다.</p>
<p>그냥 지나치면 허전하니 간단한 자바 파일과 컴파일 된 바이트코드를 한 번 살펴보자.</p>
<h2 id="바이트코드-구경하기"><a href="#바이트코드-구경하기" class="headerlink" title="바이트코드 구경하기"></a>바이트코드 구경하기</h2><p>그냥 헬로월드는 너무 단순하니까 인터페이스를 사용하는 코드 예제를 살펴보자. main 메서드를 가진 <code>GreetingMain</code> 클래스가 <code>Greeting</code> 인터페이스를 구현하는 <code>KoreanGreeting</code> 클래스를 사용하는 예제다.</p>
<p>먼저 인터페이스인 <code>Greeting</code>부터 살펴보자.</p>
<h3 id="Greeting"><a href="#Greeting" class="headerlink" title="Greeting"></a>Greeting</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> homo.efficio.jvm.sample;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Greeting</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">sayHello</span><span class="params">(String name)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>메서드 하나를 가지고 있는 아주 단순한 인터페이스다. 컴파일 한 후에 다음과 같이 <code>javap</code> 명령으로 바이트코드를 확인할 수 있다. <code>javap</code>는 바이너리인 바이트코드 .class 파일을 텍스트로 보여주는 일종의 역어셈블러 프로그램이다.</p>
<blockquote>
<p>javap -v -l -p homo/efficio/jvm/sample/Greeting.class</p>
</blockquote>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Classfile /C:<span class="meta-keyword">/gitrepo/</span>scratchpad<span class="meta-keyword">/plain-java-scratchpad/</span>out<span class="meta-keyword">/production/</span>classes<span class="meta-keyword">/homo/</span>efficio<span class="meta-keyword">/jvm/</span>sample/Greeting.class</span><br><span class="line">  Last modified <span class="number">2019.</span> <span class="number">1.</span> <span class="number">13.</span>; size <span class="number">181</span> bytes</span><br><span class="line">  MD5 checksum <span class="number">8f</span>7ae541e0a64f511d820930f739d4ac</span><br><span class="line">  Compiled from <span class="string">"Greeting.java"</span></span><br><span class="line">public interface homo.efficio.jvm.sample.Greeting</span><br><span class="line">  minor version: <span class="number">0</span></span><br><span class="line">  major version: <span class="number">53</span></span><br><span class="line"><span class="symbol">  flags:</span> (<span class="number">0x0601</span>) ACC_PUBLIC, ACC_INTERFACE, ACC_ABSTRACT</span><br><span class="line"><span class="symbol">  this_class:</span> <span class="meta">#1                          <span class="comment">// homo/efficio/jvm/sample/Greeting</span></span></span><br><span class="line"><span class="symbol">  super_class:</span> <span class="meta">#2                         <span class="comment">// java/lang/Object</span></span></span><br><span class="line"><span class="symbol">  interfaces:</span> <span class="number">0</span>, fields: <span class="number">0</span>, methods: <span class="number">1</span>, attributes: <span class="number">1</span></span><br><span class="line">Constant pool:</span><br><span class="line">  <span class="meta">#1 = Class              #7              <span class="comment">// homo/efficio/jvm/sample/Greeting</span></span></span><br><span class="line">  <span class="meta">#2 = Class              #8              <span class="comment">// java/lang/Object</span></span></span><br><span class="line">  <span class="meta">#3 = Utf8               sayHello</span></span><br><span class="line">  <span class="meta">#4 = Utf8               (Ljava/lang/String;)Ljava/lang/String;</span></span><br><span class="line">  <span class="meta">#5 = Utf8               SourceFile</span></span><br><span class="line">  <span class="meta">#6 = Utf8               Greeting.java</span></span><br><span class="line">  <span class="meta">#7 = Utf8               homo/efficio/jvm/sample/Greeting</span></span><br><span class="line">  <span class="meta">#8 = Utf8               java/lang/Object</span></span><br><span class="line">&#123;</span><br><span class="line">  public abstract java.lang.String sayHello(java.lang.String);</span><br><span class="line"><span class="symbol">    descriptor:</span> (Ljava<span class="meta-keyword">/lang/</span>String;)Ljava<span class="meta-keyword">/lang/</span>String;</span><br><span class="line"><span class="symbol">    flags:</span> (<span class="number">0x0401</span>) ACC_PUBLIC, ACC_ABSTRACT</span><br><span class="line">&#125;</span><br><span class="line"><span class="symbol">SourceFile:</span> <span class="string">"Greeting.java"</span></span><br></pre></td></tr></table></figure>
<p>인터페이스의 바이트코드는 Classfile, public interface …, Constant pool, { 바이트코드 }, SourceFile 이렇게 크게 5가지 항목으로 구분되어 표시된다.</p>
<p>컴파일과 실행 관점에서 주목해야할 항목은 상수 풀(Constant pool)과 실제 소스 코드로부터 변환된 바이트코드 내용이다. </p>
<p>상수풀에는 <code>Class</code>와 <code>Utf8</code>로 분류되는 값들이 표시되어 있다. 상수 풀에 포함된 정보는 <code>#N</code>의 형식으로 인덱스되어 있다. <code>Class</code>는 말그대로 클래스임을 나타내고 <code>Utf8</code>은 클래스나 메서드 등의 이름을 나타내는 식별자를 UTF-8로 인코딩 된 값으로 나타내고 있다. <code>Class</code>로 분류된 항목의 값은 <code>#7</code> 같이 다른 항목을 가리키는 일종의 참조로 되어 있고, 참조를 통해 가리키는 항목의 값은 주석으로 병기(<code>// homo/efficio/jvm/sample/Greeting</code>)되어 있다.</p>
<p>바이트코드에는 원래 자바 소스에는 없던 <code>abstract</code>라는 키워드가 추가되어 표시되어 있다. sayHello 메서드의 파라미터 정보(<code>(Ljava/lang/String;)</code>) 와 반환 타입 정보(<code>Ljava/lang/String;</code>)가 descriptor 항목에 표시되고, 접근 지정자(<code>ACC_PUBLIC</code>, <code>ACC_ABSTRACT</code>)가 flags 항목에 표시된다. </p>
<p>아주 간단해서 바이트코드의 상수풀과 바이트코드가 어떤 식으로 기술되는지 비교적 쉽게 감을 잡을 수 있다. 너무 간단해서 바이트코드 내용이 별로 없기 때문에, 바이트코드에 대한 설명은 구현 클래스인 <code>KoreanGreeting</code>에서 실제 코드와 함께 다시 살펴볼 것이다.</p>
<h3 id="KoreanGreeting"><a href="#KoreanGreeting" class="headerlink" title="KoreanGreeting"></a>KoreanGreeting</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> homo.efficio.jvm.sample;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KoreanGreeting</span> <span class="keyword">implements</span> <span class="title">Greeting</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String hello = <span class="string">"안녕 "</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getHello() + name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">getHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.hello;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Greeting</code> 인터페이스를 구현하고 있고, <code>hello</code>라는 필드를 하나 가지고 있는 단순한 클래스다. <code>getHello()</code>는 메서드가 2개일 때는 어떻게 표시되는지, 내부 private 메서드 호출은 어떻게 표시되는지 보기 위해 일부러 추가했다.</p>
<blockquote>
<p>javap -v -l -p homo/efficio/jvm/sample/KoreanGreeting.class</p>
</blockquote>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">Classfile /C:/gitrepo/scratchpad/plain<span class="params">-java</span><span class="params">-scratchpad</span>/out/production/classes/homo/efficio/jvm/sample/KoreanGreeting.class</span><br><span class="line">  Last modified <span class="number">2019.</span> <span class="number">1.</span> <span class="number">12.</span>; size <span class="number">1132</span> <span class="built_in">bytes</span></span><br><span class="line">  MD5 checksum d7ac2a6fd38c67407480720ca730d987</span><br><span class="line">  Compiled from <span class="string">"KoreanGreeting.java"</span></span><br><span class="line"><span class="keyword">public</span> class homo.efficio.jvm.sample.KoreanGreeting implements homo.efficio.jvm.sample.Greeting</span><br><span class="line">  minor version: <span class="number">0</span></span><br><span class="line">  major version: <span class="number">53</span></span><br><span class="line">  flags: (<span class="number">0x0021</span>) ACC_PUBLIC, ACC_SUPER</span><br><span class="line">  this_class: #6                          <span class="comment">// homo/efficio/jvm/sample/KoreanGreeting</span></span><br><span class="line">  super_class: #7                         <span class="comment">// java/lang/Object</span></span><br><span class="line">  interfaces: <span class="number">1</span>, fields: <span class="number">1</span>, methods: <span class="number">3</span>, attributes: <span class="number">3</span></span><br><span class="line">Constant pool:</span><br><span class="line">   #1 = Methodref          #7.#25         <span class="comment">// java/lang/Object."&lt;init&gt;":()V</span></span><br><span class="line">   #2 = <span class="built_in">String</span>             #26            <span class="comment">// ▒?▒</span></span><br><span class="line">   #3 = Fieldref           #6.#27         <span class="comment">// homo/efficio/jvm/sample/KoreanGreeting.hello:Ljava/lang/String;</span></span><br><span class="line">   #4 = Methodref          #6.#28         <span class="comment">// homo/efficio/jvm/sample/KoreanGreeting.getHello:()Ljava/lang/String;</span></span><br><span class="line">   #5 = InvokeDynamic      #0:#32         <span class="comment">// #0:makeConcatWithConstants:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;</span></span><br><span class="line">   #6 = Class              #33            <span class="comment">// homo/efficio/jvm/sample/KoreanGreeting</span></span><br><span class="line">   #7 = Class              #34            <span class="comment">// java/lang/Object</span></span><br><span class="line">   #8 = Class              #35            <span class="comment">// homo/efficio/jvm/sample/Greeting</span></span><br><span class="line">   #9 = Utf8               hello</span><br><span class="line">  #10 = Utf8               Ljava/lang/<span class="built_in">String</span>;</span><br><span class="line">  #11 = Utf8               &lt;init&gt;</span><br><span class="line">  #12 = Utf8               ()V</span><br><span class="line">  #13 = Utf8               Code</span><br><span class="line">  #14 = Utf8               LineNumberTable</span><br><span class="line">  #15 = Utf8               LocalVariableTable</span><br><span class="line">  #16 = Utf8               this</span><br><span class="line">  #17 = Utf8               Lhomo/efficio/jvm/sample/KoreanGreeting;</span><br><span class="line">  #18 = Utf8               sayHello</span><br><span class="line">  #19 = Utf8               (Ljava/lang/<span class="built_in">String</span>;)Ljava/lang/<span class="built_in">String</span>;</span><br><span class="line">  #20 = Utf8               name</span><br><span class="line">  #21 = Utf8               getHello</span><br><span class="line">  #22 = Utf8               ()Ljava/lang/<span class="built_in">String</span>;</span><br><span class="line">  #23 = Utf8               SourceFile</span><br><span class="line">  #24 = Utf8               KoreanGreeting.java</span><br><span class="line">  #25 = NameAndType        #11:#12        <span class="comment">// "&lt;init&gt;":()V</span></span><br><span class="line">  #26 = Utf8               ▒?▒</span><br><span class="line">  #27 = NameAndType        #9:#10         <span class="comment">// hello:Ljava/lang/String;</span></span><br><span class="line">  #28 = NameAndType        #21:#22        <span class="comment">// getHello:()Ljava/lang/String;</span></span><br><span class="line">  #29 = Utf8               BootstrapMethods</span><br><span class="line">  #30 = MethodHandle       <span class="number">6</span>:#36          <span class="comment">// REF_invokeStatic java/lang/invoke/StringConcatFactory.makeConcatWithConstants:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/invoke/CallSite;</span></span><br><span class="line">  #31 = <span class="built_in">String</span>             #37            <span class="comment">// \u0001\u0001</span></span><br><span class="line">  #32 = NameAndType        #38:#39        <span class="comment">// makeConcatWithConstants:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;</span></span><br><span class="line">  #33 = Utf8               homo/efficio/jvm/sample/KoreanGreeting</span><br><span class="line">  #34 = Utf8               java/lang/Object</span><br><span class="line">  #35 = Utf8               homo/efficio/jvm/sample/Greeting</span><br><span class="line">  #36 = Methodref          #40.#41        <span class="comment">// java/lang/invoke/StringConcatFactory.makeConcatWithConstants:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/invoke/CallSite;</span></span><br><span class="line">  #37 = Utf8               \u0001\u0001</span><br><span class="line">  #38 = Utf8               makeConcatWithConstants</span><br><span class="line">  #39 = Utf8               (Ljava/lang/<span class="built_in">String</span>;Ljava/lang/<span class="built_in">String</span>;)Ljava/lang/<span class="built_in">String</span>;</span><br><span class="line">  #40 = Class              #42            <span class="comment">// java/lang/invoke/StringConcatFactory</span></span><br><span class="line">  #41 = NameAndType        #38:#46        <span class="comment">// makeConcatWithConstants:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/invoke/CallSite;</span></span><br><span class="line">  #42 = Utf8               java/lang/invoke/StringConcatFactory</span><br><span class="line">  #43 = Class              #48            <span class="comment">// java/lang/invoke/MethodHandles$Lookup</span></span><br><span class="line">  #44 = Utf8               Lookup</span><br><span class="line">  #45 = Utf8               InnerClasses</span><br><span class="line">  #46 = Utf8               (Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/<span class="built_in">String</span>;Ljava/lang/invoke/MethodType;Ljava/lang/<span class="built_in">String</span>;<span class="meta">[</span>Ljava/lang/Object;)Ljava/lang/invoke/CallSite;</span><br><span class="line">  #47 = Class              #49            <span class="comment">// java/lang/invoke/MethodHandles</span></span><br><span class="line">  #48 = Utf8               java/lang/invoke/MethodHandles$Lookup</span><br><span class="line">  #49 = Utf8               java/lang/invoke/MethodHandles</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> java.lang.<span class="built_in">String</span> hello;</span><br><span class="line">    descriptor: Ljava/lang/<span class="built_in">String</span>;</span><br><span class="line">    flags: (<span class="number">0x0002</span>) ACC_PRIVATE</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> homo.efficio.jvm.sample.KoreanGreeting();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      <span class="built_in">stack</span>=<span class="number">2</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial #1                  <span class="comment">// Method java/lang/Object."&lt;init&gt;":()V</span></span><br><span class="line">         <span class="number">4</span>: aload_0</span><br><span class="line">         <span class="number">5</span>: ldc           #2                  <span class="comment">// String ▒?▒</span></span><br><span class="line">         <span class="number">7</span>: putfield      #3                  <span class="comment">// Field hello:Ljava/lang/String;</span></span><br><span class="line">        <span class="number">10</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">3</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">5</span>: <span class="number">4</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">11</span>     <span class="number">0</span>  this   Lhomo/efficio/jvm/sample/KoreanGreeting;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> java.lang.<span class="built_in">String</span> sayHello(java.lang.<span class="built_in">String</span>);</span><br><span class="line">    descriptor: (Ljava/lang/<span class="built_in">String</span>;)Ljava/lang/<span class="built_in">String</span>;</span><br><span class="line">    flags: (<span class="number">0x0001</span>) ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      <span class="built_in">stack</span>=<span class="number">2</span>, locals=<span class="number">2</span>, args_size=<span class="number">2</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial #4                  <span class="comment">// Method getHello:()Ljava/lang/String;</span></span><br><span class="line">         <span class="number">4</span>: aload_1</span><br><span class="line">         <span class="number">5</span>: invokedynamic #5,  <span class="number">0</span>              <span class="comment">// InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;</span></span><br><span class="line">        <span class="number">10</span>: areturn</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">9</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">11</span>     <span class="number">0</span>  this   Lhomo/efficio/jvm/sample/KoreanGreeting;</span><br><span class="line">            <span class="number">0</span>      <span class="number">11</span>     <span class="number">1</span>  name   Ljava/lang/<span class="built_in">String</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> java.lang.<span class="built_in">String</span> getHello();</span><br><span class="line">    descriptor: ()Ljava/lang/<span class="built_in">String</span>;</span><br><span class="line">    flags: (<span class="number">0x0002</span>) ACC_PRIVATE</span><br><span class="line">    Code:</span><br><span class="line">      <span class="built_in">stack</span>=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: getfield      #3                  <span class="comment">// Field hello:Ljava/lang/String;</span></span><br><span class="line">         <span class="number">4</span>: areturn</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">13</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  this   Lhomo/efficio/jvm/sample/KoreanGreeting;</span><br><span class="line">&#125;</span><br><span class="line">SourceFile: <span class="string">"KoreanGreeting.java"</span></span><br><span class="line">InnerClasses:</span><br><span class="line">  <span class="keyword">public</span> static final #44= #43 of #47;    <span class="comment">// Lookup=class java/lang/invoke/MethodHandles$Lookup of class java/lang/invoke/MethodHandles</span></span><br><span class="line">BootstrapMethods:</span><br><span class="line">  <span class="number">0</span>: #30 REF_invokeStatic java/lang/invoke/StringConcatFactory.makeConcatWithConstants:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/<span class="built_in">String</span>;Ljava/lang/invoke/MethodType;Ljava/lang/<span class="built_in">String</span>;<span class="meta">[</span>Ljava/lang/Object;)Ljava/lang/invoke/CallSite;</span><br><span class="line">    Method arguments:</span><br><span class="line">      #31 \u0001\u0001</span><br></pre></td></tr></table></figure>
<p>자바 소스 코드 상으로는 <code>Greeting</code> 인터페이스와 몇 줄 차이 안 나는데 바이트코드의 양은 큰 차이가 난다. 바이트코드를 분석하는 것이 글의 목적이 아니라 컴파일이라는 큰 과정을 살펴보면서 결과물인 바이트코드도 눈으로 구경해보자는 취지이므로 개략적인 생김새와 기본적인 내용만 훑어보자.</p>
<h4 id="상수-풀"><a href="#상수-풀" class="headerlink" title="상수 풀"></a>상수 풀</h4><p>상수 풀에는 <code>Methodref</code>, <code>String</code>, <code>Fieldref</code>, <code>Methodref</code>, <code>InvokeDynamic</code>, <code>NameAndType</code>, <code>MethodHandle</code> 등 새로운 종류의 상수 항목이 나오는데, 이름과 값을 조금 살펴보면 어떻게 사용되는지 대략 감을 잡을 수 있다. 소스 코드 수준에서 정적으로 파악할 수 있는 변수, 상수, 메서드 등의 일람표라고 생각하면 된다.</p>
<p>상수 풀에 저장되는 상수 항목의 종류는 총 17개이며, 자세한 내용은 <a href="https://docs.oracle.com/javase/specs/jvms/se11/html/jvms-4.html#jvms-4.4" target="_blank" rel="noopener">JVM 스펙</a>을 참고한다.</p>
<h4 id="바이트코드"><a href="#바이트코드" class="headerlink" title="바이트코드"></a>바이트코드</h4><p>{} 로 묶여서 표시되는 바이트코드는 대략 다음과 같은 구조로 되어 있다.</p>
<ul>
<li>필드나 메서드 선언부<ul>
<li>descriptor: 필드의 타입이나 메서드의 파라미터 및 반환 타입</li>
<li>flags: 접근 지정자</li>
<li>Code<ul>
<li>stack, locals, args_size: 스택 높이, 로컬 변수 갯수, 인자 갯수<ul>
<li>실제 구현 코드: 코드 위치, 바이트코드 명령어(instruction), 오퍼랜드(operand, 피연산자)</li>
</ul>
</li>
<li>LineNumberTable: 자바 코드의 행 번호와 바이트코드의 위치 매핑 테이블</li>
<li>LocalVariableTable: 로컬 변수 테이블</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>어셈블리어 프로그래밍 경험이 있는 개발자에게는 바이트코드가 그리 낯설지 않을 것이다. 바이트코드의 대부분은 오퍼랜드 스택에 값을 넣고, 빼고, 읽고, 복사하고, 스왑하거나 메서드를 호출하는 내용을 담고 있다.</p>
<p>바이트코드 명령어에 대한 자세한 내용은 <a href="https://docs.oracle.com/javase/specs/jvms/se11/html/jvms-6.html#jvms-6.5" target="_blank" rel="noopener">JVM 스펙</a>을 참고하고 여기에서는 메서드 호출과 관계있는 <code>invoke*</code> 명령어만 짧게 알아보자.</p>
<table>
<thead>
<tr>
<th>명령어 이름</th>
<th>하는 일</th>
</tr>
</thead>
<tbody>
<tr>
<td>invokeinterface</td>
<td>인터페이스에 정의된 메서드 호출</td>
</tr>
<tr>
<td>invokespecial</td>
<td>생성자, 현재 클래스의 메서드, 수퍼클래스의 메서드 호출</td>
</tr>
<tr>
<td>invokestatic</td>
<td>정적 메서드 호출</td>
</tr>
<tr>
<td>invokevirtual</td>
<td>자바 메서드 호출의 기본 방식이며, 객체 참조(<code>obj.</code>)를 붙여서 호출되는 일반적인 메서드 호출</td>
</tr>
<tr>
<td>invokedynamic</td>
<td>JVM에서 실행되는 동적 타입 언어를 위해 Java 7에 추가된 명령어. 람다식도 invokedynamic을 이용해서 구현되었다. 자세한 내용은 <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/vm/multiple-language-support.html" target="_blank" rel="noopener">오라클 문서</a>나 <a href="https://d2.naver.com/helloworld/4911107" target="_blank" rel="noopener">네이버 문서</a> 또는 <a href="https://dzone.com/articles/dismantling-invokedynamic" target="_blank" rel="noopener">DZone 문서</a>를 참고하자.</td>
</tr>
</tbody>
</table>
<p>한 가지 눈여겨 볼 것은 실제 자바 소스 코드에는 없던 디폴트 생성자가 추가되어 있다는 점이다. 컴파일러가 자동으로 추가해준다는 사실을 실제로 확인한 셈이다. 디폴트 생성자는 <a href="https://docs.oracle.com/javase/specs/jls/se11/html/jls-8.html#jls-8.8.9" target="_blank" rel="noopener">자바 언어 스펙</a>을 참고하자.</p>
<h3 id="GreetingMain"><a href="#GreetingMain" class="headerlink" title="GreetingMain"></a>GreetingMain</h3><p><code>Greeting</code> 인터페이스와 이를 구현한 <code>KoreanGreeting</code> 클래스를 사용해서 인사말을 찍는 클래스다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> homo.efficio.jvm.sample;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GreetingMain</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException </span>&#123;</span><br><span class="line"></span><br><span class="line">        KoreanGreeting koreanGreeting = <span class="keyword">new</span> KoreanGreeting();</span><br><span class="line">        System.out.println(koreanGreeting.sayHello(<span class="string">"Homo Efficio"</span>));</span><br><span class="line"></span><br><span class="line">        Greeting greeting = <span class="keyword">new</span> KoreanGreeting();</span><br><span class="line">        System.out.println(greeting.sayHello(<span class="string">"Homo Efficio"</span>));</span><br><span class="line"></span><br><span class="line">        sayHelloFromDynamicallyLoadedClass(args[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sayHelloFromDynamicallyLoadedClass</span><span class="params">(String arg)</span> <span class="keyword">throws</span> ClassNotFoundException, InstantiationException, IllegalAccessException, InvocationTargetException, NoSuchMethodException </span>&#123;</span><br><span class="line">        ClassLoader classLoader = GreetingMain.class.getClassLoader();</span><br><span class="line">        Class&lt;?&gt; aClass = classLoader.loadClass(arg);</span><br><span class="line">        <span class="keyword">if</span> (Greeting.class.isAssignableFrom(aClass)) &#123;</span><br><span class="line">            Greeting aGreeting = (Greeting) aClass.getDeclaredConstructor().newInstance();</span><br><span class="line">            System.out.println(aGreeting.sayHello(<span class="string">"Homo Efficio"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>바이트코드 대략적인 구조 설명은 앞에서 했으므로 여기에서는 인터페이스를 통한 자바의 다형성이 발현되는 지점을 알 수 있는 부분만 살펴보자. 나머지 내용이 궁금하다면 <a href="https://github.com/HomoEfficio/plain-java-scratchpad/tree/master/src/main/java/homo/efficio/jvm/sample" target="_blank" rel="noopener">https://github.com/HomoEfficio/plain-java-scratchpad/tree/master/src/main/java/homo/efficio/jvm/sample</a> 를 참고한다.</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Constant pool:</span><br><span class="line">    <span class="params">...</span></span><br><span class="line">    #8 = InterfaceMethodref #16.#65       <span class="comment">// homo/efficio/jvm/sample/Greeting.sayHello:(Ljava/lang/String;)Ljava/lang/String;</span></span><br><span class="line">    <span class="params">...</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> static <span class="literal">void</span> main(java.lang.<span class="built_in">String</span><span class="meta">[</span><span class="meta">]</span>) throws java.lang.ClassNotFoundException, java.lang.NoSuchMethodException, java.lang.IllegalAccessException, java.lang.reflect.InvocationTargetException, java.lang.InstantiationException;</span><br><span class="line">    descriptor: (<span class="meta">[</span>Ljava/lang/<span class="built_in">String</span>;)V</span><br><span class="line">    flags: (<span class="number">0x0009</span>) ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      <span class="built_in">stack</span>=<span class="number">3</span>, locals=<span class="number">4</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: <span class="literal">new</span>           #2                  <span class="comment">// class homo/efficio/jvm/sample/KoreanGreeting</span></span><br><span class="line">         <span class="number">3</span>: dup</span><br><span class="line">         <span class="number">4</span>: invokespecial #3                  <span class="comment">// Method homo/efficio/jvm/sample/KoreanGreeting."&lt;init&gt;":()V</span></span><br><span class="line">         <span class="number">7</span>: astore_1</span><br><span class="line">         <span class="number">8</span>: getstatic     #4                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">        <span class="number">11</span>: aload_1</span><br><span class="line">        <span class="number">12</span>: ldc           #5                  <span class="comment">// String Homo Efficio</span></span><br><span class="line">        <span class="number">14</span>: invokevirtual #6                  <span class="comment">// Method homo/efficio/jvm/sample/KoreanGreeting.sayHello:(Ljava/lang/String;)Ljava/lang/String;</span></span><br><span class="line">        <span class="number">17</span>: invokevirtual #7                  <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">        <span class="number">20</span>: <span class="literal">new</span>           #2                  <span class="comment">// class homo/efficio/jvm/sample/KoreanGreeting</span></span><br><span class="line">        <span class="number">23</span>: dup</span><br><span class="line">        <span class="number">24</span>: invokespecial #3                  <span class="comment">// Method homo/efficio/jvm/sample/KoreanGreeting."&lt;init&gt;":()V</span></span><br><span class="line">        <span class="number">27</span>: astore_2</span><br><span class="line">        <span class="number">28</span>: getstatic     #4                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">        <span class="number">31</span>: aload_2</span><br><span class="line">        <span class="number">32</span>: ldc           #5                  <span class="comment">// String Homo Efficio</span></span><br><span class="line">        <span class="number">34</span>: invokeinterface #8,  <span class="number">2</span>            <span class="comment">// InterfaceMethod homo/efficio/jvm/sample/Greeting.sayHello:(Ljava/lang/String;)Ljava/lang/String;</span></span><br><span class="line">        <span class="number">39</span>: invokevirtual #7                  <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">        <span class="params">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>상수 풀의 8번쨰 항목에 <code>InterfaceMethodref</code>라는 항목으로 <code>Greeting</code> 인터페이스의 sayHello 메서드가 등록되어 있다.</p>
<p>자바 소스코드에서 아래와 같이 인터페이스를 사용하지 않는 부분은</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">KoreanGreeting koreanGreeting = <span class="keyword">new</span> KoreanGreeting();</span><br><span class="line">System.out.println(koreanGreeting.sayHello(<span class="string">"Homo Efficio"</span>));</span><br></pre></td></tr></table></figure>
<p>다음과 같이 <code>invokevirtual</code>이 사용되고,</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">12</span>: ldc           <span class="number">#5</span>                  <span class="comment">// String Homo Efficio</span></span><br><span class="line"><span class="number">14</span>: invokevirtual <span class="number">#6</span>                  <span class="comment">// Method homo/efficio/jvm/sample/KoreanGreeting.sayHello:(Ljava/lang/String;)Ljava/lang/String;</span></span><br><span class="line"><span class="number">17</span>: invokevirtual <span class="number">#7</span>                  <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br></pre></td></tr></table></figure>
<p>인터페이스를 사용하는 아래 코드는</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Greeting greeting = <span class="keyword">new</span> KoreanGreeting();</span><br><span class="line">System.out.println(greeting.sayHello(<span class="string">"Homo Efficio"</span>));</span><br></pre></td></tr></table></figure>
<p>다음과 같이 <code>invokeinterface</code>가 사용됨을 확인할 수 있다.</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">32</span>: ldc           <span class="number">#5</span>                  <span class="comment">// String Homo Efficio</span></span><br><span class="line"><span class="number">34</span>: invokeinterface <span class="number">#8</span>,  <span class="number">2</span>            <span class="comment">// InterfaceMethod homo/efficio/jvm/sample/Greeting.sayHello:(Ljava/lang/String;)Ljava/lang/String;</span></span><br><span class="line"><span class="number">39</span>: invokevirtual <span class="number">#7</span>                  <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br></pre></td></tr></table></figure>
<p>이 글은 컴파일 과정을 훑어보는 게 목적이었으므로 바이트코드 구경은 여기서 줄인다. 바이트코드에 대한 내용은 더 궁금하다면 알고 싶은 부분을 직접 코딩/컴파일하고 <code>javap</code>와 JVM 스펙으로 확인해보는 것이 가장 좋고, <a href="">2탄</a>을 참고해도 좋다.</p>
<h1 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h1><p>여기까지 자바 소스 코드가 바이트코드로 어떻게 컴파일되는지 알아봤다. 짧게 정리해보면 다음과 같다.</p>
<blockquote>
<p>자바도 전처리, 컴파일, 링크 과정을 통해 최종 실행 파일이 만들어진다.</p>
<p>컴파일의 세부 단계는 어휘 분석, 구문 분석, 의미 분석, 중간 코드 생성, 중간 코드 최적화로 구성된다.  </p>
<p><strong>자바 컴파일은 자바 코드를 자바 언어 스펙에 따라 분석/검증하고, JVM 스펙의 class 파일 구조에 맞는 바이트코드를 만들어내는 과정</strong>이다.</p>
<p>자바 소스 코드를 컴파일한 결과로 나오는 class 파일은 크게 보면 <strong>클래스 메타 정보, 상수 풀, 코드 구현부(JVM 명령어+오퍼랜드)로 구성</strong>된다.</p>
<p><strong>소스 코드에서 정적으로 파악할 수 있는 변수, 상수, 메서드 등의 정보가 클래스 파일 단위의 상수 풀(Constant Pool)에 저장</strong>되고,<br><strong>연산, 제어, 메서드 호출 등은 JVM 명령어와 상수 풀에 저장된 항목을 오퍼랜드로 사용하는 바이트코드로 변환되어 코드 구현부에 저장</strong>된다.</p>
<p><code>javap</code> 명령으로 바이너리 바이트코드를 눈으로 읽을 수 있는 텍스트로 역어셈블해서 확인할 수 있다.</p>
</blockquote>

        
        
            
        
        <hr/>
        <div>
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="크리에이티브 커먼즈 라이선스" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><a href='https://github.com/homoefficio' target='_blank'>HomoEfficio</a>가 작성한 이 저작물은(는) <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">크리에이티브 커먼즈 저작자표시-비영리-동일조건변경허락 4.0 국제 라이선스</a>에 따라 이용할 수 있습니다.
        </div>
    </div>
    <div class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Bytecode/">Bytecode</a> <a class="tag tag--primary tag--small t-link" href="/tags/Code-Optimization/">Code Optimization</a> <a class="tag tag--primary tag--small t-link" href="/tags/Compile/">Compile</a> <a class="tag tag--primary tag--small t-link" href="/tags/Constant-Pool/">Constant Pool</a> <a class="tag tag--primary tag--small t-link" href="/tags/Intermediate-Code-Generation/">Intermediate Code Generation</a> <a class="tag tag--primary tag--small t-link" href="/tags/JVM/">JVM</a> <a class="tag tag--primary tag--small t-link" href="/tags/JVM-Spec/">JVM Spec</a> <a class="tag tag--primary tag--small t-link" href="/tags/JVM-명세/">JVM 명세</a> <a class="tag tag--primary tag--small t-link" href="/tags/JVM-스펙/">JVM 스펙</a> <a class="tag tag--primary tag--small t-link" href="/tags/Java/">Java</a> <a class="tag tag--primary tag--small t-link" href="/tags/Lexical-Analysis/">Lexical Analysis</a> <a class="tag tag--primary tag--small t-link" href="/tags/Symantic-Analysis/">Symantic Analysis</a> <a class="tag tag--primary tag--small t-link" href="/tags/Syntax-Analysis/">Syntax Analysis</a> <a class="tag tag--primary tag--small t-link" href="/tags/invokeinterface/">invokeinterface</a> <a class="tag tag--primary tag--small t-link" href="/tags/invokevirtual/">invokevirtual</a> <a class="tag tag--primary tag--small t-link" href="/tags/구문-분석/">구문 분석</a> <a class="tag tag--primary tag--small t-link" href="/tags/바이트코드/">바이트코드</a> <a class="tag tag--primary tag--small t-link" href="/tags/상수-풀/">상수 풀</a> <a class="tag tag--primary tag--small t-link" href="/tags/어휘-분석/">어휘 분석</a> <a class="tag tag--primary tag--small t-link" href="/tags/의미-분석/">의미 분석</a> <a class="tag tag--primary tag--small t-link" href="/tags/자바/">자바</a> <a class="tag tag--primary tag--small t-link" href="/tags/중간-코드-생성/">중간 코드 생성</a> <a class="tag tag--primary tag--small t-link" href="/tags/컴파일/">컴파일</a> <a class="tag tag--primary tag--small t-link" href="/tags/코드-최적화/">코드 최적화</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/12/11/탈중앙화된-암호화폐는-죽었다/" data-tooltip="탈중앙화된 암호화폐는 죽었다">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>
        
            <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 HomoEfficio. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="1">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/12/11/탈중앙화된-암호화폐는-죽었다/" data-tooltip="탈중앙화된 암호화폐는 죽었다">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>
                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="1">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/">
                <i class="fa fa-google-plus"></i><span class="">Share on Google Plus</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/">
                <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://homoefficio.github.io/2019/01/31/Back-to-the-Essence-Java-컴파일에서-실행까지-1/">
                <i class="fa fa-twitter"></i><span>Share on Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        <div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/30f0244ab86396288cdb62c3591c0c30?s=110"/>
        
            <h4 id="about-card-name">HomoEfficio</h4>
        
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Seoul, Korea.
            </h5>
        
    </div>
</div>
        <div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/script.min.js"></script>
<!--SCRIPTS END-->

    <script type="text/javascript">
        var disqus_shortname = 'hanmomhanda';
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>



</html>
