<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ë’¤íƒœì§€ì¡´ì˜ ë„ì ê±°ë¦¼</title>
  
  <subtitle>ê°œë°œ</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://homoefficio.github.io/"/>
  <updated>2020-12-03T08:32:56.308Z</updated>
  <id>http://homoefficio.github.io/</id>
  
  <author>
    <name>HomoEfficio</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Constants vs Util</title>
    <link href="http://homoefficio.github.io/2020/12/03/Constants-vs-Util/"/>
    <id>http://homoefficio.github.io/2020/12/03/Constants-vs-Util/</id>
    <published>2020-12-03T08:08:09.000Z</published>
    <updated>2020-12-03T08:32:56.308Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Constants-vs-Util"><a href="#Constants-vs-Util" class="headerlink" title="Constants vs Util"></a>Constants vs Util</h1><p>ì˜¤ëŠ˜ ì¼í•˜ë‹¤ ì˜ê²¬ì„ ë‚˜ëˆ„ê²Œ ëœ Constantsì™€ Util ì–˜ê¸°</p><p>ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ëŠ” ì„œë²„ IPë¥¼ ê°€ì ¸ì™€ì„œ ë¡œê·¸ì— ë‚¨ê¸¸ ì¼ì´ ìˆë‹¤.</p><p>ì´ìœ ëŠ” ëª¨ë¥´ê² ì§€ë§Œ <code>InetAddress.getLocalHost().getHostAddress()</code>ë¡œ ì°ìœ¼ë©´ 127.0.0.1 ì´ ì¶œë ¥ë¼ì„œ ë‹¤ë¥¸ ë°©ë²•ì„ ì°¾ì•„ë³´ë‹ˆ ì•„ë˜ì™€ ê°™ì´ <code>NetworkInterface</code> ë¼ëŠ” ë†ˆì„ ì¨ì„œ êµ¬í•  ìˆ˜ ìˆì—ˆë‹¤.</p><p>ë¡œì§ì´ ë³µì¡í•´ ë³´ì´ê¸´ í•˜ì§€ë§Œ ì–´ì¨Œë“  ì„œë²„ IPë¼ëŠ” ìƒìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë¡œì§ì´ë¼ ì•„ë˜ì™€ ê°™ì´ Constants í´ë˜ìŠ¤ì— private static ë©”ì„œë“œë¡œ ë„£ì—ˆëŠ”ë°,</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Constants</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ë‹¤ë¥¸ ìƒìˆ˜ 2ê°œ ìˆìŒ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SERVER_IP = getServerIp();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">getServerIp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Enumeration&lt;NetworkInterface&gt; enis = NetworkInterface.getNetworkInterfaces();</span><br><span class="line">            List&lt;NetworkInterface&gt; nis = Collections.list(enis);</span><br><span class="line">            <span class="keyword">for</span> (NetworkInterface ni : nis) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ni.isUp() &amp;&amp; !ni.isLoopback() &amp;&amp; ni.getHardwareAddress() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    List&lt;InterfaceAddress&gt; addresses = ni.getInterfaceAddresses();</span><br><span class="line">                    <span class="keyword">for</span> (InterfaceAddress address : addresses) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (!StringUtils.isEmpty(address.toString())) &#123;</span><br><span class="line">                            <span class="keyword">return</span> address.getAddress().getHostAddress();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">            <span class="comment">// ì—†ìœ¼ë©´ ê³µë°± ë°˜í™˜ ì²˜ë¦¬</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ë™ë£Œê°€ Constants ì—ëŠ” ë©”ì„œë“œê°€ ìˆìœ¼ë©´ Constants í´ë˜ìŠ¤ ì„±ê²©ì— ì•ˆ ë§ëŠ”ë‹¤ë©° <code>getServerIp()</code>ë¥¼ ì™¸ë¶€ Util í´ë˜ìŠ¤ë¡œ ë¹¼ìê³  í•œë‹¤.</p><p>ì—‰? ì•„ë‹ˆ Constants í´ë˜ìŠ¤ì— ë©”ì„œë“œê°€ ìˆìœ¼ë©´ ì•ˆ ë˜ëŠ” ê±´ê°€? ë‹¤ë¥¸ ë©”ì„œë“œë„ ì•„ë‹ˆê³  ìƒìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” private static ë©”ì„œë“œì¸ë°?</p><p>ë‚˜ëŠ” ì´ ë©”ì„œë“œëŠ” ë¶„ëª…íˆ SERVER_IP ë¼ëŠ” ìƒìˆ˜ë¥¼ êµ¬í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ê³  ìˆê³ , ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•  í•„ìš”ê°€ ì—†ìœ¼ë¯€ë¡œ ì™¸ë¶€ë¡œ ëº„ ê²Œ ì•„ë‹ˆë¼ private static ìœ¼ë¡œ Constants ì— ë‘ëŠ” ê²Œ ì ì ˆí•˜ë‹¤ê³  ë´¤ë‹¤. ì´ê²Œ ì •ë³´ì™€ ë¡œì§ì„ í•¨ê»˜ ëª¨ì•„ ë„£ìëŠ” ìº¡ìŠí™”ì˜ ì›ë¦¬ì— ë¶€í•©í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p><p>ë¬¼ë¡  ìƒìˆ˜ê°€ ë§ì•„ì§€ë©´ ìƒí™©ì— ë§ê²Œ í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•´ì„œ ë¹„ëŒ€í™”ë¥¼ ë§‰ì•„ì•¼ê² ì§€ë§Œ, ì§€ê¸ˆì€ ë¹„ëŒ€í™”ì™€ëŠ” ê±°ë¦¬ê°€ ë©€ì–´ ë³´ì´ê³ , ë¶„ë¦¬í•œë‹¤ê³  í•´ë„ ë©”ì„œë“œì˜ ì¡´ì¬ ì—¬ë¶€ê°€ ë¶„ë¦¬ì˜ ê¸°ì¤€ì¼ ë¦¬ëŠ” ì—†ë‹¤ê³  ìƒê°í•œë‹¤.</p><p>í•˜ì§€ë§Œ ë™ë£ŒëŠ” Constants ë¼ëŠ” ì´ë¦„ì˜ í´ë˜ìŠ¤ëŠ” í†µìƒì ìœ¼ë¡œ ìƒìˆ˜ë§Œ ëª¨ì•„ ë†“ëŠ” ëª©ì ìœ¼ë¡œ ë§Œë“œëŠ” ê±°ë¼, ì´ í´ë˜ìŠ¤ì— ë©”ì„œë“œë¥¼ ë„£ìœ¼ë©´ ê·¸ ëª©ì ì„ ìƒëŠ”ë‹¤ê³  í•œë‹¤. ë‹¤ë¥¸ ë™ë£Œë„ ì´ ë©”ì„œë“œëŠ” Util í´ë˜ìŠ¤ë¡œ ë¹¼ëŠ” ê²Œ ì¢‹ë‹¤ê³  í•œë‹¤.</p><p>ì•„ ê·¸ë˜? ë©”ì„œë“œë¥¼ ì“°ë©´ ì•ˆ ë˜ëŠ” ê±´ê°€? í•˜ê³  ë‹¤ìŒê³¼ ê°™ì´ ë³µì¡í•´ë³´ì´ì§€ë§Œ ë©”ì„œë“œ í˜¸ì¶œì´ ì•„ë‹Œ ë‹¨ìˆœ í• ë‹¹ì‹ìœ¼ë¡œ ë°”ê¿”ì„œ ë°˜ì‘ì„ ì‚´í´ë´¤ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SERVER_IP = ((Supplier&lt;String&gt;) () -&gt; &#123;</span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         Enumeration&lt;NetworkInterface&gt; enis = NetworkInterface.getNetworkInterfaces();</span><br><span class="line">         List&lt;NetworkInterface&gt; nis = Collections.list(enis);</span><br><span class="line">         <span class="keyword">for</span> (NetworkInterface ni : nis) &#123;</span><br><span class="line">             <span class="keyword">if</span> (ni.isUp() &amp;&amp; !ni.isLoopback() &amp;&amp; ni.getHardwareAddress() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                 List&lt;InterfaceAddress&gt; addresses = ni.getInterfaceAddresses();</span><br><span class="line">                 <span class="keyword">for</span> (InterfaceAddress address : addresses) &#123;</span><br><span class="line">                     <span class="keyword">if</span> (!StringUtils.isEmpty(address.toString())) &#123;</span><br><span class="line">                         <span class="keyword">return</span> address.getAddress().getHostAddress();</span><br><span class="line">                     &#125;</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">         <span class="comment">// ì—†ìœ¼ë©´ ê³µë°± ë°˜í™˜ ì²˜ë¦¬</span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line"> &#125;).get();</span><br></pre></td></tr></table></figure><p>ì˜ˆìƒí•œëŒ€ë¡œ ì—¬ì „íˆ ë³µì¡í•œ ë¡œì§ì´ ìˆìœ¼ë‹ˆ ì™¸ë¶€ Util ë¡œ ë¹¼ëŠ” ê²Œ ì¢‹ë‹¤ê³  í•œë‹¤.</p><p>ê·¸ëŸ¬ë‹ˆê¹Œ ê²°êµ­ ë©”ì„œë“œë¼ëŠ” í˜•ì‹ì´ ë¬¸ì œê°€ ì•„ë‹ˆë¼ ìƒìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë¡œì§ì´ ë³µì¡í•˜ë‹¤ë©´ ì™¸ë¶€ë¡œ ë¹¼ì•¼í•œë‹¤ëŠ” ì–˜ê¸°ì˜€ë˜ ê±°ë‹¤. ìš”ëŠ” <strong>Constants í´ë˜ìŠ¤ì—ëŠ” ë³µì¡í•œ ë¡œì§ì„ ë‘ì§€ ë§ê³  ì˜¤ì§ ê°„ë‹¨í•˜ê³  ë‹¨ìˆœí•œ ìƒìˆ˜ë§Œ ë„£ìëŠ” ì–˜ê¸°ë‹¤.</strong></p><p>ì •ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><blockquote><p>SERVER_IPë¼ëŠ” ë˜‘ê°™ì€ ìƒìˆ˜ì¼ì§€ë¼ë„ ê·¸ ê°’ì„ êµ¬í•˜ëŠ” ë°,</p><ul><li>ë¡œì§ì´ ë™ì›ëœë‹¤ë©´ <code>Constants.SERVER_IP</code>ë¡œ í•˜ì§€ ë§ê³ , <code>ServerUtil.SERVER_IP</code> ë¡œ í•´ì•¼ ë˜ê³ ,  </li><li>ë¡œì§ì´ ë™ì›ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ <code>ServerUtil.SERVER_IP</code>ë¡œ í•˜ì§€ ë§ê³ , <code>Constants.SERVER_IP</code>ë¡œ í•´ì•¼ ëœë‹¤ëŠ” ì–˜ê¸°</li></ul></blockquote><p>Util ì´ë‚˜ Constants ë‚˜ ì—ì–´ì¹˜ë‚˜ ë©”ì¹˜ë‚˜ ì¢Œì¸¡ ê¶ë…ì´ë‚˜ ìš°ì¸¡ ë°©ë…ì´ë‚˜ ê·¸ê²Œ ê·¸ê±° ê°™ê¸´ í•˜ì§€ë§Œ,<br>ì„¤ê³„ë¼ëŠ” ê²Œ ì›ë˜ ì±…ì„, ì—­í• , ì´ë¦„ ì´ëŸ° ê±° ê³ ë¯¼í•˜ëŠ” ê±°ë‹ˆê»˜, íƒ­ì´ë‚˜ ìŠ¤í˜ì´ìŠ¤ ë³´ë‹¤ëŠ” ìœ ìµí•œ ì–˜ê¸° ì•„ë‹ê¹Œ?<br>(í—‰ ì‹¤ìˆ˜ë‹¤ ê°íˆ ì‹ ì„±í•œ íƒ­/ìŠ¤í˜ì´ìŠ¤ë¥¼ ìš´ìš´í•˜ë‹¤ë‹ˆ..=3=3)<br>ì—¬ëŸ¬ë¶„ì˜ ìƒê°ì€?</p><p>ì°¸ê³ ë¡œ ì‹¤ë¬´ì ìœ¼ë¡œëŠ” ë‹¤ë¥¸ ë™ë£Œì˜ ì˜ê²¬ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì´ ê¹”ìŒˆí•˜ê²Œ ë§ˆë¬´ë¦¬ëë‹¤!</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SERVER_IP = System.getProperty(<span class="string">"java.rmi.server.hostname"</span>, <span class="string">""</span>);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Constants-vs-Util&quot;&gt;&lt;a href=&quot;#Constants-vs-Util&quot; class=&quot;headerlink&quot; title=&quot;Constants vs Util&quot;&gt;&lt;/a&gt;Constants vs Util&lt;/h1&gt;&lt;p&gt;ì˜¤ëŠ˜ ì¼í•˜ë‹¤ ì˜ê²¬ì„
      
    
    </summary>
    
      <category term="Design" scheme="http://homoefficio.github.io/categories/Design/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="Constants" scheme="http://homoefficio.github.io/tags/Constants/"/>
    
      <category term="Util" scheme="http://homoefficio.github.io/tags/Util/"/>
    
      <category term="Design" scheme="http://homoefficio.github.io/tags/Design/"/>
    
  </entry>
  
  <entry>
    <title>Back to the Essence - Java-Servers - (2)</title>
    <link href="http://homoefficio.github.io/2020/11/02/Back-to-the-Essence-Java-Servers-2/"/>
    <id>http://homoefficio.github.io/2020/11/02/Back-to-the-Essence-Java-Servers-2/</id>
    <published>2020-11-01T16:55:14.000Z</published>
    <updated>2020-12-03T08:23:18.874Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Back-to-the-Essence-Java-Servers-2í¸"><a href="#Back-to-the-Essence-Java-Servers-2í¸" class="headerlink" title="Back to the Essence - Java Servers - 2í¸"></a>Back to the Essence - Java Servers - 2í¸</h1><p><a href="https://homoefficio.github.io/2020/11/02/Back-to-the-Essence-Java-Servers-1/">1í¸</a>ì—ì„œ ë¸”ë¡œí‚¹ ë°©ì‹ì˜ ì‹±ê¸€ ìŠ¤ë ˆë“œ ì†Œì¼“ ì„œë²„ë¥¼ ë§Œë“¤ì–´ë´¤ê³  ë‹¤ìŒì˜ ë¬¸ì œê°€ ìˆìŒì„ ë°œê²¬í–ˆë‹¤.</p><blockquote><ul><li>ë¸”ë¡œí‚¹ ë°©ì‹ì˜ ì‹±ê¸€ ìŠ¤ë ˆë“œ ì†Œì¼“ ì„œë²„ëŠ” ì‹œê°„ ë„ëŠ” ì´ìƒí•œ í´ë¼ì´ì–¸íŠ¸ê°€ í•˜ë‚˜ë§Œ ë“¤ì–´ì™€ë„ ì„œë²„ê°€ ë¨¹í†µì´ ë˜ê³ , ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ê¹Œì§€ ë¨¹í†µë  ìˆ˜ ìˆë‹¤.</li></ul></blockquote><p>ì´ì œ ì‹œê°„ ë„ëŠ” ì´ìƒí•œ í´ë¼ì´ì–¸íŠ¸ê°€ ë“¤ì–´ì˜¤ë”ë¼ë„ ì„œë²„ë‚˜ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ê°€ ë¨¹í†µì´ ë˜ì§€ ì•Šë„ë¡ ê°œì„ í•´ì•¼ í•œë‹¤.</p><p>ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ë§ˆë‹¤ ë³„ê°œì˜ ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬í•˜ê²Œ í•˜ëŠ” ê²ƒì´ë‹¤. ê°€ì¥ ë„ë¦¬ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë©° ì„œë¸”ë¦¿ë„ ì´ ë°©ì‹ì— ê¸°ë°˜ì„ ë‘ê³  ìˆê³ , ì„œë¸”ë¦¿ì— ê¸°ë°˜ì„ ë‘” Spring MVCë„ ì´ ë°©ì‹ì´ë‹¤.</p><h1 id="Classic-IO-BIO-Multi-Thread-ServerSocket"><a href="#Classic-IO-BIO-Multi-Thread-ServerSocket" class="headerlink" title="Classic IO(BIO) - Multi Thread ServerSocket"></a>Classic IO(BIO) - Multi Thread ServerSocket</h1><p>ì„œë²„ì—ì„œ ë©€í‹° ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•œë‹¤ë©´ í¬ê²Œ ë‘ ê°€ì§€ ì „ëµì´ ë– ì˜¤ë¥¸ë‹¤.</p><ol><li>ë©€í‹° ìŠ¤ë ˆë“œë¡œ <code>ServerSocket</code>ì„ ì—¬ëŸ¬ ê°œ ë„ìš°ê³ , ì´ ìŠ¤ë ˆë“œë¥¼ ìš”ì²­ ì²˜ë¦¬ ì™„ë£Œë•Œê¹Œì§€ ì‚¬ìš©í•œë‹¤.</li><li><code>ServerSocket</code>ì€ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë¡œ í•˜ë˜, <code>ServerSocket.accept()</code>ë¡œ ë°›ì•„ì˜¨ ì—¬ëŸ¬ ì†Œì¼“ë“¤ì„ ì—¬ëŸ¬ ê°œì˜ ìŠ¤ë ˆë“œë¡œ ì²˜ë¦¬í•œë‹¤.</li></ol><p>ì¼ë‹¨ 1ë²ˆì€ ë¶ˆê°€ë‹¤. ì•„ë˜ì™€ ê°™ì€ ì½”ë“œëŠ” ë‘ ë²ˆì§¸ <code>ServerSocket</code> ìƒì„± ì‹œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ServerSocket serverSocket1 = <span class="keyword">new</span> ServerSocket(Constants.SERVER_PORT);</span><br><span class="line">ServerSocket serverSocket2 = <span class="keyword">new</span> ServerSocket(Constants.SERVER_PORT);</span><br></pre></td></tr></table></figure><p>ë‹¤ìŒê³¼ ê°™ì´ <code>BindException</code>ì´ ë°œìƒí•œë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.net.BindException: Address already in use</span><br></pre></td></tr></table></figure><p>ë”°ë¼ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì „ëµì€ 2ë²ˆ ë¿ì´ë‹¤.</p><p><code>ServerSocket</code>ì„ ì‚¬ìš©í•´ì„œ ì„œë²„ ë°ëª¬ì„ ë§Œë“¤ê³ , <code>accept()</code>ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²° ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ëŠ” ê²ƒê¹Œì§€ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œ ì„œë²„ì™€ ë™ì¼í•˜ë‹¤. ë‹¤ë§Œ ë“¤ì–´ì˜¨ ì—°ê²° ìš”ì²­ì˜ ì²˜ë¦¬ë¥¼ ìš”ì²­ ë§ˆë‹¤ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ ë‹´ë‹¹í•œë‹¤ëŠ” ê²ƒë§Œ ë‹¤ë¥´ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoSocketServerMultiThread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        EchoSocketServerMultiThread echoSocketServerMultiThread = <span class="keyword">new</span> EchoSocketServerMultiThread();</span><br><span class="line">        echoSocketServerMultiThread.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 50ê°œì§œë¦¬ ìŠ¤ë ˆë“œ í’€</span></span><br><span class="line">        ExecutorService es = Utils.getCommonExecutorService(<span class="number">50</span>);</span><br><span class="line">        <span class="keyword">try</span> (ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(Constants.SERVER_PORT);</span><br><span class="line">             FileOutputStream fos = Utils.getCommonFileOutputStream()</span><br><span class="line">        ) &#123;</span><br><span class="line">            Utils.serverTimeStamp(<span class="string">"==============================="</span>, fos);</span><br><span class="line">            Utils.serverTimeStamp(<span class="string">"Multi Thread Socket Echo Server ì‹œì‘"</span>, fos);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                Utils.serverTimeStamp(<span class="string">"---------------------------"</span>, fos);</span><br><span class="line">                Utils.serverTimeStamp(<span class="string">"Echo Server ëŒ€ê¸° ì¤‘"</span>, fos);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// accept() ëŠ” ì—°ê²° ìš”ì²­ì´ ì˜¬ ë•Œê¹Œì§€ return í•˜ì§€ ì•Šê³  blocking</span></span><br><span class="line">                Socket acceptedSocket = serverSocket.accept();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ì—°ê²° ìš”ì²­ì´ ì˜¤ë©´ ìƒˆ thread ì—ì„œ ìš”ì²­ ì²˜ë¦¬ ë¡œì§ ìˆ˜í–‰</span></span><br><span class="line">                es.execute(() -&gt; &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Utils.serverTimeStamp(<span class="string">"Client ì ‘ì†!!!"</span>, fos);</span><br><span class="line">                        Utils.serverTimeStamp(<span class="string">"Echo ì‹œì‘"</span>, fos);</span><br><span class="line"><span class="comment">//                    Utils.sleep(500L);</span></span><br><span class="line">                        EchoProcessor.echo(acceptedSocket);</span><br><span class="line">                        Utils.serverTimeStamp(<span class="string">"Echo ì™„ë£Œ"</span>, fos);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Executors</code>ë¥¼ ì´ìš©í•´ì„œ ë‹¨ìˆœí•œ ê³ ì • í¬ê¸° ìŠ¤ë ˆë“œ í’€ì„ ë§Œë“¤ì–´ ì‚¬ìš©í•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Utils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">getCommonExecutorService</span><span class="params">(<span class="keyword">int</span> nThreads)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Executors.newFixedThreadPool(nThreads);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ì‹¤ìŠµ"><a href="#ì‹¤ìŠµ" class="headerlink" title="ì‹¤ìŠµ"></a>ì‹¤ìŠµ</h1><h2 id="ê¸ˆìˆ˜ì €-ì„œë²„-ê¸ˆìˆ˜ì €-ìŠ¤ë ˆë“œ-í’€"><a href="#ê¸ˆìˆ˜ì €-ì„œë²„-ê¸ˆìˆ˜ì €-ìŠ¤ë ˆë“œ-í’€" class="headerlink" title="ê¸ˆìˆ˜ì € ì„œë²„ + ê¸ˆìˆ˜ì € ìŠ¤ë ˆë“œ í’€"></a>ê¸ˆìˆ˜ì € ì„œë²„ + ê¸ˆìˆ˜ì € ìŠ¤ë ˆë“œ í’€</h2><p>50ê°œ ì§œë¦¬ ìŠ¤ë ˆë“œ í’€ì„ ì‚¬ìš©í•˜ë©´ì„œ 1í¸ì—ì„œ ë¬¸ì œë¥¼ ìœ ë°œí–ˆë˜ ì‹œë‚˜ë¦¬ì˜¤ ê·¸ëŒ€ë¡œ ìˆ˜í–‰í•´ë³´ì.</p><ol><li>EchoSocketServerMultiThread ì‹¤í–‰</li><li>EchoSocketClient ì‹¤í–‰, EchoSocketClientëŠ” ì—°ê²° ìš”ì²­ í›„ 5ì´ˆ í›„ì— ë©”ì‹œì§€ë¥¼ ì„œë²„ì— ì „ì†¡</li><li>5ì´ˆ ì´ë‚´ì— ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ <code>echo -n &#39;ì•„ë¬´ê±°ë‚˜&#39; | nc localhost 7777</code> ì‹¤í–‰í•´ì„œ ë©”ì•„ë¦¬ê°€ í„°ë¯¸ë„ì— ë°”ë¡œ ì°íˆë©´ ë¬¸ì œ í•´ê²°</li></ol><p>ì‹¤ì œë¡œëŠ” ì‹¤ìŠµ í¸ì˜ë¥¼ ìœ„í•´ EchoSocketClientê°€ 5ì´ˆê°€ ì•„ë‹ˆë¼ 1ë¶„ í›„ì— ë³´ë‚´ë„ë¡ ì„¤ì •í–ˆë‹¤.<br>ê²°ê³¼ëŠ” ì•„ë˜ ì›€ì§¤ê³¼ ê°™ì´ ì—¬ëŸ¬ í„°ë¯¸ë„ ì°½ì—ì„œ ë™ì‹œì— <code>echo -n &#39;ì•„ë¬´ê±°ë‚˜&#39; | nc localhost 7777</code>ë¥¼ ì‹¤í–‰í•´ë„ ëª¨ë‘ ê±°ì˜ ë™ì‹œì— ë©”ì•„ë¦¬ê°€ ì¶œë ¥ëë‹¤.</p><p><img src="https://i.imgur.com/HHYMsq0.gif" alt="Imgur"></p><p>ì›€ì§¤ íŒŒì¼ í¬ê¸°ë¥¼ ì‘ê²Œí•˜ê¸° ìœ„í•´ 4ê°œì˜ í„°ë¯¸ë„ì°½ë§Œ ìº¡ì³í–ˆì§€ë§Œ ì‹¤ì œë¡œëŠ” 12ê°œì˜ ì°½ì—ì„œ ë™ì‹œì— ìš”ì²­ì„ ë‚ ë ¸ë‹¤. main ìŠ¤ë ˆë“œ + EchoSocketClient ìš”ì²­ ì²˜ë¦¬ ìŠ¤ë ˆë“œ + 12ê°œì˜ í„°ë¯¸ë„ ìš”ì²­ ì²˜ë¦¬ ìŠ¤ë ˆë“œ, ì´ 14ê°œì˜ ìŠ¤ë ˆë“œê°€ ì‚¬ìš©ëë‹¤.</p><p>EchoSocketClient ìš”ì²­ì€ pool-1-thread-1 ìŠ¤ë ˆë“œê°€ ë‹´ë‹¹í–ˆê³ , 12ê°œì˜ í„°ë¯¸ë„ ìš”ì²­ì€ pool-1-thread-2 ~ pool-1-thread-13 ìŠ¤ë ˆë“œê°€ ê°ê° ì²˜ë¦¬í–ˆë‹¤. ë¡œê·¸ë¥¼ ë³´ë©´ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆë‹¤. <code>&lt;==</code>ë¡œ í‘œì‹œí•œ ë¶€ë¶„ì€ ì„¤ëª…ì´ë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">scratchpad-server git:main ğŸºğŸ¦‘ğŸºğŸ•ğŸº â¯ tail -f temp.log                                                                                               âœ¹</span><br><span class="line">[SERVER -            main] 2020-11-02T01:36:54.427095 - ===============================</span><br><span class="line">[SERVER -            main] 2020-11-02T01:36:54.446306 - Multi Thread Socket Echo Server ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:36:54.446730 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T01:36:54.447015 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line"></span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:00.181527 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-1] 2020-11-02T01:37:00.181621 - Client ì ‘ì†!!! &lt;== 1ë¶„ í›„ ë©”ì‹œì§€ ë³´ë‚´ëŠ” EchoSocketClient ìš”ì²­ ì²˜ë¦¬ ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:00.181954 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER - pool-1-thread-1] 2020-11-02T01:37:00.181981 - Echo ì‹œì‘</span><br><span class="line">[CLIENT -            main] 2020-11-02T01:37:00.197423 - Client ì‹œì‘</span><br><span class="line"></span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.412302 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T01:37:08.412373 - Client ì ‘ì†!!! &lt;== ì—¬ê¸°ì„œë¶€í„°ëŠ” í„°ë¯¸ë„ nc í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ì²˜ë¦¬ ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T01:37:08.412695 - Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.412671 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.413172 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T01:37:08.413241 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T01:37:08.413521 - Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.413473 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.414077 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T01:37:08.414172 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T01:37:08.414427 - Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.414355 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.414899 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-5] 2020-11-02T01:37:08.415059 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.415181 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER - pool-1-thread-5] 2020-11-02T01:37:08.415326 - Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.415654 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-6] 2020-11-02T01:37:08.415793 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.415901 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER - pool-1-thread-6] 2020-11-02T01:37:08.416132 - Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.416741 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-7] 2020-11-02T01:37:08.417166 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.417073 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER - pool-1-thread-7] 2020-11-02T01:37:08.417448 - Echo ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-8] 2020-11-02T01:37:08.417732 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER - pool-1-thread-8] 2020-11-02T01:37:08.418018 - Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.417644 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.418353 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.418818 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-9] 2020-11-02T01:37:08.418987 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.419078 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER - pool-1-thread-9] 2020-11-02T01:37:08.419201 - Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.419664 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-10] 2020-11-02T01:37:08.419741 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.419985 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER - pool-1-thread-10] 2020-11-02T01:37:08.419997 - Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.420454 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-11] 2020-11-02T01:37:08.421378 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.421536 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER - pool-1-thread-11] 2020-11-02T01:37:08.421598 - Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.421942 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-12] 2020-11-02T01:37:08.422346 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.422542 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER - pool-1-thread-12] 2020-11-02T01:37:08.422558 - Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.423231 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-13] 2020-11-02T01:37:08.423331 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER -            main] 2020-11-02T01:37:08.423519 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER - pool-1-thread-13] 2020-11-02T01:37:08.423555 - Echo ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-12] 2020-11-02T01:37:08.440014 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-7] 2020-11-02T01:37:08.440467 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T01:37:08.440014 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T01:37:08.440820 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-13] 2020-11-02T01:37:08.441453 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-11] 2020-11-02T01:37:08.441606 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-9] 2020-11-02T01:37:08.442308 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T01:37:08.442538 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-6] 2020-11-02T01:37:08.443030 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-10] 2020-11-02T01:37:08.442771 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-8] 2020-11-02T01:37:08.443385 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-5] 2020-11-02T01:37:08.443648 - Echo ì™„ë£Œ</span><br><span class="line">[CLIENT -            main] 2020-11-02T01:38:00.227402 - ë©”ì‹œì§€ ì „ì†¡ ì‹œì‘ &lt;== EchoSocketClient ê°€ 1ë¶„ í›„ ë©”ì‹œì§€ ì „ì†¡</span><br><span class="line">[CLIENT -            main] 2020-11-02T01:38:00.238871 - ë©”ì‹œì§€ print ì™„ë£Œ</span><br><span class="line">[CLIENT -            main] 2020-11-02T01:38:00.242828 - ë©”ì‹œì§€ flush ì™„ë£Œ</span><br><span class="line">[CLIENT -            main] 2020-11-02T01:38:00.243060 - ì„œë²„ Echo ëŒ€ê¸°...</span><br><span class="line">[CLIENT -            main] 2020-11-02T01:38:00.261370 - ì„œë²„ Echo ë„ì°©</span><br><span class="line">[SERVER - pool-1-thread-1] 2020-11-02T01:38:00.261379 - Echo ì™„ë£Œ &lt;== pool-1-thread-1ì€ í´ë¼ì´ì–¸íŠ¸ì— ì˜í•´ 1ë¶„ ë™ì•ˆ ë¸”ë¡ë¼ ìˆëŠ” ë™ì•ˆ 0.5ì´ˆ ì§€ë‚˜ê°€ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë©”ì‹œì§€ ë°›ìë§ˆì Echo</span><br><span class="line">[CLIENT -            main] 2020-11-02T01:38:00.263653 - ì„œë²„ Echo msg: Server Echo - ì•ˆë…•, echo server</span><br></pre></td></tr></table></figure><h2 id="í‘ìˆ˜ì €-ì„œë²„-í‘ìˆ˜ì €-ìŠ¤ë ˆë“œ-í’€"><a href="#í‘ìˆ˜ì €-ì„œë²„-í‘ìˆ˜ì €-ìŠ¤ë ˆë“œ-í’€" class="headerlink" title="í‘ìˆ˜ì € ì„œë²„ + í‘ìˆ˜ì € ìŠ¤ë ˆë“œ í’€"></a>í‘ìˆ˜ì € ì„œë²„ + í‘ìˆ˜ì € ìŠ¤ë ˆë“œ í’€</h2><p>ì´ë²ˆì—ëŠ” ë©”ì•„ë¦¬ ì²˜ë¦¬ì— 0.5ì´ˆê°€ ê±¸ë¦¬ëŠ” í›„ì§„ ì„œë²„ì—ì„œ ìŠ¤ë ˆë“œë„ 4ê°œë§Œ ì‚¬ìš©í•´ì„œ í…ŒìŠ¤íŠ¸í•´ë³´ì.</p><p>ë©”ì•„ë¦¬ ì²˜ë¦¬ì— 0.5ì´ˆê°€ ê±¸ë¦¬ë„ë¡ EchoProcessorì—ì„œ ì£¼ì„ ì²˜ë¦¬ ë¼ ìˆë˜ <code>sleep()</code>ì˜ ì£¼ì„ì„ í•´ì œí•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoProcessor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> FileOutputStream fos = Utils.getCommonFileOutputStream();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">echo</span><span class="params">(Socket socket)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (BufferedReader in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">             PrintWriter out = <span class="keyword">new</span> PrintWriter(socket.getOutputStream())</span><br><span class="line">        ) &#123;</span><br><span class="line">            String clientMessage = in.readLine();  <span class="comment">// inì— ì½ì„ ê²Œ ë“¤ì–´ì˜¬ ë•Œê¹Œì§€ blocking</span></span><br><span class="line">            String serverMessage = <span class="string">"Server Echo - "</span> + clientMessage + System.lineSeparator();</span><br><span class="line">            Utils.sleep(<span class="number">500L</span>);  <span class="comment">// Echo ì²˜ë¦¬ì— 0.5ì´ˆê°€ ê±¸ë¦¬ë„ë¡ ì£¼ì„ í•´ì œ</span></span><br><span class="line">            out.println(serverMessage);</span><br><span class="line">            out.flush();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>EchoSocketServerMultiThreadì˜ ìŠ¤ë ˆë“œ í’€ì„ ìŠ¤ë ˆë“œ 4ê°œë§Œ ì‚¬ìš©í•˜ë„ë¡ <code>ExecutorService es = Utils.getCommonExecutorService(4);</code>ë¡œ ë°”ê¿”ì„œ í‘ìˆ˜ì € ìŠ¤ë ˆë“œ í’€ì„ ë§Œë“ ë‹¤. ê·¸ë¦¬ê³  ì•ì—ì„œì™€ ë§ˆì°¬ê°€ì§€ë¡œ í…ŒìŠ¤íŠ¸ í•´ë³´ë©´ ì•„ë˜ ì›€ì§¤ì²˜ëŸ¼ í„°ë¯¸ë„ì— í‘œì‹œë˜ëŠ” ë©”ì•„ë¦¬ì— ì‹œì°¨ê°€ ì¡°ê¸ˆ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/zhsVRRw.gif" alt="Imgur"></p><p><strong>ìš”ì²­ ì²˜ë¦¬ì—” ì‹œê°„ì´ í•„ìš”í•˜ê³ , ìŠ¤ë ˆë“œë„ ë©”ëª¨ë¦¬ ë° Context Switching ë¶€ë‹´ì´ ìˆì–´ì„œ ë§ˆëƒ¥ ëŠ˜ë¦´ ìˆ˜ë§Œì€ ì—†ìœ¼ë¯€ë¡œ, ì´ í‘ìˆ˜ì € ì„œë²„ + í‘ìˆ˜ì € ìŠ¤ë ˆë“œ í’€ ì‹œë‚˜ë¦¬ì˜¤ê°€ í˜„ì‹¤ì— ì¡´ì¬í•˜ëŠ” ì‹œë‚˜ë¦¬ì˜¤ì— ê°€ê¹ë‹¤</strong>ê³  í•  ìˆ˜ ìˆë‹¤.</p><p>1ë¶„ ì§€ì—° Java Socket Client ìš”ì²­ 1ê°œ, 12ê°œì˜ í„°ë¯¸ë„ nc ìš”ì²­ ì²˜ë¦¬ ë¡œê·¸ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. ìì„¸í•œ ë‚´ìš©ì€ <code>&lt;==</code>ë¡œ ì„¤ëª…ì„ ì¶”ê°€í–ˆë‹¤.<br>ìŠ¤ë ˆë“œ ì´ë¦„ê³¼ í™”ì‚´í‘œ ê¸¸ì´, ì¤‘ê°„ì¤‘ê°„ 0.5ì´ˆ ì •ë„ ì°¨ì´ë‚˜ëŠ” ë¶€ë¶„ì„ ìœ ì˜í•´ì„œ ì‚´í´ë³´ë©´ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë  ê²ƒì´ë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">scratchpad-server git:main ğŸºğŸ¦‘ğŸºğŸ•ğŸº â¯ tail -f temp.log        </span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:29.653111 - ===============================</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:29.675600 - Multi Thread Socket Echo Server ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:29.676223 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:29.676571 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line"></span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:36.000378 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-1] 2020-11-02T12:29:36.000475 - Client ì ‘ì†!!! &lt;== 1ë¶„ í›„ ë©”ì‹œì§€ ë³´ë‚´ëŠ” EchoSocketClient ìš”ì²­</span><br><span class="line">[SERVER - pool-1-thread-1] 2020-11-02T12:29:36.000856 - Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:36.000830 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[CLIENT -            main] 2020-11-02T12:29:36.015713 - Client ì‹œì‘</span><br><span class="line">    </span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.072899 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T12:29:43.072977 - Client ì ‘ì†!!! &lt;== í„°ë¯¸ë„ ìš”ì²­ 1 ì²˜ë¦¬: 2ë²ˆ ìŠ¤ë ˆë“œì—ì„œ ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.073253 - Echo Server ëŒ€ê¸° ì¤‘ &lt;== main ìŠ¤ë ˆë“œëŠ” ë¸”ë¡ë˜ì§€ ì•Šê³  ê³„ì† ìš”ì²­ì„ ë°›ì•„ ìŠ¤ë ˆë“œ í’€ì— ì „ë‹¬í•˜ê³  ë‹¤ìŒ ìš”ì²­ ëŒ€ê¸°</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T12:29:43.073283 - Echo ì‹œì‘ &lt;== ìš”ì²­ 1 Echo ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T12:29:43.073725 - Client ì ‘ì†!!! &lt;==== í„°ë¯¸ë„ ìš”ì²­ 2 ì²˜ë¦¬: 3ë²ˆ ìŠ¤ë ˆë“œì—ì„œ ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.073657 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T12:29:43.073938 - Echo ì‹œì‘ &lt;==== ìš”ì²­ 2 Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.073984 - Echo Server ëŒ€ê¸° ì¤‘ &lt;== main ìŠ¤ë ˆë“œëŠ” ë¸”ë¡ë˜ì§€ ì•Šê³  ê³„ì† ìš”ì²­ì„ ë°›ì•„ ìŠ¤ë ˆë“œ í’€ì— ì „ë‹¬í•˜ê³  ë‹¤ìŒ ìš”ì²­ ëŒ€ê¸°</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.074461 - ---------------------------</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T12:29:43.074550 - Client ì ‘ì†!!! &lt;====== í„°ë¯¸ë„ ìš”ì²­ 3 ì²˜ë¦¬: 4ë²ˆ ìŠ¤ë ˆë“œì—ì„œ ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.074694 - Echo Server ëŒ€ê¸° ì¤‘ &lt;== main ìŠ¤ë ˆë“œëŠ” ë¸”ë¡ë˜ì§€ ì•Šê³  ê³„ì† ìš”ì²­ì„ ë°›ì•„ ìŠ¤ë ˆë“œ í’€ì— ì „ë‹¬í•˜ê³  ë‹¤ìŒ ìš”ì²­ ëŒ€ê¸°</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T12:29:43.074716 - Echo ì‹œì‘ &lt;====== ìš”ì²­ 3 Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.075061 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.075294 - Echo Server ëŒ€ê¸° ì¤‘ &lt;== main ìŠ¤ë ˆë“œëŠ” ë¸”ë¡ë˜ì§€ ì•Šê³  ê³„ì† ìš”ì²­ì„ ë°›ì•„ ìŠ¤ë ˆë“œ í’€ì— ì „ë‹¬í•˜ê³  ë‹¤ìŒ ìš”ì²­ ëŒ€ê¸°</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.075582 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.075844 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.076123 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.076339 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.076611 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.076860 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.080305 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.080641 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.080866 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.081025 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.081308 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.081528 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.081733 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.081907 - Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.082124 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T12:29:43.082250 - Echo Server ëŒ€ê¸° ì¤‘ &lt;== main ìŠ¤ë ˆë“œëŠ” ë¸”ë¡ë˜ì§€ ì•Šê³  ê³„ì† ìš”ì²­ì„ ë°›ì•„ ìŠ¤ë ˆë“œ í’€ì— ì „ë‹¬í•˜ê³  ë‹¤ìŒ ìš”ì²­ ëŒ€ê¸°</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T12:29:43.593116 - Echo ì™„ë£Œ &lt;== ìš”ì²­ 1 Echo ì™„ë£Œ, 0.5ì´ˆ ì†Œìš”</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T12:29:43.593116 - Echo ì™„ë£Œ &lt;====== ìš”ì²­ 3 Echo ì™„ë£Œ, 0.5ì´ˆ ì†Œìš”</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T12:29:43.593413 - Echo ì™„ë£Œ &lt;==== ìš”ì²­ 2 Echo ì™„ë£Œ, 0.5ì´ˆ ì†Œìš”</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T12:29:43.593569 - Client ì ‘ì†!!! &lt;== ìš”ì²­ 1 ì²˜ë¦¬ ì™„ë£Œ í›„ íì— ìˆë˜ í›„ì† ìš”ì²­ A: 2ë²ˆ ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬ ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T12:29:43.593575 - Client ì ‘ì†!!! &lt;====== ìš”ì²­ 3 ì²˜ë¦¬ ì™„ë£Œ í›„ íì— ìˆë˜ í›„ì† ìš”ì²­ C: 4ë²ˆ ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬ ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T12:29:43.593817 - Echo ì‹œì‘ &lt;== ìš”ì²­ A</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T12:29:43.593683 - Client ì ‘ì†!!! &lt;==== ìš”ì²­ 2 ì²˜ë¦¬ ì™„ë£Œ í›„ íì— ìˆë˜ í›„ì† ìš”ì²­ B: 3ë²ˆ ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬ ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T12:29:43.593889 - Echo ì‹œì‘ &lt;====== ìš”ì²­ C</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T12:29:43.594157 - Echo ì‹œì‘ &lt;==== ìš”ì²­ B</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T12:29:44.097963 - Echo ì™„ë£Œ &lt;== ìš”ì²­ A</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T12:29:44.097963 - Echo ì™„ë£Œ &lt;====== ìš”ì²­ C</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T12:29:44.098370 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T12:29:44.098411 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T12:29:44.098672 - Echo ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T12:29:44.098608 - Echo ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T12:29:44.097963 - Echo ì™„ë£Œ &lt;==== ìš”ì²­ B</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T12:29:44.099086 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T12:29:44.099283 - Echo ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T12:29:44.603912 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T12:29:44.604235 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T12:29:44.604316 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T12:29:44.604478 - Echo ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T12:29:44.604473 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T12:29:44.604637 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T12:29:44.604910 - Echo ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T12:29:44.604962 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T12:29:44.605142 - Echo ì‹œì‘</span><br><span class="line">[SERVER - pool-1-thread-3] 2020-11-02T12:29:45.107464 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-4] 2020-11-02T12:29:45.107464 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER - pool-1-thread-2] 2020-11-02T12:29:45.107464 - Echo ì™„ë£Œ</span><br><span class="line">[CLIENT -            main] 2020-11-02T12:30:36.051155 - ë©”ì‹œì§€ ì „ì†¡ ì‹œì‘ &lt;== 1ë¶„ í›„ ë©”ì‹œì§€ ë³´ë‚´ëŠ” Java Socket Client</span><br><span class="line">[CLIENT -            main] 2020-11-02T12:30:36.068386 - ë©”ì‹œì§€ print ì™„ë£Œ</span><br><span class="line">[CLIENT -            main] 2020-11-02T12:30:36.073274 - ë©”ì‹œì§€ flush ì™„ë£Œ &lt;== ë©”ì‹œì§€ ì „ì†¡</span><br><span class="line">[CLIENT -            main] 2020-11-02T12:30:36.073655 - ì„œë²„ Echo ëŒ€ê¸°...</span><br><span class="line">[SERVER - pool-1-thread-1] 2020-11-02T12:30:36.581245 - Echo ì™„ë£Œ &lt;== ë©”ì‹œì§€ ì „ì†¡ ë°›ì€ í›„ 0.5ì´ˆ í›„ì— Echo ì™„ë£Œ</span><br><span class="line">[CLIENT -            main] 2020-11-02T12:30:36.582077 - ì„œë²„ Echo ë„ì°©</span><br><span class="line">[CLIENT -            main] 2020-11-02T12:30:36.585161 - ì„œë²„ Echo msg: Server Echo - ì•ˆë…•, echo server</span><br></pre></td></tr></table></figure><p>ìš”ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li><code>accept()</code>ëŠ” ìš”ì²­ì´ ì˜¤ëŠ” ì¡±ì¡± ìŠ¤ë ˆë“œ í’€ì— ì „ë‹¬<ul><li>ìš”ì²­ì„ ë°›ì„ ë•Œê¹Œì§€ëŠ” ë¸”ë¡œí‚¹ì´ì§€ë§Œ, ìš”ì²­ì„ ë°›ì€ í›„ì—ëŠ” ë¸”ë¡œí‚¹í•˜ì§€ ì•Šê³  ë°”ë¡œ ë‹¤ìŒ ìš”ì²­ì„ ë¸”ë¡œí‚¹í•˜ë©´ì„œ ëŒ€ê¸°</li></ul></li><li>ìŠ¤ë ˆë“œ í’€ì€<ul><li>ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¤ë ˆë“œê°€ ìˆìœ¼ë©´ ìš”ì²­ì„ ë°”ë¡œ ì²˜ë¦¬</li><li>ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¤ë ˆë“œê°€ ì—†ìœ¼ë©´ ìš”ì²­ì„ íì— ì €ì¥ í›„ ë‚˜ì¤‘ì— ì²˜ë¦¬</li></ul></li></ul><h1 id="ì •ë¦¬"><a href="#ì •ë¦¬" class="headerlink" title="ì •ë¦¬"></a>ì •ë¦¬</h1><blockquote><ul><li><code>ServerSocket.accept()</code>ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ì•„ë“¤ì´ëŠ” ê±´ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œì—ì„œ ë‹´ë‹¹í•˜ê³ ,</li><li>ìš”ì²­ì˜ ì²˜ë¦¬ëŠ” ìš”ì²­ë§ˆë‹¤ ë³„ë„ì˜ ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬í•˜ê²Œ í•˜ë©´,</li><li><p>ì‹œê°„ì„ ì˜¤ë˜ ë„ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì¼ë¶€ ìˆë”ë¼ë„ ì„œë²„ì™€ ë‚˜ë¨¸ì§€ í´ë¼ì´ì–¸íŠ¸ëŠ” ë¨¹í†µì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.</p></li><li><p>ìš”ì²­ì„ ë¸”ë¡œí‚¹ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ìƒí™©ì—ì„œ</p><ul><li>ìš”ì²­ ì²˜ë¦¬ì— ì¼ì • ì‹œê°„ì´ í•„ìš”í•˜ê³ , ìŠ¤ë ˆë“œê°€ ì¶©ë¶„í•˜ì§€ ëª»í•˜ë‹¤ë©´, ì¼ë¶€ ìš”ì²­ì€ íì—ì„œ ìŒ“ì—¬ ëŒ€ê¸°í•˜ë‹¤ê°€ ì‹œì°¨ë¥¼ ë‘ê³  ì²˜ë¦¬ëœë‹¤.</li><li>íì— ìŒ“ì—¬ ëŒ€ê¸°í•˜ëŠ” ìš”ì²­ì„ ì¤„ì´ë ¤ë©´ ìŠ¤ë ˆë“œë¥¼ ëŠ˜ë¦¬ëŠ” ìˆ˜ ë°–ì— ì—†ë‹¤.</li></ul></li></ul></blockquote><p>ê²°êµ­ ì œí•œëœ ìì› ìƒí™©ì—ì„œ ë§ì€ ìš”ì²­ì„ ì²˜ë¦¬í•˜ë ¤ë©´ ìŠ¤ë ˆë“œë¥¼ ëŠ˜ë¦¬ëŠ” ìˆ˜ ë°–ì— ì—†ì§€ë§Œ, ìì²´ ìŠ¤íƒì„ ê°–ê³  ìˆëŠ” ìŠ¤ë ˆë“œë¥¼ ë§ì´ ì‚¬ìš©í•˜ë©´ ë©”ëª¨ë¦¬ í•œê³„ì— ë¶€ë”ªí ìˆ˜ ìˆê³ , ë§ì€ ìŠ¤ë ˆë“œëŠ” ë§ì€ Context Switching ì„ ìœ ë°œí•´ì„œ ì„±ëŠ¥ ì €í•˜ì˜ ì›ì¸ì´ ë˜ê¸°ë„ í•œë‹¤.</p><p>ê·¸ë ‡ë‹¤ë©´ ìŠ¤ë ˆë“œë¥¼ ë¬´ì‘ì • ëŠ˜ë¦¬ê¸°ë³´ë‹¤ëŠ” ìŠ¤ë ˆë“œ ì‚¬ìš© íš¨ìœ¨ì„ ë†’ì´ëŠ” ë°©ë²•ì„ ì°¾ì•„ë´ì•¼ í•  ê²ƒ ê°™ë‹¤.</p><p>3í¸ì—ì„œëŠ” ìŠ¤ë ˆë“œ íš¨ìœ¨ì„ ë†’ì¼ ìˆ˜ ìˆëŠ” NIOì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Back-to-the-Essence-Java-Servers-2í¸&quot;&gt;&lt;a href=&quot;#Back-to-the-Essence-Java-Servers-2í¸&quot; class=&quot;headerlink&quot; title=&quot;Back to the Essence - 
      
    
    </summary>
    
      <category term="Network" scheme="http://homoefficio.github.io/categories/Network/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="I/O" scheme="http://homoefficio.github.io/tags/I-O/"/>
    
      <category term="Blocking" scheme="http://homoefficio.github.io/tags/Blocking/"/>
    
      <category term="Java IO" scheme="http://homoefficio.github.io/tags/Java-IO/"/>
    
      <category term="Echo Server" scheme="http://homoefficio.github.io/tags/Echo-Server/"/>
    
      <category term="ServerSocket" scheme="http://homoefficio.github.io/tags/ServerSocket/"/>
    
      <category term="Socket" scheme="http://homoefficio.github.io/tags/Socket/"/>
    
      <category term="netcat" scheme="http://homoefficio.github.io/tags/netcat/"/>
    
      <category term="accept" scheme="http://homoefficio.github.io/tags/accept/"/>
    
      <category term="Multi Thread" scheme="http://homoefficio.github.io/tags/Multi-Thread/"/>
    
      <category term="Servlet" scheme="http://homoefficio.github.io/tags/Servlet/"/>
    
      <category term="Spring MVC" scheme="http://homoefficio.github.io/tags/Spring-MVC/"/>
    
  </entry>
  
  <entry>
    <title>Back to the Essence - Java Servers - (1)</title>
    <link href="http://homoefficio.github.io/2020/11/02/Back-to-the-Essence-Java-Servers-1/"/>
    <id>http://homoefficio.github.io/2020/11/02/Back-to-the-Essence-Java-Servers-1/</id>
    <published>2020-11-01T15:34:50.000Z</published>
    <updated>2020-12-03T08:23:18.867Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Back-to-the-Essence-Java-Servers-1í¸"><a href="#Back-to-the-Essence-Java-Servers-1í¸" class="headerlink" title="Back to the Essence - Java Servers - 1í¸"></a>Back to the Essence - Java Servers - 1í¸</h1><p>ì„œë²„ í”„ë¡œê·¸ë˜ë°ì„ í•œë‹¤ê³ ëŠ” í•˜ì§€ë§Œ, ì§€ë‚œ ìˆ˜ë…„ ê°„ êµ´ëŸ¬ë„ ìŠ¤í”„ë§ ìœ„ì—ì„œë§Œ êµ¬ë¥´ë‹¤ë³´ë‹ˆ ìŠ¤í”„ë§ ì—†ì´ëŠ”, ì•„ë‹ˆ ì´ì œëŠ” ìŠ¤í”„ë§ë§Œìœ¼ë¡œë„ ë­˜ ëª»í•  ê²ƒ ê°™ê³  ìŠ¤í”„ë§ ë¶€íŠ¸ ì—†ì´ëŠ” ê°„ë‹¨í•œ ë©”ì•„ë¦¬(Echo) ì„œë²„ì¡°ì°¨ ëª» ë§Œë“œëŠ” <del>ê²½ì§€</del>ì§€ê²½ì— ì´ë¥´ë €ë‹¤. ì´ ì•„ë‹ˆ ë¶€ë„ëŸ¬ìš´ê°€..</p><p>ê·¸ë˜ì„œ Javaê°€ ì œê³µí•´ì£¼ëŠ” classic IO, NIO, NIO2ë¡œ ê°„ë‹¨í•œ Echo Serverë¥¼ ë§Œë“¤ì–´ë³´ë©´ì„œ ê¸°ë³¸ê¸°ë¥¼ ì¢€ ë‹¤ì ¸ë³´ë ¤ í•œë‹¤.<br>ë§Œë“œëŠ” ë°ì„œ ê·¸ì¹˜ì§€ ì•Šê³  ê·¸ë™ì•ˆ ê°„ì ‘ ê²½í—˜ìœ¼ë¡œë§Œ ì•Œì•„ì™”ë˜ NIO, NIO2 ì˜ ì¥ë‹¨ì ì„ ë¶€í•˜í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ í™•ì¸í•´ë³´ê³ ì í•œë‹¤.<br>ë‚˜ë¦„ ì›ëŒ€í•œ ê³„íšì´ì§€ë§Œ ëª©í‘œí•œ ê±¸ ëª¨ë‘ ì–»ì„ ìˆ˜ ìˆì„ì§€ëŠ” ë¯¸ì§€ìˆ˜ë‹¤. ê·¸ëƒ¥ ë‹¬ë ¤ë³´ì.</p><h1 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h1><p>ì„œë²„ë¥¼ í˜¸ì¶œí•  í´ë¼ì´ì–¸íŠ¸ëŠ” í¬ê²Œ 3ê°€ì§€ë‹¤.</p><ul><li>Java Socket Client</li><li>nc(netcat)</li><li>JMeter Client</li></ul><p>ì´ ì¤‘ì—ì„œ ì½”ë”©ì´ í•„ìš”í•œ ê±´ Java Socket Client ë¿ì´ê³  ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. ì´í•´ë¥¼ ìœ„í•´ ë¡œê¹…ì„ ë§ì´ ë„£ì—ˆëŠ”ë°, ë¡œê¹… ë¹¼ë©´ ì„¤ëª…í•  ê²ƒë„ ì—†ë‹¤.<br>ì°¸ê³ ë¡œ ë¡œê¹…ì„ ì½˜ì†”ì´ ì•„ë‹Œ temp.log íŒŒì¼ì— ì°ëŠ”ë‹¤. ì´ìœ ëŠ” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì˜ ë¡œê·¸ë¥¼ í•œ êµ°ë° ëª¨ì•„ì„œ ë³´ëŠ” ê²Œ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë˜ê¸° ë•Œë¬¸ì´ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> io.homo_efficio.server.socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.homo_efficio.server.common.Constants;</span><br><span class="line"><span class="keyword">import</span> io.homo_efficio.server.common.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> homo.efficio@gmail.com</span></span><br><span class="line"><span class="comment"> * created on 2020-10-10</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoSocketClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String message = <span class="string">"ì•ˆë…•, echo server"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> (Socket clientSocket = <span class="keyword">new</span> Socket(Constants.SERVER_HOST_NAME, Constants.SERVER_PORT);</span><br><span class="line">             FileOutputStream fos = Utils.getCommonFileOutputStream();</span><br><span class="line">             PrintWriter out = <span class="keyword">new</span> PrintWriter(clientSocket.getOutputStream());</span><br><span class="line">             BufferedReader in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(clientSocket.getInputStream()))</span><br><span class="line">        ) &#123;</span><br><span class="line">            Utils.clientTimeStamp(<span class="string">"Client ì‹œì‘"</span>, fos);</span><br><span class="line">            <span class="comment">// Utils.sleep(5000L);  // ì„œë²„ blocking í™•ì¸ ì‹œ ì‚¬ìš©</span></span><br><span class="line">            Utils.clientTimeStamp(<span class="string">"ë©”ì‹œì§€ ì „ì†¡ ì‹œì‘"</span>, fos);</span><br><span class="line">            out.println(message);</span><br><span class="line">            Utils.clientTimeStamp(<span class="string">"ë©”ì‹œì§€ print ì™„ë£Œ"</span>, fos);</span><br><span class="line">            out.flush();</span><br><span class="line">            Utils.clientTimeStamp(<span class="string">"ë©”ì‹œì§€ flush ì™„ë£Œ"</span>, fos);</span><br><span class="line">            Utils.clientTimeStamp(<span class="string">"ì„œë²„ Echo ëŒ€ê¸°..."</span>, fos);</span><br><span class="line">            <span class="comment">// in.readLine() ì€ ì½ì„ ë°ì´í„°ê°€ ë“¤ì–´ì˜¬ ë•Œê¹Œì§€ blocking ì´ë¯€ë¡œ while (true) ë¶ˆí•„ìš”</span></span><br><span class="line">            String messageFromServer = in.readLine();</span><br><span class="line">            Utils.clientTimeStamp(<span class="string">"ì„œë²„ Echo ë„ì°©"</span>, fos);</span><br><span class="line">            Utils.clientTimeStamp(<span class="string">"ì„œë²„ Echo msg: "</span> + messageFromServer, fos);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Classic-IO-Single-Thread-ServerSocket"><a href="#Classic-IO-Single-Thread-ServerSocket" class="headerlink" title="Classic IO - Single Thread ServerSocket"></a>Classic IO - Single Thread ServerSocket</h1><p>ì´ì œ ì„œë²„ë¥¼ ë§Œë“¤ì–´ ë³´ì. 1ë²ˆ íƒ€ìëŠ” Classic IO(ë˜ëŠ” BIO(Blocking IO))ë¡œ ë§Œë“  ìš¸íŠ¸ë¼ ì‹¬í”Œ ì‹±ê¸€ ìŠ¤ë ˆë“œ ì†Œì¼“ ì„œë²„ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> io.homo_efficio.server.socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.homo_efficio.server.common.Constants;</span><br><span class="line"><span class="keyword">import</span> io.homo_efficio.server.common.EchoProcessor;</span><br><span class="line"><span class="keyword">import</span> io.homo_efficio.server.common.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> homo.efficio@gmail.com</span></span><br><span class="line"><span class="comment"> * created on 2020-10-10</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoSocketServerSingleThread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        EchoSocketServerSingleThread echoSocketServerSingleThread = <span class="keyword">new</span> EchoSocketServerSingleThread();</span><br><span class="line">        echoSocketServerSingleThread.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(Constants.SERVER_PORT);</span><br><span class="line">             FileOutputStream fos = Utils.getCommonFileOutputStream()</span><br><span class="line">        ) &#123;</span><br><span class="line">            Utils.serverTimeStamp(<span class="string">"==============================="</span>, fos);</span><br><span class="line">            Utils.serverTimeStamp(<span class="string">"Echo Server ì‹œì‘"</span>, fos);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                Utils.serverTimeStamp(<span class="string">"---------------------------"</span>, fos);</span><br><span class="line">                Utils.serverTimeStamp(<span class="string">"Single Thread Socket Echo Server ëŒ€ê¸° ì¤‘"</span>, fos);</span><br><span class="line">                <span class="comment">// accept() ëŠ” ì—°ê²° ìš”ì²­ì´ ì˜¬ ë•Œê¹Œì§€ return í•˜ì§€ ì•Šê³  blocking</span></span><br><span class="line">                Socket acceptedSocket = serverSocket.accept();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ì—°ê²° ìš”ì²­ì´ ì˜¤ë©´ accept() ê°€ ë°˜í™˜í•˜ê³  ìš”ì²­ ì²˜ë¦¬ ë¡œì§ ìˆ˜í–‰</span></span><br><span class="line">                Utils.serverTimeStamp(<span class="string">"Client ì ‘ì†!!!"</span>, fos);</span><br><span class="line"><span class="comment">//            Utils.sleep(50L);</span></span><br><span class="line">                Utils.serverTimeStamp(<span class="string">"Echo ì‹œì‘"</span>, fos);</span><br><span class="line">                EchoProcessor.echo(acceptedSocket);</span><br><span class="line">                Utils.serverTimeStamp(<span class="string">"Echo ì™„ë£Œ"</span>, fos);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>ServerSocket</code>ìœ¼ë¡œ ì„œë²„ ì†Œì¼“ì„ ìƒì„±í•˜ê³ , <code>accept()</code>ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²°ì„ ê¸°ë‹¤ë¦¬ê³ , ì—°ê²°ì´ ì˜¤ë©´ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë©”ì‹œì§€ë¥¼ ë©”ì•„ë¦¬ë¡œ ë˜ëŒë ¤ ì¤€ë‹¤.</p><p>ë©”ì•„ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” EchoProcessorëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoProcessor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> FileOutputStream fos = Utils.getCommonFileOutputStream();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">echo</span><span class="params">(Socket socket)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (BufferedReader in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">             PrintWriter out = <span class="keyword">new</span> PrintWriter(socket.getOutputStream())</span><br><span class="line">        ) &#123;</span><br><span class="line">            String clientMessage = in.readLine();  <span class="comment">// inì— ì½ì„ ê²Œ ë“¤ì–´ì˜¬ ë•Œê¹Œì§€ blocking</span></span><br><span class="line">            String serverMessage = <span class="string">"Server Echo - "</span> + clientMessage + System.lineSeparator();</span><br><span class="line">            out.println(serverMessage);</span><br><span class="line">            out.flush();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Socket</code>ì„ ì¸ìë¡œ ë°›ê³ , ì†Œì¼“ì—ì„œ Reader, Writerë¥¼ ë½‘ì•„ë‚´ì„œ, Readerì—ì„œ ë©”ì•„ë¦¬ë¥¼ ì½ê³  â€˜Server Echo -â€˜ë¼ëŠ” ë¬¸ìì—´ì„ ì•ì— ë¶™ì—¬ì„œ Writerë¡œ íšŒì‹ í•œë‹¤.</p><p>ì—¬ê¸°ì„œ ì£¼ì˜í•  ì ì´ ìˆë‹¤. <strong>ì„œë²„ê°€ ë³´ë‚´ëŠ” ë©”ì‹œì§€ì— ë¹„ì–´ ìˆëŠ” í–‰ì´ í¬í•¨ë¼ì•¼ í´ë¼ì´ì–¸íŠ¸ê°€ <code>readLine()</code>ìœ¼ë¡œ ì½ì„ ë•Œ í–‰ì„ êµ¬ë³„í•´ì„œ ë¬¸ì œ ì—†ì´ ì½ê³  ì¶œë ¥í•  ìˆ˜ ìˆë‹¤.</strong> ë¹„ì–´ ìˆëŠ” í–‰ì´ ì—†ìœ¼ë©´ í´ë¼ì´ì–¸íŠ¸ì˜ <code>readLine()</code>ì´ ê³„ì† ë¹„ì–´ ìˆëŠ” í–‰ì„ ê¸°ë‹¤ë¦¬ë©´ì„œ ì„œë²„ì™€ì˜ ì—°ê²°ì„ ì ìœ í•˜ê²Œ ë˜ê³ , ì‹±ê¸€ ìŠ¤ë ˆë“œì¸ ì„œë²„ëŠ” ë¨¹í†µ ìƒíƒœê°€ ëœë‹¤.</p><h1 id="ì‹¤ìŠµ"><a href="#ì‹¤ìŠµ" class="headerlink" title="ì‹¤ìŠµ"></a>ì‹¤ìŠµ</h1><ol><li><p>EchoSocketServerSingleThread ë¥¼ ì‹¤í–‰í•˜ê³ , EchoSocketClient ë¥¼ ì‹¤í–‰í•˜ë©´ temp.log íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì´ ë¡œê·¸ê°€ ì°í•œë‹¤.</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[SERVER -            main] 2020-11-01T23:49:25.119684 - ===============================</span><br><span class="line">[SERVER -            main] 2020-11-01T23:49:25.133603 - Echo Server ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-01T23:49:25.133994 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-01T23:49:25.134174 - Single Thread Socket Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[SERVER -            main] 2020-11-01T23:49:26.976560 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER -            main] 2020-11-01T23:49:26.976861 - Echo ì‹œì‘</span><br><span class="line">[CLIENT -            main] 2020-11-01T23:49:26.992329 - Client ì‹œì‘</span><br><span class="line">[CLIENT -            main] 2020-11-01T23:49:27.006950 - ë©”ì‹œì§€ ì „ì†¡ ì‹œì‘</span><br><span class="line">[CLIENT -            main] 2020-11-01T23:49:27.007250 - ë©”ì‹œì§€ print ì™„ë£Œ</span><br><span class="line">[CLIENT -            main] 2020-11-01T23:49:27.008839 - ë©”ì‹œì§€ flush ì™„ë£Œ</span><br><span class="line">[CLIENT -            main] 2020-11-01T23:49:27.009160 - ì„œë²„ Echo ëŒ€ê¸°...</span><br><span class="line">[CLIENT -            main] 2020-11-01T23:49:27.020318 - ì„œë²„ Echo ë„ì°©</span><br><span class="line">[SERVER -            main] 2020-11-01T23:49:27.021049 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER -            main] 2020-11-01T23:49:27.021302 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-01T23:49:27.021471 - Single Thread Socket Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line">[CLIENT -            main] 2020-11-01T23:49:27.021674 - ì„œë²„ Echo msg: Server Echo - ì•ˆë…•, echo server</span><br></pre></td></tr></table></figure></li><li><p>ì„œë²„ëŠ” ì—¬ì „íˆ ëŒ€ê¸° ì¤‘ì´ë¯€ë¡œ ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ <code>echo -n &#39;ì•„ë¬´ê±°ë‚˜&#39; | nc localhost 7777</code>ì„ ì…ë ¥í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ Echo ë©”ì‹œì§€ê°€ ë°”ë¡œ ì¶œë ¥ë˜ì–´ ë‚˜ì˜¨ë‹¤.</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ë‹¤ë¥¸ í„°ë¯¸ë„ì°½</span><br><span class="line">ğŸºğŸ¦‘ğŸºğŸ•ğŸº â¯ echo -n &apos;ì•„ë¬´ê±°ë‚˜&apos; | nc localhost 7777                                             </span><br><span class="line">Server Echo - ì•„ë¬´ê±°ë‚˜</span><br></pre></td></tr></table></figure> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">... ìœ— ë¶€ë¶„ ìƒëµ ...</span><br><span class="line">[SERVER -            main] 2020-11-01T23:49:27.021302 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-01T23:49:27.021471 - Single Thread Socket Echo Server ëŒ€ê¸° ì¤‘</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[SERVER -            main] 2020-11-02T00:03:47.863975 - Client ì ‘ì†!!!</span><br><span class="line">[SERVER -            main] 2020-11-02T00:03:47.874942 - Echo ì‹œì‘</span><br><span class="line">[SERVER -            main] 2020-11-02T00:03:47.878276 - Echo ì™„ë£Œ</span><br><span class="line">[SERVER -            main] 2020-11-02T00:03:47.878572 - ---------------------------</span><br><span class="line">[SERVER -            main] 2020-11-02T00:03:47.878849 - Single Thread Socket Echo Server ëŒ€ê¸° ì¤‘</span><br></pre></td></tr></table></figure></li><li><p>EchoSocketClient ì—ì„œ <code>// Utils.sleep(5000L);  // ì„œë²„ blocking í™•ì¸ ì‹œ ì‚¬ìš©</code>ë¼ê³  ë¼ ìˆë˜ ë¶€ë¶„ì˜ ì£¼ì„ì„ í•´ì œí•˜ê³  ì‹¤í–‰í•´ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì™€ ì—°ê²°ëœ í›„ 5ì´ˆ í›„ì— ì„œë²„ì— ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ë„ë¡ í•˜ê³ , 5ì´ˆ ì•ˆì— ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ <code>echo -n &#39;ì•„ë¬´ê±°ë‚˜&#39; | nc localhost 7777</code>ì„ ì…ë ¥í•œë‹¤.  </p><ul><li>ê·¸ëŸ¬ë©´ ë©”ì•„ë¦¬ê°€ í„°ë¯¸ë„ì— ê¸ˆë°© ì¶œë ¥ë˜ì§€ ì•Šê³  5ì´ˆ í›„ì— ì¶œë ¥ëœë‹¤.</li><li>ì´ìœ ëŠ” ì•ì„œ ë§í•œ ê²ƒì²˜ëŸ¼ EchoSocketClientê°€ 5ì´ˆ í›„ì— ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ë™ì•ˆ, EchoProcessorì˜ <code>in.readLine()</code>ì´ ë¸”ë¡œí‚¹ ìƒíƒœë¡œ ëŒ€ê¸°í•˜ëŠ”ë°, ì„œë²„ì˜ ìŠ¤ë ˆë“œë„ 1ê°œ ë¿ì´ë¼ ë‹¤ë¥¸ ìš”ì²­ì„ <code>accept()</code> í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.</li><li>ê·¸ë˜ì„œ í„°ë¯¸ë„ í´ë¼ì´ì–¸íŠ¸ë„ 5ì´ˆê°„ ë¸”ë¡œí‚¹ ìƒíƒœë¡œ ëŒ€ê¸°í•˜ê²Œ ëœë‹¤.</li><li>ê²°êµ­ <strong>ì´ìƒí•œ í´ë¼ì´ì–¸íŠ¸ê°€ í•˜ë‚˜ ë¼ë©´ ì„œë²„ë„ ë¨¹í†µë˜ê³  ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ê¹Œì§€ ë¨¹í†µì´ ì „íŒŒë  ìˆ˜ ìˆë‹¤.</strong></li></ul></li></ol><h1 id="ì •ë¦¬"><a href="#ì •ë¦¬" class="headerlink" title="ì •ë¦¬"></a>ì •ë¦¬</h1><blockquote><ul><li>ë¸”ë¡œí‚¹ ë°©ì‹ì˜ ì‹±ê¸€ ìŠ¤ë ˆë“œ ì†Œì¼“ ì„œë²„ëŠ” ì‹œê°„ ë„ëŠ” ì´ìƒí•œ í´ë¼ì´ì–¸íŠ¸ê°€ í•˜ë‚˜ë§Œ ë“¤ì–´ì™€ë„ ì„œë²„ê°€ ë¨¹í†µì´ ë˜ê³ , ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ê¹Œì§€ ë¨¹í†µë  ìˆ˜ ìˆë‹¤.</li></ul></blockquote><p>ì´ ë¬¸ì œëŠ” ì–´ë–»ê²Œ í•´ê²°í• ê¹Œ? <a href="https://homoefficio.github.io/2020/11/02/Back-to-the-Essence-Java-Servers-2/">2í¸</a>ì—ì„œ ì•Œì•„ë³´ì.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Back-to-the-Essence-Java-Servers-1í¸&quot;&gt;&lt;a href=&quot;#Back-to-the-Essence-Java-Servers-1í¸&quot; class=&quot;headerlink&quot; title=&quot;Back to the Essence - 
      
    
    </summary>
    
      <category term="Network" scheme="http://homoefficio.github.io/categories/Network/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="I/O" scheme="http://homoefficio.github.io/tags/I-O/"/>
    
      <category term="Blocking" scheme="http://homoefficio.github.io/tags/Blocking/"/>
    
      <category term="Java IO" scheme="http://homoefficio.github.io/tags/Java-IO/"/>
    
      <category term="Echo Server" scheme="http://homoefficio.github.io/tags/Echo-Server/"/>
    
      <category term="ServerSocket" scheme="http://homoefficio.github.io/tags/ServerSocket/"/>
    
      <category term="Socket" scheme="http://homoefficio.github.io/tags/Socket/"/>
    
      <category term="netcat" scheme="http://homoefficio.github.io/tags/netcat/"/>
    
      <category term="accept" scheme="http://homoefficio.github.io/tags/accept/"/>
    
  </entry>
  
  <entry>
    <title>Batch ì‘ì—…ê³¼ Connection Pool</title>
    <link href="http://homoefficio.github.io/2020/08/27/Batch-%EC%9E%91%EC%97%85%EA%B3%BC-Connection-Pool/"/>
    <id>http://homoefficio.github.io/2020/08/27/Batch-ì‘ì—…ê³¼-Connection-Pool/</id>
    <published>2020-08-27T04:28:29.000Z</published>
    <updated>2020-12-03T08:23:18.884Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ì»¤ë„¥ì…˜í’€"><a href="#ì»¤ë„¥ì…˜í’€" class="headerlink" title="ì»¤ë„¥ì…˜í’€"></a>ì»¤ë„¥ì…˜í’€</h2><p>ì¼ë°˜ì ìœ¼ë¡œ DBì— ì—°ê²°í•´ì„œ ì–´ë–¤ ì‘ì—…ì„ í•  ë•ŒëŠ” ì»¤ë„¥ì…˜í’€(Connection Pool)ì„ ì‚¬ìš©í•œë‹¤. DB ì—°ê²° ìì²´ê°€ ë¹„ìš©ì´ ë§ì´ ë“¤ê¸° ë•Œë¬¸ì— ë¯¸ë¦¬ ë‹¤ìˆ˜ì˜ Connection ê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ í’€ì— ë„£ì–´ë‘ê³  í•„ìš”í•  ë•Œë§ˆë‹¤ êº¼ë‚´ì“°ê³  ë°˜ë‚©í•˜ê¸°ë¥¼ ë°˜ë³µí•œë‹¤. ê²°êµ­ ì‘ë‹µ ì†ë„ë¥¼ ë¹ ë¥´ê²Œ í•˜ê³  ìì› íš¨ìœ¨ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ì»¤ë„¥ì…˜í’€ì„ ì‚¬ìš©í•œë‹¤.</p><p>ì»¤ë„¥ì…˜í’€ì„ ì‚¬ìš©í•˜ë©´ ë¯¸ë¦¬ ë§Œë“¤ì–´ì§„ ì—°ê²°ì„ ì—¬ëŸ¬ ê³³ì—ì„œ ì¬ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì—°ê²° ê°ì²´ì— ì–´ë–¤ ê³µí†µì˜ ìƒíƒœë¥¼ ë‘ê³  ì´ë¥¼ ë³€ê²½í•´ê°€ë©´ì„œ ì‚¬ìš©í•˜ë©´ ì•ˆ ëœë‹¤. Aë¼ëŠ” ì‘ì—…ì—ì„œ í•„ìš”ì— ì˜í•´ ê·¸ ìƒíƒœë¥¼ ë³€ê²½í•˜ë©´, Aê°€ ì“°ê³  ë°˜ë‚©í•œ ì—°ê²° ê°ì²´ë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” Bë¼ëŠ” ë‹¤ë¥¸ ì‘ì—…ì—ì„œëŠ” Aì— ì˜í•´ ë³€ê²½ëœ ìƒíƒœì— ì˜í•´ ì˜ë„í•˜ì§€ ì•Šê²Œ ë™ì‘í•  ìœ„í—˜ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p><h2 id="ë°°ì¹˜-ì‘ì—…"><a href="#ë°°ì¹˜-ì‘ì—…" class="headerlink" title="ë°°ì¹˜ ì‘ì—…"></a>ë°°ì¹˜ ì‘ì—…</h2><p>í•˜ì§€ë§Œ ë°°ì¹˜(bach) ì‘ì—…ì€ ì–´ë–¨ê¹Œ? ëŒ€ë¶€ë¶„ì˜ ë°°ì¹˜ ì‘ì—…ì€ ìµœì¢… ì‚¬ìš©ìì˜ ìš”ì²­ê³¼ëŠ” ë¬´ê´€í•˜ê²Œ ë™ì‘í•˜ë©° ë”°ë¼ì„œ ìµœì¢… ì‚¬ìš©ìì—ê²Œ í•„ìš”í•œ ìˆ˜ì¤€ì˜ ì‘ë‹µ ì†ë„ë¥¼ í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë¦¬ê³  ë³´í†µ ì‘ì—…ëŸ‰ë„ ë§ì•„ì„œ DB ì—°ê²° ìƒì„± ë¹„ìš©ì€ ê·¸ ì‘ì—…ì— í•„ìš”í•œ ì „ì²´ ë¹„ìš©ê³¼ ë¹„êµí•˜ë©´ ë¬´ì‹œí•  ì •ë„ë¡œ ë¯¸ë¯¸í•œ ìˆ˜ì¤€ì´ë‹¤. ë”°ë¼ì„œ <strong>ì¼ë°˜ì ì¸ ë°°ì¹˜ ì‘ì—…ì—ì„œëŠ” ì»¤ë„¥ì…˜í’€ì˜ íš¨ìš©ì´ ê·¸ë‹¤ì§€ í¬ì§€ ì•Šë‹¤.</strong></p><p>ê²Œë‹¤ê°€ ì‘ì—… ì„±ê²© ìƒ ì»¤ë„¥ì…˜ë³„ë¡œ ì–´ë–¤ ì„¤ì •ê°’ì„ ë³€ê²½í•´ì•¼ í•˜ëŠ” ê²½ìš°ë„ ë§ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Hiveì˜ <a href="https://github.com/HomoEfficio/dev-tips/blob/master/Hive%20Dynamic%20Partition%20Insert.md" target="_blank" rel="noopener">Dynamic Partition Insert</a>ì„ ì‚¬ìš©í•  ë•ŒëŠ” ì•„ë˜ <code>set hive.exec.XXX=YYY</code>ì™€ ê°™ì´ ì„¤ì •ê°’ì„ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤.</p><p><img src="https://i.imgur.com/gTXD7Sp.png" alt="Imgur"></p><p><strong>a, bë¡œ ì„¤ì •í•œ ê²Œ c ì‹¤í–‰ ì‹œ ê¹Œì§€ ìœ íš¨í•´ì•¼ í•˜ëŠ”ë°, ì‹¤ì œë¡œëŠ” a, b, c ëª¨ë‘ ì„œë¡œ ë‹¤ë¥¸ ì»¤ë„¥ì…˜ì—ì„œ ì‹¤í–‰ëœë‹¤.</strong> ì´ëŠ” í¬ê²Œ ì„¸ ê°€ì§€ ì¹˜ëª…ì ì¸ ë¬¸ì œë¥¼ ìœ ë°œí•œë‹¤.</p><ol><li>a, b ì„¤ì • ë‚´ìš©ì€ í•´ë‹¹ ì»¤ë„¥ì…˜ì— ê·¸ëŒ€ë¡œ ë‚¨ì•„ì„œ ë‚˜ì¤‘ì— ë‹¤ë¥¸ ì‘ì—…ì— ì˜í–¥ì„ ë¯¸ì¹œë‹¤. ë‹¤ë¥¸ ì‘ì—…ì€ ì˜ë„í•œ ê²ƒê³¼ ë‹¤ë¥´ê²Œ ë™ì‘í•  ìˆ˜ ìˆë‹¤ëŠ” ì–˜ê¸°ë‹¤.</li><li>a, b ì„¤ì • ë‚´ìš©ì€ c ì‹¤í–‰ ì‹œì—ëŠ” ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. ì…‹ ëª¨ë‘ ë³„ê°œì˜ ì»¤ë„¥ì…˜ì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì´ë‹¤.</li><li>1, 2ì— ì˜í•œ ë¬¸ì œëŠ” ê°„í—ì , ìš°ë°œì ìœ¼ë¡œ ë°œìƒí•œë‹¤. ì¬ì—°ì´ ì–´ë µê³  ë””ë²„ê¹…ì´ ì–´ë µë‹¤.</li></ol><p>ì°¸ê³ ë¡œ a, b, c ì‹¤í–‰ ì‹œ ì„œë¡œ ë‹¤ë¥¸ ì»¤ë„¥ì…˜ì´ ì‚¬ìš©ëœë‹¤ëŠ” ê±´ ì•„ë˜ì˜ JdbcTemplate êµ¬í˜„ ë‚´ìš©ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/A3LyoRc.png" alt="Imgur"></p><p>ìœ„ì™€ ê°™ì´ ê²°êµ­ JdbcTemplateì˜ DB ì‘ì—… ë©”ì„œë“œê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ <code>DataSourceUtil.getConnection()</code>ë¡œ ì»¤ë„¥ì…˜ì„ ê°€ì ¸ì˜¤ëŠ”ë°, ì´ê²Œ ê²°êµ­ ì»¤ë„¥ì…˜í’€ì—ì„œ ê·¸ë•Œê·¸ë•Œ ì»¤ë„¥ì…˜ì„ ìƒˆë¡œ ê°€ì ¸ì˜¨ë‹¤.</p><h2 id="ë°°ì¹˜-ì‘ì—…ì—ì„œì˜-ì»¤ë„¥ì…˜í’€"><a href="#ë°°ì¹˜-ì‘ì—…ì—ì„œì˜-ì»¤ë„¥ì…˜í’€" class="headerlink" title="ë°°ì¹˜ ì‘ì—…ì—ì„œì˜ ì»¤ë„¥ì…˜í’€"></a>ë°°ì¹˜ ì‘ì—…ì—ì„œì˜ ì»¤ë„¥ì…˜í’€</h2><p>ì•ì—ì„œ ì–˜ê¸°í•œ ê²ƒì²˜ëŸ¼ ë°°ì¹˜ ì‘ì—…ì—ì„œì˜ ì»¤ë„¥ì…˜í’€ì˜ íš¨ìš©ì€ í¬ì§€ ì•Šë‹¤. ê·¸ë¦¬ê³  ì»¤ë„¥ì…˜ë³„ ì„¤ì • ë³€ê²½ ê°™ì€ ì‚¬ìš© ì‚¬ë¡€ê°€ í•„ìš”í•œ ìƒí™©ì—ì„œëŠ” ì»¤ë„¥ì…˜í’€ì„ ì¨ì„œ ì»¤ë„¥ì…˜ì„ ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì•ì—ì„œ ì–˜ê¸°í•œ ê²ƒì²˜ëŸ¼ í•´ê²°ì´ ì–´ë ¤ìš´ ë¬¸ì œë¥¼ ìœ ë°œí•˜ëŠ” ë¶€ì‘ìš©ë§Œ ë– ì•ˆì„ ë¿ì´ë‹¤.</p><p>ê·¸ëŸ¼ ì»¤ë„¥ì…˜í’€ì„ ì•ˆ ì“°ë©´ ë˜ëŠ” ê±° ì•„ë‹Œê°€? ë§ë‹¤. ê·¼ë° ì‹¤ë¬´ì ìœ¼ë¡œ í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” JdbcTemplateì´ ì»¤ë„¥ì…˜í’€ì—ì„œ ì»¤ë„¥ì…˜ì„ ê°€ì ¸ì˜¤ê²Œ ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ì´ í¸ë¦¬í•¨ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë ¤ë©´ ì»¤ë„¥ì…˜í’€ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ë­ì•¼ ê·¸ëŸ¼ ì–´ì©Œë¼ê³ ?</p><p>ì»¤ë„¥ì…˜í’€ì„ ì‚¬ìš©í•˜ë˜ ì ë‹¹íˆ ì„¤ì •í•˜ë©´ ì»¤ë„¥ì…˜ì„ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.</p><p>ì¦‰ ì»¤ë„¥ì…˜í’€ì„ ì‚¬ìš©í•˜ì§€ë§Œ ì¼ë°˜ì ì¸ ì»¤ë„¥ì…˜í’€ì²˜ëŸ¼ ì»¤ë„¥ì…˜ì„ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘ê³  ì¬ì‚¬ìš©í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼, </p><ul><li>ì»¤ë„¥ì…˜ì„ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ ëŠ˜ ìƒˆë¡œ ë§Œë“¤ê³ ,</li><li>ì‚¬ìš© í›„ì— ë°”ë¡œ íê¸°ë˜ë©°,</li><li>ë™ì‹œ ì‚¬ìš© ì»¤ë„¥ì…˜ì˜ ìµœëŒ€ ê°¯ìˆ˜ë§Œ ì œí•œì„ ë‘ëŠ”</li></ul><p>íŠ¹ë³„í•œ í’€ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</p><p>ì•„ë˜ëŠ” Tomcatì˜ PoolPropertiesë¥¼ ì‚¬ìš©í•  ë•Œì˜ ì„¤ì •ê°’ì¸ë° ë‹¤ë¥¸ ConnectionPool êµ¬í˜„ì²´ë¥¼ ì“°ë”ë¼ë„ ë¹„ìŠ·í•œ ì„¤ì •ë°©ë²•ì´ ìˆì„ ê²ƒì´ë‹¤.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driverClassName:</span> <span class="string">a.b.c.d.GoodDriver</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">JDBC_URL</span></span><br><span class="line"><span class="attr">username:</span> <span class="string">USERNAME</span></span><br><span class="line"><span class="attr">password:</span> <span class="string">PASSWORD</span></span><br><span class="line"><span class="attr">initialSize:</span> <span class="number">0</span>  <span class="comment"># í’€ ìƒì„± ì‹œ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ë¯¸ë¦¬ ìƒì„±í•˜ì§€ ì•ŠìŒ</span></span><br><span class="line"><span class="attr">maxActive:</span> <span class="number">100</span>  <span class="comment"># ë™ì‹œ ì‚¬ìš© ê°€ëŠ¥ í•œ ì»¤ë„¥ì…˜ ê°ì²´ì˜ ê°¯ìˆ˜ ìƒí•œê°’ì„ ê¸°ë³¸ê°’ì¸ 100ìœ¼ë¡œ ëª…ì‹œ</span></span><br><span class="line"><span class="attr">maxIdle:</span> <span class="number">0</span>      <span class="comment"># ì‚¬ìš© í›„ ëŒ€ê¸° ì¤‘ì¸ ì»¤ë„¥ì…˜ì˜ ìµœëŒ€ ê°¯ìˆ˜ë¥¼ 0ìœ¼ë¡œ ê³ ì •</span></span><br><span class="line"><span class="attr">minIdle:</span> <span class="number">0</span>      <span class="comment"># ì‚¬ìš© í›„ ëŒ€ê¸° ì¤‘ì¸ ì»¤ë„¥ì…˜ì˜ ìµœì†Œ ê°¯ìˆ˜ë¥¼ 0ìœ¼ë¡œ ê³ ì •</span></span><br><span class="line"><span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">0</span>  <span class="comment"># ì‚¬ìš© í›„ íê¸° ì „ ëŒ€ê¸° ì‹œê°„ì„ 0ë°€ë¦¬ì´ˆë¡œ ê³ ì • -&gt; ì‚¬ìš© í›„ ë°”ë¡œ íê¸°</span></span><br></pre></td></tr></table></figure><h2 id="Tx-ì²˜ë¦¬"><a href="#Tx-ì²˜ë¦¬" class="headerlink" title="Tx ì²˜ë¦¬"></a>Tx ì²˜ë¦¬</h2><p>ìœ„ì™€ ê°™ì´ ì»¤ë„¥ì…˜í’€ì„ ì„¤ì •í•˜ë©´ ì•ì—ì„œ ì‚´í´ë³¸ 1ë²ˆ ë¬¸ì œëŠ” í•´ê²°í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ a, b ì„¤ì •ì´ c ì‹¤í–‰ì‹œê¹Œì§€ ìœ ì§€ë˜ì–´ì•¼ í•˜ëŠ” 2ë²ˆ ë¬¸ì œëŠ” ì–´ë–»ê²Œ í•´ê²°í•´ì•¼ í• ê¹Œ?</p><p>í•˜ë‚˜ì˜ Txë¡œ ë¬¶ì–´ì£¼ë©´ JdbcTemplateì´ ì²˜ìŒì— ê°€ì ¸ì˜¨ ì»¤ë„¥ì…˜ì„ Tx ì¢…ë£Œì‹œê¹Œì§€ ê³„ì† ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ìŠ¤í”„ë§ì´ë¼ë©´ <code>@Transactional</code>ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ì•„ë˜ì™€ ê°™ì´ PlatformTransactionManager ë¥¼ ì‚¬ìš©í•´ì„œ í•˜ë‚˜ì˜ Txë¡œ ë¬¶ì–´ì¤„ ìˆ˜ ìˆë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">TransactionStatus transactionStatus = <span class="keyword">this</span>.transactionManager.getTransaction(<span class="keyword">new</span> DefaultTransactionDefinition());</span><br><span class="line"></span><br><span class="line">JdbcTemplate hiveTezJdbcTemplate = hiveTezDataReader.createJdbcTemplate();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì•„ë˜ 3ê°œì˜ ëª…ë ¹ì´ ëª¨ë‘ ë™ì¼í•œ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ í†µí•´ ì‹¤í–‰ë¨</span></span><br><span class="line">hiveTezJdbcTemplate.execute(<span class="string">"set hive.exec.dynamic.partition.mode=nonstrict"</span>);</span><br><span class="line">hiveTezJdbcTemplate.execute(<span class="string">"set hive.exec.max.dynamic.partitions=50000"</span>);</span><br><span class="line">hiveTezJdbcTemplate.execute(hiveCustomerConsumptionQuery);</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.transactionManager.commit(transactionStatus);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ì»¤ë„¥ì…˜í’€&quot;&gt;&lt;a href=&quot;#ì»¤ë„¥ì…˜í’€&quot; class=&quot;headerlink&quot; title=&quot;ì»¤ë„¥ì…˜í’€&quot;&gt;&lt;/a&gt;ì»¤ë„¥ì…˜í’€&lt;/h2&gt;&lt;p&gt;ì¼ë°˜ì ìœ¼ë¡œ DBì— ì—°ê²°í•´ì„œ ì–´ë–¤ ì‘ì—…ì„ í•  ë•ŒëŠ” ì»¤ë„¥ì…˜í’€(Connection Pool)ì„ ì‚¬ìš©í•œë‹¤. DB ì—°ê²° 
      
    
    </summary>
    
      <category term="Technique" scheme="http://homoefficio.github.io/categories/Technique/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="JdbcTemplate" scheme="http://homoefficio.github.io/tags/JdbcTemplate/"/>
    
      <category term="JDBC" scheme="http://homoefficio.github.io/tags/JDBC/"/>
    
      <category term="Batch" scheme="http://homoefficio.github.io/tags/Batch/"/>
    
      <category term="ConnectionPool" scheme="http://homoefficio.github.io/tags/ConnectionPool/"/>
    
      <category term="Hive" scheme="http://homoefficio.github.io/tags/Hive/"/>
    
  </entry>
  
  <entry>
    <title>Java NIO FileChannel ê³¼ DirectByteBuffer</title>
    <link href="http://homoefficio.github.io/2020/08/10/Java-NIO-FileChannel-%EA%B3%BC-DirectByteBuffer/"/>
    <id>http://homoefficio.github.io/2020/08/10/Java-NIO-FileChannel-ê³¼-DirectByteBuffer/</id>
    <published>2020-08-10T14:44:59.000Z</published>
    <updated>2020-08-11T13:06:28.553Z</updated>
    
    <content type="html"><![CDATA[<p>Java 4ì—ì„œ ë„ì…ëœ NIO ë•ë¶„ì— <code>FileChannel</code>ê³¼ <code>ByteBuffer</code>ë¥¼ ì´ìš©í•´ì„œ File I/O ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ëë‹¤.</p><p><img src="https://i.imgur.com/vEL6ni9.png" alt="Imgur"><br>ê·¸ë¦¼ ì¶œì²˜: <a href="https://www.happycoders.eu/java/filechannel-bytebuffer-memory-mapped-file-locks/" target="_blank" rel="noopener">https://www.happycoders.eu/java/filechannel-bytebuffer-memory-mapped-file-locks/</a></p><p>NIOì˜ ì¥ì ì€ <a href="https://homoefficio.github.io/2016/08/06/Java-NIOëŠ”-ìƒê°ë§Œí¼-non-blocking-í•˜ì§€-ì•Šë‹¤/">https://homoefficio.github.io/2016/08/06/Java-NIOëŠ”-ìƒê°ë§Œí¼-non-blocking-í•˜ì§€-ì•Šë‹¤/</a> ë¥¼ ì°¸ê³ í•˜ê³ , ì—¬ê¸°ì—ì„œëŠ” <code>FileChannel</code>ê³¼ <code>DirectBuffer</code> ì–˜ê¸°ë§Œ ë‹¤ë£¬ë‹¤.</p><p><code>ByteBuffer</code>ëŠ” ìƒì„±ë˜ëŠ” ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í¬ê²Œ ë‚˜ëˆ ë³´ë©´ JVM Heap ë‚´ì— ìƒì„±ë˜ëŠ” <code>HeapByteBuffer</code>ì™€ JVM Heap ë°–ì— ìˆëŠ” Native ê³µê°„ì— ìƒì„±ë˜ëŠ” <code>DirectByteBuffer</code>ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. ì•„ë˜ ê·¸ë¦¼ì—ëŠ” ë¨¼ì € <code>HeapByteBuffer</code>ì™€ <code>MappedByteBuffer</code>ë¡œ êµ¬ë¶„ë˜ëŠ” ê±¸ë¡œ ë³´ì´ëŠ”ë° <code>MappedByteBuffer</code>ë„ Native ê³µê°„ì— ìƒì„±ë˜ë©° íŒŒì¼ ì¼ë¶€ë¥¼ ë©”ëª¨ë¦¬ì— ë§¤í•‘í•œë‹¤ëŠ” ì  ì™¸ì—ëŠ” ì¼ë°˜ì ì¸ direct byte buffer ì™€ ë™ì‘ì´ ë‹¤ë¥´ì§€ ì•Šë‹¤ê³  <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/MappedByteBuffer.html" target="_blank" rel="noopener">API ë¬¸ì„œ</a>ì— ë‚˜ì™€ìˆë‹¤.</p><p><img src="https://i.imgur.com/AE4p00B.png" alt="Imgur"></p><p>ìœ„ ê·¸ë¦¼ì—ëŠ” ì•ˆ ë‚˜ì™€ìˆì§€ë§Œ <code>DirectByteBuffer</code>ëŠ” <code>DirectBuffer</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê³  ìˆë‹¤.</p><p><code>HeapByteBuffer</code>ë¥¼ ì‚¬ìš©í•˜ë©´ JVMì˜ GCì— ì•ˆì „í•˜ê²Œ ì˜ì§€í•  ìˆ˜ ìˆì§€ë§Œ, CPU ê°œì… ì—†ì´ I/Oë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆê³  ë¶ˆí•„ìš”í•œ copy ë¶€í•˜ê°€ ë°œìƒí•˜ì§€ ì•Šì•„ ì„±ëŠ¥ì ìœ¼ë¡œ ìœ ë¦¬í•œ ì ì´ ë§ì€ DMA(DirectMemoryAccess)ëŠ” í™œìš©í•  ìˆ˜ ì—†ë‹¤.</p><p>ë°˜ëŒ€ë¡œ <code>DirectByteBuffer</code>ë¥¼ ì‚¬ìš©í•˜ë©´ DMAì˜ í˜œíƒì„ ì–»ì„ ìˆ˜ ìˆì§€ë§Œ, JVMì˜ GCë¥¼ ë²—ì–´ë‚˜ê²Œ ë˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ê´€ë¦¬ ë¶€ë‹´ì´ ìƒê²¨ë‚œë‹¤.</p><p>ê·¸ë˜ì„œ <code>FileChannel</code> ì„ ì‚¬ìš©í•  ë•Œ ìƒí™©ì— ë§ê²Œ <code>HeapByteBuffer</code>ë‚˜ <code>DirectByteBuffer</code> ì¤‘ì— ê³¨ë¼ì„œ ì“°ë©´ ë  ê²ƒ ê°™..ì§€ë§Œ, ì‹¤ìƒì€ ê¼­ ê·¸ë ‡ì§€ëŠ” ì•Šë‹¤!</p><p>ì´ì œë¶€í„° ì½”ë“œì™€ í•¨ê»˜ ê·¸ ë‚´ë¶€ë¥¼ ì‚´ì§ ë“¤ì—¬ë‹¤ë³´ì. ì•ìœ¼ë¡œ ë‚˜ì˜¤ëŠ” ë‚´ìš©ì€ ëª¨ë‘ Java 8 ê¸°ì¤€ì´ë‹¤.</p><h1 id="FileChannel-write-ByteBuffer"><a href="#FileChannel-write-ByteBuffer" class="headerlink" title="FileChannel.write(ByteBuffer)"></a>FileChannel.write(ByteBuffer)</h1><p><code>HeapByteBuffer</code>ì— ë‹´ê²¨ ìˆëŠ” ë‚´ìš©ì„ íŒŒì¼ì— ì €ì¥í•˜ë ¤ë©´ ëŒ€ëµ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">String contents = <span class="string">"abcde"</span>;</span><br><span class="line"><span class="keyword">byte</span>[] byteArr = contents.getBytes(StandardCharsets.UTF_8);</span><br><span class="line"></span><br><span class="line">ByteBuffer byteBuffer = ByteBuffer.wrap(byteArr);  <span class="comment">// HeapByteBufferë¥¼ ë°˜í™˜í•œë‹¤.</span></span><br><span class="line"><span class="comment">// ë˜ëŠ”</span></span><br><span class="line"><span class="comment">// ByteBuffer byteBuffer = ByteBuffer.allocate(byteArr.length);    // HeapByteBufferë¥¼ ë°˜í™˜í•œë‹¤.</span></span><br><span class="line"><span class="comment">// byteBuffer.put(byteArr);</span></span><br><span class="line"><span class="comment">// byteBuffer.flip();</span></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"isDirect? "</span> + byteBuffer.isDirect());  <span class="comment">// false</span></span><br><span class="line">fileChannel.write(byteBuffer);</span><br></pre></td></tr></table></figure><p>ìœ„ ì½”ë“œì—ëŠ” <code>DirectByteBuffer</code>ê°€ ì „í˜€ ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤.</p><p>ê·¸ëŸ°ë° ë§‰ìƒ ì‹¤í–‰í•´ì„œ <a href="https://homoefficio.github.io/2020/04/09/Java-Native-Memory-Tracking/">jcmdë¡œ Native ë©”ëª¨ë¦¬ë¥¼ ëª¨ë‹ˆí„°ë§</a> í•´ë³´ë©´, <code>DirectByteBuffer</code>ê°€ ì‚¬ìš©í•˜ëŠ” Native ë©”ëª¨ë¦¬ë¥¼ ë‚˜íƒ€ë‚´ëŠ” Internal í•­ëª©ì´ ìœ„ ì‚¬ìš©í•œ Bufferì˜ í¬ê¸°ë§Œí¼ ì¦ê°€í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ëŒ€ëµ ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ì´ í‘œì‹œëœë‹¤.</p><p><img src="https://i.imgur.com/t9gmDhx.png" alt=""></p><p>ë¶„ëª…íˆ <code>HeapByteBuffer</code>ë¥¼ ì‚¬ìš©í–ˆëŠ”ë° ì™œ Native ë©”ëª¨ë¦¬ê°€ ë™ì›ë˜ëŠ” ê±¸ê¹Œ?</p><h1 id="FileChannelImpl-write-ByteBuffer-ì™€-ê·¸-ì´í›„"><a href="#FileChannelImpl-write-ByteBuffer-ì™€-ê·¸-ì´í›„" class="headerlink" title="FileChannelImpl.write(ByteBuffer) ì™€ ê·¸ ì´í›„"></a>FileChannelImpl.write(ByteBuffer) ì™€ ê·¸ ì´í›„</h1><p>íŠ¹ë³„íˆ ì§€ì •í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ì¸ <code>FileChannel</code>ì˜ êµ¬í˜„ì²´ë¡œ <code>sun.nio.ch.FileChannelImpl</code>ì´ ì‚¬ìš©ëœë‹¤. ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sun.nio.ch.FileChannelImpl</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">write</span><span class="params">(ByteBuffer src)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ensureOpen();</span><br><span class="line">        <span class="keyword">if</span> (!writable)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NonWritableChannelException();</span><br><span class="line">        <span class="keyword">synchronized</span> (positionLock) &#123;</span><br><span class="line">            <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> ti = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                begin();</span><br><span class="line">                ti = threads.add();</span><br><span class="line">                <span class="keyword">if</span> (!isOpen())</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    n = IOUtil.write(fd, src, -<span class="number">1</span>, nd);  <span class="comment">//&lt;=== ì—¬ê¸°!!!</span></span><br><span class="line">                &#125; <span class="keyword">while</span> ((n == IOStatus.INTERRUPTED) &amp;&amp; isOpen());</span><br><span class="line">                <span class="keyword">return</span> IOStatus.normalize(n);</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                threads.remove(ti);</span><br><span class="line">                end(n &gt; <span class="number">0</span>);</span><br><span class="line">                <span class="keyword">assert</span> IOStatus.check(n);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><code>IOUtil.write()</code>ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sun.nio.ch.IOUtil</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">write</span><span class="params">(FileDescriptor fd, ByteBuffer src, <span class="keyword">long</span> position,</span></span></span><br><span class="line"><span class="function"><span class="params">                     NativeDispatcher nd)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (src <span class="keyword">instanceof</span> DirectBuffer)</span><br><span class="line">            <span class="keyword">return</span> writeFromNativeBuffer(fd, src, position, nd);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Substitute a native buffer</span></span><br><span class="line">        <span class="keyword">int</span> pos = src.position();</span><br><span class="line">        <span class="keyword">int</span> lim = src.limit();</span><br><span class="line">        <span class="keyword">assert</span> (pos &lt;= lim);</span><br><span class="line">        <span class="keyword">int</span> rem = (pos &lt;= lim ? lim - pos : <span class="number">0</span>);</span><br><span class="line">        ByteBuffer bb = Util.getTemporaryDirectBuffer(rem);  <span class="comment">//&lt;=== ì—¬ê¸°!!!</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            bb.put(src);</span><br><span class="line">            bb.flip();</span><br><span class="line">            <span class="comment">// Do not update src until we see how many bytes were written</span></span><br><span class="line">            src.position(pos);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> n = writeFromNativeBuffer(fd, bb, position, nd);</span><br><span class="line">            <span class="keyword">if</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// now update src</span></span><br><span class="line">                src.position(pos + n);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> n;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            Util.offerFirstTemporaryDirectBuffer(bb);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ì˜¤í˜¸ íŠ¹ì´í•œ ì ì´ ëˆˆì— ë“¤ì–´ì˜¨ë‹¤. ì¸ìë¡œ ë°›ì•„ì˜¨ <code>ByteBuffer</code>ì˜ Typeì´ <code>DirectBuffer</code>ì´ë©´ <code>writeFromNativeBuffer()</code>ë¥¼ í˜¸ì¶œí•˜ê³  ë°˜í™˜í•˜ì§€ë§Œ, <code>DirectBuffer</code>ê°€ ì•„ë‹ˆë©´ <code>Util.getTemporaryDirectBuffer(rem)</code> ì´ë ‡ê²Œ ìŠ¬ê·¸ë¨¸ë‹ˆ <code>DirectBuffer</code>ë¥¼ ìƒì„±í•œë‹¤!!</p><p><img src="https://i.imgur.com/72E8YHH.jpg?1" alt="Imgur"></p><p>ì ì‹œ ê³ë‹¤ë¦¬ë¡œ ë¹ ì ¸ë³´ìë©´, ëª°ë˜ ëŒ€ì²´í’ˆì„ ë§Œë“¤ì–´ ì“°ê¸°ëŠ” í•˜ì§€ë§Œ ê·¸ë˜ë„ ì–‘ì‹¬ì€ ìˆëŠ”ì§€ ë‹¤ìŒê³¼ ê°™ì´ ê°œë°œìê°€ <code>HeapByteBuffer</code> ìƒì„± ì‹œ ì§€ì •í•œ í¬ê¸°ê°€ ì•„ë‹ˆë¼ ì‹¤ì œ read/write í•  ë°ì´í„° í¬ê¸°ë§Œí¼ì˜ <code>DirectByteBuffer</code>ë§Œ ìƒì„±í•˜ëŠ” ì ì€ ê·¸ë˜ë„ ë†’ì´ ì³ì¤„ ìˆ˜ ìˆë‹¤. ê·¸ëŸ°ë° ì´ë§ˆì €ë„ ë‚˜ì¤‘ì— ì‚´í´ë³¼ <code>BufferCache</code> ë™ì‘ ë°©ì‹ì„ ìƒê°í•´ë³´ë©´ ì¢‹ë‹¤ê³ ë§Œ í•  ìˆ˜ëŠ” ì—†ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> rem = (pos &lt;= lim ? lim - pos : <span class="number">0</span>);  <span class="comment">// ë²„í¼ì˜ í¬ê¸°ê°€ ì•„ë‹ˆë¼ ì‹¤ì œ read/write í•´ì•¼í•  ë°ì´í„° í¬ê¸°(limit - position)</span></span><br><span class="line">ByteBuffer bb = Util.getTemporaryDirectBuffer(rem);  <span class="comment">//&lt;=== ì—¬ê¸°!!!</span></span><br></pre></td></tr></table></figure><p>ì´ì–´ì„œ ê³„ì† ë”°ë¼ê°€ë³´ì. <code>Util.getTemporaryDirectBuffer(rem)</code>ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sun.nio.ch.Util</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ByteBuffer <span class="title">getTemporaryDirectBuffer</span><span class="params">(<span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// If a buffer of this size is too large for the cache, there</span></span><br><span class="line">        <span class="comment">// should not be a buffer in the cache that is at least as</span></span><br><span class="line">        <span class="comment">// large. So we'll just create a new one. Also, we don't have</span></span><br><span class="line">        <span class="comment">// to remove the buffer from the cache (as this method does</span></span><br><span class="line">        <span class="comment">// below) given that we won't put the new buffer in the cache.</span></span><br><span class="line">        <span class="keyword">if</span> (isBufferTooLarge(size)) &#123;</span><br><span class="line">            <span class="keyword">return</span> ByteBuffer.allocateDirect(size);  <span class="comment">//&lt;=== ì—¬ê¸°!!!</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        BufferCache cache = bufferCache.get();</span><br><span class="line">        ByteBuffer buf = cache.get(size);</span><br><span class="line">        <span class="keyword">if</span> (buf != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> buf;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// No suitable buffer in the cache so we need to allocate a new</span></span><br><span class="line">            <span class="comment">// one. To avoid the cache growing then we remove the first</span></span><br><span class="line">            <span class="comment">// buffer from the cache and free it.</span></span><br><span class="line">            <span class="keyword">if</span> (!cache.isEmpty()) &#123;</span><br><span class="line">                buf = cache.removeFirst();</span><br><span class="line">                free(buf);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ByteBuffer.allocateDirect(size);  <span class="comment">//&lt;=== ì—¬ê¸°!!!</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ëŒ€ì¶© ë­”ê°€ ì¬ì‚¬ìš©ì„ ìœ„í•´ ìºì‹œ ê°œë…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ì€ë° ì—¬íŠ¼ ê²°êµ­ì—ëŠ” <code>ByteBuffer.allocateDirect(size)</code>ë¥¼ í˜¸ì¶œí•´ì„œ <code>DirectByteBuffer</code>ë¥¼ ìƒì„±í•œë‹¤. <code>ByteBuffer.allocateDirect(size)</code>ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// java.nio.ByteBuffer</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ByteBuffer <span class="title">allocateDirect</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DirectByteBuffer(capacity);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ì¦‰, íŠ¹ë³„í•œ ì„¤ì • ì—†ì´ <strong>ì¼ë°˜ì ì¸ ìƒí™©ì—ì„œ <code>FileChannel.write()</code>ì„ ì‚¬ìš©í•˜ë©´ ê°œë°œìê°€ ì‘ì„±í•œ í”„ë¡œê·¸ë¨ ì½”ë“œì—ì„œ <code>HeapByteBuffer</code>ë¥¼ ì‚¬ìš©í–ˆë”ë¼ë„ ë‚´ë¶€ì ìœ¼ë¡œëŠ” ê·¸ <code>HeapByteBuffer</code>ê°€ ì‚¬ìš©ë˜ì§€ ì•Šê³  í•­ìƒ <code>DirectByteBuffer</code>ê°€ ì‚¬ìš©ëœë‹¤.</strong> ì½”ë“œ í™•ì¸ ê²°ê³¼ <strong><code>FileChannel.read()</code>ë„ ë§ˆì°¬ê°€ì§€</strong>ë‹¤.</p><p>ìƒë‹¹íˆ ë‹¹í™©ìŠ¤ëŸ½ë‹¤. ê²Œë‹¤ê°€ ì´ëŸ° ì–˜ê¸°ë¥¼ ì™œ API ë¬¸ì„œë‚˜ ê¸°íƒ€ ìë£Œì—ì„œ ì‰½ê²Œ ì ‘í•  ìˆ˜ ì—†ëŠ”ì§€ëŠ” ì†”ì§íˆ ì˜ë¬¸ì´ë‹¤.</p><p>ì•”íŠ¼ ê·¸ë˜.. ë‚´ê°€ ì“°ë¼ê³  í•œ ê±´ ë¬´ì‹œí•˜ê³  ë‚˜ ëª°ë˜ <code>DirectByteBuffer</code>ë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ë„¤.. ê·¼ë° ë­ê°€ ë¬¸ì œì„? ì–´ì¨Œê±°ë‚˜ ì˜ ëŒë©´ ë˜ëŠ” ê±° ì•„ë‹˜?</p><p>ì´ì œë¶€í„° í˜„ì¥ì—ì„œ ë°œìƒí–ˆë˜ ì‚¬ë¡€ ì–˜ê¸°ë¥¼ í’€ì–´ë³¸ë‹¤. ë§Œì•½ ëŠ˜ ì•„ë˜ ì‚¬ë¡€ì™€ ê°™ì´ ë™ì‘í•œë‹¤ë©´ ìƒë‹¹íˆ ì‹¬ê°í•œ ë²„ê·¸ë¼ê³  ë³¼ ìˆ˜ ìˆëŠ”ë°, ì›Œë‚™ ê°œë°œì„ ëª» í•˜ëŠ”ì§€ë¼ ì–´ëŠ ë¶€ë¶„ì—ì„ ê°€ ë‚´ê°€ ì½”ë“œë¥¼ ì˜ëª» ì§°ì„ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì— ëŠ˜ ë°œìƒí•˜ëŠ” ìƒí™©ì´ë¼ê³  ë‹¨ì •í•  ìˆ˜ëŠ” ì—†ë‹¤. ì–´ì¨Œë“  í˜¸ê¸°ì‹¬ì´ ìƒê¸´ë‹¤ë©´ ì´ì–´ì„œ ì­‰ ë³´ì.</p><h1 id="DirectByteBuffer-ë©”ëª¨ë¦¬-íšŒìˆ˜"><a href="#DirectByteBuffer-ë©”ëª¨ë¦¬-íšŒìˆ˜" class="headerlink" title="DirectByteBuffer ë©”ëª¨ë¦¬ íšŒìˆ˜"></a>DirectByteBuffer ë©”ëª¨ë¦¬ íšŒìˆ˜</h1><p>ì•ì—ì„œ <code>DirectByteBuffer</code>ë¥¼ ì‚¬ìš©í•˜ë©´ DMA í˜œíƒì„ ì–»ì§€ë§Œ ë©”ëª¨ë¦¬ ê´€ë¦¬ ë¶€ë‹´ì´ ìƒê¸´ë‹¤ê³  í–ˆë‹¤. <code>DirectByteBuffer</code> ë©”ëª¨ë¦¬ëŠ” ì–´ë–»ê²Œ íšŒìˆ˜ë˜ëŠ” ê±¸ê¹Œ? ì—¬ëŸ¬ ìë£Œ ì°¾ì•„ë´¤ëŠ”ë° ëŒ€ëµ ì´ëŸ° ë§ë¡œ ê·€ê²°ëœë‹¤.</p><blockquote><p>Native ë©”ëª¨ë¦¬ë¥¼ ì°¸ì¡°í•˜ëŠ” ê°ì²´ëŠ” ê²°êµ­ JVM Heap ì•ˆì— ìƒì„±ë˜ë©°,<br>ì´ ê°ì²´ê°€ JVMì˜ GCì— ì˜í•´ íšŒìˆ˜ë˜ë©´ ì´ ê°ì²´ê°€ ì°¸ì¡°í•˜ëŠ” Native ë©”ëª¨ë¦¬ëŠ”<br>JVMì´ ì•„ë‹Œ ë‹¤ë¥¸ ë©”ì»¤ë‹ˆì¦˜ì— ì˜í•´ ì–´ì¨Œë“  íšŒìˆ˜ëœë‹¤.</p></blockquote><p>ìš”ëŠ” <strong><code>DirectByteBuffer</code>ë¥¼ ì‚¬ìš©í•´ë„ ê°„ì ‘ì ì´ê¸´ í•˜ì§€ë§Œ ê²°êµ­ì—ëŠ” JVM GCì— ì˜í•´ íšŒìˆ˜ê°€ ì‹œì‘ëœë‹¤</strong>ëŠ” ì–˜ê¸°ë‹¤. ì˜¤ ê·¸ëŸ¼ ë°”ë¡œ íšŒìˆ˜ë˜ëŠ” ê±´ ì•„ë‹ˆì§€ë§Œ ë‹¤í–‰ìŠ¤ëŸ½ê²Œë„ ê²°êµ­ JVM GCê°€ ì±™ê²¨ì£¼ì‹œëŠ” ê±°ë‚˜ ë§ˆì°¬ê°€ì§€ë„¤~</p><p>ê·¸ëŸ°ë° ìœ„ ì„¤ëª…ê³¼ëŠ” ë‹¤ë¥´ê²Œ ì–´ëŠ ì •ë„ ì‹œê°„ì´ ì§€ë‚˜ë©´ ê²°êµ­ ëŠ˜ ì´ ë¶„ì„ ì˜ì ‘í•˜ê²Œ ë˜ì—ˆë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.OutOfMemoryError: Direct buffer memory</span><br></pre></td></tr></table></figure><p>ì²˜ìŒì—ëŠ” â€˜ì•„ ì™œìš”~~ ì € <code>DirectByteBuffer</code> ì“°ì§€ë„ ì•ŠëŠ”ë° ì €í•œí…Œ ì™œ ì´ëŸ¬ì„¸ìš” ì§„ì§œ~â€˜ ì˜€ë‹¤. ê·¸ëŸ°ë° ì—ëŸ¬ ë¡œê·¸ë¥¼ ë”°ë¼ê°€ë³´ë‹ˆ ìœ„ì—ì„œ ì„¤ëª…í•œ ê²ƒì²˜ëŸ¼ ë‚˜ ëª°ë˜ ì‘í¼í•˜ê²Œ ë‚´ë¶€ì ìœ¼ë¡œ <code>DirectByteBuffer</code>ê°€ ì‚¬ìš©ëœë‹¤ëŠ” ê²ƒê¹Œì§€ëŠ” ì•Œê²Œ ë˜ì—ˆë‹¤. ê·¸ëŸ°ë° ë©”ëª¨ë¦¬ ë°˜ë‚©ì€? ë‚˜ ëª°ë˜ ë§Œë“¤ì—ˆìœ¼ë©´ ë‚˜ ëª°ë˜ ë°˜ë‚©ë„ í•´ì¤˜ì•¼ í•˜ëŠ” ê±° ì•„ë‹˜? ë‚œ ìª¼ë ™ í•˜ìˆ˜ì§€ë§Œ ë„Œ ì‹ ì„±í•œ JDK ì–ì•„!</p><p>ì—¬ëŸ¬ ë²ˆ í…ŒìŠ¤íŠ¸ í•´ë´¤ëŠ”ë° ëª‡ ì‹œê°„, ì‹¬ì§€ì–´ ë©°ì¹ ì´ ì§€ë‚˜ë„ ë°˜ë‚© ì•ˆ í•´ì£¼ë”ë¼.. JDKê³  ë‚˜ë°œì´ê³  ë‚˜ëŠ” ë¶„ëª…íˆ <code>HeapByteBuffer</code>ë¥¼ ì „ë‹¬í•´ì¤¬ëŠ”ë° ë‚˜ ëª°ë˜ <code>DirectByteBuffer</code>ë‘ ë°”ëŒ í”¼ìš°ê³ , ê·¸ê²ƒë„ ëª¨ìë¼ ì§€ê°€ ì“´ ì¹´ë“œê°’ê¹Œì§€ ë‚˜í•œí…Œ..</p><p><img src="https://i.imgur.com/Nejwtsv.png" alt="Imgur"></p><p>ì–´ì¨Œë“  ìƒí™©ì„ ì •ë¦¬í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><blockquote><p>ì¼ë°˜ì ìœ¼ë¡œ <code>FileChannel</code>ì— ë°ì´í„°ë¥¼ writeí•  ë•ŒëŠ” ê²°êµ­ í•­ìƒ <code>DirectByteBuffer</code>ê°€ ì‚¬ìš©ë˜ëŠ”ë°,<br><code>OutOfMemoryError: Direct buffer memory</code>ê°€ ê³„ì† ë°œìƒí•˜ëŠ” ê±¸ë¡œ ë´ì„œëŠ”,<br><code>DirectByteBuffer</code>ë¡œ ì‚¬ìš©ëœ Native ë©”ëª¨ë¦¬ê°€ ì œëŒ€ë¡œ íšŒìˆ˜ë˜ì§€ ì•ŠëŠ”(ê²ƒ ê°™)ë‹¤.</p></blockquote><p>ìë°”ì— ë‚´ê°€ ëª…ì‹œì ìœ¼ë¡œ GCë¥¼ í™•ì‹¤í•˜ê²Œ ìœ ë°œí•  ìˆ˜ ìˆëŠ” ìˆ˜ë‹¨ì´ ìˆëŠ” ê²ƒë„ ì•„ë‹Œë°.. ë§í–ˆ.. ì´ëŸ¬ë©´ <code>FileChannel</code>ì€ ëª» ì“°ëŠ” ê±´ë°.. API ë¬¸ì„œì—ë„ ë‹¤ë¥¸ ìë£Œì—ë„ ì™œ ì‹œì›í•œ í•´ë²•ì´ ì—†ì§€? ì„¤ë§ˆ ì•„ë¬´ë„ <code>FileChannel</code>ì„ ì•ˆ ì“°ëŠ” ê±´ê°€? ê·¸ëŸ´ë¦¬ê°€.. ë‚´ê°€ ì–´ë”˜ê°€ ì˜ëª» ì§  ê±°ê² ì§€..</p><p>ë³„ ìƒê°ì´ ë‹¤ ë“œëŠ” ê°€ìš´ë° ì—¬ê¸°ì„œ ëŒ€ë°˜ì „!</p><h1 id="DirectByteBuffer-ë©”ëª¨ë¦¬-íšŒìˆ˜-ë°©ë²•"><a href="#DirectByteBuffer-ë©”ëª¨ë¦¬-íšŒìˆ˜-ë°©ë²•" class="headerlink" title="DirectByteBuffer ë©”ëª¨ë¦¬ íšŒìˆ˜ ë°©ë²•"></a>DirectByteBuffer ë©”ëª¨ë¦¬ íšŒìˆ˜ ë°©ë²•</h1><p><code>DirectByteBuffer</code> ë©”ëª¨ë¦¬ëŠ”, JVMì˜ Heap ë°–ì— ìˆì–´ì„œ JVM GCê°€ ì•„ë‹Œ ë‹¤ë¥¸ ë©”ì»¤ë‹ˆì¦˜ì— ì˜í•´ íšŒìˆ˜ëœë‹¤ëŠ” ê·¸ <strong><code>DirectByteBuffer</code> ë©”ëª¨ë¦¬ëŠ”, ë†€ëê²Œë„ Java ì½”ë“œë¡œ ëª…ì‹œì ìœ¼ë¡œ ë°”ë¡œ íšŒìˆ˜í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì—ˆë‹¤.</strong> ì•„ë¬´ë¦¬ ê²€ìƒ‰í•´ë„ ì°¾ì„ ìˆ˜ê°€ ì—†ë˜ í¬ê·€í•œ ë‚´ìš©ì´ì§€ë§Œ ë°”ë¡œ ê³µìœ í•œë‹¤. ìœ„ì—ì„œ ì‚´í´ë³¸ ì½”ë“œ ì¤‘ì— ë‹µì´ ìˆì—ˆë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sun.nio.ch.Util</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ByteBuffer <span class="title">getTemporaryDirectBuffer</span><span class="params">(<span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// If a buffer of this size is too large for the cache, there</span></span><br><span class="line">        <span class="comment">// should not be a buffer in the cache that is at least as</span></span><br><span class="line">        <span class="comment">// large. So we'll just create a new one. Also, we don't have</span></span><br><span class="line">        <span class="comment">// to remove the buffer from the cache (as this method does</span></span><br><span class="line">        <span class="comment">// below) given that we won't put the new buffer in the cache.</span></span><br><span class="line">        <span class="keyword">if</span> (isBufferTooLarge(size)) &#123;</span><br><span class="line">            <span class="keyword">return</span> ByteBuffer.allocateDirect(size);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        BufferCache cache = bufferCache.get();</span><br><span class="line">        ByteBuffer buf = cache.get(size);</span><br><span class="line">        <span class="keyword">if</span> (buf != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> buf;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// No suitable buffer in the cache so we need to allocate a new</span></span><br><span class="line">            <span class="comment">// one. To avoid the cache growing then we remove the first</span></span><br><span class="line">            <span class="comment">// buffer from the cache and free it.</span></span><br><span class="line">            <span class="keyword">if</span> (!cache.isEmpty()) &#123;</span><br><span class="line">                buf = cache.removeFirst();</span><br><span class="line">                free(buf);            <span class="comment">//&lt;=== ì—¬ê¸°!!!</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ByteBuffer.allocateDirect(size);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ì—‰? <code>free(buf)</code>ê°€ ìˆë„¤? ì–´ë–»ê²Œ ìƒê²¼ë‚˜ í•œ ë²ˆ ë³¼ê¹Œ? ë¶€ì™˜ã…‹ã…‹ ëŒ€ë°•!!</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sun.nio.ch.Util</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">free</span><span class="params">(ByteBuffer buf)</span> </span>&#123;</span><br><span class="line">        ((DirectBuffer)buf).cleaner().clean();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ì‘í¼í•˜ê²Œ ë°”ëŒ í”¼ìš°ê³  ì¹´ë“œê°’ ë– ë„˜ê¸°ëŠ” <code>HeapByteBuffer</code>ì™€ ê²°ë³„(ì‚¬ì‹¤ <code>HeapByteBuffer</code>ëŠ” ì£„ê°€ ì—†ë‹¤. <code>FileChannel</code> êµ¬í˜„ë¶€ê°€ ì£„ì¸ì´ì§€)í•˜ê³  ë‚´ê°€ ê·¸ëƒ¥ <code>DirectByteBuffer</code>ì™€ ì‚¬ë‘ì— ë¹ ì§€ê¸°ë¡œ í–ˆë‹¤. ê·¸ë˜ì„œ ë‹¤ìŒê³¼ ê°™ì´ <code>HeapByteBuffer</code>ë¥¼ ì‚¬ìš©í•˜ë˜ ì½”ë“œë¥¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ByteBuffer buf1 = ByteBuffer.allocate(size);</span><br><span class="line">...</span><br><span class="line">buf1.flip();</span><br><span class="line">fileChannel.write(buf1);</span><br><span class="line">...</span><br><span class="line">ByteBuffer buf2 = ByteBuffer.wrap(byteArray);</span><br><span class="line">fileChannel.write(buf2);</span><br></pre></td></tr></table></figure><p>ë‹¤ìŒê³¼ ê°™ì´ ëª…ì‹œì ìœ¼ë¡œ <code>DirectByteBuffer</code>ë¥¼ ìƒì„±í•˜ê³  ì‚¬ìš©í•˜ê³  íšŒìˆ˜í•˜ë„ë¡ ëª¨ë‘ ë°”ê¾¸ê³ ë‚˜ë‹ˆ,</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  ByteBuffer directBuffer = ByteBuffer.allocateDirect(size);</span><br><span class="line">  ...</span><br><span class="line">  directBuffer.flip();</span><br><span class="line">  fileChannel.write(directBuffer);</span><br><span class="line">  ...</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  ((DirectBuffer)directBuffer).cleaner().clean();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ë†€ëê²Œë„ <strong><code>((DirectBuffer)directBuffer).cleaner().clean()</code>ê°€ í˜¸ì¶œëœ í›„ <code>jcmd</code>ë¡œ í™•ì¸í•´ë³´ë©´ Internal ì˜ì—­ì´ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•œ <code>DirectByteBuffer</code> í¬ê¸°ë§Œí¼ ë°”ë¡œ ì¤„ì–´ë“œëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.</strong> ê·¸ë¦¬ê³  ì˜ ë°˜ê°‘ì§€ ì•Šì€ <code>java.lang.OutOfMemoryError: Direct buffer memory</code>ë„ ë‹¤ì‹œ ë³¼ ì¼ ì—†ê²Œ ëë‹¤.</p><p>ì´ë ‡ê²Œ ê°„ë‹¨í•˜ê³  ì§ì ‘ì ì¸ í•´ê²° ë°©ë²•ì´ ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ë° ì™œ ê·¸ëŸ° ê²Œ API ë¬¸ì„œì— ì–¸ê¸‰ì¡°ì°¨ ì—†ëŠ”ì§€, ê·¸ë¦¬ê³  ê·¸ í•´ê²°ë²•ë„ ì™œ <code>public static</code>ì´ ì•„ë‹ˆë¼ <code>private static</code> ë©”ì„œë“œë¡œ ì„ ì–¸í•´ë‘” ê±´ì§€ëŠ” ì—¬ì „íˆ ì˜ë¬¸ì´ë‹¤. ì´ ì •ë„ë©´ ê±°ì˜ ì¼ë¶€ëŸ¬ ê°ì¶°ë‘” ì •ë„ ê°™ê¸°ë„ í•´ì„œ â€˜ì´ê±° ì¨ë„ ë˜ëŠ” ê±°ì•¼?â€™ë¼ëŠ” ì˜ë¬¸ì¡°ì°¨ ë“¤ ì •ë„..</p><p>ê·¸ëŸ°ë° í•œ ê°€ì§€ ê¶ê¸ˆí•œ ê²Œ ë” ìˆë‹¤.</p><p><code>HeapByteBuffer</code>ë¥¼ ì „ë‹¬í•´ì¤˜ë„ ë‚´ë¶€ì ìœ¼ë¡œ ì‘í¼í•˜ê²Œ <code>DirectByteBuffer</code>ë¥¼ ëª°ë˜ ë§Œë“œëŠ” <code>getTemporaryDirectBuffer()</code> ë‚´ë¶€ì—ì„œ, <code>DirectByteBuffer</code> ë©”ëª¨ë¦¬ë¥¼ íšŒìˆ˜í•  ìˆ˜ ìˆëŠ” <code>free()</code> ë©”ì„œë“œê°€ í˜¸ì¶œë˜ê³  ìˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ëª°ë˜ ë§Œë“¤ì–´ì§„ <code>DirectByteBuffer</code>ê°€ íšŒìˆ˜ë˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” ë­˜ê¹Œ? ì´ê±´ <code>BufferCache</code>ë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆë‹¤.</p><h1 id="BufferCache"><a href="#BufferCache" class="headerlink" title="BufferCache"></a>BufferCache</h1><p>ì½”ë“œë¥¼ ë‹¤ì‹œ ë³´ì.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sun.nio.ch.Util</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ByteBuffer <span class="title">getTemporaryDirectBuffer</span><span class="params">(<span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// If a buffer of this size is too large for the cache, there</span></span><br><span class="line">        <span class="comment">// should not be a buffer in the cache that is at least as</span></span><br><span class="line">        <span class="comment">// large. So we'll just create a new one. Also, we don't have</span></span><br><span class="line">        <span class="comment">// to remove the buffer from the cache (as this method does</span></span><br><span class="line">        <span class="comment">// below) given that we won't put the new buffer in the cache.</span></span><br><span class="line">        <span class="keyword">if</span> (isBufferTooLarge(size)) &#123;</span><br><span class="line">            <span class="keyword">return</span> ByteBuffer.allocateDirect(size);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        BufferCache cache = bufferCache.get();</span><br><span class="line">        ByteBuffer buf = cache.get(size);</span><br><span class="line">        <span class="keyword">if</span> (buf != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> buf;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// No suitable buffer in the cache so we need to allocate a new</span></span><br><span class="line">            <span class="comment">// one. To avoid the cache growing then we remove the first</span></span><br><span class="line">            <span class="comment">// buffer from the cache and free it.</span></span><br><span class="line">            <span class="keyword">if</span> (!cache.isEmpty()) &#123;</span><br><span class="line">                buf = cache.removeFirst();  <span class="comment">//&lt;=== ì—¬ê¸°!!!</span></span><br><span class="line">                free(buf);            <span class="comment">//&lt;=== ì—¬ê¸°!!!</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ByteBuffer.allocateDirect(size);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><code>BufferCache</code>ì— ë™ì¼í•œ í¬ê¸°ì˜ <code>DirectByteBuffer</code>ê°€ ìˆìœ¼ë©´ ê·¸ê±¸ ì¬ì‚¬ìš©í•˜ê³ , ì—†ìœ¼ë©´ ìºì‹œì— ìˆëŠ” ë‹¤ë¥¸ í¬ê¸°ì˜ <code>DirectByteBuffer</code>ë¥¼ <code>free()</code>ë¥¼ ì´ìš©í•´ì„œ í•˜ë‚˜ ì‚­ì œí•œë‹¤. ê·¸ë ‡ê²Œ í•´ì„œ ìºì‰¬ì˜ ì´ ê°¯ìˆ˜ê°€ ëŠ˜ì–´ë‚˜ì§€ ì•Šê²Œ í•œë‹¤. ì‹¤ì œë¡œë„ ì´ë ‡ê²Œ ì˜ ë™ì‘í•œë‹¤.</p><p>ì˜ˆë¥¼ ë“¤ì–´ í¬ê¸°ê°€ 10Më¡œ ëª¨ë‘ ê°™ì€ <code>HeapByteBuffer</code>ë¥¼ 3ê°œ ìƒì„±í•´ì„œ <code>FileChannel.write()</code>ì— ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ <code>DirectByteBuffer</code>ê°€ ìƒì„±ë˜ë¯€ë¡œ 10M ì§œë¦¬ <code>DirectByteBuffer</code> 3ê°œ, ì´ 30Mê°€ ì‚¬ìš©ë  ê²ƒ ê°™ì§€ë§Œ, ìœ„ì— ë‚˜ì˜¤ëŠ” BufferCache ë•ë¶„ì— ì‹¤ì œë¡œëŠ” 10M ì§œë¦¬ <code>DirectByteBuffer</code> í•œ ê°œë§Œ ìƒì„±ë˜ê³  ì¬ì‚¬ìš©ëœë‹¤.</p><p>ì—¬ê¸°ê¹Œì§€ëŠ” ì¢‹ì€ë° ë¬¸ì œëŠ” ë§¨ ë§ˆì§€ë§‰ ë¶€ë¶„ <code>return ByteBuffer.allocateDirect(size)</code>ì—ì„œ ìƒˆë¡œ ìƒì„±ëœ í›„ ë°˜í™˜ë˜ëŠ” <code>DirectByteBuffer</code>ëŠ” íšŒìˆ˜ë˜ì§€ ì•ŠëŠ”(ê±¸ë¡œ ë³´ì¸)ë‹¤ëŠ” ì ì´ë‹¤.</p><p><code>BufferCache</code>ëŠ” ì•„ë˜ì™€ ê°™ì´ <code>ThreadLocal</code>ì— ë‹´ê²¨ì„œ per-threadë¡œ ì¡´ì¬í•œë‹¤. </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sun.nio.ch.Util</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Per-thread cache of temporary direct buffers</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;BufferCache&gt; bufferCache =</span><br><span class="line">        <span class="keyword">new</span> ThreadLocal&lt;BufferCache&gt;()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> BufferCache <span class="title">initialValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> BufferCache();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure><p>ìœ„ì—ì„œ ê°œë°œìê°€ ëª…ì‹œì ìœ¼ë¡œ ìƒì„±í•œ <code>HeapByteBuffer</code> ëŒ€ì‹  ë‚´ë¶€ì ìœ¼ë¡œ <code>DirectByteBuffer</code>ë¥¼ ìƒì„±í•  ë•Œ ì‹¤ì œ read/write í•  ë§Œí¼ì˜ <code>DirectByteBuffer</code>ë¥¼ ìƒì„±í•œë‹¤ê³  í–ˆë‹¤. í•„ìš”í•œ ë§Œí¼ë§Œ ìƒˆë¡œ ìƒì„±í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì— ìˆì–´ì„œëŠ” ìœ ë¦¬í•˜ì§€ë§Œ, ê·¸ í•„ìš”í•œ ë§Œí¼ì´ ê·¸ë•Œê·¸ë•Œ ë‹¤ë¥¸ ìƒí™©ì—ì„œëŠ” ì§€ê¸ˆ ì‚´í´ë³¸ <code>BufferCache</code>ì˜ hitìœ¨ì´ ë–¨ì–´ì ¸ì„œ <code>DirectByteBuffer</code>ì˜ ìƒì„± ë¹ˆë„ê°€ ë§ì•„ì§ˆ ìˆ˜ ìˆë‹¤. <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html" target="_blank" rel="noopener">ByteBuffer API</a> ë¬¸ì„œì— ë”°ë¥´ë©´ <code>DirectByteBuffer</code>ëŠ” ë©”ëª¨ë¦¬ í• ë‹¹/í•´ì œ ë¹„ìš©ì´ <code>HeapByteBuffer</code>ë³´ë‹¤ ë” í¬ë‹¤ê³  í•œë‹¤. ë”°ë¼ì„œ <code>DirectByteBuffer</code> ìƒì„± ë¹ˆë„ê°€ ë§ìœ¼ë©´ ì„±ëŠ¥ì— ì•…ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤. </p><p>ì •ë¦¬í•˜ë©´, í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œì—ì„œ ì´ëŸ° ë¹„ëª…ì‹œì  ë°©ì‹(ê°œë°œìê°€ <code>HeapByteBuffer</code>ë¥¼ <code>FileChannel.write()</code>ì— ì¸ìë¡œ ì „ë‹¬í•´ì¤˜ë„ <code>FileChannelImpl</code>ì´ ë‚´ë¶€ì ìœ¼ë¡œ ëª°ë˜ <code>DirectByteBuffer</code>ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹)ìœ¼ë¡œ <code>DirectByteBuffer</code>ê°€ ìƒì„±ë˜ë©´,  </p><ul><li>í¬ê¸°ê°€ ë™ì¼í•œ <code>HeapByteBuffer</code>ë¥¼ ì—¬ëŸ¬ê°œ ë§Œë“¤ì–´ë„  </li><li><code>BufferCache</code> ë•ë¶„ì— í•´ë‹¹ ìŠ¤ë ˆë“œ ë‚´ì—ì„œëŠ” <code>DirectByteBuffer</code>ê°€ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ì§€ê³  ì¬ì‚¬ìš©ë  ìˆ˜ëŠ” ìˆì§€ë§Œ,  </li><li>ê·¸ í•œ ê°œì˜ <code>DirectByteBuffer</code>ê°€ ì œëŒ€ë¡œ íšŒìˆ˜ë˜ì§€ ì•Šìœ¼ë©´,</li><li>ìƒˆë¡œìš´ ìŠ¤ë ˆë“œê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ê³„ì† ëˆ„ì ë˜ë‹¤ê°€ ê²°êµ­ OutOfMemory ì—ëŸ¬ë¥¼ ë§ì´í•˜ê²Œ ëœë‹¤.</li></ul><h1 id="XX-MaxDirectMemorySize-ì˜µì…˜"><a href="#XX-MaxDirectMemorySize-ì˜µì…˜" class="headerlink" title="XX:MaxDirectMemorySize ì˜µì…˜"></a>XX:MaxDirectMemorySize ì˜µì…˜</h1><p><code>DirectByteBuffer</code>ê°€ ì‚¬ìš©í•˜ëŠ” Native Memory ìµœëŒ€ í¬ê¸°ë¥¼ ì§€ì •í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ì´ ìˆë‹¤. <code>XX:MaxDirectMemorySize</code>ì¸ë° <code>DirectByteBuffer</code> ë©”ëª¨ë¦¬ê°€ ì œëŒ€ë¡œ íšŒìˆ˜ë˜ì§€ ì•Šê³  ëˆ„ì ë˜ë‹¤ê°€ ìµœëŒ€ í¬ê¸°ë¥¼ ë„˜ëŠ”ë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œ?</p><ol><li>ì˜¤ë«ë™ì•ˆ ì‚¬ìš©ë˜ì§€ ì•Šê³  ë©”ëª¨ë¦¬ë§Œ ì ìœ í•˜ê³  ìˆë˜ <code>DirectByteBuffer</code>ë¥¼ ì•Œì•„ì„œ íšŒìˆ˜í•œë‹¤.</li><li><code>java.lang.OutOfMemoryError: Direct buffer memory</code>ê°€ ë°œìƒí•œë‹¤.</li></ol><p>í˜¹ì‹œ í•˜ëŠ” ë§ˆìŒì— 1ì„ ê¸°ëŒ€í–ˆëŠ”ë°, í˜„ì‹¤ì€ 2ë‹¤.</p><h1 id="ì‹¤ì œ-ê²€ì¦-ëª°ë˜-ë§Œë“¤ì–´ì§„-DirectByteBuffer-ë©”ëª¨ë¦¬ë„-íšŒìˆ˜ëœë‹¤"><a href="#ì‹¤ì œ-ê²€ì¦-ëª°ë˜-ë§Œë“¤ì–´ì§„-DirectByteBuffer-ë©”ëª¨ë¦¬ë„-íšŒìˆ˜ëœë‹¤" class="headerlink" title="ì‹¤ì œ ê²€ì¦ - ëª°ë˜ ë§Œë“¤ì–´ì§„ DirectByteBuffer ë©”ëª¨ë¦¬ë„ íšŒìˆ˜ëœë‹¤!!"></a>ì‹¤ì œ ê²€ì¦ - ëª°ë˜ ë§Œë“¤ì–´ì§„ <code>DirectByteBuffer</code> ë©”ëª¨ë¦¬ë„ íšŒìˆ˜ëœë‹¤!!</h1><p>ë‚´ê°€ ì˜ëª» ì§°ì„ ìˆ˜ë„ ìˆëŠ” ë¡œì§ê³¼ ë’¤ì„ì¸ ìƒíƒœë¡œëŠ”, ëª°ë˜ ë§Œë“¤ì–´ì§€ëŠ” <code>DirectByteBuffer</code>ê°€ í•­ìƒ íšŒìˆ˜ë˜ì§€ ì•ŠëŠ”ë‹¤ê³  í™•ì–¸ì„ í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì‹¤í—˜ìš© ê°„ë‹¨í•œ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ì„œ ê²€ì¦í•´ë´¤ë‹¤.</p><p><a href="https://github.com/HomoEfficio/scratchpad-bytebuffer" target="_blank" rel="noopener">https://github.com/HomoEfficio/scratchpad-bytebuffer</a> ë¥¼ ì°¸ê³ í•˜ë©´ ì§ì ‘ ìš”ë¦¬ì¡°ë¦¬ í•´ë³¼ ìˆ˜ ìˆë‹¤.</p><p>READMEì— ìˆëŠ”ëŒ€ë¡œ, í”„ë¡œê·¸ë¨ ì‹¤í–‰í•´ì„œ VisualVM ìœ¼ë¡œ ê°•ì œ GCë¥¼ ì‹œí‚¨ í›„ì— <code>jcmd</code>ë¡œ í™•ì¸í•´ë³´ë©´ Native Memoryê°€ íšŒìˆ˜ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.</p><p>ë”°ë¼ì„œ <strong>ëª°ë˜ ë§Œë“¤ì–´ì§„ <code>DirectByteBuffer</code>ë„ ì •ìƒì ì¸ ê²½ìš°ë¼ë©´ í•´ë‹¹ <code>DirectByteBuffer</code>ë¥¼ ì°¸ì¡°í•˜ëŠ” ê°ì²´(Aë¼ê³  í•˜ì)ê°€ GCë  ë•Œ <code>DirectByteBuffer</code> ë©”ëª¨ë¦¬ë„ í•¨ê»˜ íšŒìˆ˜ëœë‹¤.</strong> ë¼ê³  ê²°ë¡  ì§€ì„ ìˆ˜ ìˆê² ë‹¤.</p><p>í•˜ì§€ë§Œ ê·¸ë˜ë„ Aê°€ ì–¸ì œ GC ë  ì§€ ì•Œ ìˆ˜ ì—†ê³ , GC ì „ê¹Œì§€ <code>DirectByteBuffer</code>ëŠ” ê³„ì† Native Memoryë¥¼ ì ìœ í•˜ê²Œ ëœë‹¤. ì•„ë§ˆë„ ì˜ëª» ì‘ì„±í•œ ì½”ë“œ ë•Œë¬¸ì´ê² ì§€ë§Œ ì•Œ ìˆ˜ ì—†ëŠ” ì´ìœ ë¡œ Native Memory ê°€ ì¥ì‹œê°„ ê³„ì† íšŒìˆ˜ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ìš°ë¦¬ì—ê² <code>((DirectBuffer)directBuffer).cleaner().clean()</code> ë¼ëŠ” ë¬´ê¸°ê°€ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œì•„ë‘ë©´ ì¢‹ë‹¤.</p><h1 id="ë§ˆë¬´ë¦¬"><a href="#ë§ˆë¬´ë¦¬" class="headerlink" title="ë§ˆë¬´ë¦¬"></a>ë§ˆë¬´ë¦¬</h1><blockquote><ul><li><p>íŠ¹ë³„í•œ <code>FileChannel</code> êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, <code>FileChannel</code>ì— read/write í•  ë•Œ <code>HeapByteBuffer</code>ë¥¼ ì‚¬ìš©í•´ë„ ë‚´ë¶€ì ìœ¼ë¡œ <code>DirectByteBuffer</code>ê°€ ì‚¬ìš©ëœë‹¤.</p></li><li><p>ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” <code>DirectByteBuffer</code>ê°€ ì œëŒ€ë¡œ íšŒìˆ˜ë˜ì§€ ì•Šìœ¼ë©´ <code>java.lang.OutOfMemoryError: Direct buffer memory</code>ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p></li><li><p>ì´ë ‡ê²Œ <code>FileChannel</code>ì— read/write í•˜ëŠ” ì½”ë“œì— ì˜í•´ OOMì´ ë°œìƒí•œë‹¤ë©´,</p><ul><li><code>HeapByteBuffer</code>ì„ ì‚¬ìš©í•˜ì§€ ë§ê³  ëª…ì‹œì ìœ¼ë¡œ <code>DirectByteBuffer</code>ë¥¼ ì‚¬ìš©í•˜ê³ ,  </li><li><code>((DirectBuffer)directBuffer).cleaner().clean()</code>ë¥¼ ì‚¬ìš©í•´ì„œ ëª…ì‹œì ìœ¼ë¡œ í•´ì œí•˜ì.</li></ul></li></ul></blockquote><h1 id="í•¨ê»˜-ë³´ê¸°"><a href="#í•¨ê»˜-ë³´ê¸°" class="headerlink" title="í•¨ê»˜ ë³´ê¸°"></a>í•¨ê»˜ ë³´ê¸°</h1><ul><li><a href="https://homoefficio.github.io/2016/08/06/Java-NIOëŠ”-ìƒê°ë§Œí¼-non-blocking-í•˜ì§€-ì•Šë‹¤/">Java NIOëŠ” ìƒê°ë§Œí¼ non-blocking í•˜ì§€ ì•Šë‹¤</a></li><li><a href="https://homoefficio.github.io/2019/02/27/Java-NIO-Direct-Bufferë¥¼-ì´ìš©í•´ì„œ-ëŒ€ìš©ëŸ‰-íŒŒì¼-í–‰-ê¸°ì¤€ìœ¼ë¡œ-ìª¼ê°œê¸°/">Java NIO Direct Bufferë¥¼ ì´ìš©í•´ì„œ ëŒ€ìš©ëŸ‰ íŒŒì¼ í–‰ ê¸°ì¤€ìœ¼ë¡œ ìª¼ê°œê¸°</a></li><li><a href="https://homoefficio.github.io/2016/08/13/ëŒ€ìš©ëŸ‰-íŒŒì¼ì„-AsynchronousFileChannelë¡œ-ë‹¤ë¤„ë³´ê¸°/">ëŒ€ìš©ëŸ‰ íŒŒì¼ì„ AsynchronousFileChannelë¡œ ë‹¤ë¤„ë³´ê¸°</a></li><li><a href="https://homoefficio.github.io/2020/04/09/Java-Native-Memory-Tracking/">Java Native Memory Tracking</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Java 4ì—ì„œ ë„ì…ëœ NIO ë•ë¶„ì— &lt;code&gt;FileChannel&lt;/code&gt;ê³¼ &lt;code&gt;ByteBuffer&lt;/code&gt;ë¥¼ ì´ìš©í•´ì„œ File I/O ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ëë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.imgur.com
      
    
    </summary>
    
      <category term="Technique" scheme="http://homoefficio.github.io/categories/Technique/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="Native Memory" scheme="http://homoefficio.github.io/tags/Native-Memory/"/>
    
      <category term="DirectBuffer" scheme="http://homoefficio.github.io/tags/DirectBuffer/"/>
    
      <category term="jcmd" scheme="http://homoefficio.github.io/tags/jcmd/"/>
    
      <category term="NIO" scheme="http://homoefficio.github.io/tags/NIO/"/>
    
      <category term="FileChannel" scheme="http://homoefficio.github.io/tags/FileChannel/"/>
    
      <category term="ByteBuffer" scheme="http://homoefficio.github.io/tags/ByteBuffer/"/>
    
      <category term="HeapByteBuffer" scheme="http://homoefficio.github.io/tags/HeapByteBuffer/"/>
    
      <category term="DirectByteBuffer" scheme="http://homoefficio.github.io/tags/DirectByteBuffer/"/>
    
      <category term="Garbage Collection" scheme="http://homoefficio.github.io/tags/Garbage-Collection/"/>
    
      <category term="OutOfMemoryError" scheme="http://homoefficio.github.io/tags/OutOfMemoryError/"/>
    
      <category term="Direct buffer memory" scheme="http://homoefficio.github.io/tags/Direct-buffer-memory/"/>
    
      <category term="BufferCache" scheme="http://homoefficio.github.io/tags/BufferCache/"/>
    
  </entry>
  
  <entry>
    <title>Spring WebFlux RequestBody</title>
    <link href="http://homoefficio.github.io/2020/08/06/Spring-WebFlux-RequestBody/"/>
    <id>http://homoefficio.github.io/2020/08/06/Spring-WebFlux-RequestBody/</id>
    <published>2020-08-05T15:54:34.000Z</published>
    <updated>2020-08-10T14:58:53.030Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Spring-WebFlux-RequestBody-Raw-vs-Mono"><a href="#Spring-WebFlux-RequestBody-Raw-vs-Mono" class="headerlink" title="Spring WebFlux RequestBody - Raw vs Mono"></a>Spring WebFlux RequestBody - Raw vs Mono</h1><p>WebFlux ì‚¬ìš© ì‹œ Controller ë‹¨ì—ì„œ <code>RequestBody</code> ë¥¼ ì¸ìë¡œ ë°›ì„ ë•Œ,</p><p>ë‹¤ìŒê³¼ ê°™ì´ <code>Mono</code>ë¥¼ ë°›ì•„ì˜¤ë„ë¡ ì‘ì„±í•´ì•¼í• ê¹Œ?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/mono"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Mono&lt;SellerOut&gt; <span class="title">createWithMono</span><span class="params">(@RequestBody Mono&lt;SellerIn&gt; sellerIn)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sellerService.createWithMono(sellerIn);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì•„ë‹ˆë©´ ê·¸ëƒ¥ Raw ê°ì²´ë¥¼ ë°›ì•„ì˜¤ë„ë¡ ì‘ì„±í•´ì•¼í• ê¹Œ?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/entity"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Mono&lt;SellerOut&gt; <span class="title">createWithRaw</span><span class="params">(@RequestBody SellerIn sellerIn)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sellerService.createWithRaw(sellerIn);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>non-blocking ë“œë¼ì´ë²„ë¥¼ ì œê³µí•´ì£¼ëŠ” MongoDBë¥¼ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•˜ê³  ì‚¬ìš©ì„±ê³¼ ì„±ëŠ¥ ê´€ì ì—ì„œ ì‚´í´ë³´ì.</p><h2 id="ì‚¬ìš©ì„±"><a href="#ì‚¬ìš©ì„±" class="headerlink" title="ì‚¬ìš©ì„±"></a>ì‚¬ìš©ì„±</h2><p>ì»¨íŠ¸ë¡¤ëŸ¬ ë‹¨ì—ì„œëŠ” ìœ„ì—ì„œ ë³´ëŠ” ê²ƒì²˜ëŸ¼ í° ì°¨ì´ê°€ ì—†ë‹¤. ì„œë¹„ìŠ¤ê°€ í˜¸ì¶œí•˜ëŠ” ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ(Data Access Layer)ì—ì„œ ì‘ì§€ë§Œ í° ì°¨ì´ê°€ ë°œìƒí•œë‹¤.</p><h3 id="ReactiveCrudRepository"><a href="#ReactiveCrudRepository" class="headerlink" title="ReactiveCrudRepository"></a>ReactiveCrudRepository</h3><p>ìŠ¤í”„ë§ WebFlux í™˜ê²½ì—ì„œë„ ì‚¬ìš©í•˜ê¸° ì‰½ê²Œ ì¶”ìƒí™” ëœ <code>ReactiveCrudRepository</code>ë¥¼ í†µí•´ ì‰½ê²Œ ë°ì´í„° ì €ì¥ì†Œì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. MongoDB ìš©ìœ¼ë¡œ íŠ¹í™”ëœ <code>ReactiveMongoRepository</code>ë¥¼ ì‚¬ìš©í•˜ë©´ Spring Data ì—ì„œ ì œê³µí•´ì£¼ëŠ” í¸ë¦¬í•œ <a href="https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#mongodb.repositories.queries" target="_blank" rel="noopener">ë©”ì„œë“œ ì´ë¦„ ì¡°í•© ë°©ì‹</a>ì„ WebFluxì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ì‚¬ìš©ì„±ê³¼ ìƒì‚°ì„±ì„ ë†’ì—¬ì£¼ëŠ” ë° í° ì—­í• ì„ í•œë‹¤.</p><p>ê·¸ëŸ°ë° ì—”í‹°í‹°ë¥¼ ì €ì¥í•  ë•Œ ì‚¬ìš©ë˜ëŠ” <code>save()</code> ë©”ì„œë“œëŠ” ë‹¤ìŒê³¼ ê°™ì´ Monoê°€ ì•„ë‹ˆë¼ Raw ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì •ì˜ë¼ ìˆë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NoRepositoryBean</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ReactiveCrudRepository</span>&lt;<span class="title">T</span>, <span class="title">ID</span>&gt; <span class="keyword">extends</span> <span class="title">Repository</span>&lt;<span class="title">T</span>, <span class="title">ID</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Saves a given entity. Use the returned instance for further operations as the save operation might have changed the</span></span><br><span class="line"><span class="comment">   * entity instance completely.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> entity must not be &#123;<span class="doctag">@literal</span> null&#125;.</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> &#123;<span class="doctag">@link</span> Mono&#125; emitting the saved entity.</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@throws</span> IllegalArgumentException in case the given &#123;<span class="doctag">@literal</span> entity&#125; is &#123;<span class="doctag">@literal</span> null&#125;.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  &lt;S extends T&gt; <span class="function">Mono&lt;S&gt; <span class="title">save</span><span class="params">(S entity)</span></span>;  <span class="comment">// Monoê°€ ì•„ë‹ˆë¼ ê± S</span></span><br></pre></td></tr></table></figure><p>ê·¸ë˜ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ ë‹¨ì—ì„œ <code>RequestBody</code>ë¥¼ <code>Mono</code>ë¡œ ë°›ì•„ì˜¤ë„ë¡ ë§Œë“¤ë©´ <code>save()</code> í˜¸ì¶œ ì „ì— <code>block()</code> ê°™ì€ ê²ƒì„ í˜¸ì¶œí•´ì„œ <code>Mono</code>ì—ì„œ Raw ê°ì²´ë¥¼ êº¼ë‚´ì„œ <code>save()</code>ì— ì „ë‹¬í•´ì¤˜ì•¼ í•œë‹¤. ëŒ€ëµ ì´ëŸ° ì‹ì´ ëœë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sellerRepository.save(sellerIn.block().toEntity());</span><br></pre></td></tr></table></figure><p>ì“°ê¸°ë„ ì•ˆ ì¢‹ê³  ë³´ê¸°ë„ ì•ˆ ì¢‹ê³  ë¬´ì—‡ë³´ë‹¤ ì¤‘ê°„ì— <code>block()</code>ì„ í˜¸ì¶œí•˜ë¯€ë¡œ <code>Mono</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ë¯¸ê°€ í‡´ìƒ‰ëœë‹¤.</p><p>ì •ë¦¬í•˜ë©´ ê²°êµ­,</p><blockquote><p><strong><code>RequestBody</code>ë¥¼ <code>Mono</code>ë¡œ ë°›ì•„ì˜¤ë©´ <code>ReactiveCrudRepository</code>ë‘ ê¶í•©ì´ ë³„ë¡œë‹¤</strong></p></blockquote><h3 id="ReactiveMongoTemplate"><a href="#ReactiveMongoTemplate" class="headerlink" title="ReactiveMongoTemplate"></a>ReactiveMongoTemplate</h3><p><code>ReactiveMongoTemplate</code>ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ <code>Mono</code> íƒ€ì…ê³¼ Raw ê°ì²´ ëª¨ë‘ ì‚¬ìš©í•´ì„œ ì €ì¥í•  ìˆ˜ ìˆëŠ” APIë¥¼ ì œê³µí•´ì¤€ë‹¤. ë”°ë¼ì„œ ì €ì¥ì€ ì‚¬ìš©ì„±ì— í° ì°¨ì´ê°€ ì—†ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">Mono&lt;T&gt; <span class="title">save</span><span class="params">(Mono&lt;? extends T&gt; objectToSave)</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">Mono&lt;T&gt; <span class="title">save</span><span class="params">(Mono&lt;? extends T&gt; objectToSave, String collectionName)</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">Mono&lt;T&gt; <span class="title">save</span><span class="params">(T objectToSave)</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">Mono&lt;T&gt; <span class="title">save</span><span class="params">(T objectToSave, String collectionName)</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>í•˜ì§€ë§Œ <code>ReactiveMongoTemplate</code>ë¥¼ ì‚¬ìš©í•´ì„œ ì¡°íšŒí•  ë•Œ ë©”ì„œë“œ ì´ë¦„ ì¡°í•© ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ì•„ë˜ì— ë³´ëŠ” ê²ƒì²˜ëŸ¼ <code>Query</code>ë¥¼ ì „ë‹¬í•´ì¤˜ì•¼ í•˜ë¯€ë¡œ ì•„ë¬´ë˜ë„ <code>ReactiveCrudRepository</code> ë³´ë‹¤ëŠ” ì‚¬ìš©ì„±ì´ ë–¨ì–´ì§„ë‹¤ê³  í•  ìˆ˜ ìˆê² ë‹¤.</p><p><img src="https://i.imgur.com/eogpnac.png" alt="Imgur"></p><blockquote><p><strong><code>RequestBody</code>ë¥¼ <code>Mono</code>ë¡œ ë°›ì•„ì˜¤ë©´ <code>ReactiveMongoTemplate</code>ë¥¼ ì‚¬ìš©í•˜ë©´ ë˜ì§€ë§Œ, ì¡°íšŒí•  ë•Œ <code>ReactiveCrudRepository</code>ë³´ë‹¤ëŠ” ë¶ˆí¸í•˜ë‹¤</strong></p></blockquote><h2 id="ì„±ëŠ¥"><a href="#ì„±ëŠ¥" class="headerlink" title="ì„±ëŠ¥"></a>ì„±ëŠ¥</h2><p>ì²˜ìŒì—ëŠ” ì˜ˆì „ Servlet ê´€ì ìœ¼ë¡œ ìƒê°ì„ í•´ì„œ <code>RequestBody</code>ë¥¼ <code>Mono</code>ë¡œ ë°›ì•„ì˜¨ë‹¤ í•˜ë”ë¼ë„ ê²°êµ­ì€ ì´ë¯¸ Requestì—ì„œ ì¶”ì¶œí•´ì„œ ë§Œë“¤ì–´ì§„ Raw ê°ì²´ë¥¼ <code>Mono</code>ë¡œ wrapping í•´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì— ë„£ì–´ì£¼ëŠ” ê²ƒì¼ ê±°ë¼ ìƒê°í–ˆëŠ”ë° ê·¸ë ‡ì§€ëŠ” ì•Šì€ ê²ƒ ê°™ë‹¤.</p><p>WebFluxì—ì„œëŠ” <code>HttpServletRequest</code>ê°€ ì•„ë‹ˆë¼ reactive ë°©ì‹ì˜ <code>ServerHttpRequest</code>ë¥¼ ì‚¬ìš©í•œë‹¤. ë”°ë¼ì„œ Servlet ì—ì„œì™€ëŠ” ë‹¤ë¥´ê²Œ <code>RequestBody</code>ë¥¼ <code>Mono</code>ë¡œ ë°›ì•„ì˜¤ë©´ Raw ê°ì²´ë¥¼ ë°›ì•„ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ëŠ” ë‹¤ë¥´ê²Œ ì •ë§ë¡œ reactiveí•œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•  ìˆ˜ë„ ìˆê² ë‹¤.</p><p>reactive ë°©ì‹ì€ ì²˜ë¦¬ ì†ë„ë³´ë‹¤ëŠ” ìì› ì‚¬ìš© ê´€ì ì—ì„œì˜ íš¨ìœ¨ì„±ì„ ë†’ì´ëŠ” ë°©ì‹ì´ë¯€ë¡œ ì‘ë‹µ ì†ë„ë¡œ ë¹„êµí•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ì²˜ë¦¬ëŸ‰ìœ¼ë¡œ ë¹„êµí•˜ëŠ” ê²ƒì´ í•©ë‹¹í•  ê²ƒ ê°™ë‹¤. k6(<a href="https://k6.io/" target="_blank" rel="noopener">https://k6.io/</a>) ë¡œ ê°€ìƒì‚¬ìš©ì 100 ìœ¼ë¡œ 10ì´ˆê°„ 3íšŒ ëŒë¦° ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. ê·¸ë¦¼ ìœ„ìª½ì´ Raw ë°©ì‹, ì•„ë˜ìª½ì´ <code>Mono</code> ë°©ì‹ì´ë‹¤. <code>http_reqs</code> í•­ëª©ìœ¼ë¡œ ë¹„êµí•´ë³´ë©´ ë‘ ë°©ì‹ì—ì„œ ì˜ë¯¸ìˆëŠ” í° ì°¨ì´ëŠ” ì—†ëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.</p><p><img src="https://i.imgur.com/R3fX3fg.png" alt="Imgur"></p><p><img src="https://i.imgur.com/M8cYsQ1.png" alt="Imgur"></p><p><img src="https://i.imgur.com/VhCeVTk.png" alt="Imgur"></p><h2 id="ì„ Rawí›„Mono-ì•„ë‹ˆë©´-ì„ Monoí›„Raw"><a href="#ì„ Rawí›„Mono-ì•„ë‹ˆë©´-ì„ Monoí›„Raw" class="headerlink" title="ì„ Rawí›„Mono? ì•„ë‹ˆë©´ ì„ Monoí›„Raw?"></a>ì„ Rawí›„Mono? ì•„ë‹ˆë©´ ì„ Monoí›„Raw?</h2><p>Requestì—ì„œ ë¨¼ì € Raw ê°€ ì¶”ì¶œëœ í›„ì— Monoë¡œ ê°ì‹¸ì ¸ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì „ë‹¬ë˜ëŠ” ê±¸ê¹Œ? ì•„ë‹ˆë©´ Requestì—ì„œë¶€í„° ê³„ì† Mono(ë˜ëŠ” Flux)ì¸ ì±„ë¡œ ìˆë‹¤ê°€ ë‚˜ì¤‘ì— Rawê°€ ì¶”ì¶œë˜ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì „ë‹¬ë˜ëŠ” ê±¸ê¹Œ?</p><p>Stackì„ ë’¤ì ¸ë³¸ ê²°ê³¼ ë¶„ê¸° ì§€ì ì€ ì•„ë˜ì™€ ê°™ìŒì„ í™•ì¸í–ˆë‹¤. í•˜ì§€ë§Œ ì—¬ê¸°ì—ì„œ ìœ„ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µì„ ë°”ë¡œ ì–»ì„ ìˆ˜ëŠ” ì—†ì—ˆë‹¤.</p><p><img src="https://i.imgur.com/L6TuAEE.png" alt="Imgur"></p><p>ì¡°ê¸ˆ ë” ì‚´í´ë³¸ ê²°ê³¼ ì•„ë˜ ê·¸ë¦¼ ë‹¨ê³„ê¹Œì§€ëŠ” nettyì˜ <code>NettyDataBuffer</code>ë¡œ ì¡´ì¬í•˜ë‹¤ê°€,</p><p><img src="https://i.imgur.com/RNY24EO.png" alt="Imgur"></p><p>ì•„ë˜ ê·¸ë¦¼ ë‹¨ê³„ì—ì„œ ì²˜ìŒìœ¼ë¡œ Raw ê°’ì´ í™•ì¸ëœë‹¤.</p><p><img src="https://i.imgur.com/enkERzn.png" alt="Imgur"></p><p>ì„ Rawí›„Mono ì¸ì§€ ì„ Monoí›„Raw ì¸ì§€ëŠ” ì•„ì‰½ê²Œë„ ëª…í™•í•˜ê²Œ ì•Œì•„ë‚´ì§€ ëª» í–ˆë‹¤. ë” ì‹œê°„ì„ ë“¤ì´ë©´ ì•Œì•„ë‚¼ ê°€ëŠ¥ì„±ë„ ìˆì§€ë§Œ ì¼ë‹¨ì€ ì„±ëŠ¥ ìƒ ì–´ëŠ ìª½ì´ë“  í° ì°¨ì´ê°€ ì—†ì–´ ë³´ì´ë¯€ë¡œ ì´ ì •ë„ì—ì„œ ë§ˆë¬´ë¦¬í•œë‹¤.</p><h2 id="ë§ˆë¬´ë¦¬"><a href="#ë§ˆë¬´ë¦¬" class="headerlink" title="ë§ˆë¬´ë¦¬"></a>ë§ˆë¬´ë¦¬</h2><p>WebFlux ì‚¬ìš© ì‹œ Controller ë‹¨ì—ì„œ <code>RequestBody</code> ë¥¼ ì¸ìë¡œ ë°›ì„ ë•Œ,</p><blockquote><ul><li><p><code>Mono</code>ë¥¼ ë°›ì•„ì˜¤ë„ë¡ ì‘ì„±í•˜ë©´ <code>ReactiveCrudRepository</code>ë¥¼ ì‚¬ìš©í•˜ê¸° ë¶ˆí¸í•´ì§€ê³ ,<br>Raw ê°ì²´ë¥¼ ë°›ì•„ì˜¤ë„ë¡ ì‘ì„±í•˜ë©´ <code>ReactiveCrudRepository</code>ë¥¼ í¸í•˜ê²Œ ì“¸ ìˆ˜ ìˆë‹¤.</p></li><li><p><code>Mono</code>ë¡œ ë°›ì•„ì˜¤ë“  Raw ê°ì²´ë¡œ ë°›ì•„ì˜¤ë“  ì•„ì£¼ íŠ¹ìˆ˜í•œ ìƒí™©ì´ ì•„ë‹ˆë¼ë©´ ì„±ëŠ¥ ìƒ ë‘˜ ì¤‘ ì–´ëŠ í•œ ìª½ì´ í›¨ì”¬ ìœ ë¦¬í•˜ë‹¤ê³  í•  ìˆ˜ëŠ” ì—†ì„ ê²ƒ ê°™ë‹¤.</p></li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Spring-WebFlux-RequestBody-Raw-vs-Mono&quot;&gt;&lt;a href=&quot;#Spring-WebFlux-RequestBody-Raw-vs-Mono&quot; class=&quot;headerlink&quot; title=&quot;Spring WebFlux R
      
    
    </summary>
    
      <category term="Technique" scheme="http://homoefficio.github.io/categories/Technique/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="Performance" scheme="http://homoefficio.github.io/tags/Performance/"/>
    
      <category term="Spring" scheme="http://homoefficio.github.io/tags/Spring/"/>
    
      <category term="Reactor" scheme="http://homoefficio.github.io/tags/Reactor/"/>
    
      <category term="Reactive" scheme="http://homoefficio.github.io/tags/Reactive/"/>
    
      <category term="WebFlux" scheme="http://homoefficio.github.io/tags/WebFlux/"/>
    
      <category term="RequestBody" scheme="http://homoefficio.github.io/tags/RequestBody/"/>
    
      <category term="Mono" scheme="http://homoefficio.github.io/tags/Mono/"/>
    
      <category term="K6" scheme="http://homoefficio.github.io/tags/K6/"/>
    
      <category term="ReactiveCrudRepository" scheme="http://homoefficio.github.io/tags/ReactiveCrudRepository/"/>
    
      <category term="ReactiveMongoTemplate" scheme="http://homoefficio.github.io/tags/ReactiveMongoTemplate/"/>
    
  </entry>
  
  <entry>
    <title>JPA í•„ìš”í•œ ê²ƒë§Œ ì¡°íšŒí•˜ì</title>
    <link href="http://homoefficio.github.io/2020/07/23/JPA-%ED%95%84%EC%9A%94%ED%95%9C-%EA%B2%83%EB%A7%8C-%EC%A1%B0%ED%9A%8C%ED%95%98%EC%9E%90/"/>
    <id>http://homoefficio.github.io/2020/07/23/JPA-í•„ìš”í•œ-ê²ƒë§Œ-ì¡°íšŒí•˜ì/</id>
    <published>2020-07-23T06:57:12.000Z</published>
    <updated>2020-07-23T11:08:08.367Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JPA-í•„ìš”í•œ-ê²ƒë§Œ-ì¡°íšŒí•˜ì"><a href="#JPA-í•„ìš”í•œ-ê²ƒë§Œ-ì¡°íšŒí•˜ì" class="headerlink" title="JPA í•„ìš”í•œ ê²ƒë§Œ ì¡°íšŒí•˜ì"></a>JPA í•„ìš”í•œ ê²ƒë§Œ ì¡°íšŒí•˜ì</h1><p>JPA ëŠ” í¸ë¦¬í•˜ì§€ë§Œ í¸ë¦¬í•¨ ë’¤ì— ìˆ¨ì–´ìˆëŠ” ì„±ëŠ¥ ì†ì‹¤ ìœ„í—˜ì´ ìˆë‹¤. ì´ê±´ JPAê°€ ê·¸ ìì²´ë¡œ ì„±ëŠ¥ ìƒ ë¶ˆë¦¬í•˜ë‹¤ëŠ” ì–˜ê¸°ê°€ ì•„ë‹ˆë¼, í¸í•˜ê²Œë§Œ ì“°ë‹¤ë³´ë©´ ì˜ëª» ì“°ëŠ” ê¸¸ë¡œ ë¹ ì ¸ì„œ ì„±ëŠ¥ì— í•´ë¥¼ ë¼ì¹  ìœ„í—˜ë„ ê½¤ ìˆë‹¤ëŠ” ì–˜ê¸°ë‹¤.</p><p>ì—¬ëŸ¬ê°€ì§€ ì›ì¹™ì´ ìˆê² ì§€ë§Œ, ì´ë²ˆì— ê¸°ì–µí•´ë‘¬ì•¼ í•  ì›ì¹™ì€ <strong>JPAëŠ” í•„ìš”í•œ ê²ƒë§Œ ì¡°íšŒí•˜ì</strong></p><h2 id="ì—”í‹°í‹°"><a href="#ì—”í‹°í‹°" class="headerlink" title="ì—”í‹°í‹°"></a>ì—”í‹°í‹°</h2><p>ì•„ë˜ëŠ” ì–´ë–¤ ì¹´í…Œê³ ë¦¬ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì—”í‹°í‹°ë‹¤. ì¹´í…Œê³ ë¦¬ëŠ” ë³´í†µ í•˜ìœ„ì— ë™ì¼í•œ íƒ€ì…ì˜ ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ë¥¼ ìì‹ìœ¼ë¡œ ê°€ì§€ê³  ìˆê³ , ìƒìœ„ì—ë„ ë™ì¼í•œ íƒ€ì…ì˜ ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ë¥¼ ë¶€ëª¨ë¡œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. <code>parent_category_id</code> ì»¬ëŸ¼ì—ëŠ” ì¸ë±ìŠ¤ê°€ ê±¸ë ¤ìˆê³ , ë°ì´í„°ëŠ” ì•½ 54,000ê±´ ìˆë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZZZCategory</span> <span class="keyword">extends</span> <span class="title">BaseEntity</span> <span class="keyword">implements</span> <span class="title">TreeEntity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">    <span class="meta">@JoinColumn</span>(name = <span class="string">"parent_category_id"</span>)</span><br><span class="line">    <span class="keyword">private</span> ZZZCategory parentCategory;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OneToMany</span>(mappedBy = <span class="string">"parentCategory"</span>, cascade = CascadeType.PERSIST)</span><br><span class="line">    <span class="keyword">private</span> List&lt;ZZZCategory&gt; childCategories = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OneToMany</span>(mappedBy = <span class="string">"ZZZCategory"</span>, cascade = CascadeType.PERSIST)</span><br><span class="line">    <span class="keyword">private</span> List&lt;ZZZ&gt; ZZZs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="í˜„ì¬-ì¡°íšŒ-ë©”ì„œë“œ"><a href="#í˜„ì¬-ì¡°íšŒ-ë©”ì„œë“œ" class="headerlink" title="í˜„ì¬ ì¡°íšŒ ë©”ì„œë“œ"></a>í˜„ì¬ ì¡°íšŒ ë©”ì„œë“œ</h2><p>ì—¬ëŸ¬ ê°œì˜ ì¹´í…Œê³ ë¦¬IDê°€ ì£¼ì–´ì§€ë©´ ì£¼ì–´ì§„ ì¹´í…Œê³ ë¦¬IDë“¤ê³¼ ê·¸ë“¤ì˜ í•˜ìœ„ ì¹´í…Œê³ ë¦¬IDë¥¼ ëª¨ë‘ ê°€ì ¸ì˜¤ëŠ” ë¡œì§ì´ í•„ìš”í•œë° ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„ë¼ ìˆë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Set&lt;Long&gt; <span class="title">getAllZZZCategoryIdsIncludingDescendants</span><span class="params">(Set&lt;Long&gt; ZZZCategoryIds)</span> </span>&#123;</span><br><span class="line">    List&lt;ZZZCategory&gt; ZZZCategories = ZZZCategoryRepository.findAll(ZZZCategoryIds);</span><br><span class="line">    Set&lt;Long&gt; ids = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    ids.addAll(ZZZCategoryIds);</span><br><span class="line">    ids.addAll(getChildIds(ZZZCategories));</span><br><span class="line">    <span class="keyword">return</span> ids;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Set&lt;Long&gt; <span class="title">getChildIds</span><span class="params">(List&lt;ZZZCategory&gt; ZZZCategories)</span> </span>&#123;</span><br><span class="line">    Set&lt;Long&gt; ids = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (ZZZCategories == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> ids;</span><br><span class="line"></span><br><span class="line">    ids.addAll(ZZZCategories.stream().map(ZZZCategory::getId).collect(toList()));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (ZZZCategory category : ZZZCategories) &#123;</span><br><span class="line">        List&lt;ZZZCategory&gt; children = ZZZCategoryRepository.findWithFetchedChildren(category.getId()).getChildCategories();</span><br><span class="line">        ids.addAll(getChildIds(children));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ids;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì „ì²´ ì•½ 5.4ë§Œê±´ì—ì„œ 21ê°œì˜ IDë¡œ ê·¸ í•˜ìœ„ IDë¥¼ ëª¨ë‘ ì¡°íšŒí•˜ë‹ˆ ì•½ 4.8ë§Œê±´ì´ ì¡°íšŒëœë‹¤. ì†Œìš” ì‹œê°„ì€ 200ì´ˆ ë‚´ì™¸ë‹¤.</p><p>íŠ¹ë³„í•  ê±´ ì—†ì§€ë§Œ í•„ìš”í•œ ê±´ ID ë¿ì¸ë°, í¸í•œ ë§›ì— <code>ZZZCategoryRepository.findAll(ZZZCategoryIds)</code>ë¥¼ ì‚¬ìš©í•´ì„œ ì¹´í…Œê³ ë¦¬ í†µì§¸ì˜ ëª©ë¡ì„ ì½ì–´ì™€ì„œ ID ë¥¼ ì¶”ì¶œí•˜ëŠ” ë°©ì‹ì´ë¼ëŠ” ê²Œ ëˆˆì— ì‚´ì§ ê±°ìŠ¬ë¦°ë‹¤. ì´ê±¸ ê°œì„ í•´ë³´ì.</p><h2 id="ê°œì„ -í›„-ì¡°íšŒ-ë©”ì„œë“œ"><a href="#ê°œì„ -í›„-ì¡°íšŒ-ë©”ì„œë“œ" class="headerlink" title="ê°œì„  í›„ ì¡°íšŒ ë©”ì„œë“œ"></a>ê°œì„  í›„ ì¡°íšŒ ë©”ì„œë“œ</h2><p>ZZZCategory ì—”í‹°í‹° í†µì§¸ë¡œ ì¡°íšŒí•˜ì§€ ì•Šê³  IDë§Œ ì¡°íšŒí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°”ê¿¨ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Set&lt;Long&gt; <span class="title">getAllZZZCategoryIdsIncludingDescendants</span><span class="params">(Set&lt;Long&gt; ZZZCategoryIds)</span> </span>&#123;</span><br><span class="line">    Set&lt;Long&gt; ids = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    ids.addAll(ZZZCategoryIds);</span><br><span class="line">    ids.addAll(getChildIds(ZZZCategoryIds));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ids;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IDë¥¼ ì¸ìë¡œ ë°›ë„ë¡ ë³€ê²½</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Set&lt;Long&gt; <span class="title">getChildIds</span><span class="params">(Set&lt;Long&gt; ZZZCategoryIds)</span> </span>&#123;</span><br><span class="line">    Set&lt;Long&gt; ids = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (ZZZCategoryIds == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> ids;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ids.addAll(ZZZCategoryIds);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (Long ZZZCategoryId : ZZZCategoryIds) &#123;</span><br><span class="line">        <span class="comment">// ID ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œë¡œ ëŒ€ì²´</span></span><br><span class="line">        List&lt;Long&gt; childCategoryIds = ZZZCategoryRepository.findChildCategoryIds(ZZZCategoryId);</span><br><span class="line">        ids.addAll(getChildIds(<span class="keyword">new</span> HashSet&lt;&gt;(childCategoryIds)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ids;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì—”í‹°í‹°ë¥¼ í†µì§¸ë¡œ ê°€ì ¸ì˜¤ëŠ” <code>ZZZCategoryRepository.findAll(ZZZCategoryIds)</code> ëŒ€ì‹ ì— IDë§Œ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œë¥¼ QueryDSLë¡œ êµ¬í˜„í•´ì„œ ëŒ€ì‹  ì‚¬ìš©í–ˆë‹¤. ì•ì—ì„œ ì–˜ê¸°í•œ ê²ƒì²˜ëŸ¼ <code>parent_category_id</code>ì—ëŠ” ì¸ë±ìŠ¤ê°€ ê±¸ë ¤ ìˆìœ¼ë¯€ë¡œ ì¡°íšŒ íš¨ìœ¨ì´ ê´œì°®ì„ ê²ƒì´ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Long&gt; <span class="title">findChildCategoryIds</span><span class="params">(Long parentId)</span> </span>&#123;</span><br><span class="line">    QZZZCategory zzzCategory = QZZZCategory.zzzCategory;</span><br><span class="line">    <span class="keyword">return</span> from(zzzCategory)</span><br><span class="line">            .where(zzzCategory.parentCategory.id.eq(parentId))</span><br><span class="line">            .select(zzzCategory.id)</span><br><span class="line">            .fetch();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ê°œì„  í›„ ì‹¤í–‰í•´ë³´ë‹ˆ ë˜‘ê°™ì€ ì¡°íšŒë¥¼ ìˆ˜í–‰í•˜ëŠ”ë° ì†Œìš” ì‹œê°„ì´ <strong>200ì´ˆ ë‚´ì™¸ì—ì„œ 25ì´ˆ ë‚´ì™¸ë¡œ ê°œì„ ë˜ì–´ ì•½ 8ë°° ì •ë„ ë¹¨ë¼ì¡Œë‹¤.</strong></p><p>ì‚¬ì‹¤ ìœ„ ì—”í‹°í‹° ì½”ë“œëŠ” ê°„ë‹¨í•œ ì„¤ëª…ì„ ìœ„í•´ ì‹¤ì œë³´ë‹¤ ì¶•ì•½í•œ í˜•íƒœë¼ì„œ ìœ„ ì½”ë“œë§Œìœ¼ë¡œëŠ” 8ë°° ê¹Œì§€ ê°œì„ ë˜ì§€ëŠ” ì•Šì„ ìˆ˜ë„ ìˆë‹¤.</p><p>ì—¬íŠ¼ ì¤‘ìš”í•œ ê²ƒì€ <strong>JPAë¥¼ ì“¸ ë•ŒëŠ” í¸í•˜ë‹¤ê³  ì—”í‹°í‹°ë¥¼ í†µì§¸ë¡œ ë‹¤ ì½ì–´ë“¤ì´ì§€ ë§ê³ , ì¡°ê¸ˆ ì†ì´ ê°€ë”ë¼ë„ í•„ìš”í•œ ê²ƒë§Œ ê³¨ë¼ì„œ ì¡°íšŒí•˜ì.</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;JPA-í•„ìš”í•œ-ê²ƒë§Œ-ì¡°íšŒí•˜ì&quot;&gt;&lt;a href=&quot;#JPA-í•„ìš”í•œ-ê²ƒë§Œ-ì¡°íšŒí•˜ì&quot; class=&quot;headerlink&quot; title=&quot;JPA í•„ìš”í•œ ê²ƒë§Œ ì¡°íšŒí•˜ì&quot;&gt;&lt;/a&gt;JPA í•„ìš”í•œ ê²ƒë§Œ ì¡°íšŒí•˜ì&lt;/h1&gt;&lt;p&gt;JPA ëŠ” í¸ë¦¬í•˜ì§€ë§Œ í¸ë¦¬í•¨ ë’¤ì—
      
    
    </summary>
    
      <category term="Technique" scheme="http://homoefficio.github.io/categories/Technique/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="JPA" scheme="http://homoefficio.github.io/tags/JPA/"/>
    
      <category term="QueryDSL" scheme="http://homoefficio.github.io/tags/QueryDSL/"/>
    
      <category term="Projection" scheme="http://homoefficio.github.io/tags/Projection/"/>
    
      <category term="Performance" scheme="http://homoefficio.github.io/tags/Performance/"/>
    
  </entry>
  
  <entry>
    <title>IDE ì—ì„œëŠ” ë˜ëŠ”ë° jar ì—ì„œëŠ” ì•ˆ ë¼ìš” - Java Resource</title>
    <link href="http://homoefficio.github.io/2020/07/21/IDE-%EC%97%90%EC%84%9C%EB%8A%94-%EB%90%98%EB%8A%94%EB%8D%B0-jar-%EC%97%90%EC%84%9C%EB%8A%94-%EC%95%88-%EB%8F%BC%EC%9A%94-Java-Resource/"/>
    <id>http://homoefficio.github.io/2020/07/21/IDE-ì—ì„œëŠ”-ë˜ëŠ”ë°-jar-ì—ì„œëŠ”-ì•ˆ-ë¼ìš”-Java-Resource/</id>
    <published>2020-07-21T13:55:37.000Z</published>
    <updated>2020-07-23T06:56:23.364Z</updated>
    
    <content type="html"><![CDATA[<h1 id="IDE-ì—ì„œëŠ”-ë˜ëŠ”ë°-jar-ì—ì„œëŠ”-ì•ˆ-ë¼ìš”-Java-Resource"><a href="#IDE-ì—ì„œëŠ”-ë˜ëŠ”ë°-jar-ì—ì„œëŠ”-ì•ˆ-ë¼ìš”-Java-Resource" class="headerlink" title="IDE ì—ì„œëŠ” ë˜ëŠ”ë° jar ì—ì„œëŠ” ì•ˆ ë¼ìš” - Java Resource"></a>IDE ì—ì„œëŠ” ë˜ëŠ”ë° jar ì—ì„œëŠ” ì•ˆ ë¼ìš” - Java Resource</h1><blockquote><p>í•œ ì¤„ ìš”ì•½: <strong>ì›¬ë§Œí•˜ë©´ <code>getResource()</code> ì“°ì§€ ë§ê³  <code>getResourceAsStream()</code> ì“°ì</strong></p></blockquote><h2 id="ê¸°ë³¸-í´ë”-êµ¬ì¡°"><a href="#ê¸°ë³¸-í´ë”-êµ¬ì¡°" class="headerlink" title="ê¸°ë³¸ í´ë” êµ¬ì¡°"></a>ê¸°ë³¸ í´ë” êµ¬ì¡°</h2><p>ìë°”ì—ì„œëŠ” ë©”ì´ë¸ì´ ë„ë¦¬ ì‚¬ìš©ë˜ë©´ì„œ ì•„ë˜ì™€ ê°™ì€ í´ë” êµ¬ì¡°ê°€ í‘œì¤€ì²˜ëŸ¼ ì‚¬ìš©ë˜ê³  ìˆë‹¤.</p><p><img src="https://i.imgur.com/zpDIgeL.png" alt="Imgur"></p><p>src/main/java í´ë” í•˜ìœ„ì— ìˆëŠ” java íŒŒì¼ì€ ë¹Œë“œ í›„ target/classes í•˜ìœ„ì— ìœ„ì¹˜í•˜ê²Œ ë˜ê³ ,<br>src/main/resources/static í´ë”ëŠ” ë¹Œë“œ í›„ target/static í´ë” ë°”ë¡œ ì•„ë˜ì— ìœ„ì¹˜í•˜ê²Œ ëœë‹¤.</p><p>ìë°” íŒŒì¼ì´ë“  ê·¸ ì™¸ íŒŒì¼ì´ë“  ê²°êµ­ ë¹Œë“œ í›„ì—ëŠ” target ë””ë ‰í„°ë¦¬ê°€ ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ê°€ ëœë‹¤.</p><h2 id="main-í´ë˜ìŠ¤"><a href="#main-í´ë˜ìŠ¤" class="headerlink" title="main í´ë˜ìŠ¤"></a>main í´ë˜ìŠ¤</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ResourceLoader resourceLoader =</span><br><span class="line">                <span class="keyword">new</span> ResourceLoader(<span class="string">"/static"</span>, Path.of(<span class="string">"/static"</span>));</span><br><span class="line">        resourceLoader.loadResourceAsFile(<span class="string">"/folder1/sample1"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="getResource"><a href="#getResource" class="headerlink" title="getResource()"></a>getResource()</h2><p><code>getResource()</code>ë¥¼ ì‚¬ìš©í•´ì„œ íŒŒì¼ë¡œ ì½ì–´ë“¤ì¸ í›„ ì¶œë ¥í•˜ëŠ” í”„ë¡œê·¸ë¨ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourceLoader</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String root;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Path rootPath;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadResourceAsFile</span><span class="params">(String resourceLocation)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        log.info(<span class="string">"*** getResource() + File ë°©ì‹"</span>);</span><br><span class="line">        log.info(<span class="string">"content root: &#123;&#125;"</span>, rootPath);</span><br><span class="line">        log.info(<span class="string">"resourceLocation: &#123;&#125;"</span>, resourceLocation);</span><br><span class="line"></span><br><span class="line">        URL resourceURL = <span class="keyword">this</span>.getClass().getResource(root + resourceLocation);</span><br><span class="line">        log.info(<span class="string">"resourceURL: &#123;&#125;"</span>, resourceURL);</span><br><span class="line"></span><br><span class="line">        String fileLocation = resourceURL.getFile();</span><br><span class="line">        log.info(<span class="string">"fileLocation from URL: &#123;&#125;"</span>, fileLocation);</span><br><span class="line"></span><br><span class="line">        File file = <span class="keyword">new</span> File(fileLocation);</span><br><span class="line">        FileReader fileReader = <span class="keyword">new</span> FileReader(file);</span><br><span class="line">        <span class="keyword">char</span>[] chars = <span class="keyword">new</span> <span class="keyword">char</span>[(<span class="keyword">int</span>) file.length()];</span><br><span class="line">        fileReader.read(chars);</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">"resource contents: &#123;&#125;"</span>, <span class="keyword">new</span> String(chars));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="IDE-ì—ì„œ-ë™ì‘-í™•ì¸"><a href="#IDE-ì—ì„œ-ë™ì‘-í™•ì¸" class="headerlink" title="IDE ì—ì„œ ë™ì‘ í™•ì¸"></a>IDE ì—ì„œ ë™ì‘ í™•ì¸</h3><p>IDE ì—ì„œ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ëœë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">00:56:15.152 [main] INFO io.homo_efficio.ResourceLoader - *** getResource() + File ë°©ì‹</span><br><span class="line">00:56:15.155 [main] INFO io.homo_efficio.ResourceLoader - content root: /static</span><br><span class="line">00:56:15.156 [main] INFO io.homo_efficio.ResourceLoader - resourceLocation: /folder1/sample1</span><br><span class="line">00:56:15.158 [main] INFO io.homo_efficio.ResourceLoader - resourceURL: file:/Users/1003604/gitRepo/study/maven-fat-jar-test/target/classes/static/folder1/sample1</span><br><span class="line">00:56:15.158 [main] INFO io.homo_efficio.ResourceLoader - fileLocation from URL: /Users/1003604/gitRepo/study/maven-fat-jar-test/target/classes/static/folder1/sample1</span><br><span class="line">00:56:15.159 [main] INFO io.homo_efficio.ResourceLoader - resource contents: Sample File 1</span><br></pre></td></tr></table></figure><p><strong>resourceURL ê°’ì´ <code>file:</code> ë¡œ ì‹œì‘í•œë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•´ë‘ì.</strong></p><p>ì½ì„ íŒŒì¼ ê²½ë¡œëŠ” <code>/Users/1003604/gitRepo/study/maven-fat-jar-test/target/classes/static/folder1/sample1</code>ë¡œ í‘œì‹œë˜ëŠ”ë° ì´ëŠ” íŒŒì¼ì‹œìŠ¤í…œì— ì‹¤ì œ ì¡´ì¬í•˜ëŠ” ê²½ë¡œì™€ ì¼ì¹˜í•œë‹¤.</p><h3 id="fat-jar-ì—ì„œ-ë™ì‘-í™•ì¸"><a href="#fat-jar-ì—ì„œ-ë™ì‘-í™•ì¸" class="headerlink" title="fat-jar ì—ì„œ ë™ì‘ í™•ì¸"></a>fat-jar ì—ì„œ ë™ì‘ í™•ì¸</h3><p>í•˜ì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì´ <code>java -jar</code> ëª…ë ¹ìœ¼ë¡œ fat-jar íŒŒì¼ì„ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. mavenì—ì„œ fat-jar ë§Œë“œëŠ” ë°©ë²•ì€ <a href="https://github.com/HomoEfficio/dev-tips/blob/master/Maven-fat-jar.md" target="_blank" rel="noopener">https://github.com/HomoEfficio/dev-tips/blob/master/Maven-fat-jar.md</a> ë¥¼ ì°¸ê³ í•œë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">maven-fat-jar-test git:master ğŸºğŸ¦‘ğŸºğŸ•ğŸº â¯ java -jar target/maven-fat-jar.jar</span><br><span class="line">00:58:11.479 [main] INFO io.homo_efficio.ResourceLoader - *** getResource() + File ë°©ì‹</span><br><span class="line">00:58:11.481 [main] INFO io.homo_efficio.ResourceLoader - content root: /static</span><br><span class="line">00:58:11.482 [main] INFO io.homo_efficio.ResourceLoader - resourceLocation: /folder1/sample1</span><br><span class="line">00:58:11.484 [main] INFO io.homo_efficio.ResourceLoader - resourceURL: jar:file:/Users/1003604/gitRepo/study/maven-fat-jar-test/target/maven-fat-jar.jar!/static/folder1/sample1</span><br><span class="line">00:58:11.484 [main] INFO io.homo_efficio.ResourceLoader - fileLocation from URL: file:/Users/1003604/gitRepo/study/maven-fat-jar-test/target/maven-fat-jar.jar!/static/folder1/sample1</span><br><span class="line">Exception in thread &quot;main&quot; java.io.FileNotFoundException: file:/Users/1003604/gitRepo/study/maven-fat-jar-test/target/maven-fat-jar.jar!/static/folder1/sample1 (No such file or directory)</span><br><span class="line">        at java.base/java.io.FileInputStream.open0(Native Method)</span><br><span class="line">        at java.base/java.io.FileInputStream.open(FileInputStream.java:212)</span><br><span class="line">        at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:154)</span><br><span class="line">        at java.base/java.io.FileReader.&lt;init&gt;(FileReader.java:75)</span><br><span class="line">        at io.homo_efficio.ResourceLoader.loadResourceAsFile(ResourceLoader.java:38)</span><br><span class="line">        at io.homo_efficio.App.main(App.java:19)</span><br></pre></td></tr></table></figure><p>ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ë©´ íŒŒì¼ ê²½ë¡œ(ì •í™•íˆëŠ” URL)ê°€ <code>file:/Users/1003604/gitRepo/study/maven-fat-jar-test/target/maven-fat-jar.jar!/static/folder1/sample1</code> ë¼ê³  í‘œì‹œëœë‹¤. fat-jar íŒŒì¼ì´ ì¤‘ê°„ì— <code>mavan-fat-jar.jar!</code> ë¡œ í‘œì‹œë¼ ìˆëŠ”ë° ì´ë ‡ê²Œ <code>!</code>ê°€ í¬í•¨ëœ ê²½ë¡œëŠ” ì‹¤ì œë¡œ ì¡´ì¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ìœ„ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.</p><p>ì¦‰ IDEì—ì„œ ì‹¤í–‰í•  ë•ŒëŠ” ì‹¤ì œ íŒŒì¼ì‹œìŠ¤í…œ ê¸°ì¤€ ê²½ë¡œë¥¼ ë”°ë¥´ë¯€ë¡œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì§€ë§Œ, jar íŒŒì¼ì„ ì½ì„ ë•ŒëŠ” jar íŒŒì¼ì´ <code>!</code>ì™€ í•¨ê»˜ í‘œì‹œë˜ê¸° ë•Œë¬¸ì— ì‹¤ì œ íŒŒì¼ì‹œìŠ¤í…œ ê²½ë¡œì— ë§ì§€ ì•Šì•„ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</p><p><strong>rsourceURL ê°’ì´ IDE ì—ì„œ ì‹¤í–‰í•  ë•ŒëŠ” <code>file:</code> ë¡œ ì‹œì‘í–ˆëŠ”ë°, jar ë¡œ ì‹¤í–‰í•  ë•ŒëŠ” <code>jar:file:</code>ë¡œ ì‹œì‘í•œë‹¤.</strong> ì´ê²ƒë„ ê¸°ì–µí•´ë‘ì.</p><p>ì–´ì¨Œë“  ìë°” í”„ë¡œê·¸ë¨ì€ ì‹¤ì œë¡œëŠ” ëŒ€ë¶€ë¶„ jar ë¡œ ë§Œë“¤ì–´ì ¸ì„œ ì‹¤í–‰ë í…ë°, jar ì—ì„œ ì œëŒ€ë¡œ ì‹¤í–‰ì´ ì•ˆ ëœë‹¤ë©´ ì´ë¥¼ ì–´ì©ë‹¤?</p><h2 id="getResourceAsStream"><a href="#getResourceAsStream" class="headerlink" title="getResourceAsStream()"></a>getResourceAsStream()</h2><p><code>getResource()</code> ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ URL ì„ ë°˜í™˜í•œë‹¤. URLì€ ìœ„ì™€ ê°™ì´ jar íŒŒì¼ì„ <code>!</code>ì™€ í•¨ê»˜ í‘œì‹œí•˜ê¸° ë•Œë¬¸ì—, jar ì‹¤í–‰ ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</p><p>í•˜ì§€ë§Œ <code>getResourceAsStream()</code>ì€ InputStream ì„ ë°˜í™˜í•œë‹¤. ê·¸ë¦¬ê³  Java 9 ì—ì„œ ì¶”ê°€ëœ <code>InputStream.readAllBytes()</code>ë¥¼ ì‚¬ìš©í•˜ë©´ í¸ë¦¬í•˜ê²Œ InputStream ì„ ì½ì–´ì„œ byte[] ì— ì €ì¥í•  ìˆ˜ ìˆë‹¤.(ë¬¼ë¡  ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ <code>readAllBytes()</code>ë¡œ ì½ì–´ë“¤ì´ë©´ ë§í•¨. ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ëŠ” <a href="https://homoefficio.github.io/2019/02/27/Java-NIO-Direct-Bufferë¥¼-ì´ìš©í•´ì„œ-ëŒ€ìš©ëŸ‰-íŒŒì¼-í–‰-ê¸°ì¤€ìœ¼ë¡œ-ìª¼ê°œê¸°/">https://homoefficio.github.io/2019/02/27/Java-NIO-Direct-Bufferë¥¼-ì´ìš©í•´ì„œ-ëŒ€ìš©ëŸ‰-íŒŒì¼-í–‰-ê¸°ì¤€ìœ¼ë¡œ-ìª¼ê°œê¸°/</a> ë¥¼ ì°¸ê³ í•˜ì)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ResourceLoader.java</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadResourceAsStream</span><span class="params">(String resourceLocation)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        log.info(<span class="string">"OOO getResourceAsStream() ë°©ì‹"</span>);</span><br><span class="line">        log.info(<span class="string">"content root: &#123;&#125;"</span>, root);</span><br><span class="line">        log.info(<span class="string">"resourceLocation: &#123;&#125;"</span>, resourceLocation);</span><br><span class="line"></span><br><span class="line">        InputStream resourceAsStream = <span class="keyword">this</span>.getClass().getResourceAsStream(root + resourceLocation);</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = resourceAsStream.readAllBytes();</span><br><span class="line">        log.info(<span class="string">"resource contents: &#123;&#125;"</span>, <span class="keyword">new</span> String(bytes, StandardCharsets.UTF_8));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="IDE-ì—ì„œ-ë™ì‘-í™•ì¸-1"><a href="#IDE-ì—ì„œ-ë™ì‘-í™•ì¸-1" class="headerlink" title="IDE ì—ì„œ ë™ì‘ í™•ì¸"></a>IDE ì—ì„œ ë™ì‘ í™•ì¸</h3><p>IDE ì—ì„œ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">23:55:45.443 [main] INFO io.homo_efficio.ResourceLoader - OOO getResourceAsStream() ë°©ì‹</span><br><span class="line">23:55:45.443 [main] INFO io.homo_efficio.ResourceLoader - content root: /static</span><br><span class="line">23:55:45.443 [main] INFO io.homo_efficio.ResourceLoader - resourceLocation: /folder1/sample1</span><br><span class="line">23:55:45.443 [main] INFO io.homo_efficio.ResourceLoader - resource contents: Sample File 1</span><br></pre></td></tr></table></figure><h3 id="fat-jar-ì—ì„œ-ë™ì‘-í™•ì¸-1"><a href="#fat-jar-ì—ì„œ-ë™ì‘-í™•ì¸-1" class="headerlink" title="fat-jar ì—ì„œ ë™ì‘ í™•ì¸"></a>fat-jar ì—ì„œ ë™ì‘ í™•ì¸</h3><p>fat-jar ì‹¤í–‰ ì‹œì—ë„ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">maven-fat-jar-test git:master ğŸºğŸ¦‘ğŸºğŸ•ğŸº â¯ java -jar target/maven-fat-jar.jar</span><br><span class="line">00:01:31.774 [main] INFO io.homo_efficio.ResourceLoader - OOO getResourceAsStream() ë°©ì‹</span><br><span class="line">00:01:31.775 [main] INFO io.homo_efficio.ResourceLoader - content root: /static</span><br><span class="line">00:01:31.776 [main] INFO io.homo_efficio.ResourceLoader - resourceLocation: /folder1/sample1</span><br><span class="line">00:01:31.778 [main] INFO io.homo_efficio.ResourceLoader - resource contents: Sample File 1</span><br></pre></td></tr></table></figure><p>ë”°ë¼ì„œ <code>getResource()</code> ë³´ë‹¤ëŠ” <code>getResourceAsStream()</code>ì„ ì‚¬ìš©í•˜ì. ë.</p><h2 id="ì†ì‚¬ì •"><a href="#ì†ì‚¬ì •" class="headerlink" title="ì†ì‚¬ì •"></a>ì†ì‚¬ì •</h2><p>í˜¹ì‹œ ì™œ ì´ëŸ° ì°¨ì´ê°€ ë°œìƒí•˜ëŠ”ì§€ ê¶ê¸ˆí•œ ì‚¬ëŒë“¤ì€ ì´ì–´ì„œ ì½ì–´ë³´ì.</p><p><code>getResourceAsStream()</code> í˜¸ì¶œì„ ë”°ë¼ê°€ë³´ë©´ Java 14 ê¸°ì¤€ <code>BuiltinClassLoader</code> í´ë˜ìŠ¤ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¥¼ ë§Œë‚˜ê²Œ ë˜ëŠ”ë°,</p><p><img src="https://i.imgur.com/m87zAsl.png" alt="Imgur"></p><p><code>openStream()</code> ì„ ë”°ë¼ê°€ë©´ ì™œ ë˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤. <strong><code>openConnection()</code>ì€ URLConnection ì„ ë°˜í™˜í•˜ëŠ”ë°, ì´ URLConnection ì—ëŠ” ì—¬ëŸ¬ê°€ì§€ SubClassê°€ ìˆì–´ì„œ ë‹¤í˜•ì ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆë‹¤.</strong></p><p><img src="https://i.imgur.com/oZz9Wu2.png" alt="Imgur"></p><p>ì•ì—ì„œ IDE ì—ì„œ ì‹¤í–‰í•  ë•ŒëŠ” URL ê°’ì´ <code>file:</code> ë¡œ ì‹œì‘í•˜ê³ , jar ë¡œ ì‹¤í–‰í•  ë–„ëŠ” URL ê°’ì´ <code>jar:file:</code> ë¡œ ì‹œì‘í•˜ëŠ” ê²ƒì„ ê¸°ì–µí•´ë‘ìê³  í•œ ê²ƒì„ ìƒê¸°í•´ë³´ë©´ ë‹µì´ ë³´ì¼ ê²ƒì´ë‹¤.</p><p><strong>URL ì´ <code>file:</code> ë¡œ ì‹œì‘í•˜ëŠ” IDE ì—ì„œëŠ” FileURLConnection ì´ ì‚¬ìš©ë˜ê³ , URL ì´ <code>jar:file:</code> ë¡œ ì‹œì‘í•˜ëŠ” jar ì‹¤í–‰ì—ì„œëŠ” JarURLConnection ì´ ì‚¬ìš©ëœë‹¤. <code>getResourceAsStream()</code>ì€ ë‹¤í˜•ì ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ êµ¬í˜„ë¼ ìˆì–´ì„œ ë‘ ìƒí™© ëª¨ë‘ì—ì„œ ì˜ ë™ì‘í•  ìˆ˜ ìˆë‹¤.</strong></p><p>ê·¸ëŸ¼ <code>getResource()</code>ëŠ”?</p><p><strong>ì‚¬ì‹¤ ë¬¸ì œëŠ” <code>getResource()</code> ê°€ ì•„ë‹ˆë¼ <code>getResource()</code> ì´ ë°˜í™˜í•˜ëŠ” URL ì„ ì–´ë–»ê²Œ ì“°ëŠëƒì— ìˆë‹¤.</strong> ë˜‘ê°™ì´ <code>getResource()</code> ë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ ë‹¤ìŒê³¼ ê°™ì´ <code>openStream()</code> ì„ ì‚¬ìš©í•˜ë©´ <code>getResource()</code> ì„ ì‚¬ìš©í•´ë„ jar ì—ì„œë„ ì˜ ë™ì‘í•œë‹¤.</p><p>ì¦‰, <strong>URL ì—ì„œ File ì„ ìƒì„±í•˜ë©´ ë‹¤í˜•ì„±ì´ ì ìš©ë˜ì§€ ì•Šì•„ IDE ì—ì„œëŠ” ë˜ì§€ë§Œ jar ì—ì„œëŠ” ì•ˆ ë˜ëŠ” ìƒí™©ì´ ì—°ì¶œ</strong>ë˜ê³ ,<br><strong>URL ì—ì„œ InputStream ì„ ë½‘ì•„ì„œ ì‚¬ìš©í•˜ë©´ ë‹¤í˜•ì„±ì´ ì ìš©ë¼ì„œ IDE, jar ëª¨ë‘ì—ì„œ ì˜ ë™ì‘í•œë‹¤.</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ResourceLoader.java</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadResourceAsFile</span><span class="params">(String resourceLocation)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        log.info(<span class="string">"*** getResource() + File ë°©ì‹"</span>);</span><br><span class="line">        log.info(<span class="string">"content root: &#123;&#125;"</span>, rootPath);</span><br><span class="line">        log.info(<span class="string">"resourceLocation: &#123;&#125;"</span>, resourceLocation);</span><br><span class="line"></span><br><span class="line">        URL resourceURL = <span class="keyword">this</span>.getClass().getResource(root + resourceLocation);</span><br><span class="line">        log.info(<span class="string">"resourceURL: &#123;&#125;"</span>, resourceURL);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        String fileLocation = resourceURL.getFile();</span></span><br><span class="line"><span class="comment">//        log.info("fileLocation from URL: &#123;&#125;", fileLocation);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        File file = new File(fileLocation);</span></span><br><span class="line"><span class="comment">//        FileReader fileReader = new FileReader(file);</span></span><br><span class="line"><span class="comment">//        char[] chars = new char[(int) file.length()];</span></span><br><span class="line"><span class="comment">//        fileReader.read(chars);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        log.info("resource contents: &#123;&#125;", new String(chars));</span></span><br><span class="line"></span><br><span class="line">        InputStream inputStream = resourceURL.openStream();</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = inputStream.readAllBytes();</span><br><span class="line">        log.info(<span class="string">"resource contents: &#123;&#125;"</span>, <span class="keyword">new</span> String(bytes, StandardCharsets.UTF_8));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="Jackson"><a href="#Jackson" class="headerlink" title="Jackson"></a>Jackson</h2><p>ìë°”ì—ì„œ JSON ì²˜ë¦¬ì— ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” Jackson ì€ ì–´ë–¨ê¹Œ?</p><p>ë‹¤ìŒê³¼ ê°™ì´ URL ì„ <code>readValue()</code> ë©”ì„œë“œì— ì¸ìë¡œ ë„˜ê²¨ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ë©´ IDE, jar ëª¨ë‘ì—ì„œ ì˜ ë™ì‘í•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ResourceLoader.java</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadConfig</span><span class="params">(String resourceLocation)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"*** getResource() + Jackson ë°©ì‹"</span>);</span><br><span class="line">        log.info(<span class="string">"content root: &#123;&#125;"</span>, rootPath);</span><br><span class="line">        log.info(<span class="string">"resourceLocation: &#123;&#125;"</span>, resourceLocation);</span><br><span class="line"></span><br><span class="line">        URL configURL = <span class="keyword">this</span>.getClass().getResource(root + resourceLocation);</span><br><span class="line">        log.info(<span class="string">"resourceURL: &#123;&#125;"</span>, configURL);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ObjectMapper objectMapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">            Config config = objectMapper.readValue(configURL, Config.class);</span><br><span class="line">            log.info(<span class="string">"title in config: &#123;&#125;"</span>, config.getTitle());</span><br><span class="line">            log.info(<span class="string">"tags in config: [&#123;&#125;]"</span>, String.join(<span class="string">", "</span>, config.getTags()));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"ì„¤ì • íŒŒì¼ ë¡œë”©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>IDE ì‹¤í–‰ ê²°ê³¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">12:09:01.465 [main] INFO io.homo_efficio.ResourceLoader - *** getResource() + Jackson ë°©ì‹</span><br><span class="line">12:09:01.465 [main] INFO io.homo_efficio.ResourceLoader - content root: /static</span><br><span class="line">12:09:01.465 [main] INFO io.homo_efficio.ResourceLoader - resourceLocation: /folder1/config.json</span><br><span class="line">12:09:01.466 [main] INFO io.homo_efficio.ResourceLoader - resourceURL: file:/Users/1003604/gitRepo/study/maven-fat-jar-test/target/classes/static/folder1/config.json</span><br><span class="line">12:09:01.617 [main] INFO io.homo_efficio.ResourceLoader - title in config: Java Resource Handling</span><br><span class="line">12:09:01.617 [main] INFO io.homo_efficio.ResourceLoader - tags in config: [Java, Resource, fat, jar]</span><br></pre></td></tr></table></figure><p>jar ì‹¤í–‰ ê²°ê³¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">maven-fat-jar-test git:master ğŸºğŸ¦‘ğŸºğŸ•ğŸº â¯ java -jar target/maven-fat-jar.jar</span><br><span class="line">12:09:25.075 [main] INFO io.homo_efficio.ResourceLoader - *** getResource() + Jackson ë°©ì‹</span><br><span class="line">12:09:25.075 [main] INFO io.homo_efficio.ResourceLoader - content root: /static</span><br><span class="line">12:09:25.075 [main] INFO io.homo_efficio.ResourceLoader - resourceLocation: /folder1/config.json</span><br><span class="line">12:09:25.076 [main] INFO io.homo_efficio.ResourceLoader - resourceURL: jar:file:/Users/1003604/gitRepo/study/maven-fat-jar-test/target/maven-fat-jar.jar!/static/folder1/config.json</span><br><span class="line">12:09:25.213 [main] INFO io.homo_efficio.ResourceLoader - title in config: Java Resource Handling</span><br><span class="line">12:09:25.213 [main] INFO io.homo_efficio.ResourceLoader - tags in config: [Java, Resource, fat, jar]</span><br></pre></td></tr></table></figure><h2 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h2><p><code>.properties</code> íŒŒì¼ì„ ì½ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” <code>Properties</code> í´ë˜ìŠ¤ì—ëŠ” <code>load(Reader r)</code>, <code>load(InputStream i)</code> ë‘ ê°€ì§€ ë©”ì„œë“œê°€ ìˆë‹¤. IDE, jar ëª¨ë‘ì—ì„œ ë™ì‘í•˜ë ¤ë©´ ì–´ëŠ ê²ƒì„ ì¨ì•¼í• ì§€ ì´ì   í•´ë³´ì§€ ì•Šì•„ë„ ì•Œ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.</p><h2 id="ë””ë ‰í„°ë¦¬-ë‚´-íŒŒì¼-ëª©ë¡"><a href="#ë””ë ‰í„°ë¦¬-ë‚´-íŒŒì¼-ëª©ë¡" class="headerlink" title="ë””ë ‰í„°ë¦¬ ë‚´ íŒŒì¼ ëª©ë¡"></a>ë””ë ‰í„°ë¦¬ ë‚´ íŒŒì¼ ëª©ë¡</h2><p>ê°œë³„ íŒŒì¼ì€ ìœ„ì™€ ê°™ì´ ëŒ€ì‘í•  ìˆ˜ ìˆë‹¤ëŠ” ê±¸ ì•Œê²Œ ëë‹¤. ê·¸ëŸ°ë° ë””ë ‰í„°ë¦¬ ë‚´ íŒŒì¼ ëª©ë¡ì„ ì½ì–´ì„œ ì›í•˜ëŠ” ëŒ€ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒë„ IDE, jar ì—ì„œ ëª¨ë‘ ê°€ëŠ¥í• ê¹Œ?</p><p>ì´ë¯¸ êµ¬êµ¬ì ˆì ˆ ë§ì´ ë– ë“¤ì—ˆìœ¼ë‹ˆ ë°”ë¡œ ì½”ë“œë¡œ ì‚´í´ë³´ì. <strong>jar íŒŒì¼ ë‚´ì—ì„œ ëª©ë¡ ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•˜ë ¤ë©´ <code>JarFile</code>ì´ í•„ìš”í•˜ë‹¤ëŠ” ì ë§Œ ê¸°ì–µí•´ë‘ì.</strong> ë‚˜ë¨¸ì§€ ì£¼ì˜í•´ì„œ ë³¼ ì ì€ ì£¼ì„ì— í‘œì‹œí•´ë†¨ë‹¤.</p><p>ë§ˆì§€ë§‰ì— ë‚˜ì˜¤ëŠ” ì½”ë“œ <code>enumerationAsStream()</code> ë©”ì„œë“œëŠ” <code>Enumeration</code>ì„ copyë¥¼ ìœ ë°œí•˜ì§€ ì•Šê³  Stream ìœ¼ë¡œ ì“¸ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ìœ í‹¸ ë©”ì„œë“œë‹¤.(ìë°”ëŠ” ì™œ ì´ëŸ° ê±¸ ê³µì‹ SDKì— í¬í•¨í•˜ì§€ ì•ŠëŠ” ê±´ê°€..)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadDirectoryAsStream</span><span class="params">(String dir)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    log.info(<span class="string">"OOO getResourceAsStream() + Directory"</span>);</span><br><span class="line">    log.info(<span class="string">"content root: &#123;&#125;"</span>, root);</span><br><span class="line">    log.info(<span class="string">"dir: &#123;&#125;"</span>, dir);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// IDE ì—ì„œëŠ” ì˜ ë™ì‘, jar ì—ì„œëŠ” ì—ëŸ¬ëŠ” ë°œìƒí•˜ì§€ ì•Šìœ¼ë‚˜ esourceAsStream.readAllBytes() ê°’ì´ ë¹„ì–´ìˆìŒ</span></span><br><span class="line">    log.info(<span class="string">"USING naive getResourceAsStream(String directory) -----"</span>);</span><br><span class="line">    InputStream resourceAsStream = <span class="keyword">this</span>.getClass().getResourceAsStream(root + dir);</span><br><span class="line">    <span class="keyword">byte</span>[] bytes = resourceAsStream.readAllBytes();</span><br><span class="line">    log.info(<span class="string">"resource contents length: &#123;&#125;"</span>, bytes.length);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (bytes.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        log.info(<span class="string">"resource contents: &#123;&#125;"</span>, <span class="keyword">new</span> String(bytes, StandardCharsets.UTF_8));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// jar ì—ì„œëŠ” ì˜ ë™ì‘</span></span><br><span class="line">        <span class="comment">// IDE ì—ì„œëŠ” ì˜ˆì™¸ ë°œìƒ: java.io.FileNotFoundException: /Users/1003604/gitRepo/study/maven-fat-jar-test/target/classes/io/homo_efficio (Is a directory)</span></span><br><span class="line">        <span class="comment">// ë”°ë¼ì„œ bytes.length = 0 ì¼ ë•Œë§Œ ì‹¤í–‰í•˜ë„ë¡</span></span><br><span class="line">        log.info(<span class="string">"USING JarFile -----"</span>);</span><br><span class="line">        String path = <span class="keyword">this</span>.getClass().getResource(<span class="string">""</span>).getPath();</span><br><span class="line">        log.info(<span class="string">"resourcePath: &#123;&#125;"</span>, path);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> exclamationIndex = path.lastIndexOf(<span class="string">"!"</span>) &gt; <span class="number">0</span> ? path.lastIndexOf(<span class="string">"!"</span>) : path.length();</span><br><span class="line">        String jarFilePath = path.substring(<span class="number">0</span>, exclamationIndex).replaceAll(<span class="string">"file:"</span>, <span class="string">""</span>);</span><br><span class="line">        log.info(<span class="string">"jarFilePath : &#123;&#125;"</span>, jarFilePath);</span><br><span class="line">        </span><br><span class="line">        LocalDateTime start = LocalDateTime.now();</span><br><span class="line">        log.info(<span class="string">"jarFile start: &#123;&#125;"</span>, start);</span><br><span class="line">        JarFile jarFile = <span class="keyword">new</span> JarFile(jarFilePath);</span><br><span class="line">        LocalDateTime end = LocalDateTime.now();</span><br><span class="line">        log.info(<span class="string">"jarFile end  : &#123;&#125;"</span>, end);</span><br><span class="line">        </span><br><span class="line">        enumerationAsStream(jarFile.entries())</span><br><span class="line">                .filter(entry -&gt; entry.getRealName().startsWith((root + dir).substring(<span class="number">1</span>)))</span><br><span class="line">                .forEach(entry -&gt; log.info(<span class="string">"jarEntry: &#123;&#125;"</span>, entry.getRealName()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// From https://stackoverflow.com/a/23276455</span></span><br><span class="line"><span class="keyword">static</span> &lt;T&gt; <span class="function">Stream&lt;T&gt; <span class="title">enumerationAsStream</span><span class="params">(Enumeration&lt;T&gt; e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> StreamSupport.stream(</span><br><span class="line">            Spliterators.spliteratorUnknownSize(</span><br><span class="line">                    <span class="keyword">new</span> Iterator&lt;T&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                            <span class="keyword">return</span> e.hasMoreElements();</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="function"><span class="keyword">public</span> T <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                            <span class="keyword">return</span> e.nextElement();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    Spliterator.ORDERED</span><br><span class="line">            ), <span class="keyword">false</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;IDE-ì—ì„œëŠ”-ë˜ëŠ”ë°-jar-ì—ì„œëŠ”-ì•ˆ-ë¼ìš”-Java-Resource&quot;&gt;&lt;a href=&quot;#IDE-ì—ì„œëŠ”-ë˜ëŠ”ë°-jar-ì—ì„œëŠ”-ì•ˆ-ë¼ìš”-Java-Resource&quot; class=&quot;headerlink&quot; title=&quot;IDE ì—ì„œëŠ” ë˜ëŠ”ë° jar 
      
    
    </summary>
    
      <category term="Technique" scheme="http://homoefficio.github.io/categories/Technique/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="URL" scheme="http://homoefficio.github.io/tags/URL/"/>
    
      <category term="Resource" scheme="http://homoefficio.github.io/tags/Resource/"/>
    
      <category term="getResource" scheme="http://homoefficio.github.io/tags/getResource/"/>
    
      <category term="getResourceAsStream" scheme="http://homoefficio.github.io/tags/getResourceAsStream/"/>
    
      <category term="maven" scheme="http://homoefficio.github.io/tags/maven/"/>
    
      <category term="fat-jar" scheme="http://homoefficio.github.io/tags/fat-jar/"/>
    
      <category term="jar" scheme="http://homoefficio.github.io/tags/jar/"/>
    
      <category term="file" scheme="http://homoefficio.github.io/tags/file/"/>
    
      <category term="loading" scheme="http://homoefficio.github.io/tags/loading/"/>
    
  </entry>
  
  <entry>
    <title>Java Memory Monitoring</title>
    <link href="http://homoefficio.github.io/2020/04/09/Java-Memory-Monitoring/"/>
    <id>http://homoefficio.github.io/2020/04/09/Java-Memory-Monitoring/</id>
    <published>2020-04-09T07:57:33.000Z</published>
    <updated>2020-04-09T08:40:35.552Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java-ë©”ëª¨ë¦¬-ëª¨ë‹ˆí„°ë§"><a href="#Java-ë©”ëª¨ë¦¬-ëª¨ë‹ˆí„°ë§" class="headerlink" title="Java ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§"></a>Java ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§</h1><p>ë‘ì„œ ì—†ì´ ì´ê²ƒì €ê²ƒ ëª¨ì•„ë³¸ ìë°” ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§</p><h1 id="Heap-Dump"><a href="#Heap-Dump" class="headerlink" title="Heap Dump"></a>Heap Dump</h1><blockquote><p>í™ì— ìˆëŠ” ëª¨ë“  ê°ì²´ Dump<br>jmap -dump:format=b,file=HEAP_DUMP_OUTPUT_FILE_NAME.hprof PID</p><p>í™ì— ìˆëŠ” Live ê°ì²´ë§Œ Dump<br>jmap -dump:live,format=b,file=HEAP_DUMP_OUTPUT_FILE_NAME.hprof PID</p></blockquote><h1 id="í™-ë¶„ì„-ë„êµ¬"><a href="#í™-ë¶„ì„-ë„êµ¬" class="headerlink" title="í™ ë¶„ì„ ë„êµ¬"></a>í™ ë¶„ì„ ë„êµ¬</h1><p>jmap ìœ¼ë¡œ ìƒì„±í•œ Heap Dump íŒŒì¼ì„ ì—´ì–´ì„œ ë¶„ì„í•  ìˆ˜ ìˆëŠ” ë„êµ¬</p><ul><li>Eclipse MAT: <a href="https://www.eclipse.org/mat/" target="_blank" rel="noopener">https://www.eclipse.org/mat/</a><ul><li>ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì˜ì‹¬ ë‚´ì—­ì„ ë³´ê³ ì„œ í˜•íƒœë¡œ ë³´ì—¬ì¤˜ì„œ ì¢‹ìŒ</li><li><img src="https://i.imgur.com/zeiXYxF.png" alt="Imgur"></li><li><img src="https://i.imgur.com/yEa9Xpk.png" alt="Imgur"></li><li><img src="https://i.imgur.com/xiTL9Lh.png" alt="Imgur"></li><li>Shallow Heap vs Retained Heap: <a href="https://dzone.com/articles/eclipse-mat-shallow-heap-retained-heap" target="_blank" rel="noopener">https://dzone.com/articles/eclipse-mat-shallow-heap-retained-heap</a><ul><li>shallow heapì€ í•œ ê°ì²´ë§Œì´ ì ìœ í•œ í™ì˜ í¬ê¸°</li><li>retained heapì€ í•œ ê°ì²´ê°€ ì œê±°ë  ë•Œ í•¨ê»˜ ì œê±°ë  ìˆ˜ ìˆëŠ” ê°ì²´ë“¤ì´ ì ìœ í•˜ê³  ìˆëŠ” í™ì˜ í¬ê¸°</li></ul></li></ul></li><li>VisuamVM: <a href="https://visualvm.github.io/" target="_blank" rel="noopener">https://visualvm.github.io/</a></li></ul><h1 id="ë©”ëª¨ë¦¬-ì‚¬ìš©-ë°-GC-ëª¨ë‹ˆí„°ë§"><a href="#ë©”ëª¨ë¦¬-ì‚¬ìš©-ë°-GC-ëª¨ë‹ˆí„°ë§" class="headerlink" title="ë©”ëª¨ë¦¬ ì‚¬ìš© ë° GC ëª¨ë‹ˆí„°ë§"></a>ë©”ëª¨ë¦¬ ì‚¬ìš© ë° GC ëª¨ë‹ˆí„°ë§</h1><blockquote><p>jstat -gc -h10 -t PID 10000<br>10ì¤„ë§ˆë‹¤ í—¤ë” ì¶œë ¥, íƒ€ì„ìŠ¤íƒ¬í”„ ì¶œë ¥, 10000ë°€ë¦¬ì´ˆë§ˆë‹¤ ì¶œë ¥</p></blockquote><p><img src="https://i.imgur.com/d0TMbpm.png" alt="Imgur"></p><h1 id="Thread-Dump"><a href="#Thread-Dump" class="headerlink" title="Thread Dump"></a>Thread Dump</h1><blockquote><p>jstack PID &gt; THREAD_DUMP_OUTPUT_FILENAME</p></blockquote><h1 id="Thread-Dump-ë¶„ì„-ì‚¬ì´íŠ¸"><a href="#Thread-Dump-ë¶„ì„-ì‚¬ì´íŠ¸" class="headerlink" title="Thread Dump ë¶„ì„ ì‚¬ì´íŠ¸"></a>Thread Dump ë¶„ì„ ì‚¬ì´íŠ¸</h1><ul><li><a href="https://fastthread.io" target="_blank" rel="noopener">https://fastthread.io</a></li></ul><h1 id="ìë°”-ë©”ëª¨ë¦¬-ë¶„ì„-ê´€ë ¨-ì¢‹ì€-ìë£Œ"><a href="#ìë°”-ë©”ëª¨ë¦¬-ë¶„ì„-ê´€ë ¨-ì¢‹ì€-ìë£Œ" class="headerlink" title="ìë°” ë©”ëª¨ë¦¬ ë¶„ì„ ê´€ë ¨ ì¢‹ì€ ìë£Œ"></a>ìë°” ë©”ëª¨ë¦¬ ë¶„ì„ ê´€ë ¨ ì¢‹ì€ ìë£Œ</h1><ul><li>GC ê´€ë ¨: <ul><li><a href="https://d2.naver.com/helloworld/6043" target="_blank" rel="noopener">https://d2.naver.com/helloworld/6043</a></li></ul></li><li>OOM ë° Heap Shrinkage ê´€ë ¨: <ul><li><a href="https://www.samsungsds.com/global/ko/support/insights/1209174_2284.html" target="_blank" rel="noopener">https://www.samsungsds.com/global/ko/support/insights/1209174_2284.html</a></li></ul></li><li>ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê´€ë ¨: <ul><li><a href="https://d2.naver.com/helloworld/1326256" target="_blank" rel="noopener">https://d2.naver.com/helloworld/1326256</a></li><li><a href="https://woowabros.github.io/tools/2019/05/24/jvm_memory_leak.html" target="_blank" rel="noopener">https://woowabros.github.io/tools/2019/05/24/jvm_memory_leak.html</a></li></ul></li><li>Thread Dump ê´€ë ¨:<ul><li><a href="https://brunch.co.kr/@springboot/126" target="_blank" rel="noopener">https://brunch.co.kr/@springboot/126</a></li><li><a href="https://d2.naver.com/helloworld/10963" target="_blank" rel="noopener">https://d2.naver.com/helloworld/10963</a></li></ul></li></ul><h1 id="ì§¤ë§‰-ì§€ì‹"><a href="#ì§¤ë§‰-ì§€ì‹" class="headerlink" title="ì§¤ë§‰ ì§€ì‹"></a>ì§¤ë§‰ ì§€ì‹</h1><h2 id="Heap-Shrinkage"><a href="#Heap-Shrinkage" class="headerlink" title="Heap Shrinkage"></a>Heap Shrinkage</h2><ul><li><strong>ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì¦ê°€ ì‹œí‚¤ëŠ” ì‘ì—…ì´ ëë‚œë‹¤ê³  í•´ì„œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë°”ë¡œ ì¤„ì–´ë“¤ì§€ëŠ” ì•ŠìŒ</strong><ul><li><strong>ì–´ë–¤ ì‘ì—… ì™„ë£Œ í›„ topë¡œ í™•ì¸í•œ ë©”ëª¨ë¦¬ ì‚¬ìš©ì´ ì¤„ì§€ ì•ŠëŠ”ë‹¤ê³  í•´ì„œ ë¬´ì¡°ê±´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¼ê³  íŒë‹¨í•˜ë©´ ì•ˆë¨</strong></li></ul></li></ul><h3 id="ì‚¬ë¡€"><a href="#ì‚¬ë¡€" class="headerlink" title="ì‚¬ë¡€"></a>ì‚¬ë¡€</h3><ul><li>ì‘ì—… ì‹œì‘ ì „<ul><li><img src="https://i.imgur.com/oZV4Eat.png" alt="Imgur"></li></ul></li><li>ì‘ì—… ì¤‘ - ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€<ul><li><img src="https://i.imgur.com/t8hwQHz.png" alt="Imgur"></li></ul></li><li>ì‘ì—… ì™„ë£Œ í›„ - ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê°ì†Œí•˜ì§€ ì•ŠìŒ<ul><li><img src="https://i.imgur.com/sGBCLbK.png" alt="Imgur"></li></ul></li><li>ë©”ëª¨ë¦¬ íšŒìˆ˜ - jmap ìì²´ê°€ ë©”ëª¨ë¦¬ íšŒìˆ˜ ëª…ë ¹ì€ ì•„ë‹ˆì§€ë§Œ, ë¶€ìˆ˜ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ê°ì†Œí•¨<ul><li><img src="https://i.imgur.com/gQze3QN.png" alt="Imgur"></li></ul></li><li>ë”°ë¼ì„œ jmap ì„ í™ ë¤í”„ ë¿ì•„ë‹ˆë¼ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ í™•ì¸ ê°„í¸ë²•ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŒ<ul><li>ë°˜ë“œì‹œ <code>-dump:live</code> ì˜µì…˜ì„ ì¤˜ì•¼ ê³¼ë„í•œ í¬ê¸°ì˜ í™ ë¤í”„ íŒŒì¼ì´ ìƒì„±ë˜ì§€ ì•ŠìŒ</li><li>jmap ì„ í•´ë„ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë§ì´ ì¤„ì§€ ì•ŠëŠ”ë‹¤ë©´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ìˆëŠ” ê±¸ë¡œ ì¶”ì • ê°€ëŠ¥</li></ul></li></ul><h2 id="ê²½í—˜ìƒ-ì¤‘ì²©ëœ-Collectionì€-ë©”ëª¨ë¦¬-ì´ìŠˆ-ë°œìƒí• -ë‚Œìƒˆê°€-ì¢€-ìˆë”ë¼"><a href="#ê²½í—˜ìƒ-ì¤‘ì²©ëœ-Collectionì€-ë©”ëª¨ë¦¬-ì´ìŠˆ-ë°œìƒí• -ë‚Œìƒˆê°€-ì¢€-ìˆë”ë¼" class="headerlink" title="ê²½í—˜ìƒ ì¤‘ì²©ëœ Collectionì€ ë©”ëª¨ë¦¬ ì´ìŠˆ ë°œìƒí•  ë‚Œìƒˆê°€ ì¢€ ìˆë”ë¼.."></a>ê²½í—˜ìƒ ì¤‘ì²©ëœ Collectionì€ ë©”ëª¨ë¦¬ ì´ìŠˆ ë°œìƒí•  ë‚Œìƒˆê°€ ì¢€ ìˆë”ë¼..</h2><ul><li>Listì˜ ì›ì†Œ ì•ˆì— ë˜ List ê°€ ìˆê³  ê·¸ ì•ˆì— ë˜ List ê°€ ìˆê³ ..</li><li>Map ì˜ value ì¤‘ì— ë˜ Map ì´ ìˆê³  ê·¸ ì•ˆì— ë˜ Map ì´ ìˆê³ ..</li><li>ëŒ€ëŸ‰ì˜ ë°ì´í„°ê°€ ìœ„ì™€ ê°™ì€ í˜•íƒœë¡œ ì²˜ë¦¬ë˜ë©´ ë©”ëª¨ë¦¬ íšŒìˆ˜ íƒ€ì´ë°ì´ ì¢€ ì§€ì—°ë˜ëŠ” ê²ƒ ê°™ê³ , ê²°êµ­ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ê³¼ë„í•˜ê²Œ ë†’ì•„ì ¸ì„œ OOM ì´ ë°œìƒí•˜ê¸°ë„ í•˜ë”ë¼..</li><li>ì´ëŸ´ ë•ŒëŠ” GCì— ë§¡ê¸°ì§€ ë§ê³  ì¤‘ê°„ì¤‘ê°„ Collection ì•ˆì— ì¤‘ì²©ëœ Collection ë“¤ì„ ì§ì ‘ <code>clear()</code> í•´ì£¼ëŠ” ê²Œ ë„ì›€ì´ ë  ìˆ˜ë„..</li><li>JPA ì—ì„œì˜ ì—°ê´€ê´€ê³„ë¡œ ì¤‘ì²©ëœ Collectionì´ ìƒê²¨ë‚œ ê²½ìš°ì—ëŠ” LazyLoadingì„ í†µí•´ OOM ì„ ë°©ì§€í•  ìˆ˜ë„ ìˆë‹¤</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java-ë©”ëª¨ë¦¬-ëª¨ë‹ˆí„°ë§&quot;&gt;&lt;a href=&quot;#Java-ë©”ëª¨ë¦¬-ëª¨ë‹ˆí„°ë§&quot; class=&quot;headerlink&quot; title=&quot;Java ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§&quot;&gt;&lt;/a&gt;Java ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§&lt;/h1&gt;&lt;p&gt;ë‘ì„œ ì—†ì´ ì´ê²ƒì €ê²ƒ ëª¨ì•„ë³¸ ìë°” ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§
      
    
    </summary>
    
      <category term="Performance" scheme="http://homoefficio.github.io/categories/Performance/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="Memory" scheme="http://homoefficio.github.io/tags/Memory/"/>
    
      <category term="Monitoring" scheme="http://homoefficio.github.io/tags/Monitoring/"/>
    
      <category term="Eclipse MAT" scheme="http://homoefficio.github.io/tags/Eclipse-MAT/"/>
    
      <category term="VisualVM" scheme="http://homoefficio.github.io/tags/VisualVM/"/>
    
      <category term="Heap Dump" scheme="http://homoefficio.github.io/tags/Heap-Dump/"/>
    
      <category term="Thread Dump" scheme="http://homoefficio.github.io/tags/Thread-Dump/"/>
    
      <category term="Memory Leak" scheme="http://homoefficio.github.io/tags/Memory-Leak/"/>
    
      <category term="jmap" scheme="http://homoefficio.github.io/tags/jmap/"/>
    
      <category term="jstat" scheme="http://homoefficio.github.io/tags/jstat/"/>
    
      <category term="Heap Shrinkage" scheme="http://homoefficio.github.io/tags/Heap-Shrinkage/"/>
    
  </entry>
  
  <entry>
    <title>Java Native Memory Tracking</title>
    <link href="http://homoefficio.github.io/2020/04/09/Java-Native-Memory-Tracking/"/>
    <id>http://homoefficio.github.io/2020/04/09/Java-Native-Memory-Tracking/</id>
    <published>2020-04-09T07:26:35.000Z</published>
    <updated>2020-08-10T16:24:55.957Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java-Native-Memory-Tracking"><a href="#Java-Native-Memory-Tracking" class="headerlink" title="Java Native Memory Tracking"></a>Java Native Memory Tracking</h1><h2 id="DMA"><a href="#DMA" class="headerlink" title="DMA"></a>DMA</h2><p>ìë°”ì—ì„œë„ <code>DirectBuffer</code>ë¥¼ ì´ìš©í•´ì„œ JVM Heapì´ ì•„ë‹Œ Native ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  DMA(Direct Memory Access)ì˜ ì¥ì ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤.</p><p>êµ¬ì²´ì ì¸ ì‚¬ìš©ë²• ë“± ìì„¸í•œ ë‚´ìš©ì€ <a href="https://homoefficio.github.io/2019/02/27/Java-NIO-Direct-Bufferë¥¼-ì´ìš©í•´ì„œ-ëŒ€ìš©ëŸ‰-íŒŒì¼-í–‰-ê¸°ì¤€ìœ¼ë¡œ-ìª¼ê°œê¸°/">Java NIO Direct Bufferë¥¼ ì´ìš©í•´ì„œ ëŒ€ìš©ëŸ‰ íŒŒì¼ í–‰ ê¸°ì¤€ìœ¼ë¡œ ìª¼ê°œê¸°</a>ë¥¼ ì°¸ê³ í•˜ê³  ì¥ë‹¨ì ë§Œ ìš”ì•½í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><h3 id="ì¥ì "><a href="#ì¥ì " class="headerlink" title="ì¥ì "></a>ì¥ì </h3><ul><li>ë””ìŠ¤í¬ì— ìˆëŠ” íŒŒì¼ì„ ìš´ì˜ì²´ì œ ë©”ëª¨ë¦¬ë¡œ ì½ì–´ë“¤ì¼ ë•Œ CPUë¥¼ ê±´ë“œë¦¬ì§€ ì•ŠëŠ”ë‹¤.</li><li>ìš´ì˜ì²´ì œ ë©”ëª¨ë¦¬ì— ìˆëŠ” íŒŒì¼ ë‚´ìš©ì„ JVM ë‚´ ë©”ëª¨ë¦¬ë¡œ ë‹¤ì‹œ ë³µì‚¬í•  í•„ìš”ê°€ ì—†ë‹¤.</li><li>JVM ë‚´ í™ ë©”ëª¨ë¦¬ë¥¼ ì“°ì§€ ì•Šìœ¼ë¯€ë¡œ GCë¥¼ ìœ ë°œí•˜ì§€ ì•ŠëŠ”ë‹¤.(ë¬¼ë¡  ì¼ì • í¬ê¸°ë¥¼ ê°€ì§„ ë²„í¼ê°€ ìš´ì˜ì²´ì œ ë©”ëª¨ë¦¬ì— ìƒì„±ë˜ëŠ” ê²ƒì´ê³ , ì´ ë²„í¼ì— ëŒ€í•œ ì°¸ì¡° ìì²´ëŠ” JVM ë©”ëª¨ë¦¬ ë‚´ì— ìƒì„±ëœë‹¤)</li></ul><h3 id="ë‹¨ì "><a href="#ë‹¨ì " class="headerlink" title="ë‹¨ì "></a>ë‹¨ì </h3><ul><li>DMAì— ì‚¬ìš©í•  ë²„í¼ ìƒì„± ì‹œ ì‹œê°„ì´ ë” ì†Œìš”ë  ìˆ˜ ìˆë‹¤.</li><li>ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ë°ì´í„°ë¥¼ ì·¨ê¸‰í•˜ë¯€ë¡œ, ë°ì´í„°ë¥¼ í–‰ ë‹¨ìœ„ë¡œ ì·¨ê¸‰í•˜ê¸° ë¶ˆí¸í•˜ë‹¤.</li><li>ì¼ë°˜ì ì¸ Java ë©”ëª¨ë¦¬ ë¶„ì„ ë°©ë²•ìœ¼ë¡œëŠ” ì¶”ì í•  ìˆ˜ ì—†ë‹¤.</li></ul><p>ìš”ëŠ” ëŒ€ìš©ëŸ‰ íŒŒì¼ì„ ì‚¬ìš©í•  ë•Œ <code>DirectBuffer</code>ë¥¼ ì‚¬ìš©í•˜ë©´ DMAì˜ ì¥ì ì„ ëˆ„ë¦´ ìˆ˜ ìˆê³  ë‹¨ì ì„ í”¼í•  ìˆ˜ ìˆë‹¤.</p><h2 id="ë©”ëª¨ë¦¬-ì‚¬ìš©-ì¶”ì "><a href="#ë©”ëª¨ë¦¬-ì‚¬ìš©-ì¶”ì " class="headerlink" title="ë©”ëª¨ë¦¬ ì‚¬ìš© ì¶”ì "></a>ë©”ëª¨ë¦¬ ì‚¬ìš© ì¶”ì </h2><p>ê·¸ëŸ°ë° JVM Heap ë©”ëª¨ë¦¬ê°€ ì•„ë‹Œ Nativeë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ í™ ë¤í”„ë‚˜ ìŠ¤ë ˆë“œ ë¤í”„ ë¶„ì„, <code>jstat</code> ë“± ì¼ë°˜ì ì¸ Java ë©”ëª¨ë¦¬ ë¶„ì„ ë°©ë²•ìœ¼ë¡œëŠ” ì¶”ì ì´ ì•ˆ ëœë‹¤.</p><p>ëŒ€ìš©ëŸ‰ íŒŒì¼ ì‚¬ìš© ì‹œ ì¥ì ì´ ë§ë‹¤ê³  í•˜ë‹ˆ ì•„ë¬´ë˜ë„ <code>DirectBuffer</code> í¬ê¸°ë„ í¬ê²Œ ì¡ì„ ìˆ˜ë¡ ì„±ëŠ¥ ìƒìœ¼ë¡œëŠ” ìœ ë¦¬í•˜ê² ì§€ë§Œ, ê·¸ í° ë©”ëª¨ë¦¬ê°€ ì–´ë–»ê²Œ ì‚¬ìš©ë˜ê³  íšŒìˆ˜ë˜ëŠ”ì§€ í™•ì¸ì´ ì•ˆ ëœë‹¤ë©´ ê³¤ë€í•˜ë‹¤.</p><p>ì–´ì©Œì§€?</p><p>ë­˜ ì–´ì§¸.. ê²€ìƒ‰ì´ì§€.. ê²€ìƒ‰í•´ì„œ ì°¾ì€ ë‹µì€ <code>jcmd</code>ë‹¤. </p><p>ê°„ëµí•˜ê²Œ ì•Œì•„ë³´ì.</p><h2 id="Java-ì‹¤í–‰-ì˜µì…˜-ì¶”ê°€"><a href="#Java-ì‹¤í–‰-ì˜µì…˜-ì¶”ê°€" class="headerlink" title="Java ì‹¤í–‰ ì˜µì…˜ ì¶”ê°€"></a>Java ì‹¤í–‰ ì˜µì…˜ ì¶”ê°€</h2><p>ì–´ë–¤ Java ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ Native ë©”ëª¨ë¦¬ ì‚¬ìš©ì„ ì¶”ì í•˜ë ¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œ ë‹¤ìŒ ì˜µì…˜ì„ ì¶”ê°€í•´ì¤˜ì•¼ í•œë‹¤.</p><blockquote><p>-XX:NativeMemoryTracking=summary</p></blockquote><h2 id="ë©”ëª¨ë¦¬-ì‚¬ìš©-í˜„í™©-ë² ì´ìŠ¤ë¼ì¸-ì§€ì •"><a href="#ë©”ëª¨ë¦¬-ì‚¬ìš©-í˜„í™©-ë² ì´ìŠ¤ë¼ì¸-ì§€ì •" class="headerlink" title="ë©”ëª¨ë¦¬ ì‚¬ìš© í˜„í™© ë² ì´ìŠ¤ë¼ì¸ ì§€ì •"></a>ë©”ëª¨ë¦¬ ì‚¬ìš© í˜„í™© ë² ì´ìŠ¤ë¼ì¸ ì§€ì •</h2><p>ì´ì œë¶€í„° ì•Œì•„ë³¼ ë©”ëª¨ë¦¬ ì‚¬ìš© ì¶”ì  ë°©ë²•ì€ <strong>ì–´ë–¤ ê¸°ì¤€ì  ëŒ€ë¹„ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°(diff)ì„ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤.</strong> ë”°ë¼ì„œ ë¨¼ì € ë¹„êµ ê¸°ì¤€ì´ ë  ë² ì´ìŠ¤ë¼ì¸(ê¸°ì¤€ì )ì„ ì§€ì •í•´ì¤€ë‹¤.</p><blockquote><p>jcmd {PID} VM.native_memory baseline</p></blockquote><p>ìœ„ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ PIDì™€ í•¨ê»˜ <code>Baseline succeed</code>ë¼ëŠ” ì§¤ë§‰í•œ ë©”ì‹œì§€ë§Œ ì¶œë ¥ëœë‹¤. ë¹„êµ ê¸°ì¤€ì¸ ë² ì´ìŠ¤ë¼ì¸ì´ ì§€ì •ëë‹¤ëŠ” ëœ»ì´ë‹¤.</p><h2 id="ë©”ëª¨ë¦¬-ì‚¬ìš©-í˜„í™©-ì¶œë ¥-ì´ˆê¸°"><a href="#ë©”ëª¨ë¦¬-ì‚¬ìš©-í˜„í™©-ì¶œë ¥-ì´ˆê¸°" class="headerlink" title="ë©”ëª¨ë¦¬ ì‚¬ìš© í˜„í™© ì¶œë ¥ - ì´ˆê¸°"></a>ë©”ëª¨ë¦¬ ì‚¬ìš© í˜„í™© ì¶œë ¥ - ì´ˆê¸°</h2><p>ì´ì œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ <strong>ë©”ëª¨ë¦¬ ì‚¬ìš© í•­ëª©ë³„ë¡œ ë² ì´ìŠ¤ë¼ì¸ ëŒ€ë¹„ ì‚¬ìš©ëŸ‰ ì¦ê°(diff)ì„ ë³´ì—¬ì¤€ë‹¤.</strong></p><blockquote><p>jcmd {PID} VM.native_memory summary.diff</p></blockquote><p>ì§€ê¸ˆê¹Œì§€ ìˆ˜í–‰í•œ ë² ì´ìŠ¤ë¼ì¸ ì§€ì •ê³¼ ì´ˆê¸° í˜„í™© ì¶œë ¥ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><p><img src="https://i.imgur.com/SGbIKgm.png" alt="Imgur"></p><p>ê·¸ë¦¬ê³  Native ë©”ëª¨ë¦¬ëŠ” Internal í•­ëª©ì— í‘œì‹œë˜ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ í›„ ë³„ë‹¤ë¥¸ ì‘ì—… ì—†ëŠ” ì´ˆê¸° ìƒíƒœì—ì„œ Native ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì€ 44KB ì´ë‹¤.</p><p>ìœ„ ëª…ë ¹ì€ <code>jstat</code>ì²˜ëŸ¼ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ì˜µì…˜ì€ ì—†ëŠ” ê²ƒ ê°™ê³ , í•„ìš”í•  ë•Œë§ˆë‹¤ ì§ì ‘ ì‹¤í–‰í•˜ê³  ì¶œë ¥ ë‚´ìš©ì„ í™•ì¸í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•œë‹¤.</p><h2 id="ë©”ëª¨ë¦¬-ì‚¬ìš©-í˜„í™©-ì¶œë ¥-DirectBuffer-ì‚¬ìš©-ì¤‘"><a href="#ë©”ëª¨ë¦¬-ì‚¬ìš©-í˜„í™©-ì¶œë ¥-DirectBuffer-ì‚¬ìš©-ì¤‘" class="headerlink" title="ë©”ëª¨ë¦¬ ì‚¬ìš© í˜„í™© ì¶œë ¥ - DirectBuffer ì‚¬ìš© ì¤‘"></a>ë©”ëª¨ë¦¬ ì‚¬ìš© í˜„í™© ì¶œë ¥ - DirectBuffer ì‚¬ìš© ì¤‘</h2><p><code>DirectBuffer</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‘ì—…ì„ ì‹¤í–‰í•œ í›„ì— ë‹¤ì‹œ <code>jcmd {PID} VM.native_memory summary.diff</code>ë¥¼ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ Internal í•­ëª©ì˜ ì‚¬ìš©ëŸ‰ì´ ê¸°ì¡´ 44KBì—ì„œ 150MBë¡œ ëŒ€í­ ëŠ˜ì–´ë‚œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/t9gmDhx.png" alt="Imgur"></p><p>ì‹¤ì œ ì½”ë“œì—ì„œë„ ë‹¤ìŒê³¼ ê°™ì´ 3ê°œì˜ <code>DirectBuffer</code>ë¥¼ ê° 50M ì”© í• ë‹¹í–ˆìœ¼ë¯€ë¡œ ìœ„ ê·¸ë¦¼ì—ì„œ ì¶œë ¥ëœ ë‚´ìš©ê³¼ ì˜ ë¶€í•©í•œë‹¤.</p><p><img src="https://i.imgur.com/2AfnkJj.png" alt="Imgur"></p><h2 id="ë©”ëª¨ë¦¬-ì‚¬ìš©-í˜„í™©-ì¶œë ¥-DirectBuffer-ì‚¬ìš©-ì™„ë£Œ-í›„"><a href="#ë©”ëª¨ë¦¬-ì‚¬ìš©-í˜„í™©-ì¶œë ¥-DirectBuffer-ì‚¬ìš©-ì™„ë£Œ-í›„" class="headerlink" title="ë©”ëª¨ë¦¬ ì‚¬ìš© í˜„í™© ì¶œë ¥ - DirectBuffer ì‚¬ìš© ì™„ë£Œ í›„"></a>ë©”ëª¨ë¦¬ ì‚¬ìš© í˜„í™© ì¶œë ¥ - DirectBuffer ì‚¬ìš© ì™„ë£Œ í›„</h2><p><code>DirectBuffer</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‘ì—… ì™„ë£Œ í›„ ë³„ë‹¤ë¥¸ ì¡°ì¹˜ ì—†ì´ ë‹¤ì‹œ <code>jcmd {PID} VM.native_memory summary.diff</code>ë¥¼ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ Internal í•­ëª©ì˜ ì‚¬ìš©ëŸ‰ì´ 150MBì—ì„œ 328KBë¡œ ëŒ€í­ ì¤„ì–´ë“  ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/PRG5Nqh.png" alt="Imgur"></p><p>ì¦‰ <code>DirectBuffer</code> ì‚¬ìš©ì´ ëë‚œ í›„ì— ìë™ìœ¼ë¡œ Native ë©”ëª¨ë¦¬ê°€ ì •ìƒì ìœ¼ë¡œ íšŒìˆ˜ëìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.</p><h2 id="ë”-ì½ì„-ê±°ë¦¬"><a href="#ë”-ì½ì„-ê±°ë¦¬" class="headerlink" title="ë” ì½ì„ ê±°ë¦¬"></a>ë” ì½ì„ ê±°ë¦¬</h2><ul><li>jcmd ëª…ë ¹ í•´ì„¤(ê³µì‹ ë¬¸ì„œë³´ë‹¤ í›¨ì”¬ ë‚˜ìŒ): <a href="https://www.javacodegeeks.com/2016/03/jcmd-one-jdk-command-line-tool-rule.html" target="_blank" rel="noopener">https://www.javacodegeeks.com/2016/03/jcmd-one-jdk-command-line-tool-rule.html</a></li></ul><h2 id="ì •ë¦¬"><a href="#ì •ë¦¬" class="headerlink" title="ì •ë¦¬"></a>ì •ë¦¬</h2><blockquote><ul><li><p>Javaì—ì„œë„ <code>DirectBuffer</code>ë¥¼ ì´ìš©í•´ì„œ DMAë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤.</p></li><li><p>DMAì— í™œìš©ëœ Native ë©”ëª¨ë¦¬ëŠ” ì‚¬ìš© ì™„ë£Œ í›„ JVM GCì™€ ë¬´ê´€í•˜ê²Œ(ì¦‰ ë‹¤ë¥¸ ì ˆì°¨ì— ì˜í•´) ìë™ìœ¼ë¡œ ë°˜í™˜ëœë‹¤.</p></li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java-Native-Memory-Tracking&quot;&gt;&lt;a href=&quot;#Java-Native-Memory-Tracking&quot; class=&quot;headerlink&quot; title=&quot;Java Native Memory Tracking&quot;&gt;&lt;/a&gt;Java 
      
    
    </summary>
    
      <category term="Performance" scheme="http://homoefficio.github.io/categories/Performance/"/>
    
    
      <category term="Native Memory" scheme="http://homoefficio.github.io/tags/Native-Memory/"/>
    
      <category term="DirectBuffer" scheme="http://homoefficio.github.io/tags/DirectBuffer/"/>
    
      <category term="Direct Memory Access" scheme="http://homoefficio.github.io/tags/Direct-Memory-Access/"/>
    
      <category term="DMA" scheme="http://homoefficio.github.io/tags/DMA/"/>
    
      <category term="jcmd" scheme="http://homoefficio.github.io/tags/jcmd/"/>
    
      <category term="NativeMemoryTracking" scheme="http://homoefficio.github.io/tags/NativeMemoryTracking/"/>
    
      <category term="VM.native_memory" scheme="http://homoefficio.github.io/tags/VM-native-memory/"/>
    
      <category term="baseline" scheme="http://homoefficio.github.io/tags/baseline/"/>
    
      <category term="summary.diff" scheme="http://homoefficio.github.io/tags/summary-diff/"/>
    
  </entry>
  
  <entry>
    <title>Spring Dataì—ì„œ Batch Insert ìµœì í™”</title>
    <link href="http://homoefficio.github.io/2020/01/25/Spring-Data%EC%97%90%EC%84%9C-Batch-Insert-%EC%B5%9C%EC%A0%81%ED%99%94/"/>
    <id>http://homoefficio.github.io/2020/01/25/Spring-Dataì—ì„œ-Batch-Insert-ìµœì í™”/</id>
    <published>2020-01-25T14:06:24.000Z</published>
    <updated>2020-01-30T16:44:46.720Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Spring-Dataì—ì„œ-Batch-Insert-ìµœì í™”"><a href="#Spring-Dataì—ì„œ-Batch-Insert-ìµœì í™”" class="headerlink" title="Spring Dataì—ì„œ Batch Insert ìµœì í™”"></a>Spring Dataì—ì„œ Batch Insert ìµœì í™”</h1><p>Spring Data JPAê°€ ì•ˆê²¨ì£¼ëŠ” í¸ë¦¬í•¨ ë’¤ì—ëŠ” ê°€ë” ì„±ëŠ¥ ì†ì‹¤ì´ ìˆ¨ì–´ìˆë‹¤. ì´ë²ˆì— ì•Œì•„ë³¼ Batch Insertë„ ê·¸ëŸ° ì˜ˆ ì¤‘ í•˜ë‚˜ë‹¤.</p><p>ì„±ëŠ¥ ì†ì‹¤ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ì´ìœ ì™€ 2ê°€ì§€ í•´ê²° ë°©ë²•ì„ ì•Œì•„ë³¸ë‹¤.</p><p>ì „ì²´ ì½”ë“œëŠ” <a href="https://github.com/HomoEfficio/micro-benchmark-spring-boot-batch-insert" target="_blank" rel="noopener">https://github.com/HomoEfficio/micro-benchmark-spring-boot-batch-insert</a> ì—¬ê¸°ì—ì„œ ë³¼ ìˆ˜ ìˆìœ¼ë©° ì•„ì£¼ ì‰½ê²Œ ì§ì ‘ í…ŒìŠ¤íŠ¸í•´ ë³¼ ìˆ˜ë„ ìˆë‹¤.</p><h1 id="Batch-Insertë€"><a href="#Batch-Insertë€" class="headerlink" title="Batch Insertë€?"></a>Batch Insertë€?</h1><p>ê±°ì°½í•œ ê±° í•˜ë‚˜ë„ ì—†ë‹¤. 3ê±´ì˜ ë°ì´í„°ë¥¼ insert í•œë‹¤ê³  í•  ë•Œ,</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table1 (col1, col2) <span class="keyword">VALUES</span> (val11, val12);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table1 (col1, col2) <span class="keyword">VALUES</span> (val21, val22);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table1 (col1, col2) <span class="keyword">VALUES</span> (val31, val32);</span><br></pre></td></tr></table></figure><p>ì´ë ‡ê²Œ í•˜ë©´ ê°œë³„ insertê³ ,</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table1 (col1, col2) <span class="keyword">VALUES</span></span><br><span class="line">(val11, val12),</span><br><span class="line">(val21, val22),</span><br><span class="line">(val31, val32);</span><br></pre></td></tr></table></figure><p>ì´ë ‡ê²Œ í•˜ë©´ batch insertë‹¤. ê·¸ëƒ¥ ë´ë„ batch insert ìª½ì´ í›¨ì”¬ íš¨ìœ¨ì ì„ì„ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆë‹¤.</p><p>DB ê´€ì ì—ì„œë³´ë©´ ê°„ë‹¨í•œë°, Spring Dataì—ì„œ ì €ëŸ° DMLì´ DBë¡œ ì „ë‹¬ë˜ê²Œ í•˜ëŠ” ê±´ ê·¸ë ‡ê²Œ ê°„ë‹¨í•˜ì§€ë§Œì€ ì•Šë‹¤.</p><h1 id="Hibernateì˜-Batch-Insert-ì œì•½-ì‚¬í•­"><a href="#Hibernateì˜-Batch-Insert-ì œì•½-ì‚¬í•­" class="headerlink" title="Hibernateì˜ Batch Insert ì œì•½ ì‚¬í•­"></a>Hibernateì˜ Batch Insert ì œì•½ ì‚¬í•­</h1><p><a href="https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#batch-session-batch-insert" target="_blank" rel="noopener">Hibernate ë ˆí¼ëŸ°ìŠ¤ ë¬¸ì„œ 12.2.1. Batch inserts</a>ì˜ ë°”ë¡œ ìœ„ì— ë‹¤ìŒê³¼ ê°™ì´ <strong>ì‹ë³„ì ìƒì„±ì— IDENTITY ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ Hibernateê°€ JDBC ìˆ˜ì¤€ì—ì„œ batch insertë¥¼ ë¹„í™œì„±í™”</strong>í•œë‹¤ê³  ë‚˜ì™€ìˆë‹¤.</p><blockquote><p>Hibernate disables insert batching at the JDBC level transparently if you use an identity identifier generator.</p></blockquote><p>ë¹„í™œì„±í™”í•˜ëŠ” ì´ìœ ëŠ” Hibernate ë¬¸ì„œì—ëŠ” ì—†ëŠ” ê²ƒ ê°™ì•„ì„œ ë‹¤ì‹œ ì°¾ì•„ë³´ë‹ˆ StackOverflowì— <a href="https://stackoverflow.com/a/27732138" target="_blank" rel="noopener">Vlad Mihalceaê°€ ì˜¬ë¦° ëŒ“ê¸€</a>ì—ì„œ ë‹¨ì„œë¥¼ ì°¾ì„ ìˆ˜ ìˆì—ˆë‹¤.</p><blockquote><p>The only drawback is that we canâ€™t know the newly assigned value prior to executing the INSERT statement. This restriction is hindering the â€œtransactional write behindâ€ flushing strategy adopted by Hibernate. For this reason, Hibernates disables the JDBC batch support for entities using the IDENTITY generator.</p></blockquote><p>ìš”ëŠ” <strong>ìƒˆë¡œ í• ë‹¹í•  Key ê°’ì„ ë¯¸ë¦¬ ì•Œ ìˆ˜ ì—†ëŠ” IDENTITY ë°©ì‹ì„ ì‚¬ìš©í•  ë•Œ Batch Supportë¥¼ ì§€ì›í•˜ë©´ Hibernateê°€ ì±„íƒí•œ flush ë°©ì‹ì¸ â€˜Transactional Write Behindâ€™ì™€ ì¶©ëŒì´ ë°œìƒí•˜ê¸° ë•Œë¬¸</strong>ì—, IDENTITY ë°©ì‹ì—ì„œëŠ” Batch Insertë¥¼ ë¹„í™œì„±í™” í•œë‹¤ëŠ” ì–˜ê¸°ë‹¤. ë”°ë¼ì„œ ê·¸ëƒ¥ <strong>ì¼ìƒì ìœ¼ë¡œ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©í•˜ëŠ” IDENTITY ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ Batch InsertëŠ” ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.</strong></p><p>ê·¸ë ‡ë‹¤ê³  Batch Insertë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ IDENTITY ë°©ì‹ë§ê³  ì„£ë¶ˆë¦¬ SEQUENCE ë°©ì‹ì´ë‚˜ TABLE ë°©ì‹ì„ ì˜ëª» ì‚¬ìš©í•˜ë©´ ë” ë‚˜ìœ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤. <strong>ì±„ë²ˆì— ë”°ë¥¸ ë¶€í•˜ê°€ ìƒë‹¹íˆ í° SEQUENCE ë°©ì‹ì´ë‚˜ TABLE ë°©ì‹ì„ ë³„ë‹¤ë¥¸ ì¡°ì¹˜ ì—†ì´ ì‚¬ìš©í•˜ë©´ Batch Insertë¥¼ ì“¸ ìˆ˜ ì—†ëŠ” IDENTITY ë°©ì‹ë³´ë‹¤ ë” ëŠë¦¬ë‹¤.</strong> ìì„¸í•œ ë‚´ìš©ì€ <a href="https://github.com/HomoEfficio/dev-tips/blob/master/JPA-GenerationType-ë³„-INSERT-ì„±ëŠ¥-ë¹„êµ.md" target="_blank" rel="noopener">https://github.com/HomoEfficio/dev-tips/blob/master/JPA-GenerationType-ë³„-INSERT-ì„±ëŠ¥-ë¹„êµ.md</a> ë¥¼ ì°¸ê³ í•œë‹¤. ë‚˜ë¦„ ê±´ì§ˆë§Œí•œ ë‚´ìš©ì´ ê½¤ ìˆìœ¼ë‹ˆ ê¼­ í•œ ë²ˆ ë³´ê¸¸ ê¶Œí•œë‹¤.</p><p>ë¬¸ì œ ë°œìƒ ì›ì¸ì—ì„œ ìœ ì¶”í•  ìˆ˜ ìˆëŠ” í•´ê²° ë°©ë²•ì€ 2ê°€ì§€ê°€ ìˆë‹¤. </p><ol><li>SEQUENCEë‚˜ TABLE ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ì„œ ì±„ë²ˆ ë¶€í•˜ë¥¼ ë‚®ì¶”ëŠ” ë°©ë²•</li><li>ì•„ì˜ˆ Spring Data JPAë¥¼ ë²—ì–´ë‚˜ëŠ” ë°©ë²•</li></ol><h1 id="ì±„ë²ˆ-ë¶€í•˜-ì ˆê°"><a href="#ì±„ë²ˆ-ë¶€í•˜-ì ˆê°" class="headerlink" title="ì±„ë²ˆ ë¶€í•˜ ì ˆê°"></a>ì±„ë²ˆ ë¶€í•˜ ì ˆê°</h1><p>Batch Insertë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” IDENTITY ë°©ì‹ ëŒ€ì‹ ì— SEQUENCEë‚˜ TABLE ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ì„œ ì±„ë²ˆ ë¶€í•˜ë¥¼ ë‚®ì¶”ëŠ” ë°©ë²•ì€ <a href="https://dev.to/smartyansh/best-possible-hibernate-configuration-for-batch-inserts-2a7a" target="_blank" rel="noopener">https://dev.to/smartyansh/best-possible-hibernate-configuration-for-batch-inserts-2a7a</a> ì—ì„œ ì°¾ì„ ìˆ˜ ìˆì—ˆë‹¤.</p><p>ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•˜ë©´ ì±„ë²ˆ ìì²´ë¥¼ Batch ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•´ì„œ ì±„ë²ˆ ë¶€í•˜ë¥¼ ë‚®ì¶”ëŠ” ë°©ì‹ì´ë‹¤.</p><h2 id="ì¼ë°˜ì ì¸-ì±„ë²ˆ"><a href="#ì¼ë°˜ì ì¸-ì±„ë²ˆ" class="headerlink" title="ì¼ë°˜ì ì¸ ì±„ë²ˆ"></a>ì¼ë°˜ì ì¸ ì±„ë²ˆ</h2><p>SEQUENCE ë°©ì‹ì€ ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.SEQUENCE)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì´ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ Sequenceë¥¼ ì§€ì›í•˜ëŠ” DBì—ì„œëŠ” Sequenceë¥¼ ì´ìš©í•´ì„œ ì±„ë²ˆí•œë‹¤. ì•„ë˜ëŠ” Sequenceë¥¼ ì§€ì›í•˜ëŠ” H2 DBë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ ë‚˜ì˜¤ëŠ” Hibernate ë¡œê·¸ ì¼ë¶€ë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">Hibernate: call next value for hibernate_sequence</span><br><span class="line">Hibernate: call next value for hibernate_sequence</span><br><span class="line">Hibernate: call next value for hibernate_sequence</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>Sequenceë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” DBì—ì„œëŠ” Tableì„ ì´ìš©í•´ì„œ ì±„ë²ˆí•œë‹¤. ì•„ë˜ëŠ” Sequenceë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” MySQL DBì˜ ë¡œê·¸ ì¼ë¶€ë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">SET autocommit=0</span><br><span class="line">select next_val as id_val from hibernate_sequence for update</span><br><span class="line">update hibernate_sequence set next_val= 2 where next_val=1</span><br><span class="line">commit</span><br><span class="line">autocommit=1</span><br><span class="line">autocommit=0</span><br><span class="line">select next_val as id_val from hibernate_sequence for update</span><br><span class="line">update hibernate_sequence set next_val= 3 where next_val=2</span><br><span class="line">commit</span><br><span class="line">SET autocommit=1</span><br><span class="line">SET autocommit=0</span><br><span class="line">select next_val as id_val from hibernate_sequence for update</span><br><span class="line">update hibernate_sequence set next_val= 4 where next_val=3</span><br><span class="line">commit</span><br><span class="line">SET autocommit=1</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ë²ˆí˜¸ í•˜ë‚˜ ë”¸ ë•Œë§ˆë‹¤ ì¿¼ë¦¬ë¥¼ 2ê°œì”© ë‚ ë¦¬ê²Œ ë˜ë¯€ë¡œ ê½¤ í° ë¶€í•˜ê°€ ë°œìƒë  ê²ƒì„ì„ ì§ì‘í•  ìˆ˜ ìˆë‹¤.</p><h2 id="Batch-ì±„ë²ˆ"><a href="#Batch-ì±„ë²ˆ" class="headerlink" title="Batch ì±„ë²ˆ"></a>Batch ì±„ë²ˆ</h2><p>ì±„ë²ˆ ìì²´ë¥¼ Batchë¡œ ì²˜ë¦¬í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ 500ê°œì”© í•œêº¼ë²ˆì— ì±„ë²ˆí•´ì„œ ì¿¼ë¦¬ íšŸìˆ˜ë¥¼ ëŒ€í­ ì¤„ì´ê³  ì„±ëŠ¥ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">SET autocommit=0</span><br><span class="line">select next_val as id_val from hibernate_sequence for update</span><br><span class="line">update hibernate_sequence set next_val= 501 where next_val=1</span><br><span class="line">commit</span><br><span class="line">SET autocommit=1</span><br><span class="line">SET autocommit=0</span><br><span class="line">select next_val as id_val from hibernate_sequence for update</span><br><span class="line">update hibernate_sequence set next_val= 1001 where next_val=501</span><br><span class="line">commit</span><br><span class="line">SET autocommit=1</span><br><span class="line">SET autocommit=0</span><br><span class="line">select next_val as id_val from hibernate_sequence for update</span><br><span class="line">update hibernate_sequence set next_val= 1501 where next_val=1001</span><br><span class="line">commit</span><br><span class="line">SET autocommit=1</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>Batch ì±„ë²ˆì€ ë‹¤ìŒê³¼ ê°™ì´ ë‹¤ì†Œ ë³µì¡í•œ Hibernate ì „ìš© ì• ë„ˆí…Œì´ì…˜ì„ ì§€ì •í•´ì•¼ í•œë‹¤. </p><p>ì±„ë²ˆ ë°°ì¹˜ í¬ê¸°ë„ ì• ë„ˆí…Œì´ì…˜ ë‚´ì—ì„œ ì§€ì •í•´ì•¼ í•˜ë¯€ë¡œ ë°°ì¹˜ í¬ê¸° ì„¤ì •ì„ yml íŒŒì¼ë¡œ ì™¸ë¶€í™” í•  ìˆ˜ ì—†ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ë˜í•œ ì±„ë²ˆ ë°°ì¹˜ í¬ê¸°ëŠ” ì—”í‹°í‹° í´ë˜ìŠ¤ì—ì„œ Hibernate ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•˜ê³ , Batch Insertì˜ ë°°ì¹˜ í¬ê¸°ëŠ” yml íŒŒì¼ë¡œ ì§€ì •í•˜ë¯€ë¡œ ë‘ ê°’ì´ ë‹¬ë¼ì§ˆ ê°€ëŠ¥ì„±ì´ ìˆë‹¤ëŠ” ê²ƒë„ ìš´ì˜ ìƒ ë‹¨ì ì´ë¼ê³  í•  ìˆ˜ ìˆê² ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemSequence</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GenericGenerator</span>(</span><br><span class="line">            name = <span class="string">"SequenceGenerator"</span>,</span><br><span class="line">            strategy = <span class="string">"org.hibernate.id.enhanced.SequenceStyleGenerator"</span>,</span><br><span class="line">            parameters = &#123;</span><br><span class="line">                    <span class="meta">@Parameter</span>(name = <span class="string">"sequence_name"</span>, value = <span class="string">"hibernate_sequence"</span>),</span><br><span class="line">                    <span class="meta">@Parameter</span>(name = <span class="string">"optimizer"</span>, value = <span class="string">"pooled"</span>),</span><br><span class="line">                    <span class="meta">@Parameter</span>(name = <span class="string">"initial_value"</span>, value = <span class="string">"1"</span>),</span><br><span class="line">                    <span class="meta">@Parameter</span>(name = <span class="string">"increment_size"</span>, value = <span class="string">"500"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="meta">@GeneratedValue</span>(</span><br><span class="line">            strategy = GenerationType.SEQUENCE,</span><br><span class="line">            generator = <span class="string">"SequenceGenerator"</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Spring-Data-JDBC"><a href="#Spring-Data-JDBC" class="headerlink" title="Spring Data JDBC"></a>Spring Data JDBC</h1><p>Spring Dataì—ëŠ” JPAë§Œ ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤. <a href="https://spring.io/projects/spring-data" target="_blank" rel="noopener">https://spring.io/projects/spring-data</a> ì— ë³´ë©´ ìƒë‹¹íˆ ë‹¤ì–‘í•œ ì €ì¥ì†Œë¥¼ ì§€ì›í•˜ëŠ” ì„œë¸Œ í”„ë¡œì íŠ¸ê°€ ë§ì´ ìˆìœ¼ë©°, ì§€ê¸ˆì²˜ëŸ¼ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì—ì„œëŠ” JPA ëŒ€ì‹  JDBCë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.</p><h2 id="JdbcTemplate-batchUpdate"><a href="#JdbcTemplate-batchUpdate" class="headerlink" title="JdbcTemplate.batchUpdate()"></a>JdbcTemplate.batchUpdate()</h2><p>JdbcTemplateì—ëŠ” Batchë¥¼ ì§€ì›í•˜ëŠ” <code>batchUpdate()</code> ë©”ì„œë“œê°€ ë§ˆë ¨ë¼ìˆë‹¤. ì—¬ëŸ¬ ê°€ì§€ë¡œ Overloading ë¼ ìˆì–´ì„œ í¸ë¦¬í•œ ë©”ì„œë“œë¥¼ ê³¨ë¼ì„œ ì‚¬ìš©í•˜ë©´ ë˜ëŠ”ë°, ì—¬ê¸°ì—ì„œëŠ” batch í¬ê¸°ë¥¼ ì§€ì •í•  ìˆ˜ ìˆëŠ” <code>BatchPreparedStatementSetter</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ì•„ë˜ì˜ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ êµ¬í˜„í•´ë³¸ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">batchUpdate(String sql, BatchPreparedStatementSetter pss)</span><br></pre></td></tr></table></figure><h2 id="ì£¼ìš”-êµ¬í˜„-ë¶€ë¶„"><a href="#ì£¼ìš”-êµ¬í˜„-ë¶€ë¶„" class="headerlink" title="ì£¼ìš” êµ¬í˜„ ë¶€ë¶„"></a>ì£¼ìš” êµ¬í˜„ ë¶€ë¶„</h2><p><code>ItemJdbc</code>ë¼ëŠ” ê°ì²´ë¥¼ <code>ITEM_JDBC</code> í…Œì´ë¸”ì— Batch Insertë¡œ ì €ì¥í•œë‹¤ê³  ê°€ì •í•˜ê³ , ì£¼ìš” êµ¬í˜„ë¶€ë¥¼ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤. </p><p><code>batchSize</code> ë³€ìˆ˜ë¥¼ í†µí•´ ë°°ì¹˜ í¬ê¸°ë¥¼ ì§€ì •í•˜ê³ , ì „ì²´ ë°ì´í„°ë¥¼ ë°°ì¹˜ í¬ê¸°ë¡œ ë‚˜ëˆ ì„œ Batch Insertë¥¼ ì‹¤í–‰í•˜ê³ , ìíˆ¬ë¦¬ ë°ì´í„°ë¥¼ ë‹¤ì‹œ Batch Insertë¡œ ì €ì¥í•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemJdbcRepositoryImpl</span> <span class="keyword">implements</span> <span class="title">ItemJdbcRepository</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;batchSize&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> batchSize;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAll</span><span class="params">(List&lt;ItemJdbc&gt; items)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> batchCount = <span class="number">0</span>;</span><br><span class="line">        List&lt;ItemJdbc&gt; subItems = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; items.size(); i++) &#123;</span><br><span class="line">            subItems.add(items.get(i));</span><br><span class="line">            <span class="keyword">if</span> ((i + <span class="number">1</span>) % batchSize == <span class="number">0</span>) &#123;</span><br><span class="line">                batchCount = batchInsert(batchSize, batchCount, subItems);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!subItems.isEmpty()) &#123;</span><br><span class="line">            batchCount = batchInsert(batchSize, batchCount, subItems);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"batchCount: "</span> + batchCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">batchInsert</span><span class="params">(<span class="keyword">int</span> batchSize, <span class="keyword">int</span> batchCount, List&lt;ItemJdbc&gt; subItems)</span> </span>&#123;</span><br><span class="line">        jdbcTemplate.batchUpdate(<span class="string">"INSERT INTO ITEM_JDBC (`NAME`, `DESCRIPTION`) VALUES (?, ?)"</span>,</span><br><span class="line">                <span class="keyword">new</span> BatchPreparedStatementSetter() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValues</span><span class="params">(PreparedStatement ps, <span class="keyword">int</span> i)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">                        ps.setString(<span class="number">1</span>, subItems.get(i).getName());</span><br><span class="line">                        ps.setString(<span class="number">2</span>, subItems.get(i).getDescription());</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBatchSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> subItems.size();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        subItems.clear();</span><br><span class="line">        batchCount++;</span><br><span class="line">        <span class="keyword">return</span> batchCount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ì‹¤í—˜-ê²°ê³¼"><a href="#ì‹¤í—˜-ê²°ê³¼" class="headerlink" title="ì‹¤í—˜ ê²°ê³¼"></a>ì‹¤í—˜ ê²°ê³¼</h1><p>ì–´ëŠ ë°©ì‹ì´ ê°€ì¥ ë¹ ë¥¼ê¹Œ?</p><p>ì•„ë˜ì™€ ê°™ì€ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ í•´ ë³¸ ê²°ê³¼ <strong>Spring Data JDBC ë°©ì‹ì´ ê°€ì¥ ë¹ ë¥´ë‹¤.</strong></p><h2 id="í…ŒìŠ¤íŠ¸-í™˜ê²½"><a href="#í…ŒìŠ¤íŠ¸-í™˜ê²½" class="headerlink" title="í…ŒìŠ¤íŠ¸ í™˜ê²½"></a>í…ŒìŠ¤íŠ¸ í™˜ê²½</h2><ul><li>Java 11</li><li>Spring Boot 2.2.4</li><li>MySQL 5.7.18</li><li>Sprint Data JPA 2.2.4</li><li>Hibernate Core 5.4.10.Final</li><li>Hibernate Commons Annotations 5.1.0.Final</li><li>Sprint Data JDBC 1.1.4</li></ul><h2 id="ì„±ëŠ¥-ë¹„êµ"><a href="#ì„±ëŠ¥-ë¹„êµ" class="headerlink" title="ì„±ëŠ¥ ë¹„êµ"></a>ì„±ëŠ¥ ë¹„êµ</h2><p>ê·¸ë ‡ë‹¤ë©´ ì–¼ë§ˆë‚˜ ì°¨ì´ê°€ ë‚ ê¹Œ?</p><p>ì—°ê´€ ê´€ê³„ ì—†ì´ ë‹¨ í•˜ë‚˜ì˜ ì—”í‹°í‹°ë§Œ ì €ì¥í•˜ëŠ” ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ, ë°°ì¹˜ í¬ê¸°ë¥¼ ë°”ê¿”ê°€ë©´ì„œ 10,000ê±´ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ì‹¤í—˜ ê²°ê³¼ ì†Œìš” ì‹œê°„(ì´ˆ ë‹¨ìœ„) ë° ë¹„êµ ë°°ìœ¨ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><table><thead><tr><th>ë°°ì¹˜ í¬ê¸°</th><th>JDBC(A)</th><th>Batch SEQUENCE(B)</th><th>IDENTITY(C)</th><th>(B)/(A)</th><th>(C)/(A)</th></tr></thead><tbody><tr><td>10</td><td>0.885</td><td>3.072</td><td>5.087</td><td>3.47</td><td>5.748022599</td></tr><tr><td>50</td><td>0.391</td><td>1.007</td><td>4.097</td><td>2.58</td><td>10.47826087</td></tr><tr><td>100</td><td>0.356</td><td>0.808</td><td>5.218</td><td>2.27</td><td>14.65730337</td></tr><tr><td>500</td><td>0.226</td><td>0.515</td><td>5.637</td><td>2.28</td><td>24.94247788</td></tr><tr><td>1000</td><td>0.216</td><td>0.480</td><td>6.241</td><td>2.22</td><td>28.89351852</td></tr><tr><td>5000</td><td>0.189</td><td>0.447</td><td>5.052</td><td>2.37</td><td>26.73015873</td></tr></tbody></table><p>ë°°ì¹˜ í¬ê¸°ì— ë”°ë¼ ë‹¤ë¥´ì§€ë§Œ, <strong>Spring Data JDBCì˜ <code>batchUpdate()</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ Hibernate Batch Sequence ë°©ì‹ë³´ë‹¤ ëŒ€ëµ 2 ~ 3ë°° ì •ë„ ë¹ ë¥´ê³ , Batch Insertê°€ ì‚¬ìš©ë˜ì§€ ëª» í•˜ëŠ” Hibernate IDENTITY ë°©ì‹ë³´ë‹¤ëŠ” 5 ~ 25ë°° ì •ë„ ë¹ ë¥´ë‹¤.</strong> </p><p>MySQLì—ëŠ” Sequenceê°€ ì—†ìœ¼ë¯€ë¡œ SEQUENCE ë°©ì‹ì„ ì§€ì •í–ˆë‹¤ê³  í•˜ë”ë¼ë„ ì‚¬ì‹¤ ìƒ TABLE ë°©ì‹ìœ¼ë¡œ ë™ì‘í–ˆë‹¤ëŠ” ê²ƒì„ ê°ì•ˆí•˜ë©´, <strong>Sequenceê°€ ì§€ì›ë˜ëŠ” DBì—ì„œëŠ” TABLE ë°©ì‹ë³´ë‹¤ ì±„ë²ˆ ë¶€í•˜ê°€ ë” ì ì€ SEQUENCE ë°©ì‹ì„ Batch ìŠ¤íƒ€ì¼ë¡œ ì‚¬ìš©í•˜ë©´ Spring Data JDBC ë°©ì‹ê³¼ ë¹„ìŠ·í•œ ì„±ëŠ¥ì„ ë³´ì¼ ê²ƒ ê°™ë‹¤.</strong></p><h1 id="ë§ˆë¬´ë¦¬"><a href="#ë§ˆë¬´ë¦¬" class="headerlink" title="ë§ˆë¬´ë¦¬"></a>ë§ˆë¬´ë¦¬</h1><blockquote><ul><li><p><strong>ì•„ì£¼ ë§ì€ ìˆ˜ì˜ ë°ì´í„°ë¥¼ í•œ êº¼ë²ˆì— ì…ë ¥í•  ë•ŒëŠ” Spring Data JPAë¥¼ ì ì‹œ ë’¤ë¡œí•˜ê³  Spring Data JDBCì˜ <code>batchUpdate()</code>ë¥¼ í™œìš©í•˜ëŠ” ê²ƒë„ ì¢‹ë‹¤.</strong></p><ul><li>Spring Data JDBCëŠ” Spring Data JPAì™€ í•¨ê»˜ í˜¼ìš©í•´ì„œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆê³ ,</li><li><code>@Transactional</code>ì„ í†µí•´ íŠ¸ëœì­ì…˜ì´ ê´€ë¦¬ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ,</li><li>í˜„ì‹¤ì ìœ¼ë¡œ ê°€ì¥ ë‚˜ì€ ë°©ë²•ì´ë‹¤.</li></ul></li><li><p><strong>Spring Data JPAë¥¼ ì‚¬ìš©í•´ì•¼ë§Œ í•œë‹¤ë©´ IDENTITY ë°©ì‹ ë§ê³  Batch SEQUENCE ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</strong></p><ul><li>ê·¸ëŸ¬ë‚˜ ì´ ë°©ì‹ì€ ì• ë„ˆí…Œì´ì…˜ ì§€ì •ì´ í•„ìš” ì´ìƒ ë³µì¡í•˜ê³ ,</li><li>í…Œì´ë¸” ìƒì„± ì‹œë¶€í„° ì ìš©í•˜ë©´ ê´œì°®ì§€ë§Œ, ì´ë¯¸ ID ìƒì„± ë°©ì‹ì´ IDENTITYì¸ ê¸°ì¡´ í…Œì´ë¸”ì„ SEQUENCE ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•˜ëŠ” ë¶€ë‹´ì´ ìˆê³ ,</li><li>batch í¬ê¸° ì§€ì • ê´€ë ¨ ìš´ì˜ ìƒì˜ ë‹¨ì ì´ ìˆë‹¤.</li></ul></li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Spring-Dataì—ì„œ-Batch-Insert-ìµœì í™”&quot;&gt;&lt;a href=&quot;#Spring-Dataì—ì„œ-Batch-Insert-ìµœì í™”&quot; class=&quot;headerlink&quot; title=&quot;Spring Dataì—ì„œ Batch Insert ìµœì í™”&quot;&gt;
      
    
    </summary>
    
      <category term="Performance" scheme="http://homoefficio.github.io/categories/Performance/"/>
    
    
      <category term="Performance" scheme="http://homoefficio.github.io/tags/Performance/"/>
    
      <category term="Spring Data JPA" scheme="http://homoefficio.github.io/tags/Spring-Data-JPA/"/>
    
      <category term="Spring Data" scheme="http://homoefficio.github.io/tags/Spring-Data/"/>
    
      <category term="Spring Data JDBC" scheme="http://homoefficio.github.io/tags/Spring-Data-JDBC/"/>
    
      <category term="Batch Insert" scheme="http://homoefficio.github.io/tags/Batch-Insert/"/>
    
      <category term="Bulk Insert" scheme="http://homoefficio.github.io/tags/Bulk-Insert/"/>
    
      <category term="MySQL" scheme="http://homoefficio.github.io/tags/MySQL/"/>
    
      <category term="Hibernate" scheme="http://homoefficio.github.io/tags/Hibernate/"/>
    
      <category term="GenerationType" scheme="http://homoefficio.github.io/tags/GenerationType/"/>
    
      <category term="GenerationType.IDENTITY" scheme="http://homoefficio.github.io/tags/GenerationType-IDENTITY/"/>
    
      <category term="GenerationType.SEQUENCE" scheme="http://homoefficio.github.io/tags/GenerationType-SEQUENCE/"/>
    
      <category term="GenerationType.TABLE" scheme="http://homoefficio.github.io/tags/GenerationType-TABLE/"/>
    
      <category term="GenerationType.AUTO" scheme="http://homoefficio.github.io/tags/GenerationType-AUTO/"/>
    
      <category term="IDENTITY column" scheme="http://homoefficio.github.io/tags/IDENTITY-column/"/>
    
      <category term="Auto Increment" scheme="http://homoefficio.github.io/tags/Auto-Increment/"/>
    
      <category term="Sequence" scheme="http://homoefficio.github.io/tags/Sequence/"/>
    
      <category term="Database" scheme="http://homoefficio.github.io/tags/Database/"/>
    
  </entry>
  
  <entry>
    <title>GETì´ëƒ POSTëƒ ê·¸ê²ƒì´ ë¬¸ì œë¡œë‹¤</title>
    <link href="http://homoefficio.github.io/2019/12/25/GET%EC%9D%B4%EB%83%90-POST%EB%83%90-%EA%B7%B8%EA%B2%83%EC%9D%B4-%EB%AC%B8%EC%A0%9C%EB%A1%9C%EB%8B%A4/"/>
    <id>http://homoefficio.github.io/2019/12/25/GETì´ëƒ-POSTëƒ-ê·¸ê²ƒì´-ë¬¸ì œë¡œë‹¤/</id>
    <published>2019-12-25T03:04:39.000Z</published>
    <updated>2019-12-27T14:34:12.388Z</updated>
    
    <content type="html"><![CDATA[<h1 id="GETì´ëƒ-POSTëƒ-ê·¸ê²ƒì´-ë¬¸ì œë¡œë‹¤"><a href="#GETì´ëƒ-POSTëƒ-ê·¸ê²ƒì´-ë¬¸ì œë¡œë‹¤" class="headerlink" title="GETì´ëƒ POSTëƒ ê·¸ê²ƒì´ ë¬¸ì œë¡œë‹¤"></a>GETì´ëƒ POSTëƒ ê·¸ê²ƒì´ ë¬¸ì œë¡œë‹¤</h1><p>ë©°ì¹  ì „ì— <a href="https://www.facebook.com/hanmomhanda/posts/10221495156952479" target="_blank" rel="noopener">í˜ì´ìŠ¤ë¶ì— ì˜¬ë ¸ë˜ ì§ˆë¬¸</a>ì— ì—¬ëŸ¬ë¶„ê»˜ì„œ ì‹œê°„ ë‚´ì„œ ì¢‹ì€ ì˜ê²¬ ë‚˜ëˆ ì£¼ì…”ì„œ, ë‚˜ë§Œ ê¿€êº½í•˜ê³  ë„˜ì–´ê°€ë©´ ë„ë¦¬ê°€ ì•„ë‹Œ ê²ƒ ê°™ì•„ ë‹¤ì‹œ ì •ë¦¬í•´ë³¸ë‹¤.</p><p>ë¨¼ì € ì´ ê¸€ì€ <strong>ë‚˜ë¦„ì˜ ê²°ë¡ ì´ ìˆê¸°ëŠ” í•˜ì§€ë§Œ, ê·¸ê²ƒì´ ì •ë‹µì´ë¼ê³  ë‹¨ì •í•  ìˆ˜ëŠ” ì—†ë‹¤.</strong><br>ë˜í•œ RESTì™€ëŠ” ì•„ë¬´ëŸ° ê´€ê³„ê°€ ì—†ìœ¼ë©°, ì˜¤ì§ HTTP Methodì— ëŒ€í•œ ì–˜ê¸°ë‹¤.</p><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>ë³´í†µ í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ Contentsë¥¼ ì œê³µí•˜ë©´ì„œ ìƒˆë¡œìš´ Resourceì˜ ìƒì„±ì„ ìš”ì²­í•  ë•ŒëŠ”, ê·¸ Contentsë¥¼ í¬í•¨ì‹œì¼œì„œ POSTë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ ëœë‹¤. ì—¬ê¸°ì—ëŠ” ë³„ë‹¤ë¥¸ ì´ê²¬ì´ ì—†ë‹¤.</p><p>ê·¸ëŸ°ë° í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ ì•„ë¬´ëŸ° Contentsë¥¼ ì œê³µí•˜ì§€ ì•Šìœ¼ë©´ì„œ, ê·¸ì € ì„œë²„ë¡œë¶€í„° ì–´ë–¤ Resourceë¥¼ ë°˜í™˜ë°›ìœ¼ë ¤ í•˜ëŠ”ë°, ì‹¤ì œë¡œ ì„œë²„ì—ì„œëŠ” ìƒˆ Resourceë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜í•´ì•¼ í•˜ëŠ” ê²½ìš°ë¼ë©´, GETì„ ì¨ì•¼ í•˜ë‚˜ ì•„ë‹ˆë©´ POSTë¥¼ ì¨ì•¼ í•˜ë‚˜?</p><p>ì˜ˆë¥¼ ë“¤ì–´ í´ë¼ì´ì–¸íŠ¸ê°€ ì•„ë¬´ ë‚´ìš© ì—†ì´ ê·¸ëƒ¥ â€˜í€´ì¦ˆë¥¼ ë‚´ë‹¤ì˜¤â€™ë¼ê³  ì„œë²„ì—ê²Œ ìš”ì²­í•˜ë©´,<br>ì¦‰, ë°˜í™˜ë˜ëŠ” í€´ì¦ˆê°€ ìƒˆë¡œ ë§Œë“  ê±´ì§€ ê¸°ì¡´ì— ë§Œë“¤ì–´ì ¸ ìˆë˜ ê±¸ ë°˜í™˜í•˜ëŠ”ì§€ í´ë¼ì´ì–¸íŠ¸ëŠ” ê´€ì‹¬ ê°€ì§ˆ í•„ìš”ê°€ ì—†ëŠ” ìƒí™©ì´ë¼ë©´,</p><ul><li>GET â€¦/quizzes/new ë¡œ ë³´ë‚¸ë‹¤. (GETì´ì§€ë§Œ ì„œë²„ëŠ” ì•Œì•„ì„œ ìƒˆ í€´ì¦ˆë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜)</li><li>POST (ë‚´ìš©ì—†ì´) â€¦/quizzes ë¡œ ë³´ë‚¸ë‹¤. (POSTì§€ë§Œ ì„œë²„ëŠ” ìƒˆë¡œ ìƒì„±ëœ í€´ì¦ˆë¥¼ ë°˜í™˜)</li></ul><p>GET, POST ë‘˜ ì¤‘ ì–´ëŠ ìª½ì´ ë” í™˜ì˜ë°›ëŠ” ë°©ë²•ì¸ê°€? ë˜ëŠ” ì–´ëŠ ìª½ì´ ìš•ì„ ëœ ë¨¹ëŠ” ë°©ë²•ì¸ê°€? ë˜ëŠ” ë‹¤ë¥¸ ë” ë‚˜ì€ ë°©ì•ˆì´ ìˆë‹¤ë©´ ì–´ë–¤ê²Œ ìˆì„ê¹Œ?</p><p>ì˜ê²¬ì„ ëª¨ì•„ì„œ ì •ë¦¬í•´ë´¤ë‹¤. ê±°ì˜ ì›ë¬¸ì— ê°€ê¹ê³  ê´„í˜¸ ì•ˆì€ ì„ì˜ë¡œ ì¶”ê°€.</p><h1 id="POSTë¼ëŠ”-ì˜ê²¬"><a href="#POSTë¼ëŠ”-ì˜ê²¬" class="headerlink" title="POSTë¼ëŠ” ì˜ê²¬"></a>POSTë¼ëŠ” ì˜ê²¬</h1><blockquote><p>ë©±ë“±ì„±ì´ ìœ ì§€ë  ìˆ˜ ìˆìœ¼ë©´ GET, ì—†ìœ¼ë©´ POST ë¼ëŠ” ê¸°ë³¸ ì „ì œë¥¼ ë‘ê³  ìƒê°í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ (ìƒˆ í€´ì¦ˆê°€ ìƒì„±ëœë‹¤ë©´ ë©±ë“±ì´ ì•„ë‹ˆë¯€ë¡œ) POSTë¡œ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p></blockquote><blockquote><p>ëª…ì‹œì ìœ¼ë¡œ URIëŠ” ìì›ì— ëŒ€í•œ ê²ƒì´ì–´ì•¼ í•˜ëŠ”ë° ì—†ëŠ” ìì›ì„ ë‚´ë†“ìœ¼ë¼ë©´ 404ë¥¼ ë°˜í™˜í•˜ëŠ” ê²Œ ë§ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. (ìƒˆ ìì›ì„ ë§Œë“¤ì–´ ë°˜í™˜í•´ì•¼ í•˜ë¯€ë¡œ POSTë¡œ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.)</p></blockquote><blockquote><p>ë””ë¹„ ìƒíƒœì— ë³€í™”ë¥¼ ì£¼ëŠ” ê±´ GETì„ ì“°ì§€ ì•Šê³  ìˆì–´ìš”. GETì„ ì‚¬ìš©í•  ë•ŒëŠ” ìˆœìˆ˜í•¨ìˆ˜ì²˜ëŸ¼ ê°™ì€ ì¸í’‹ì€ ê°™ì€ ì•„ì›ƒí’‹ì„ ë‚´ì¤˜ì•¼ í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.</p></blockquote><blockquote><p>http 1.0ì´í›„ ìƒê²¨ë‚œ POST, PUT, DELETEâ€¦ëŠ” ì„œë²„ ë‚´ì— ìˆëŠ” ìì›ì— ê´€ë ¨ëœ ì¡°ì‘ì´ê¸° ë•Œë¬¸ì— ì „ DBì˜ ë³€í™”ê°€ ìˆìœ¼ë©´ ë¬´ì¡°ê±´ ìƒíƒœ ë³€ê²½ê³¼ ê´€ë ¨ëœ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.(ë¦¬ì†ŒìŠ¤ë€ ì¸¡ë©´ì—ì„œ DBëŠ” ì¼ë¶€â€¦) http í”„ë¡œí† ì½œì—ì„œ method ì˜ì—­ì„ í´ë¼ì´ì–¸íŠ¸ ì…ì¥ì´ëƒ ì„œë²„ ì…ì¥ì´ëƒë¡œ ë‹¤ë“¤ ê´€ì ì´ ë‹¤ë¥´ê²Œ ë°”ë¼ë³¼ìˆ˜ ìˆê² ì§€ë§Œ http ì—­ì‚¬ë¥¼ ìƒê°í•´ë³´ë©´ ë©”ì„œë“œëŠ” ìì›ê³¼ ê´€ë ¨ì´ í¬ê³  ìì›ì„ ì†Œìœ í•œ ì„œë²„ì¸¡ ê´€ì ì— ë¬´ê²Œë¥¼ ì‹£ê³  ìˆìŠµë‹ˆë‹¤.</p></blockquote><blockquote><p>POSTë¡œ í•˜ê³  ìƒì„±ëœ ìì›ì— ëŒ€í•œ GET ê²½ë¡œë¥¼ Location í—¤ë”ì— ë„£ì–´ì„œ 201ë¡œ ì‘ë‹µí•˜ëŠ” ê²Œ ë§ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p></blockquote><h1 id="GETì´ë¼ëŠ”-ì˜ê²¬"><a href="#GETì´ë¼ëŠ”-ì˜ê²¬" class="headerlink" title="GETì´ë¼ëŠ” ì˜ê²¬"></a>GETì´ë¼ëŠ” ì˜ê²¬</h1><blockquote><p>í´ë¼ì´ì–¸íŠ¸ëŠ” í€´ì¦ˆë¥¼ ì›í•  ë¿ ìƒˆë¡œ ìƒì„±ë˜ë“  ê¸°ì¡´ì— ìˆë˜ ê±°ë“  ì‹ ê²½ ì“¸í•„ìš”ê°€ ì—†ë‹¤ê³  í•˜ë‹ˆ, ì¡°íšŒì˜ ì˜ë¯¸ë§Œ ì¡´ì¬í•œë‹¤ê³  ìƒê°í•´ìš”.</p></blockquote><blockquote><p>í´ë¼ì´ì–¸íŠ¸ëŠ” ì´ê²Œ ìƒˆë¡œ ë§Œë“¤ì–´ì§„ê±´ì§€ ê¸°ì¡´ì— ìˆë˜ê±´ì§€ ëª¨ë¥´ì§€ë§Œ ì¼ë‹¨ ì›í•˜ëŠ” í–‰ìœ„ê°€ í€´ì¦ˆë¼ëŠ” ê²ƒì„ ì–»ê¸° ìœ„í•¨ì´ê¸°ì— GET ì´ ë§ëŠ”ê±° ê°™ìŠµë‹ˆë‹¤.<br>ë¹µì§‘ì„ ì˜ˆë¡œ ë“¤ì–´ ë¹µì„ ì‚°ë‹¤ë¼ëŠ” í–‰ìœ„ì—ì„œ ì´ê²Œ ê¸°ì¡´ì— ë§Œë“¤ì–´ì§„ê²ƒì„ ì‚¬ê°€ë“  ì£¼ë¬¸ê³¼ ë™ì‹œì— ë§Œë“¤ì–´ì§„ ë¹µì„ ì‚¬ê°€ë“  ê°™ì€ í–‰ìœ„ì§€ë§Œ(GET)<br>ì´ëŸ° ë¹µì„ ì‚¬ê°€ë ¤ëŠ”ë° ë§Œë“¤ì–´ì£¼ì„¸ìš” í˜¹ì€ ì´ëŸ°ë¹µì„ ë§Œë“¤ì–´ì£¼ì‹œë©´ ì‚¬ëŸ¬ ê°€ê² ìŠµë‹ˆë‹¤ (POST)ëŠ” ë‹¤ë¥¸ ëª©ì ì´ê³  ë¹µì§‘ì—ì„œë„ ì´ì— ë”°ë¼ ë‹¤ë¥¸ í–‰ë™ì„ ì·¨í•´ì•¼ í•˜ë‹ˆê¹Œìš”</p></blockquote><h1 id="ë‘˜-ë‹¤-ì•„ë‹ˆë¼ëŠ”-ì˜ê²¬"><a href="#ë‘˜-ë‹¤-ì•„ë‹ˆë¼ëŠ”-ì˜ê²¬" class="headerlink" title="ë‘˜ ë‹¤ ì•„ë‹ˆë¼ëŠ” ì˜ê²¬"></a>ë‘˜ ë‹¤ ì•„ë‹ˆë¼ëŠ” ì˜ê²¬</h1><blockquote><p>APIëŠ” í–‰ìœ„ ì¤‘ì‹¬ì´ì–´ì•¼ì§€ ìƒíƒœ ì¤‘ì‹¬ì´ë©´ ì•ˆ ëœë‹¤ëŠ” ê²ƒì´ OOPì™€ DDDë¥¼ í†µí•œ ë°°ì›€ì´ì—ˆìŠµë‹ˆë‹¤.</p></blockquote><h1 id="ì¤‘ê°„-ì •ë¦¬"><a href="#ì¤‘ê°„-ì •ë¦¬" class="headerlink" title="ì¤‘ê°„ ì •ë¦¬"></a>ì¤‘ê°„ ì •ë¦¬</h1><p>ì´ ë§ë„ ë§ëŠ” ê²ƒ ê°™ê³  ì € ë§ë„ ë§ëŠ” ê²ƒ ê°™ê³ , ë©±ë“±ì„±(idempotence)ì´ë¼ëŠ” ì–´ë ¤ìš´ ìš©ì–´ë„ ë‚˜ì˜¤ê³  ì•„ í˜„ê¸°ì¦ë‚˜..</p><p>í•˜ì§€ë§Œ ì •ì‹ ì°¨ë¦¬ê³  ì¶”ë ¤ë³´ë©´ ê²°êµ­ ì•„ë˜ì™€ ê°™ì´ ìš”ì•½í•  ìˆ˜ ìˆë‹¤.</p><blockquote><ul><li>ìš”ì²­ìì¸ í´ë¼ì´ì–¸íŠ¸ì˜ ì˜ë„ë¥¼ ì¤‘ìš”í•˜ê²Œ ë³´ëŠ” ì…ì¥ì—ì„œëŠ” GETì„ ì„ í˜¸  </li><li>HTTPëŠ” ê²°êµ­ ìì›ì„ ë‹¤ë£¨ëŠ” ê²ƒì´ë¯€ë¡œ ìì›ì„ ì¤‘ìš”í•˜ê²Œ ë³´ëŠ” ì…ì¥ì—ì„œëŠ” POSTë¥¼ ì„ í˜¸</li></ul></blockquote><h1 id="ìŠ¤í™ì€-ë­ë¼ë”ëƒ"><a href="#ìŠ¤í™ì€-ë­ë¼ë”ëƒ" class="headerlink" title="ìŠ¤í™ì€ ë­ë¼ë”ëƒ?"></a>ìŠ¤í™ì€ ë­ë¼ë”ëƒ?</h1><p>ì´ì¯¤ë˜ë©´ ê·¸ë‹¤ì§€ ë³´ê³  ì‹¶ì§€ ì•Šì€ ìŠ¤í™ì„ ë³´ì§€ ì•Šì„ ìˆ˜ ì—†ë‹¤. ê´€ë ¨ ìŠ¤í™ì€ <a href="https://tools.ietf.org/html/rfc7231" target="_blank" rel="noopener">Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</a>ì´ë©° ê·¸ ì¤‘ì—ì„œ HTTP Method ê´€ë ¨ ë‚´ìš©ì€ <a href="https://tools.ietf.org/html/rfc7231#section-4" target="_blank" rel="noopener">ì—¬ê¸°</a>ì— ìˆë‹¤.</p><p>POSTë¥¼ ì§€ì§€í•˜ëŠ” ì˜ê²¬ì€ í•œ ë§ˆë””ë¡œ ìš”ì•½í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><blockquote><p>ìì› ë³€ê²½ì´ ìˆ˜ë°˜ë˜ë©´ POSTì—¬ì•¼ í•œë‹¤.</p></blockquote><p>ê·¸ëŸ°ë° ì •ë§ ìŠ¤í™ì—ì„œë„ â€˜ìì› ë³€ê²½ì´ ìˆ˜ë°˜ë˜ë©´ POSTì—¬ì•¼ í•œë‹¤â€™ê³  ê·œì •í•˜ê³  ìˆì„ê¹Œ?</p><h2 id="Safe-Methods"><a href="#Safe-Methods" class="headerlink" title="Safe Methods"></a>Safe Methods</h2><p>ìŠ¤í™ ë‚´ìš© ì¤‘ì— <a href="https://tools.ietf.org/html/rfc7231#section-4.2.1" target="_blank" rel="noopener">Safe Methods</a> ë¼ëŠ” ë‹¨ì›ì´ ìˆë‹¤.</p><blockquote><p>Request methods are considered â€œsafeâ€ if their defined semantics are<br>essentially read-only; i.e., the client does not request, and does<br>not expect, any state change on the origin server as a result of<br>applying a safe method to a target resource.  Likewise, reasonable<br>use of a safe method is not expected to cause any harm, loss of<br>property, or unusual burden on the origin server.</p></blockquote><p>ì§§ê²Œ ì˜®ê²¨ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><blockquote><p>í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ ìƒíƒœì˜ ë³€ê²½ì„ ìš”ì²­í•˜ì§€ë„, ê¸°ëŒ€í•˜ì§€ë„ ì•ŠëŠ” ì½ê¸° ì „ìš© ìš”ì²­ì€ Safeí•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ Safe Methodë¥¼ ë°”ë¥´ê²Œ ì‚¬ìš©í•˜ë©´ ì„œë²„ì—ê²Œ ì–´ë–¤ í•´ì•…ì´ë‚˜ ì†ì‹¤, ì¼ë°˜ì ì´ì§€ ì•Šì€ ë¶€ë‹´ì„ ë°œìƒì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤.</p></blockquote><p>ì—¬ê¸°ê¹Œì§€ë§Œ ë³´ë©´ ìì› ë³€ê²½ì´ ìˆ˜ë°˜ë˜ë©´ GETì„ ì“°ë©´ ì•ˆ ë  ê²ƒ ê°™ë‹¤.</p><p>ê·¸ëŸ°ë° ë°”ë¡œ ë‹¤ìŒ ë¬¸ë‹¨ì—ëŠ” ì‚´ì§ ê²°ì´ ë‹¤ë¥¸ ë‚´ìš©ì´ ë‚˜ì˜¨ë‹¤.</p><blockquote><p>This definition of safe methods does not prevent an implementation<br>from including behavior that is potentially harmful, that is not<br>entirely read-only, or that causes side effects while invoking a safe<br>method.  What is important, however, is that the client did not<br>request that additional behavior and cannot be held accountable for<br>it.  For example, most servers append request information to access<br>log files at the completion of every response, regardless of the<br>method, and that is considered safe even though the log storage might<br>become full and crash the server.  Likewise, a safe request initiated<br>by selecting an advertisement on the Web will often have the side<br>effect of charging an advertising account.</p></blockquote><p>ì—­ì‹œë‚˜ ì§§ê²Œ ì˜®ê²¨ ë³´ë©´,</p><blockquote><p><strong>Safe Methodë¼ê³ í•´ì„œ ì‚¬ì´ë“œ ì´í™íŠ¸ë‚˜ ì ì¬ì ìœ¼ë¡œ í•´ê°€ ë  ìˆ˜ ìˆëŠ” ë™ì‘ì„ í¬í•¨í•´ì„œ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ë°°ì œí•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. ì¤‘ìš”í•œ ê²ƒì€ ê·¸ ë™ì‘ì„ í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ ê²Œ ì•„ë‹ˆë¼ëŠ” ì ì´ê³ , ê·¸ ë™ì‘ì— ëŒ€í•œ ì±…ì„ì„ í´ë¼ì´ì–¸íŠ¸ê°€ ë¶€ë‹´í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì´ë‹¤.</strong> ì˜ˆë¥¼ ë“¤ì–´ ì„œë²„ëŠ” (Safeë“  ì•„ë‹ˆë“ ) ë©”ì„œë“œ ì¢…ë¥˜ì— ê´€ê³„ ì—†ì´ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ê¸°ë¡í•˜ëŠ”ë°, ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¡œ í•˜ë“œê°€ ê½‰ ì°¨ì„œ ì„œë²„ê°€ ê¹¨ì§ˆ ìˆ˜ë„ ìˆì§€ë§Œ, (ë¡œê·¸ ê¸°ë¡ì€ í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ) ì´ëŸ° í˜¸ì¶œë„ Safeí•˜ë‹¤ê³  ë³¸ë‹¤.(ì´í•˜ ê´‘ê³  ì‚¬ë¡€ ìƒëµ)</p></blockquote><p>ì´ ì™¸ì—ë„ GET, POSTë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì„¤ëª…í•˜ëŠ” ë¶€ë¶„ë„ ìˆì§€ë§Œ, ì´ ê¸€ ë‚´ìš©ì— í¬ê²Œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ë‚´ìš©ì€ ì—†ì–´ ë³´ì—¬ì„œ êµ³ì´ ë‹¤ë£¨ì§€ ì•ŠëŠ”ë‹¤.</p><h1 id="ê·¸ë˜ì„œ-ê²°ë¡ ì€"><a href="#ê·¸ë˜ì„œ-ê²°ë¡ ì€" class="headerlink" title="ê·¸ë˜ì„œ ê²°ë¡ ì€?"></a>ê·¸ë˜ì„œ ê²°ë¡ ì€?</h1><p>ì•ì—ì„œë„ ë§í–ˆì§€ë§Œ ì´ ê¸€ì€ ë‚˜ë¦„ì˜ ì£¼ê´€ì ì¸ ê²°ë¡ ì€ ìˆì§€ë§Œ ê·¸ê²Œ ì •ë‹µì€ ì•„ë‹ˆë‹¤.</p><p>ì´ë¯¸ ê½¤ ê¸¸ì–´ì¡Œìœ¼ë‹ˆ ê²°ë¡ ë¶€í„° ë§í•˜ë©´ <strong>GETì„ ì¨ë„ ì¢‹ê² ë‹¤</strong>ì´ë‹¤.</p><p>ì´ìœ ëŠ”,</p><ul><li>APIë¼ëŠ” ê²Œ ê²°êµ­ ìŒë°©ê°„ì˜ ê³„ì•½ì´ê³ ,  </li><li>í´ë¼ì´ì–¸íŠ¸ëŠ” ë³¸ì§ˆì ìœ¼ë¡œ ì–´ë–¤ ìì›ì„ ì–»ê¸°ë¥¼ ë°”ë„ ë¿ êµ³ì´ ìì› ìƒì„± ì—¬ë¶€ë¥¼ ì•Œ í•„ìš”ê°€ ì—†ë‹¤ë©´,  </li><li>ì¦‰, í´ë¼ì´ì–¸íŠ¸ì˜ ë³¸ì§ˆì ì¸ ìš”êµ¬ê°€ â€˜ìƒì„±â€™ì´ ì•„ë‹ˆë¼ â€˜íšë“â€™ì´ë¼ë©´,  </li><li>í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ ì²˜ë¦¬ ë‚´ë¶€ ê³¼ì •ì— â€˜ìƒì„±â€™ì´ë¼ëŠ” ë¹„ë©±ë“± ê³¼ì •ì´ í¬í•¨ëœë‹¤ê³  í•˜ë”ë¼ë„,  </li><li>ì„œë²„ì˜ ì²˜ë¦¬ ê³¼ì •ë³´ë‹¤ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ â€˜íšë“â€™ì´ë¼ëŠ” ìš”êµ¬ ë³¸ì§ˆì— ë¬´ê²Œë¥¼ ë‘ì–´ë„,</li><li>ìŠ¤í™ì— ì–´ê¸‹ë‚¨ì´ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.</li></ul><p>ê²Œë‹¤ê°€ ë‹¤ìŒ ê°™ì€ ìƒí™©ì„ ê°€ì •í•´ë³´ë©´ GETì„ ì¨ë„ ì¢‹ê² ë‹¤ ì •ë„ê°€ ì•„ë‹ˆë¼ <strong>GETì´ ë” ë‚«ë‹¤</strong>ë¼ëŠ” ìƒê°ë„ ë“ ë‹¤.</p><p>í€´ì¦ˆë¥¼ ì²˜ìŒì—ëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì— ê·¸ë•Œê·¸ë•Œ ìƒì„±í•´ì„œ ë°˜í™˜í•˜ê¸°ë¡œ í•˜ê³  ì´ê±´ ìì› ìƒì„±ì„ ìœ ë°œí•˜ë‹ˆ POSTë¡œ í•˜ì.. ë¡œ ì‹œì‘í–ˆëŠ”ë°,<br>ë‚˜ì¤‘ì— í€´ì¦ˆ ì„œë¹„ìŠ¤ê°€ í¥í•´ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ì—„ì²­ ë§ì•„ì§€ê³  ì„±ëŠ¥ì´ë“  ë­ë“  ì—¬íƒ€ ì´ìœ ë¡œ â€˜ê°€ë§Œ í€´ì¦ˆë¥¼ ê¼­ ìƒì„±í•´ì„œ ë°˜í™˜í•  í•„ìš” ì—†ì§€ ì•Šì•„? ë¯¸ë¦¬ ì™•ì°½ ë§Œë“¤ì–´ ë†“ê³  ì„ì˜ë¡œ ê± ì¡°íšŒë§Œ í•´ì„œ ë°˜í™˜í•˜ëŠ” ê²Œ ë‚˜ì„ ê²ƒ ê°™ì€ë°?â€™ë¼ëŠ” íŒë‹¨ì´ ë“ ë‹¤. ê·¸ëŸ¼ ì´ì œ ìì› ìƒì„±ì´ ë°œìƒí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ GETì„ ì¨ì•¼ í•œë‹¤.</p><p>í´ë¼ì´ì–¸íŠ¸ì˜ ìš”êµ¬ëŠ” â€˜í€´ì¦ˆì˜ íšë“â€™ìœ¼ë¡œ ë³€í•œ ê²Œ ì—†ëŠ”ë°, ì„œë²„ì˜ ì²˜ë¦¬ ê³¼ì •ì´ ì‹ ê·œ ìì› ìƒì„±ì—ì„œ ê¸°ì¡´ ìì› ì¡°íšŒë¡œ ë°”ë€Œì—ˆë‹¤ê³  í•´ì„œ APIë¥¼ POSTì—ì„œ GETìœ¼ë¡œ ë°”ê¿”ì•¼ë˜ë‚˜? ìˆ˜ë§ì€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ GETìœ¼ë¡œ ë°”ê¿”ë‹¬ë¼ê³  ëª¨ë‘ ì„¤ë“í•  ìˆ˜ ìˆë‚˜?</p><p>ì• ì´ˆì— ìì› ìƒì„±ê³¼ ë¬´ê´€í•˜ê²Œ ì˜¤ë¡œì§€ â€˜íšë“â€™ì´ì—ˆë˜ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ ë³¸ì§ˆì— ì¶©ì‹¤í•˜ê²Œ GETìœ¼ë¡œ ì‹œì‘í–ˆë‹¤ë©´ ì´ëŸ° í° ë³€ê²½ì„ í”¼í•  ìˆ˜ ìˆì—ˆì„ ê²ƒì´ë‹¤.</p><p>ì´ë ‡ê²Œ ë³´ë©´ <strong>HTTP Methodì˜ ì‚¬ìš©ì—ì„œë„ â€˜ë¹„ë©±ë“±ì´ë©´ POSTâ€™ì™€ ê°™ì€ ì›ì¹™ë³´ë‹¤ëŠ”, Information Hiding(ì •ë³´ ê°ì¶¤/ìˆ¨ê¹€) ê°™ì€ ë” ì¼ë°˜ì ì¸ ìƒìœ„ ì°¨ì›ì˜ ì„¤ê³„ ì›ì¹™ì´ ìœ ì—°í•œ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ëŠ” ë° ë” ì¤‘ìš”</strong>í•œ ê²ƒ ê°™ë‹¤.</p><h1 id="ì¶”ê°€"><a href="#ì¶”ê°€" class="headerlink" title="ì¶”ê°€"></a>ì¶”ê°€</h1><p>ê³µìœ í•˜ê³  ë‚˜ë‹ˆ ì˜ê²¬ì„ ì¡°ê¸ˆ ë” ë°›ì„ ìˆ˜ ìˆì—ˆë‹¤.</p><blockquote><p>ë³¸ ë¬¸ì œì—ì„œëŠ” User Interface ì™€ ì‹¤ì œ Http Client ê°€ ë¶„ë¦¬ë˜ì–´ íŒë‹¨í•´ì•¼ í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. User Interface ì—ì„œëŠ” ë‹¹ì—°íˆ ì‚¬ëŒì€ ë¬¸ì œë¥¼ ë°›ëŠ” ê²ƒë§Œ ìƒê°í•  ê²ƒì´ê³  ë‚´ë¶€ Http Client ëŠ” ë¬¸ì œ ìƒì„±ì„ ì¤‘ê°„ì— ë„£ì–´ì¤˜ë„ ëœë‹¤ê³  ìƒê°í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.(ê·¸ë˜ì„œ ë‚´ë¶€ Http ClientëŠ” POSTë¡œ ìš”ì²­í•´ì„œ ë¬¸ì œë¥¼ ìƒì„±í•˜ë„ë¡ í•˜ê³  ë‹¤ì‹œ GETìœ¼ë¡œ ìš”ì²­í•´ì„œ ìƒì„±ëœ ë¬¸ì œë¥¼ ë°›ì•„ì˜¤ë¼ëŠ” ì˜ê²¬)</p></blockquote><blockquote><p>í˜¹ì‹œ POSTë¡œ ìƒì„±í•˜ê²Œ í•˜ë©´ idë¥¼ ë°˜í™˜í•˜ê³  ê·¸ idë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê²Œ APIë¥¼ ë‚˜ëˆ„ë©´ ì–´ë–¨ê¹Œìš”?</p></blockquote><p>ë‘˜ ë‹¤ ë¹„ìŠ·í•œ ì˜ê²¬ì¸ë°, <strong>í´ë¼ì´ì–¸íŠ¸ê°€ ë¬¸ì œ ìƒì„±ì— ê´€ì‹¬ì´ ì—†ë”ë¼ë„, ë¬¸ì œê°€ ìƒˆë¡œ ìƒì„±ë˜ëŠ” ê²ƒì´ ë§ë‹¤ë©´ (UIìˆ˜ì¤€ì—ì„œëŠ” ì¸ì§€ ëª» í•˜ê²Œ í•˜ë”ë¼ë„ ë‚´ë¶€ì ìœ¼ë¡œ) POSTë¡œ ë¬¸ì œ ìƒì„± ìš”ì²­ í›„, ìƒì„±ëœ ë¬¸ì œë¥¼ GETìœ¼ë¡œ ê°€ì ¸ì˜¤ìëŠ” ì˜ê²¬</strong>ìœ¼ë¡œ ë³´ì¸ë‹¤.</p><p>ìœ„ í€´ì¦ˆ ì‚¬ë¡€ì— êµ­í•œí•´ì„œë¼ë©´ ì—¬ì „íˆ GETì´ ë” ë‚«ë‹¤ê³  ìƒê°í•œë‹¤. ì´ìœ ëŠ” <strong>ìœ„ í€´ì¦ˆ ì‚¬ë¡€ëŠ” ì²˜ìŒì—ëŠ” í€´ì¦ˆ ìƒì„±ìœ¼ë¡œ ì‹œì‘í•˜ì§€ë§Œ ë‚˜ì¤‘ì— ì¡°íšŒ ë°©ì‹ìœ¼ë¡œ ë³€ê²½ë  ê°œì—°ì„±ì´ ê½¤ ìˆê³ , ìì› ë³´ë‹¤ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ì˜ë„ì— ë¬´ê²Œë¥¼ ë‘ëŠ” GETì´ ë³€ê²½ ëŒ€ì‘ì— ë” ìœ ì—°í•˜ê¸° ë•Œë¬¸</strong>ì´ë‹¤.</p><p>ë‹¤ë§Œ ìœ„ ì¶”ê°€ ì˜ê²¬ì„ ì˜®ê²¨ì˜¨ ì´ìœ ëŠ”, ìœ„ ì˜ê²¬ ë•ë¶„ì— ì•ì„œ GETì´ ë‚«ë‹¤ëŠ” ê²°ë¡ ì´ <strong>ì´ì™€ ë¹„ìŠ·í•´ ë³´ì´ëŠ” ìƒí™©ì—ì„œ (ì–¸ì œë‚˜) GETì„ ì“°ëŠ” ê²Œ ë‚«ë‹¤ë¼ëŠ” ì˜ëª»ëœ ê°€ì´ë“œê°€ ë  ìˆ˜ ìˆëŠ” ìœ„í—˜</strong>ì´ ìˆìŒì„ ê¹¨ë‹«ê²Œ ëê¸° ë–„ë¬¸ì´ë‹¤.</p><p>í€´ì¦ˆ ì‚¬ë¡€ì™€ëŠ” ë‹¬ë¦¬ <strong>ë‚˜ì¤‘ì— ì¡°íšŒ ë°©ì‹ìœ¼ë¡œ ë³€ê²½ë  ê°œì—°ì„±ì´ ë§¤ìš° ë‚®ì€ ìƒí™©ì´ë¼ë©´, ìœ„ ì˜ê²¬ê³¼ ê°™ì´ POST + GET ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²Œ í•©ë‹¹í•  ìˆ˜ë„ ìˆë‹¤.</strong> ë‹¤ë§Œ ì´ëŸ° ê²°ë¡ ë§ˆì €ë„, í•œ ë²ˆì˜ HTTP ìš”ì²­ì´ë¼ë„ ì¤„ì—¬ì•¼ í•˜ëŠ” ìƒí™©ì´ë¼ë©´ GETì„ ì„ íƒí•˜ëŠ” í¸ì´ ë‚«ê²Œ ëœë‹¤. </p><p>ê²°êµ­ ê¸€ ì„œë‘ì—ì„œ ë°íŒ ëŒ€ë¡œ ì´ ê¸€ ìì²´ë¡œ ì •ë‹µì€ ë  ìˆ˜ ì—†ë‹¤. ê·¸ì € ì°¸ê³ ê°€ ë  ë¿ì´ê³  <strong>ì£¼ì–´ì§„ ìƒí™©ì— ë§ëŠ” ê²°ë¡ ì„ ë„ì¶œí•˜ëŠ” ê²ƒì€ ì–¸ì œë‚˜ ì—”ì§€ë‹ˆì–´ì˜ ëª«ì´ë‹¤.</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;GETì´ëƒ-POSTëƒ-ê·¸ê²ƒì´-ë¬¸ì œë¡œë‹¤&quot;&gt;&lt;a href=&quot;#GETì´ëƒ-POSTëƒ-ê·¸ê²ƒì´-ë¬¸ì œë¡œë‹¤&quot; class=&quot;headerlink&quot; title=&quot;GETì´ëƒ POSTëƒ ê·¸ê²ƒì´ ë¬¸ì œë¡œë‹¤&quot;&gt;&lt;/a&gt;GETì´ëƒ POSTëƒ ê·¸ê²ƒì´ ë¬¸ì œë¡œë‹¤&lt;/h1&gt;&lt;
      
    
    </summary>
    
      <category term="Concepts" scheme="http://homoefficio.github.io/categories/Concepts/"/>
    
    
      <category term="HTTP" scheme="http://homoefficio.github.io/tags/HTTP/"/>
    
      <category term="HTTP API" scheme="http://homoefficio.github.io/tags/HTTP-API/"/>
    
      <category term="HTTP Method" scheme="http://homoefficio.github.io/tags/HTTP-Method/"/>
    
      <category term="Safe Method" scheme="http://homoefficio.github.io/tags/Safe-Method/"/>
    
      <category term="Idempotence" scheme="http://homoefficio.github.io/tags/Idempotence/"/>
    
      <category term="GET" scheme="http://homoefficio.github.io/tags/GET/"/>
    
      <category term="POST" scheme="http://homoefficio.github.io/tags/POST/"/>
    
      <category term="Information Hiding" scheme="http://homoefficio.github.io/tags/Information-Hiding/"/>
    
      <category term="ì •ë³´ ìˆ¨ê¹€" scheme="http://homoefficio.github.io/tags/%EC%A0%95%EB%B3%B4-%EC%88%A8%EA%B9%80/"/>
    
      <category term="ì •ë³´ ê°ì¶¤" scheme="http://homoefficio.github.io/tags/%EC%A0%95%EB%B3%B4-%EA%B0%90%EC%B6%A4/"/>
    
      <category term="ë©±ë“±" scheme="http://homoefficio.github.io/tags/%EB%A9%B1%EB%93%B1/"/>
    
  </entry>
  
  <entry>
    <title>Raspberry Pi 3ì— Ubuntu ì„¤ì¹˜ í•˜ê¸°</title>
    <link href="http://homoefficio.github.io/2019/12/21/Raspberry-Pi-3%EC%97%90-Ubuntu-%EC%84%A4%EC%B9%98-%ED%95%98%EA%B8%B0/"/>
    <id>http://homoefficio.github.io/2019/12/21/Raspberry-Pi-3ì—-Ubuntu-ì„¤ì¹˜-í•˜ê¸°/</id>
    <published>2019-12-21T08:34:41.000Z</published>
    <updated>2019-12-25T15:30:53.147Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Install-Ubuntu-on-Raspberry-Pi-3"><a href="#Install-Ubuntu-on-Raspberry-Pi-3" class="headerlink" title="Install Ubuntu on Raspberry Pi 3"></a>Install Ubuntu on Raspberry Pi 3</h1><h2 id="ì¤€ë¹„ë¬¼"><a href="#ì¤€ë¹„ë¬¼" class="headerlink" title="ì¤€ë¹„ë¬¼"></a>ì¤€ë¹„ë¬¼</h2><ul><li>Raspberry Pi 3 + ì „ì› ì¥ì¹˜</li><li>MicroSD ì¹´ë“œ</li><li>USB Keyboard</li><li>Monitor + HDMI ì¼€ì´ë¸”</li><li>Ubuntu ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œ í•˜ê³  MicroSDì— Ubuntu ì´ë¯¸ì§€ë¥¼ Flash í•  ì¸í„°ë„· ì—°ê²° ì»´í“¨í„°</li></ul><h2 id="Ubuntu-ì´ë¯¸ì§€-íŒŒì¼-ë‹¤ìš´ë¡œë“œ"><a href="#Ubuntu-ì´ë¯¸ì§€-íŒŒì¼-ë‹¤ìš´ë¡œë“œ" class="headerlink" title="Ubuntu ì´ë¯¸ì§€ íŒŒì¼ ë‹¤ìš´ë¡œë“œ"></a>Ubuntu ì´ë¯¸ì§€ íŒŒì¼ ë‹¤ìš´ë¡œë“œ</h2><ul><li><a href="https://ubuntu.com/download/raspberry-pi" target="_blank" rel="noopener">https://ubuntu.com/download/raspberry-pi</a><ul><li><code>64-bit for Raspberry Pi 3 and 4</code> ë‹¤ìš´ë¡œë“œ</li></ul></li></ul><p>ì•½ 3G ì •ë„ë¡œ ë‹¤ìš´ë¡œë“œì— ì‹œê°„ì´ ì¢€ ê±¸ë¦¬ë¯€ë¡œ ê·¸ë™ì•ˆ ì•„ë˜ì˜ â€˜Image Flash í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜â€™, â€˜MicroSD ë©”ëª¨ë¦¬ ì¹´ë“œ ì¤€ë¹„â€™ ìˆ˜í–‰</p><h2 id="Image-Flash-í”„ë¡œê·¸ë¨-ë‹¤ìš´ë¡œë“œ-ë°-ì„¤ì¹˜"><a href="#Image-Flash-í”„ë¡œê·¸ë¨-ë‹¤ìš´ë¡œë“œ-ë°-ì„¤ì¹˜" class="headerlink" title="Image Flash í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜"></a>Image Flash í”„ë¡œê·¸ë¨ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜</h2><ul><li><a href="https://sourceforge.net/projects/win32diskimager/files/latest/download" target="_blank" rel="noopener">https://sourceforge.net/projects/win32diskimager/files/latest/download</a></li></ul><h2 id="MicroSD-ë©”ëª¨ë¦¬-ì¹´ë“œ-ì¤€ë¹„"><a href="#MicroSD-ë©”ëª¨ë¦¬-ì¹´ë“œ-ì¤€ë¹„" class="headerlink" title="MicroSD ë©”ëª¨ë¦¬ ì¹´ë“œ ì¤€ë¹„"></a>MicroSD ë©”ëª¨ë¦¬ ì¹´ë“œ ì¤€ë¹„</h2><p>ìœˆë„ìš° 10 ê¸°ì¤€</p><ul><li><p>MicroSD ë©”ëª¨ë¦¬ ì¹´ë“œë¥¼ ì»´í“¨í„°ì— ì—°ê²°</p><ul><li>í¬ë§· ë“±ì˜ íŒì—…ì´ ëœ¨ë©´ ëª¨ë‘ ë¬´ì‹œ</li><li><img src="https://i.imgur.com/93adzTR.png" alt="Imgur"></li><li><img src="https://i.imgur.com/UM67S8u.png" alt="Imgur"></li></ul></li><li><p>ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ ì¹´ë“œë¼ íŒŒí‹°ì…˜ì´ ë‚˜ë‰˜ì–´ ìˆëŠ” ê²½ìš° íŒŒí‹°ì…˜ ì‚­ì œ</p><ul><li>ìœˆë„ìš° ë²„íŠ¼ ìš°í´ë¦­ &gt; ë””ìŠ¤í¬ ê´€ë¦¬ì ì‹¤í–‰</li><li><img src="https://i.imgur.com/cGeAsxt.png" alt="Imgur"></li><li>MicroSD ë©”ëª¨ë¦¬ì— ìˆë˜ ë³¼ë¥¨(íŒŒí‹°ì…˜) ëª¨ë‘ ì‚­ì œ</li><li><img src="https://i.imgur.com/hr9w14r.png" alt="Imgur"></li><li>ì•„ë˜ì™€ ê°™ì´ ëª¨ë‘ ì‚­ì œ ë˜ë©´ ì¤€ë¹„ ì™„ë£Œ</li><li><img src="https://i.imgur.com/rPKVxcJ.png" alt="Imgur"></li></ul></li></ul><h2 id="MicroSD-ë©”ëª¨ë¦¬-ì¹´ë“œì—-Ubuntu-ì´ë¯¸ì§€-íŒŒì¼-Flash"><a href="#MicroSD-ë©”ëª¨ë¦¬-ì¹´ë“œì—-Ubuntu-ì´ë¯¸ì§€-íŒŒì¼-Flash" class="headerlink" title="MicroSD ë©”ëª¨ë¦¬ ì¹´ë“œì— Ubuntu ì´ë¯¸ì§€ íŒŒì¼ Flash"></a>MicroSD ë©”ëª¨ë¦¬ ì¹´ë“œì— Ubuntu ì´ë¯¸ì§€ íŒŒì¼ Flash</h2><ul><li>Ubuntu ì´ë¯¸ì§€ íŒŒì¼ ì••ì¶• í•´ì œ<ul><li>í•„ìš” ì‹œ ë°˜ë””ì§‘ ì„¤ì¹˜ í›„ í•´ì œ</li></ul></li><li>Image Flash í”„ë¡œê·¸ë¨ ì‹¤í–‰<ul><li>Ubuntu ì´ë¯¸ì§€ íŒŒì¼ ìœ„ì¹˜ ì§€ì • ë° Flash í•  ëŒ€ìƒ ë””ë°”ì´ìŠ¤(MicroSD ì¹´ë“œ) ì§€ì • í›„ Write</li><li><img src="https://i.imgur.com/hFTpk31.png" alt="Imgur"></li><li><img src="https://i.imgur.com/p2inqJO.png" alt="Imgur"></li></ul></li><li>ì‚¬ì–‘ì— ë”°ë¼ ë‹¤ë¥´ê² ì§€ë§Œ ì•½ 2~3ë¶„ í›„ ë‹¤ìŒê³¼ ê°™ì´ Flash ì™„ë£Œ<ul><li><img src="https://i.imgur.com/00yqpDc.png" alt="Imgur"></li></ul></li><li>í¬ë§· íŒì—…ì°½ì´ ë‹¤ì‹œ ëœ¨ë©´ ë¬´ì‹œ<ul><li><img src="https://i.imgur.com/uV31oML.png" alt="Imgur"></li></ul></li><li>íƒìƒ‰ê¸°ì—ì„œ êº¼ë‚´ê¸° í›„ MicroSD ë©”ëª¨ë¦¬ ì¹´ë“œë¥¼ ë¹¼ë‚¸ë‹¤.</li></ul><h2 id="Raspberry-Pi-ë¶€íŒ…-ì„¤ì¹˜-ì™„ë£Œ-ë°-ë¡œê·¸ì¸"><a href="#Raspberry-Pi-ë¶€íŒ…-ì„¤ì¹˜-ì™„ë£Œ-ë°-ë¡œê·¸ì¸" class="headerlink" title="Raspberry Pi ë¶€íŒ…, ì„¤ì¹˜ ì™„ë£Œ ë° ë¡œê·¸ì¸"></a>Raspberry Pi ë¶€íŒ…, ì„¤ì¹˜ ì™„ë£Œ ë° ë¡œê·¸ì¸</h2><ul><li>Ubuntu ì´ë¯¸ì§€ê°€ Flash ëœ MicroSD ì¹´ë“œ, ëª¨ë‹ˆí„°ì™€ ì—°ê²°ëœ HDMI ì¼€ì´ë¸”ê³¼ í‚¤ë³´ë“œë¥¼ Raspberry PI ì— ì—°ê²°í•˜ê³  ë§ˆì§€ë§‰ìœ¼ë¡œ Raspberry PI ì „ì› ì—°ê²°<ul><li><img src="https://i.imgur.com/YwBAux3.jpg" alt="Imgur"></li></ul></li><li>Ubuntu ë¡œ ë¶€íŒ…ë˜ë©° ëª‡ ë¶„ê°„ ìë™ ì„¤ì • í›„ ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸ ë‚˜ì˜´<ul><li><img src="https://i.imgur.com/5P5wgZ6.jpg" alt="Imgur"></li><li><img src="https://i.imgur.com/9G6Zqos.jpg" alt="Imgur"></li><li><img src="https://i.imgur.com/JkXmeLR.jpg" alt="Imgur"></li><li><img src="https://i.imgur.com/LV5d4or.jpg" alt="Imgur"></li><li><strong>ë†€ëê²Œë„ ìœ„ ì‚¬ì§„ì— ë‚˜ì˜¤ëŠ” ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸ëŠ” í˜ì´í¬..</strong> ì—¬ê¸°ì„œ ì…ë ¥í•´ë´¤ì ë¹„ë²ˆ í‹€ë¦¬ë‹¤ëŠ” ì–˜ê¸°ë§Œ ë‚˜ì˜¤ë©°, ê·¸ëƒ¥ ê¸°ë‹¤ë¦¬ë©´ ë‹¤ìŒ ì‚¬ì§„ê³¼ ê°™ì´ í›„ì† ì ˆì°¨ê°€ ìë™ìœ¼ë¡œ ê³„ì† ì§„í–‰ëœë‹¤.</li><li><img src="https://i.imgur.com/dgSIjFH.jpg" alt="Imgur"></li><li><img src="https://i.imgur.com/dggNhk9.jpg" alt="Imgur"></li></ul></li><li>ë‹¤ìŒê³¼ ê°™ì´ <strong><code>[  OK  ] Reached target Cloud-init target.</code> ì´ ë³´ì—¬ì•¼ ë¡œê·¸ì¸ ì¤€ë¹„ê°€ ì™„ë£Œ</strong>ëœ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ <strong>ìë™ìœ¼ë¡œ ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸ê°€ ëœ¨ì§€ëŠ” ì•Šê³  ì—”í„°ë¥¼ ëˆŒëŸ¬ì¤˜ì•¼ ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸ê°€ ëœ¬ë‹¤.</strong><ul><li><img src="https://i.imgur.com/oL5bc8f.jpg" alt="Imgur"></li></ul></li><li>ì´ˆê¸° ì•„ì´ë””/ë¹„ë²ˆì€ ubuntu/ubuntu ì´ë©° ë¡œê·¸ì¸ í›„ ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ ë¹„ë²ˆ ë³€ê²½í•˜ë©´ ì…¸ í”„ë¡¬í”„íŠ¸ê°€ ëœ¬ë‹¤.<ul><li><img src="https://i.imgur.com/njltjMN.jpg" alt="Imgur"></li></ul></li><li>ì´ê²ƒìœ¼ë¡œ ë¶€íŒ…, ì„¤ì¹˜, ë¡œê·¸ì¸ ì™„ë£Œ</li><li>ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ ë¦¬ëˆ…ìŠ¤ë¥¼ ì¢…ë£Œí•œë‹¤.<ul><li><code>shutdown -h now</code></li></ul></li></ul><h2 id="ì„¤ì¹˜-ì™„ë£Œ-í›„-ë¶€íŒ…-ë°-ë¡œê·¸ì¸"><a href="#ì„¤ì¹˜-ì™„ë£Œ-í›„-ë¶€íŒ…-ë°-ë¡œê·¸ì¸" class="headerlink" title="ì„¤ì¹˜ ì™„ë£Œ í›„ ë¶€íŒ… ë° ë¡œê·¸ì¸"></a>ì„¤ì¹˜ ì™„ë£Œ í›„ ë¶€íŒ… ë° ë¡œê·¸ì¸</h2><ul><li>ì „ì›ì„ ì—°ê²°í•˜ë©´ ì‚°ë”¸ê¸° ê·¸ë¦¼ê³¼ í•¨ê»˜ ë¶€íŒ… ê³¼ì •ì´ ì§„í–‰ë˜ê³  ë‹¤ìŒê³¼ ê°™ì´.. ì´ë²ˆì—ë„ í˜ì´í¬ì„± ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸ê°€ ë‚˜ì˜¨ë‹¤..</li><li>ì¢€ë” ê¸°ë‹¤ë¦¬ë©´ ë‚˜ë¨¸ì§€ í›„ì† ì‘ì—…ì´ ì§„í–‰ë˜ê³  <code>Up ##.## seconds</code> ë¼ê³  í‘œì‹œë˜ëŠ”ë° ì´ì œì„œì•¼ ë¹„ë¡œì†Œ ë¶€íŒ… ê³¼ì •ì´ ì™„ë£Œëœ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ì´ë²ˆì—ë„ ì§„í–‰ì´ ì™„ë£Œëœ ê±´ì§€ í™”ë©´ë§Œìœ¼ë¡œëŠ” ì•Œ ê¸¸ì´ ì—†ë‹¤.. </li><li>ì—”í„°ë¥¼ ëˆ„ë¥´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì§„ì • ìœ íš¨í•œ ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸ê°€ ë‚˜ì˜¤ë©°, ë¡œê·¸ì¸ì„ í•˜ë©´ ì…¸ í”„ë¡¬í”„íŠ¸ê°€ í‘œì‹œëœë‹¤.<ul><li><img src="https://i.imgur.com/3iU0f8k.jpg" alt="Imgur"></li></ul></li></ul><h2 id="ì„¤ì¹˜-í›„ê¸°"><a href="#ì„¤ì¹˜-í›„ê¸°" class="headerlink" title="ì„¤ì¹˜ í›„ê¸°"></a>ì„¤ì¹˜ í›„ê¸°</h2><ul><li>ì‚¬ì‹¤ ê·¸ëƒ¥ <a href="https://ubuntu.com/download/raspberry-pi" target="_blank" rel="noopener">https://ubuntu.com/download/raspberry-pi</a> ì—¬ê¸°ì— ë‚˜ì˜¨ ê³µì‹ ì„¤ëª…ì„ ì¬ì—°í•˜ê³  ëª‡ ê°€ì§€ ì‹¤ì œ ë°œìƒí•˜ëŠ” ìƒí™©(MicroSD ì´ˆê¸°í™”)ì„ ì¶”ê°€í•œ ê²ƒ ë¿ì´ì§€ë§Œ..</li><li>ìœ„ì— ë‚˜ì˜¤ëŠ” ê²ƒì²˜ëŸ¼ ì–´ë–¤ ë‹¨ê³„ê°€ ì–¸ì œ ëë‚œ ê±´ì§€ ì˜ ì•Œê¸° ì–´ë ¤ìš´ ì¥ë©´ë“¤ì´ ìˆê³ ,</li><li>í˜ì´í¬ì„± ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸ ì²˜ëŸ¼ ì‚´ì§ ë²„ê·¸ìŠ¤ëŸ½ê²Œ ë³´ì´ëŠ” ì§€ë¢°ë“¤ì´ ëª‡ êµ°ë° ìˆìŒì„ ê°ì•ˆí•˜ë©´,</li><li>ë‚¨ê¸°ê¸¸ ì˜í–ˆë‹¤..</li></ul><h2 id="ê³ ì •-IP-ì ìš©"><a href="#ê³ ì •-IP-ì ìš©" class="headerlink" title="ê³ ì • IP ì ìš©"></a>ê³ ì • IP ì ìš©</h2><p>IP ì£¼ì†ŒëŠ” <code>/etc/netplan/50-cloud-init.yaml</code> íŒŒì¼ì—ì„œ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©° ê¸°ë³¸ì€ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •ë¼ìˆë‹¤.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file is generated from information provided by</span></span><br><span class="line"><span class="comment"># the datasource.  Changes to it will not persist across an instance.</span></span><br><span class="line"><span class="comment"># To disable cloud-init's network configuration capabilities, write a file</span></span><br><span class="line"><span class="comment"># /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:</span></span><br><span class="line"><span class="comment"># network: &#123;config: disabled&#125;</span></span><br><span class="line"><span class="attr">network:</span></span><br><span class="line"><span class="attr">    ethernets:</span></span><br><span class="line"><span class="attr">        eth0:</span>            </span><br><span class="line"><span class="attr">            dhcp4:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">            optional:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    version:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="ì„¤ì •-íŒŒì¼-ìˆ˜ì •"><a href="#ì„¤ì •-íŒŒì¼-ìˆ˜ì •" class="headerlink" title="ì„¤ì • íŒŒì¼ ìˆ˜ì •"></a>ì„¤ì • íŒŒì¼ ìˆ˜ì •</h3><p>ê³ ì • IP ì£¼ì†Œë¥¼ ì ìš©í•˜ë ¤ë©´ <code>sudo vi</code>ë¡œ ë‹¤ìŒê³¼ ê°™ì´ í¸ì§‘í•œë‹¤.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file is generated from information provided by</span></span><br><span class="line"><span class="comment"># the datasource.  Changes to it will not persist across an instance.</span></span><br><span class="line"><span class="comment"># To disable cloud-init's network configuration capabilities, write a file</span></span><br><span class="line"><span class="comment"># /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:</span></span><br><span class="line"><span class="comment"># network: &#123;config: disabled&#125;</span></span><br><span class="line"><span class="attr">network:</span></span><br><span class="line"><span class="attr">    ethernets:</span></span><br><span class="line"><span class="attr">        eth0:</span></span><br><span class="line"><span class="attr">            addresses:</span> <span class="string">[ì‚¬ìš©í• .ê³ ì •.IP.ì£¼ì†Œ/24]</span></span><br><span class="line"><span class="attr">            gateway4:</span> <span class="string">ì‚¬ìš©í• .ë‚´ë¶€.ê²Œì´íŠ¸ì›¨ì´.ì£¼ì†Œ</span></span><br><span class="line"><span class="attr">            nameservers:</span></span><br><span class="line"><span class="attr">                addresses:</span> <span class="string">[168.126.63.1,</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span><span class="string">]</span></span><br><span class="line"><span class="attr">            dhcp4:</span> <span class="literal">no</span></span><br><span class="line"><span class="attr">            optional:</span> <span class="literal">no</span></span><br><span class="line"><span class="attr">    version:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="ì„¤ì •-ë‚´ìš©-ì ìš©"><a href="#ì„¤ì •-ë‚´ìš©-ì ìš©" class="headerlink" title="ì„¤ì • ë‚´ìš© ì ìš©"></a>ì„¤ì • ë‚´ìš© ì ìš©</h3><p>ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ ì„¤ì • ë‚´ìš©ì„ ì ìš©í•œë‹¤.</p><blockquote><p>sudo netplan apply</p></blockquote><h3 id="ì„¤ì •-ë‚´ìš©-í™•ì¸"><a href="#ì„¤ì •-ë‚´ìš©-í™•ì¸" class="headerlink" title="ì„¤ì • ë‚´ìš© í™•ì¸"></a>ì„¤ì • ë‚´ìš© í™•ì¸</h3><p>ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ IP ì£¼ì†Œë¥¼ í™•ì¸í•œë‹¤.</p><blockquote><p>ip addr</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Install-Ubuntu-on-Raspberry-Pi-3&quot;&gt;&lt;a href=&quot;#Install-Ubuntu-on-Raspberry-Pi-3&quot; class=&quot;headerlink&quot; title=&quot;Install Ubuntu on Raspberry 
      
    
    </summary>
    
      <category term="ê°œë°œ í™˜ê²½ ë° ë„êµ¬" scheme="http://homoefficio.github.io/categories/%EA%B0%9C%EB%B0%9C-%ED%99%98%EA%B2%BD-%EB%B0%8F-%EB%8F%84%EA%B5%AC/"/>
    
    
      <category term="Raspberry Pi" scheme="http://homoefficio.github.io/tags/Raspberry-Pi/"/>
    
      <category term="Ubuntu" scheme="http://homoefficio.github.io/tags/Ubuntu/"/>
    
      <category term="IoT" scheme="http://homoefficio.github.io/tags/IoT/"/>
    
      <category term="ë¼ì¦ˆë² ë¦¬ íŒŒì´" scheme="http://homoefficio.github.io/tags/%EB%9D%BC%EC%A6%88%EB%B2%A0%EB%A6%AC-%ED%8C%8C%EC%9D%B4/"/>
    
      <category term="ìš°ë¶„íˆ¬" scheme="http://homoefficio.github.io/tags/%EC%9A%B0%EB%B6%84%ED%88%AC/"/>
    
      <category term="IP" scheme="http://homoefficio.github.io/tags/IP/"/>
    
      <category term="Static IP" scheme="http://homoefficio.github.io/tags/Static-IP/"/>
    
  </entry>
  
  <entry>
    <title>IntelliJì—ì„œ H2 ì—°ê²°í•˜ê³  JPA Console ì‚¬ìš©í•˜ê¸°</title>
    <link href="http://homoefficio.github.io/2019/10/09/IntelliJ%EC%97%90%EC%84%9C-H2-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B3%A0-JPA-Console-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/"/>
    <id>http://homoefficio.github.io/2019/10/09/IntelliJì—ì„œ-H2-ì—°ê²°í•˜ê³ -JPA-Console-ì‚¬ìš©í•˜ê¸°/</id>
    <published>2019-10-09T10:00:09.000Z</published>
    <updated>2019-10-13T15:45:27.784Z</updated>
    
    <content type="html"><![CDATA[<h1 id="IntelliJì—ì„œ-H2-ì—°ê²°í•˜ê³ -JPA-Console-ì‚¬ìš©í•˜ê¸°"><a href="#IntelliJì—ì„œ-H2-ì—°ê²°í•˜ê³ -JPA-Console-ì‚¬ìš©í•˜ê¸°" class="headerlink" title="IntelliJì—ì„œ H2 ì—°ê²°í•˜ê³  JPA Console ì‚¬ìš©í•˜ê¸°"></a>IntelliJì—ì„œ H2 ì—°ê²°í•˜ê³  JPA Console ì‚¬ìš©í•˜ê¸°</h1><p>H2ëŠ” Web ì½˜ì†”ë„ ì§€ì›í•´ì¤˜ì„œ ë¡œì»¬ í™˜ê²½ì—ì„œ ì›¹ì„ í†µí•´ ì‰½ê²Œ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br>IntelliJ <strong>Ultimate ë²„ì „</strong>ì—ëŠ” DB Client ë„êµ¬ê°€ í¬í•¨ë¼ìˆì–´ì„œ ë¡œì»¬ì—ì„œ H2 DBë¥¼ ì‚¬ìš©í•  ë•Œ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br>ë˜í•œ JPAë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° JPA Consoleì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , Hibernate Consoleì²˜ëŸ¼ JPA êµ¬í˜„ì²´ì— ë”°ë¥¸ ì½˜ì†”ë„ ì§€ì›í•œë‹¤.</p><p>ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì— H2ë¥¼ ì„ë² ë””ë“œ ëª¨ë“œë¡œ ì‚¬ìš©í•˜ëŠ” ì¼€ì´ìŠ¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•œ ë²ˆ ì‹œë„í•´ë³´ì.</p><p>IntelliJ 2019.2.3, ìë°” 11, Gradle 5.6.2, ìŠ¤í”„ë§ë¶€íŠ¸ ë²„ì „ 2.2.0 RC1, H2 1.4 ê¸°ì¤€ì´ê³ , ê¸°ë³¸ <code>build.gradle</code>ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation <span class="string">'org.springframework.boot:spring-boot-starter-actuator'</span></span><br><span class="line">    implementation <span class="string">'org.springframework.boot:spring-boot-starter-data-jpa'</span></span><br><span class="line">    implementation <span class="string">'org.springframework.boot:spring-boot-starter-web'</span></span><br><span class="line">    compileOnly <span class="string">'org.projectlombok:lombok'</span></span><br><span class="line">    developmentOnly <span class="string">'org.springframework.boot:spring-boot-devtools'</span></span><br><span class="line">    runtimeOnly <span class="string">'com.h2database:h2'</span></span><br><span class="line">    annotationProcessor <span class="string">'org.springframework.boot:spring-boot-configuration-processor'</span></span><br><span class="line">    annotationProcessor <span class="string">'org.projectlombok:lombok'</span></span><br><span class="line">    testImplementation(<span class="string">'org.springframework.boot:spring-boot-starter-test'</span>) &#123;</span><br><span class="line">        exclude <span class="string">group:</span> <span class="string">'org.junit.vintage'</span>, <span class="string">module:</span> <span class="string">'junit-vintage-engine'</span></span><br><span class="line">    &#125;</span><br><span class="line">    testImplementation <span class="string">'org.springframework.security:spring-security-test'</span></span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="H2-ì›¹-ì½˜ì†”"><a href="#H2-ì›¹-ì½˜ì†”" class="headerlink" title="H2 ì›¹ ì½˜ì†”"></a>H2 ì›¹ ì½˜ì†”</h2><p>H2ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì›¹ ì½˜ì†”ì„ ì§€ì›í•˜ë©°, ìŠ¤í”„ë§ë¶€íŠ¸ì—ì„œëŠ” ë‹¤ìŒì˜ 2ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì›¹ ì½˜ì†”ì„ í™œì„±í™” í•  ìˆ˜ ìˆë‹¤. </p><ol><li><code>spring-boot-devtools</code> ì ìš©</li><li>application.properties ì— <code>spring.h2.console.enabled=true</code> ëª…ì‹œ</li></ol><p>ê¸°ë³¸ JDBC URLì€ <code>jdbc:h2:mem:testdb</code> ì´ë©°, ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ <code>localhost:8080/h2-console</code>ì„ í†µí•´ ì›¹ ì½˜ì†”ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/V3jgpSb.png" alt="Imgur"></p><p>H2 ì›¹ ì½˜ì†”ì€ ë‹¤ìŒê³¼ ê°™ì´ ì—¬ëŸ¬ ì›¹ ë¸Œë¼ìš°ì €ë¡œë¶€í„°ì˜ ì ‘ê·¼ì€ ê°€ëŠ¥í•˜ì§€ë§Œ,</p><p><img src="https://i.imgur.com/7iSodqX.png" alt="Imgur"><br>&lt;<a href="https://www.h2database.com/html/tutorial.html#tutorial_starting_h2_console" target="_blank" rel="noopener">https://www.h2database.com/html/tutorial.html#tutorial_starting_h2_console</a> ê·¸ë¦¼ ìˆ˜ì •&gt;</p><p>ì›¹ ì½˜ì†”ì´ë¯€ë¡œ ë‹¹ì—°í•œ ë§ì¼ ìˆ˜ë„ ìˆì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì´ ì›¹ ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„°ì˜ ì ‘ê·¼ì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.</p><p><img src="https://i.imgur.com/ZY7UV9y.png" alt="Imgur"><br>&lt;<a href="https://www.h2database.com/html/tutorial.html#tutorial_starting_h2_console" target="_blank" rel="noopener">https://www.h2database.com/html/tutorial.html#tutorial_starting_h2_console</a> ê·¸ë¦¼ ìˆ˜ì •&gt;</p><p>ë”°ë¼ì„œ IntelliJì™€ ê°™ì€ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ë¡œì—ì„œ ì ‘ê·¼í•˜ë ¤ë©´ ë¨¼ì € H2 TCP ì„œë²„ë¥¼ ë³„ë„ë¡œ êµ¬ë™í•´ì•¼ í•œë‹¤.</p><h2 id="H2-TCP-ì„œë²„-ìƒì„±"><a href="#H2-TCP-ì„œë²„-ìƒì„±" class="headerlink" title="H2 TCP ì„œë²„ ìƒì„±"></a>H2 TCP ì„œë²„ ìƒì„±</h2><h3 id="ì˜ì¡´-ê´€ê³„-ì„¤ì •-ë³€ê²½"><a href="#ì˜ì¡´-ê´€ê³„-ì„¤ì •-ë³€ê²½" class="headerlink" title="ì˜ì¡´ ê´€ê³„ ì„¤ì • ë³€ê²½"></a>ì˜ì¡´ ê´€ê³„ ì„¤ì • ë³€ê²½</h3><p>H2 TCP ì„œë²„ë¥¼ êµ¬ë™í•˜ë ¤ë©´ H2ê°€ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì†ŒìŠ¤ ì½”ë“œ ìˆ˜ì¤€ì—ì„œ ì‚¬ìš©í•´ì•¼í•˜ë¯€ë¡œ H2ë¥¼ ë” ì´ìƒ <code>runtimeOnly</code>ë¡œë§Œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ <code>build.gradle</code>ì—ì„œ H2ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ <code>compile</code>ë¡œ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">dependencies &#123;</span><br><span class="line">    ...</span><br><span class="line">    compile <span class="string">'com.h2database:h2'</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="H2-TCP-ì„œë²„-êµ¬ë™-ë¹ˆ-ì¶”ê°€"><a href="#H2-TCP-ì„œë²„-êµ¬ë™-ë¹ˆ-ì¶”ê°€" class="headerlink" title="H2 TCP ì„œë²„ êµ¬ë™ ë¹ˆ ì¶”ê°€"></a>H2 TCP ì„œë²„ êµ¬ë™ ë¹ˆ ì¶”ê°€</h3><p>ë‹¤ìŒê³¼ ê°™ì´ H2 TCP ì„œë²„ë¥¼ êµ¬ë™í•˜ëŠ” ë¹ˆì„ ì¶”ê°€í•œë‹¤. ìŠ¤í”„ë§ì´ ì•„ë‹ˆë¼ë©´ ë¹ˆ ëŒ€ì‹  ë³„ë„ì˜ Java ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì‘ì„±í•´ë„ ëœë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> io.homo_efficio.learnmicroservicesspringboot.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.h2.tools.Server;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">H2ServerConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Server <span class="title">h2TcpServer</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Server.createTcpServer().start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>H2 TCP ì„œë²„ì˜ ê¸°ë³¸ í¬íŠ¸ëŠ” 9092ì´ë©°, í¬íŠ¸ ë“± ê¸°íƒ€ ì˜µì…˜ì€ <code>createTcpServer()</code>ì˜ ì •ì˜ ë¶€ë¶„ì„ ë³´ë©´ ìƒì„¸íˆ ì•Œ ìˆ˜ ìˆë‹¤.</p><p>ì´ì œ ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ H2 TCP ì„œë²„ê°€ í•¨ê»˜ êµ¬ë™ë˜ê³ , ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œë  ë•Œ H2 TCP ì„œë²„ë„ í•¨ê»˜ ì¢…ë£Œëœë‹¤.</p><p>ë³´í†µ H2ëŠ” ê°œë°œìš©ìœ¼ë¡œ ë¡œì»¬ì—ì„œ ì‚¬ìš©í•˜ë¯€ë¡œ ë¹ˆ ì„¤ì • ì‹œ ë‹¤ìŒê³¼ ê°™ì´ í”„ë¡œíŒŒì¼ì„ ì§€ì •í•´ë‘ê³  ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ë™ ì‹œ ì ì ˆí•œ í”„ë¡œíŒŒì¼ì„ ì§€ì •í•´ì„œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Profile</span>(<span class="string">"local"</span>)</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">H2ServerConfig</span> </span>&#123;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ì´ì œ IntelliJ ìª½ ì„¤ì •ì„ ì•Œì•„ë³´ì.</p><h2 id="IntelliJ-ë°ì´í„°-ì†ŒìŠ¤-ì„¤ì •"><a href="#IntelliJ-ë°ì´í„°-ì†ŒìŠ¤-ì„¤ì •" class="headerlink" title="IntelliJ ë°ì´í„° ì†ŒìŠ¤ ì„¤ì •"></a>IntelliJ ë°ì´í„° ì†ŒìŠ¤ ì„¤ì •</h2><p>ë‹¤ìŒê³¼ ê°™ì´ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ë©”ë‰´ì—ì„œ H2ë¥¼ ì„ íƒí•˜ê³ ,</p><p><img src="https://i.imgur.com/UnochEY.png" alt="Imgur"></p><p>ë‹¤ìŒê³¼ ê°™ì´ H2 JDBC ë“œë¼ì´ë²„ë¥¼ ì§€ì •í•œë‹¤.</p><p><img src="https://i.imgur.com/1h22PXY.png" alt="Imgur"></p><p>ë‹¤ìŒê³¼ ê°™ì´ ì™¼ìª½ ìƒë‹¨ì˜ â€˜Project Data Sourcesâ€™ì— í‘œì‹œëœ í•­ëª©ì„ í´ë¦­í•˜ê³  URL, Userë¥¼ ì…ë ¥í•œë‹¤. URL ì…ë ¥ ì‹œ ë­”ê°€ ì˜¤ë¥˜ë¥¼ í‘œì‹œí•˜ëŠ” ë“¯í•œ ë¹¨ê°„ìƒ‰ ì„¸ë¡œ ë§‰ëŒ€ê°€ í‘œì‹œë˜ëŠ”ë° ë¬´ì‹œí•˜ë©´ ëœë‹¤.</p><p><img src="https://i.imgur.com/H3ASiJO.png" alt="Imgur"></p><p>Test Connectionì„ í´ë¦­í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì—°ê²°ì— ì„±ê³µí•œë‹¤.</p><p><img src="https://i.imgur.com/OjIh2EW.png" alt="Imgur"></p><p>H2 TCP ì„œë²„ëŠ” ì¸ë©”ëª¨ë¦¬ ëª¨ë“œ, íŒŒì¼ ëª¨ë“œ ë‘˜ ë‹¤ ì§€ì›í•˜ë©° URL í˜•ì‹ì€ ë‹¤ìŒì„ ì°¸ê³ í•œë‹¤.</p><p><img src="https://i.imgur.com/36vMBtK.png" alt="Imgur"><br>&lt;ì¶œì²˜: <a href="https://h2database.com/html/features.html#database_url&gt;" target="_blank" rel="noopener">https://h2database.com/html/features.html#database_url&gt;</a></p><p>ì°¸ê³ ë¡œ ë‹¤ìŒê³¼ ê°™ì´ IntelliJì˜ ë“œë¼ì´ë²„ ì§€ì • í™”ë©´ì—ì„œë„ Connection type ë³„ë¡œ ë‹¤ìŒê³¼ ê°™ì´ URL í…œí”Œë¦¿ì„ ì¹œì ˆí•˜ê²Œ ì•Œë ¤ì¤€ë‹¤.</p><p><img src="https://i.imgur.com/Rf6nGyG.png" alt="Imgur"></p><p>ë°ì´í„° ì†ŒìŠ¤ ì„¤ì • í™”ë©´ì—ì„œ Test Connectionì— ì„±ê³µí•œ í›„ ë‹¤ìŒê³¼ ê°™ì´ â€˜Schemasâ€™ íƒ­ì„ í´ë¦­í•´ì„œ 1ì´ˆ ì •ë„ ê¸°ë‹¤ë¦° í›„ ëœ¨ëŠ” ëª©ë¡ì—ì„œ â€˜PUBLICâ€™ ìŠ¤í‚¤ë§ˆë¥¼ ì„ íƒí•œë‹¤.</p><p><img src="https://i.imgur.com/9F1V9ks.png" alt="Imgur"></p><p>OKë¥¼ í´ë¦­í•˜ë©´ IntelliJ í™”ë©´ì´ ë‹¤ìŒê³¼ ê°™ì´ ë°”ë€ë‹¤.</p><p><img src="https://i.imgur.com/iM8KTCQ.png" alt="Imgur"></p><p>console ì°½ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ìë™ ì™„ì„± ë„ì›€ì„ ë°›ìœ¼ë©´ì„œ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/0tpkaJo.png" alt="Imgur"></p><h2 id="JPA-Console-ì„¤ì •"><a href="#JPA-Console-ì„¤ì •" class="headerlink" title="JPA Console ì„¤ì •"></a>JPA Console ì„¤ì •</h2><p>IntelliJ Ultimate ë²„ì „ì—ì„œëŠ” DB Client ë¿ë§Œ ì•„ë‹ˆë¼ JPA Consoleë„ ì œê³µí•˜ë©°, ì—¬ê¸°ì„œ JPQL ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.</p><p>ë‹¤ìŒê³¼ ê°™ì´ â€˜Project Structureâ€™ í™”ë©´ì—ì„œ JPA Consoleì„ ì‚¬ìš©í•  ëª¨ë“ˆì˜ â€˜mainâ€™ì—ì„œ ìš°í´ë¦­í•˜ê³  JPAë¥¼ í´ë¦­í•œë‹¤.</p><p><img src="https://i.imgur.com/Qo9F6Da.png" alt="Imgur"></p><p>ë‹¤ìŒê³¼ ê°™ì´ â€˜Default JPA Providerâ€™ì—ì„œ ì‹¤ì œ ì‚¬ìš©í•˜ëŠ” JPA êµ¬í˜„ì²´ë¥¼ ì„ íƒí•œë‹¤.</p><p><img src="https://i.imgur.com/h6LUtjB.png" alt="Imgur"></p><p>ë‹¤ìŒê³¼ ê°™ì´ â€˜Persistenceâ€™ íƒ­ì„ í´ë¦­í•˜ê³  â€˜entityManagerFactoryâ€™ë¥¼ í¼ì¹˜ë©´ ì—”í‹°í‹° í´ë˜ìŠ¤ê°€ í‘œì‹œëœë‹¤.</p><p><img src="https://i.imgur.com/gVcR6zH.png" alt="Imgur"></p><p>ë‹¤ìŒê³¼ ê°™ì´ â€˜entityManagerFactoryâ€™ë¥¼ ìš°í´ë¦­í•˜ê³  â€˜Assign Data Sourcesâ€¦â€™ë¥¼ í´ë¦­í•œë‹¤.</p><p><img src="https://i.imgur.com/7Rixe39.png" alt="Imgur"></p><p>ë‹¤ìŒê³¼ ê°™ì´ â€˜Data Sourceâ€™ë€ì„ í´ë¦­í•˜ë©´ ë‚˜ì˜¤ëŠ” ëª©ë¡ì—ì„œ ì•ì—ì„œ ì„¤ì •í•œ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì„ íƒí•˜ê³  OKë¥¼ í´ë¦­í•œë‹¤.</p><p><img src="https://i.imgur.com/PcIGAh2.png" alt="Imgur"></p><p>ë‹¤ìŒê³¼ ê°™ì´ â€˜entityManagerFactoryâ€™ì—ì„œ ìš°í´ë¦­í•˜ê³  â€˜Consoleâ€™ì„ í´ë¦­í•˜ë©´,</p><p><img src="https://i.imgur.com/GPCA6zX.png" alt="Imgur"></p><p>ë‹¤ìŒê³¼ ê°™ì´ Console ì„ íƒ ë©”ë‰´ê°€ í‘œì‹œëœë‹¤. JPA Consoleì„ í´ë¦­í•˜ë©´,</p><p><img src="https://i.imgur.com/wYRCu07.png" alt="Imgur"></p><p>ë‹¤ìŒê³¼ ê°™ì´ JPA Consoleì´ í™”ë©´ì— í‘œì‹œëœë‹¤.</p><p><img src="https://i.imgur.com/6bpkFbW.png" alt="Imgur"></p><p>ë°”ë¡œ JPQLì„ ì…ë ¥í•´ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. í˜„ì¬ ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ ì¤‘ì´ì§€ ì•Šì•„ì„œ H2 TCP ì„œë²„ê°€ ê¸°ë™ ì¤‘ì¸ ìƒíƒœê°€ ì•„ë‹ˆë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</p><p><img src="https://i.imgur.com/OyeIBe8.png" alt="Imgur"></p><p>ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•´ì„œ H2 TCP ì„œë²„ê°€ ê¸°ë™ëœ í›„ì— ë‹¤ìŒê³¼ ê°™ì´ ë‹¤ì‹œ JPQLì„ ì‹¤í–‰í•˜ë©´ ê²°ê³¼ê°€ í‘œì‹œëœë‹¤.</p><p><img src="https://i.imgur.com/E5GlHhN.png" alt="Imgur"></p><h3 id="JPQL-ì´ë¦„-ì¸ì‹-ë¬¸ì œ"><a href="#JPQL-ì´ë¦„-ì¸ì‹-ë¬¸ì œ" class="headerlink" title="JPQL ì´ë¦„ ì¸ì‹ ë¬¸ì œ"></a>JPQL ì´ë¦„ ì¸ì‹ ë¬¸ì œ</h3><p>ê·¸ëŸ°ë° JPA Consoleì—ì„œ JPQL ì‹¤í–‰ ì‹œ Javaì˜ CamelCase í‘œê¸°ë²•ì„ snake_case í‘œê¸°ë²•ìœ¼ë¡œ ìë™ìœ¼ë¡œ ë³€í™˜í•˜ì§€ ì•Šì•„ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì—”í‹°í‹° í´ë˜ìŠ¤ ì´ë¦„ì´ë‚˜ í•„ë“œ ì´ë¦„ì— CamelCase í‘œê¸°ë²•ì´ ì‚¬ìš©ëœ ê²½ìš° â€˜not foundâ€™ ì—ëŸ¬ê°€ ë‚œë‹¤.</p><p>ë‹¤ìŒ ê·¸ë¦¼ì„ ë³´ë©´ CamelCaseë¥¼ ì‚¬ìš©í•˜ë©´ì„œë„ <code>@Table(name = &quot;MULTIPLICATION_ATTEMPT&quot;)</code>ë‚˜ <code>@Column(name=&quot;MULTIPLICATION_ATTEMPT_ID&quot;)</code>ë¥¼ ëª…ì‹œí•´ì¤€ ê±´ ì—ëŸ¬ê°€ ë‚˜ì§€ ì•Šì§€ë§Œ, <code>resultAttempt</code>ì²˜ëŸ¼ CamelCaseì´ë©´ì„œë„ <code>@Column</code>ìœ¼ë¡œ ì´ë¦„ì„ ì§€ì •í•´ì£¼ì§€ ì•Šì€ ê±´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</p><p><img src="https://i.imgur.com/Bx022sX.png" alt="Imgur"></p><p><del>ë”°ë¼ì„œ í˜„ì¬ë¡œëŠ” JPA Consoleì„ í†µí•´ JPQLì„ ë¬¸ì œ ì—†ì´ ì‚¬ìš©í•˜ë ¤ë©´ CamelCaseë¥¼ ì‚¬ìš©í•˜ëŠ” ì—”í‹°í‹° í´ë˜ìŠ¤ ì´ë¦„ì´ë‚˜ í•„ë“œ ì´ë¦„ì—ëŠ” <code>@Table</code>,<code>@Column</code>ì„ í†µí•´ ì‹¤ì œ í…Œì´ë¸”ì— ì‚¬ìš©ë  snake_case ì´ë¦„ì„ ëª¨ë‘ ì§€ì •í•´ì¤˜ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆë‹¤.</del></p><h4 id="ì¶”ê°€"><a href="#ì¶”ê°€" class="headerlink" title="ì¶”ê°€"></a>ì¶”ê°€</h4><p>ì´ìˆ˜í™ ë‹˜ê»˜ì„œ ì´ ë¬¸ì œì— ëŒ€í•œ í•´ê²° ë°©ë²•ì„ ì•Œë ¤ì£¼ì…¨ë‹¤.</p><p>ë‹¤ìŒê³¼ ê°™ì´ â€˜Persistenceâ€™ &gt; â€˜entityManagerFactoryâ€™ ìš°í´ë¦­ &gt; â€˜Assign Naming Strategiesâ€¦â€™ë¥¼ ì„ íƒí•˜ê³ ,</p><p><img src="https://i.imgur.com/fHAERH2.png" alt="Imgur"></p><p>ë‹¤ìŒê³¼ ê°™ì´ â€˜SpringPhysicalNamingStrategyâ€™ë¥¼ Naming Strategyë¡œ ì„¤ì •í•´ì£¼ë©´, JPA Consoleì—ì„œ CamelCaseë¡œ ëœ ì´ë¦„ë„ ë³„ë‹¤ë¥¸ ì²˜ë¦¬ ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/1zuu8ez.png" alt="Imgur"></p><h1 id="ì •ë¦¬"><a href="#ì •ë¦¬" class="headerlink" title="ì •ë¦¬"></a>ì •ë¦¬</h1><blockquote><ul><li>IntelliJ Ultimate ë²„ì „ì—ì„œëŠ” DB Clientë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.  </li><li>ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” H2 TCP ì„œë²„ë¥¼ ë¹ˆìœ¼ë¡œ ë„ìš°ë©´ IntelliJ DB Clientë¡œ ì—°ê²°í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.  </li><li>Project Structureì—ì„œ main ëª¨ë“ˆì— JPAë¥¼ ì¶”ê°€í•˜ê³  ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì„¤ì •í•´ì£¼ë©´ JPA Consoleì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.  </li><li>Naming Strategyë¥¼ â€˜SpringPhysicalNamingStrategyâ€™ë¡œ ì§€ì •í•´ì£¼ë©´ JPA Consoleì—ì„œ CamelCaseë¡œ ì‘ì„±ëœ ì´ë¦„ë„ ê·¸ëŒ€ë¡œ JPQLì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;IntelliJì—ì„œ-H2-ì—°ê²°í•˜ê³ -JPA-Console-ì‚¬ìš©í•˜ê¸°&quot;&gt;&lt;a href=&quot;#IntelliJì—ì„œ-H2-ì—°ê²°í•˜ê³ -JPA-Console-ì‚¬ìš©í•˜ê¸°&quot; class=&quot;headerlink&quot; title=&quot;IntelliJì—ì„œ H2 ì—°ê²°í•˜ê³  JPA
      
    
    </summary>
    
      <category term="ê°œë°œ í™˜ê²½ ë° ë„êµ¬" scheme="http://homoefficio.github.io/categories/%EA%B0%9C%EB%B0%9C-%ED%99%98%EA%B2%BD-%EB%B0%8F-%EB%8F%84%EA%B5%AC/"/>
    
    
      <category term="JPA" scheme="http://homoefficio.github.io/tags/JPA/"/>
    
      <category term="IntelliJ" scheme="http://homoefficio.github.io/tags/IntelliJ/"/>
    
      <category term="H2" scheme="http://homoefficio.github.io/tags/H2/"/>
    
      <category term="H2 TCP Server" scheme="http://homoefficio.github.io/tags/H2-TCP-Server/"/>
    
      <category term="JPA Console" scheme="http://homoefficio.github.io/tags/JPA-Console/"/>
    
      <category term="SpringBoot" scheme="http://homoefficio.github.io/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Java Optional ë°”ë¥´ê²Œ ì“°ê¸°</title>
    <link href="http://homoefficio.github.io/2019/10/03/Java-Optional-%EB%B0%94%EB%A5%B4%EA%B2%8C-%EC%93%B0%EA%B8%B0/"/>
    <id>http://homoefficio.github.io/2019/10/03/Java-Optional-ë°”ë¥´ê²Œ-ì“°ê¸°/</id>
    <published>2019-10-03T14:02:59.000Z</published>
    <updated>2019-10-04T00:17:14.891Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java-Optional-ë°”ë¥´ê²Œ-ì“°ê¸°"><a href="#Java-Optional-ë°”ë¥´ê²Œ-ì“°ê¸°" class="headerlink" title="Java Optional ë°”ë¥´ê²Œ ì“°ê¸°"></a>Java Optional ë°”ë¥´ê²Œ ì“°ê¸°</h1><p>Brian GoetzëŠ” <a href="https://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328555#26328555" target="_blank" rel="noopener">ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°</a>ì—ì„œ <code>Optional</code>ì„ ë§Œë“  ì˜ë„ì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì´ ë§í–ˆë‹¤.</p><blockquote><p>â€¦ it was not to be a general purpose Maybe type, as much as many people would have liked us to do so. Our intention was to provide a limited mechanism for library method return types where there needed to be a clear way to represent â€œno resultâ€ â€¦</p><p><code>Optional</code>ì€ ë§ì€ ì‚¬ëŒë“¤ì´ ìš°ë¦¬(ìë°” ì–¸ì–´ ì„¤ê³„ì)ì—ê²Œ ê¸°ëŒ€í–ˆë˜ ë²”ìš©ì ì¸ <code>Maybe</code> íƒ€ì…ê³¼ëŠ” ë‹¤ë¥´ë‹¤. <strong>ë¼ì´ë¸ŒëŸ¬ë¦¬ ë©”ì„œë“œê°€ ë°˜í™˜í•  ê²°ê³¼ê°’ì´ â€˜ì—†ìŒâ€™ì„ ëª…ë°±í•˜ê²Œ í‘œí˜„í•  í•„ìš”ê°€ ìˆëŠ” ê³³ì—ì„œ ì œí•œì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•˜ëŠ” ê²ƒì´ <code>Optional</code>ì„ ë§Œë“  ì˜ë„</strong>ì˜€ë‹¤.</p></blockquote><p>ë­” ì†Œë¦°ì§€ ì•„ë¦¬ê¹Œë¦¬í•˜ì§€ë§Œ ìš”ëŠ” <strong>ë°˜í™˜ê°’ì´ â€˜ì—†ìŒâ€™ì„ ë‚˜íƒ€ë‚´ëŠ” ê²ƒì´ ì£¼ëª©ì </strong>ì´ë©°, (ì´ìœ ì•¼ ìˆê² ì§€ë§Œ) <strong>ì‚¬ëŒë“¤ì´ ê¸°ëŒ€í•˜ëŠ” ê²ƒê³¼ëŠ” ë‹¤ë¥´ê²Œ ë§Œë“¤ì—ˆë‹¤ëŠ”..</strong><br>ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ì‚¬ëŒë“¤ì€ ê¸°ëŒ€í–ˆë˜ ëŒ€ë¡œ ì‚¬ìš©í•´ë²„ë ¤ì„œ <a href="https://dzone.com/articles/using-optional-correctly-is-not-optional" target="_blank" rel="noopener">ì£¼ì˜ì‚¬í•­ì´ 26ê°€ì§€</a>ë‚˜ ë˜ì—ˆ.. (ì˜ë„ì™€ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ í—ˆìš©í•œ ì´ìœ ëŠ” ë˜ ë­˜ê¹Œ..)</p><p>ì°¸ê³ ë¡œ Java9ì—ëŠ” Brian Goetzê°€ ì„¤ëª…í•œ ì˜ë„ê°€ ë‹¤ìŒê³¼ ê°™ì´ <code>API Note</code>ë¼ëŠ” í˜•ì‹ìœ¼ë¡œ <a href="https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html" target="_blank" rel="noopener">ê³µì‹ API ë¬¸ì„œ</a>ì—ë„ í¬í•¨ë˜ì—ˆë‹¤. (ì•Œë ¤ì£¼ì‹  ê¹€ì¸íƒœë‹˜ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤!)</p><blockquote><p>API Note:<br>Optional is primarily intended for use as a method return type where there is a clear need to represent â€œno result,â€ and where using null is likely to cause errors. A variable whose type is Optional should never itself be null; it should always point to an Optional instance.</p><p><strong>ë©”ì„œë“œê°€ ë°˜í™˜í•  ê²°ê³¼ê°’ì´ â€˜ì—†ìŒâ€™ì„ ëª…ë°±í•˜ê²Œ í‘œí˜„í•  í•„ìš”ê°€ ìˆê³ , <code>null</code>ì„ ë°˜í™˜í•˜ë©´ ì—ëŸ¬ë¥¼ ìœ ë°œí•  ê°€ëŠ¥ì„±ì´ ë†’ì€ ìƒí™©ì—ì„œ ë©”ì„œë“œì˜ ë°˜í™˜ íƒ€ì…ìœ¼ë¡œ <code>Optional</code>ì„ ì‚¬ìš©í•˜ìëŠ” ê²ƒì´ <code>Optional</code>ì„ ë§Œë“  ì£¼ëœ ëª©ì ì´ë‹¤.</strong> <code>Optional</code> íƒ€ì…ì˜ ë³€ìˆ˜ì˜ ê°’ì€ ì ˆëŒ€ <code>null</code>ì´ì–´ì„œëŠ” ì•ˆ ë˜ë©°, í•­ìƒ <code>Optional</code> ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬ì¼œì•¼ í•œë‹¤.</p></blockquote><p>ì–´ì¨Œë“  ì›ë˜ ì˜ë„ì— ë§ê²Œ ì“°ëŠ” ê²ƒì´ ê°€ê¸‰ì  í•´ê°€ ì—†ì„ ê²ƒì´ê³ , ìš°ë¦¬ëŠ” ìš°ë¦¬ê°€ ë§Œë“œëŠ” ì‹œìŠ¤í…œì— í•´ë¥¼ ë¼ì¹˜ì§€ ë§ì•„ì•¼ í•œë‹¤. ê·¸ë˜ì„œ <strong><code>Optional</code> ì‚¬ìš© ì‹œ ë¬´ì‹¬ê²°ì— ì˜ëª» ì‚¬ìš©í•˜ëŠ” ì•ˆí‹°íŒ¨í„´ê³¼ ì˜¬ë°”ë¥¸ ì‚¬ìš©ë²•ì„ ìë°”8 ê¸°ì¤€ìœ¼ë¡œ ê°ˆë¬´ë¦¬</strong>í•´ë´¤ë‹¤.</p><h2 id="1-isPresent-get-ëŒ€ì‹ -orElse-orElseGet-orElseThrow"><a href="#1-isPresent-get-ëŒ€ì‹ -orElse-orElseGet-orElseThrow" class="headerlink" title="1. isPresent()-get() ëŒ€ì‹  orElse()/orElseGet()/orElseThrow()"></a>1. <code>isPresent()-get()</code> ëŒ€ì‹  <code>orElse()/orElseGet()/orElseThrow()</code></h2><blockquote><p><strong>ì´ì™•ì— ë¹„ì‹¼ <code>Optional</code> ì“°ê¸°ë¡œ í•œ ê±° ì½”ë“œë¼ë„ ì¤„ì´ì. ì„¤ëª…ë³´ë‹¤ ê·¸ëƒ¥ ì½”ë“œë¥¼ ë³´ëŠ” ê²Œ í›¨ì”¬ ë‚«ë‹¤.</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì•ˆ ì¢‹ìŒ</span></span><br><span class="line">Optional&lt;Member&gt; member = ...;</span><br><span class="line"><span class="keyword">if</span> (member.isPresent()) &#123;</span><br><span class="line">    <span class="keyword">return</span> member.get();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line">Optional&lt;Member&gt; member = ...;</span><br><span class="line"><span class="keyword">return</span> member.orElse(<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ì•ˆ ì¢‹ìŒ</span></span><br><span class="line">Optional&lt;Member&gt; member = ...;</span><br><span class="line"><span class="keyword">if</span> (member.isPresent()) &#123;</span><br><span class="line">    <span class="keyword">return</span> member.get();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line">Optional&lt;Member&gt; member = ...;</span><br><span class="line"><span class="keyword">return</span> member.orElseThrow(() -&gt; <span class="keyword">new</span> NoSuchElementException());</span><br></pre></td></tr></table></figure><h2 id="2-orElse-new-ëŒ€ì‹ -orElseGet-gt-new"><a href="#2-orElse-new-ëŒ€ì‹ -orElseGet-gt-new" class="headerlink" title="2. orElse(new ...) ëŒ€ì‹  orElseGet(() -&gt; new ...)"></a>2. <code>orElse(new ...)</code> ëŒ€ì‹  <code>orElseGet(() -&gt; new ...)</code></h2><blockquote><p><strong><code>orElse(...)</code>ì—ì„œ <code>...</code>ëŠ” <code>Optional</code>ì— ê°’ì´ ìˆë“  ì—†ë“  ë¬´ì¡°ê±´ ì‹¤í–‰ëœë‹¤. ë”°ë¼ì„œ <code>...</code>ê°€ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ì—ëŠ” <code>orElse()</code> ëŒ€ì‹  <code>orElseGet()</code>ì„ ì¨ì•¼í•œë‹¤.</strong></p></blockquote><p>ì´ê±° ì‚¬ì‹¤ ìƒê°í•´ë³´ë©´ êµ‰ì¥íˆ ë‹¹ì—°í•œ ë‚´ìš©ì´ë‹¤. <code>method1(method2())</code>ì´ ì‹¤í–‰ë˜ë©´ <code>method2()</code>ëŠ” <code>method1()</code>ë³´ë‹¤ ë¨¼ì € ê·¸ë¦¬ê³  ì–¸ì œë‚˜ ì‹¤í–‰ëœë‹¤. ë”°ë¼ì„œ <code>orElse(new ...)</code>ì—ì„œë„ <code>new ...</code>ê°€ ë¬´ì¡°ê±´ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ë‹¹ì—°í•˜ë‹¤.  </p><p>ê·¸ëŸ°ë° ì•„ë§ˆë„ ì´ë¦„ ë•Œë¬¸ì´ê² ì§€ë§Œ ë¬˜í•˜ê²Œë„ ë¬´ì‹¬ê²°ì— ìƒê°ì—†ì´ <code>orElse(new ...)</code>ë¥¼ ì¨ë³´ë©´ <code>new ...</code>ëŠ” <code>Optional</code>ì— ê°’ì´ ì—†ì„ ë•Œë§Œ ì‹¤í–‰ë  ê²ƒ ê°™ì€ ì°©ê°ì´ ë“ ë‹¤.</p><p>ì•”íŠ¼ <code>Optional</code>ì— ê°’ì´ ì—†ìœ¼ë©´ <code>orElse()</code>ì˜ ì¸ìë¡œì„œ ì‹¤í–‰ëœ ê°’ì´ ë°˜í™˜ë˜ë¯€ë¡œ ì‹¤í–‰í•œ ì˜ë¯¸ê°€ ìˆì§€ë§Œ, <strong><code>Optional</code>ì— ê°’ì´ ìˆìœ¼ë©´ <code>orElse()</code>ì˜ ì¸ìë¡œì„œ ì‹¤í–‰ëœ ê°’ì´ ë¬´ì‹œë˜ê³  ë²„ë ¤ì§„ë‹¤.</strong> ë”°ë¼ì„œ <strong><code>orElse(...)</code>ëŠ” <code>...</code>ê°€ ìƒˆ ê°ì²´ ìƒì„±ì´ë‚˜ ìƒˆë¡œìš´ ì—°ì‚°ì„ ìœ ë°œí•˜ì§€ ì•Šê³  ì´ë¯¸ ìƒì„±ë˜ì—ˆê±°ë‚˜ ì´ë¯¸ ê³„ì‚°ëœ ê°’ì¼ ë•Œë§Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</strong></p><p><strong><code>orElseGet(Supplier)</code>ì—ì„œ <code>Supplier</code>ëŠ” <code>Optional</code>ì— ê°’ì´ ì—†ì„ ë•Œë§Œ ì‹¤í–‰ëœë‹¤. ë”°ë¼ì„œ <code>Optional</code>ì— ê°’ì´ ì—†ì„ ë•Œë§Œ ìƒˆ ê°ì²´ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ìƒˆ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ë¯€ë¡œ ë¶ˆí•„ìš”í•œ ì˜¤ë²„í—¤ë“œê°€ ì—†ë‹¤.</strong> ë¬¼ë¡  ëŒë‹¤ì‹ì´ë‚˜ ë©”ì„œë“œì°¸ì¡°ì— ëŒ€í•œ ì˜¤ë²„í—¤ë“œëŠ” ìˆê² ì§€ë§Œ ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±ì´ë‚˜ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì— ë¹„í•˜ë©´ ëŒ€ë¶€ë¶„ ê²½ë¯¸í•  ê²ƒì´ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì•ˆ ì¢‹ìŒ</span></span><br><span class="line">Optional&lt;Member&gt; member = ...;</span><br><span class="line"><span class="keyword">return</span> member.orElse(<span class="keyword">new</span> Member());  <span class="comment">// memberì— ê°’ì´ ìˆë“  ì—†ë“  new Member()ëŠ” ë¬´ì¡°ê±´ ì‹¤í–‰ë¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line">Optional&lt;Member&gt; member = ...;</span><br><span class="line"><span class="keyword">return</span> member.orElseGet(Member::<span class="keyword">new</span>);  <span class="comment">// memberì— ê°’ì´ ì—†ì„ ë•Œë§Œ new Member()ê°€ ì‹¤í–‰ë¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line">Member EMPTY_MEMBER = <span class="keyword">new</span> Member();</span><br><span class="line">...</span><br><span class="line">Optional&lt;Member&gt; member = ...;</span><br><span class="line"><span class="keyword">return</span> member.orElse(EMPTY_MEMBER);  <span class="comment">// ì´ë¯¸ ìƒì„±ëê±°ë‚˜ ê³„ì‚°ëœ ê°’ì€ orElse()ë¥¼ ì‚¬ìš©í•´ë„ ë¬´ë°©</span></span><br></pre></td></tr></table></figure><p>ì°¸ê³ ë¡œ <code>Collections.emptyList()</code>ëŠ” í˜¸ì¶œë  ë•Œë§ˆë‹¤ ë¹„ì–´ìˆëŠ” ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´ë¯¸ ìƒì„±ëœ static ë³€ìˆ˜ì¸ <code>EMPTY_LIST</code>ë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ <code>orElse(Collections.emptyList())</code>ë¥¼ ì¨ë„ ê´œì°®ë‹¤. í•˜ì§€ë§Œ, ì´ëŸ° ìš©ë²•ì€ ë§ì´ ì‚¬ìš©ë˜ë©´ <code>orElse(new ...)</code>ë‚˜ <code>orElse(ì—°ì‚°ì„ìœ ë°œí•˜ëŠ”ë©”ì„œë“œ())</code> ê°™ì€ ì•ˆí‹° íŒ¨í„´ë§ˆì € ì •ìƒì ì¸ ì‚¬ìš©ë²•ìœ¼ë¡œ ì¸ì‹ë˜ê²Œ í•˜ëŠ” ì¢‹ì§€ ì•Šì€ ì°©ì‹œ íš¨ê³¼ê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ <strong><code>orElseGet(Collections::emptyList)</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì¢‹ë‹¤.</strong></p><h2 id="3-ë‹¨ì§€-ê°’ì„-ì–»ì„-ëª©ì ì´ë¼ë©´-Optional-ëŒ€ì‹ -null-ë¹„êµ"><a href="#3-ë‹¨ì§€-ê°’ì„-ì–»ì„-ëª©ì ì´ë¼ë©´-Optional-ëŒ€ì‹ -null-ë¹„êµ" class="headerlink" title="3. ë‹¨ì§€ ê°’ì„ ì–»ì„ ëª©ì ì´ë¼ë©´ Optional ëŒ€ì‹  null ë¹„êµ"></a>3. ë‹¨ì§€ ê°’ì„ ì–»ì„ ëª©ì ì´ë¼ë©´ <code>Optional</code> ëŒ€ì‹  <code>null</code> ë¹„êµ</h2><blockquote><p><strong><code>Optional</code>ì€ ë¹„ì‹¸ë‹¤. ë”°ë¼ì„œ ë‹¨ìˆœíˆ ê°’ ë˜ëŠ” <code>null</code>ì„ ì–»ì„ ëª©ì ì´ë¼ë©´ <code>Optional</code> ëŒ€ì‹  <code>null</code> ë¹„êµë¥¼ ì“°ì.</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì•ˆ ì¢‹ìŒ</span></span><br><span class="line"><span class="keyword">return</span> Optional.ofNullable(status).orElse(READY);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line"><span class="keyword">return</span> status != <span class="keyword">null</span> ? status : READY;</span><br></pre></td></tr></table></figure><h2 id="4-Optional-ëŒ€ì‹ -ë¹„ì–´ìˆëŠ”-ì»¬ë ‰ì…˜-ë°˜í™˜"><a href="#4-Optional-ëŒ€ì‹ -ë¹„ì–´ìˆëŠ”-ì»¬ë ‰ì…˜-ë°˜í™˜" class="headerlink" title="4. Optional ëŒ€ì‹  ë¹„ì–´ìˆëŠ” ì»¬ë ‰ì…˜ ë°˜í™˜"></a>4. <code>Optional</code> ëŒ€ì‹  ë¹„ì–´ìˆëŠ” ì»¬ë ‰ì…˜ ë°˜í™˜</h2><blockquote><p><strong><code>Optional</code>ì€ ë¹„ì‹¸ë‹¤. ê·¸ë¦¬ê³  ì»¬ë ‰ì…˜ì€ <code>null</code>ì´ ì•„ë‹ˆë¼ ë¹„ì–´ìˆëŠ” ì»¬ë ‰ì…˜ì„ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ë•Œê°€ ë§ë‹¤. ë”°ë¼ì„œ ì»¬ë ‰ì…˜ì€ <code>Optional</code>ë¡œ ê°ì‹¸ì„œ ë°˜í™˜í•˜ì§€ ë§ê³  ë¹„ì–´ìˆëŠ” ì»¬ë ‰ì…˜ì„ ë°˜í™˜í•˜ì.</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì•ˆ ì¢‹ìŒ</span></span><br><span class="line">List&lt;Member&gt; members = team.getMembers();</span><br><span class="line"><span class="keyword">return</span> Optional.ofNullable(members);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line">List&lt;Member&gt; members = team.getMembers();</span><br><span class="line"><span class="keyword">return</span> members != <span class="keyword">null</span> ? members : Collections.emptyList();</span><br></pre></td></tr></table></figure><p>ë§ˆì°¬ê°€ì§€ ì´ìœ ë¡œ Spring Data JPA Repository ë©”ì„œë“œ ì„ ì–¸ ì‹œ ë‹¤ìŒê³¼ ê°™ì´ ì»¬ë ‰ì…˜ì„ <code>Optional</code>ë¡œ ê°ì‹¸ì„œ ë°˜í™˜í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šë‹¤. <strong>ì»¬ë ‰ì…˜ì„ ë°˜í™˜í•˜ëŠ” Spring Data JPA Repository ë©”ì„œë“œëŠ” <code>null</code>ì„ ë°˜í™˜í•˜ì§€ ì•Šê³  ë¹„ì–´ìˆëŠ” ì»¬ë ‰ì…˜ì„ ë°˜í™˜í•´ì£¼ë¯€ë¡œ <code>Optional</code>ë¡œ ê°ì‹¸ì„œ ë°˜í™˜í•  í•„ìš”ê°€ ì—†ë‹¤.</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì•ˆ ì¢‹ìŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MemberRepository</span>&lt;<span class="title">Member</span>, <span class="title">Long</span>&gt; <span class="keyword">extends</span> <span class="title">JpaRepository</span> </span>&#123;</span><br><span class="line">    Optional&lt;List&lt;Member&gt;&gt; findAllByNameContaining(String part);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MemberRepository</span>&lt;<span class="title">Member</span>, <span class="title">Long</span>&gt; <span class="keyword">extends</span> <span class="title">JpaRepository</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;Member&gt; <span class="title">findAllByNameContaining</span><span class="params">(String part)</span></span>;  <span class="comment">// nullì´ ë°˜í™˜ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ Optional ë¶ˆí•„ìš”</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-Optionalì„-í•„ë“œë¡œ-ì‚¬ìš©-ê¸ˆì§€"><a href="#5-Optionalì„-í•„ë“œë¡œ-ì‚¬ìš©-ê¸ˆì§€" class="headerlink" title="5. Optionalì„ í•„ë“œë¡œ ì‚¬ìš© ê¸ˆì§€"></a>5. <code>Optional</code>ì„ í•„ë“œë¡œ ì‚¬ìš© ê¸ˆì§€</h2><blockquote><p><strong><code>Optional</code>ì€ í•„ë“œì— ì‚¬ìš©í•  ëª©ì ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ì§€ ì•Šì•˜ìœ¼ë©°, <code>Serializable</code>ì„ êµ¬í˜„í•˜ì§€ ì•Šì•˜ë‹¤. ë”°ë¼ì„œ <code>Optional</code>ì€ í•„ë“œë¡œ ì‚¬ìš©í•˜ì§€ ë§ì.</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì•ˆ ì¢‹ìŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Optional&lt;String&gt; email = Optional.empty();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-Optionalì„-ìƒì„±ìë‚˜-ë©”ì„œë“œ-ì¸ìë¡œ-ì‚¬ìš©-ê¸ˆì§€"><a href="#6-Optionalì„-ìƒì„±ìë‚˜-ë©”ì„œë“œ-ì¸ìë¡œ-ì‚¬ìš©-ê¸ˆì§€" class="headerlink" title="6. Optionalì„ ìƒì„±ìë‚˜ ë©”ì„œë“œ ì¸ìë¡œ ì‚¬ìš© ê¸ˆì§€"></a>6. <code>Optional</code>ì„ ìƒì„±ìë‚˜ ë©”ì„œë“œ ì¸ìë¡œ ì‚¬ìš© ê¸ˆì§€</h2><blockquote><p><strong><code>Optional</code>ì„ ìƒì„±ìë‚˜ ë©”ì„œë“œ ì¸ìë¡œ ì‚¬ìš©í•˜ë©´, í˜¸ì¶œí•  ë•Œë§ˆë‹¤ <code>Optional</code>ì„ ìƒì„±í•´ì„œ ì¸ìë¡œ ì „ë‹¬í•´ì¤˜ì•¼ í•œë‹¤. í•˜ì§€ë§Œ í˜¸ì¶œë˜ëŠ” ìª½, ì¦‰ apië‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë©”ì„œë“œì—ì„œëŠ” ì¸ìê°€ <code>Optional</code>ì´ë“  ì•„ë‹ˆë“  <code>null</code> ì²´í¬ë¥¼ í•˜ëŠ” ê²ƒì´ ì–¸ì œë‚˜ ì•ˆì „í•˜ë‹¤. ë”°ë¼ì„œ êµ³ì´ ë¹„ì‹¼ <code>Optional</code>ì„ ì¸ìë¡œ ì‚¬ìš©í•˜ì§€ ë§ê³  í˜¸ì¶œë˜ëŠ” ìª½ì— <code>null</code> ì²´í¬ ì±…ì„ì„ ë‚¨ê²¨ë‘ëŠ” ê²ƒì´ ì¢‹ë‹¤.</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì•ˆ ì¢‹ìŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HRManager</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">increaseSalary</span><span class="params">(Optional&lt;Member&gt; member)</span> </span>&#123;</span><br><span class="line">        member.ifPresent(member -&gt; member.increaseSalary(<span class="number">10</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">hrManager.increaseSalary(Optional.ofNullable(member));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HRManager</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">increaseSalary</span><span class="params">(Member member)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (member != <span class="keyword">null</span>) &#123;</span><br><span class="line">            member.increaseSalary(<span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">hrManager.increaseSalary(member);</span><br></pre></td></tr></table></figure><h2 id="7-Optionalì„-ì»¬ë ‰ì…˜ì˜-ì›ì†Œë¡œ-ì‚¬ìš©-ê¸ˆì§€"><a href="#7-Optionalì„-ì»¬ë ‰ì…˜ì˜-ì›ì†Œë¡œ-ì‚¬ìš©-ê¸ˆì§€" class="headerlink" title="7. Optionalì„ ì»¬ë ‰ì…˜ì˜ ì›ì†Œë¡œ ì‚¬ìš© ê¸ˆì§€"></a>7. <code>Optional</code>ì„ ì»¬ë ‰ì…˜ì˜ ì›ì†Œë¡œ ì‚¬ìš© ê¸ˆì§€</h2><blockquote><p><strong>ì»¬ë ‰ì…˜ì—ëŠ” ë§ì€ ì›ì†Œê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ë¹„ì‹¼ <code>Optional</code>ì„ ì›ì†Œë¡œ ì‚¬ìš©í•˜ì§€ ë§ê³  ì›ì†Œë¥¼ êº¼ë‚¼ ë•Œë‚˜ ì‚¬ìš©í•  ë•Œ <code>null</code> ì²´í¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. íŠ¹íˆ Mapì€ <code>getOrDefault()</code>, <code>putIfAbsent()</code>, <code>computeIfAbsent()</code>, <code>computeIfPresent()</code> ì²˜ëŸ¼ <code>null</code> ì²´í¬ê°€ í¬í•¨ëœ ë©”ì„œë“œë¥¼ ì œê³µí•˜ë¯€ë¡œ, Mapì˜ ì›ì†Œë¡œ <code>Optional</code>ì„ ì‚¬ìš©í•˜ì§€ ë§ê³  Mapì´ ì œê³µí•˜ëŠ” ë©”ì„œë“œë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì•ˆ ì¢‹ìŒ</span></span><br><span class="line">Map&lt;String, Optional&lt;String&gt;&gt; sports = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">sports.put(<span class="string">"100"</span>, Optional.of(<span class="string">"BasketBall"</span>));</span><br><span class="line">sports.put(<span class="string">"101"</span>, Optional.ofNullable(someOtherSports));</span><br><span class="line">String basketBall = sports.get(<span class="string">"100"</span>).orElse(<span class="string">"BasketBall"</span>);</span><br><span class="line">String unknown = sports.get(<span class="string">"101"</span>).orElse(<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line">Map&lt;String, String&gt; sports = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">sports.put(<span class="string">"100"</span>, <span class="string">"BasketBall"</span>);</span><br><span class="line">sports.put(<span class="string">"101"</span>, <span class="keyword">null</span>);</span><br><span class="line">String basketBall = sports.getOrDefault(<span class="string">"100"</span>, <span class="string">"BasketBall"</span>);</span><br><span class="line">String unknown = sports.computeIfAbsent(<span class="string">"101"</span>, k -&gt; <span class="string">""</span>);</span><br></pre></td></tr></table></figure><h2 id="8-of-ofNullable-í˜¼ë™-ì£¼ì˜"><a href="#8-of-ofNullable-í˜¼ë™-ì£¼ì˜" class="headerlink" title="8. of(), ofNullable() í˜¼ë™ ì£¼ì˜"></a>8. <code>of()</code>, <code>ofNullable()</code> í˜¼ë™ ì£¼ì˜</h2><blockquote><p><strong><code>of(X)</code>ì€ <code>X</code>ê°€ <code>null</code>ì´ ì•„ë‹˜ì´ í™•ì‹¤í•  ë•Œë§Œ ì‚¬ìš©í•´ì•¼ í•˜ë©°, <code>X</code>ê°€ <code>null</code>ì´ë©´ NullPointerException ì´ ë°œìƒí•œë‹¤.</strong><br><strong><code>ofNullable(X)</code>ì€ <code>X</code>ê°€ <code>null</code>ì¼ ìˆ˜ë„ ìˆì„ ë•Œë§Œ ì‚¬ìš©í•´ì•¼ í•˜ë©°, <code>X</code>ê°€ <code>null</code>ì´ ì•„ë‹˜ì´ í™•ì‹¤í•˜ë©´ <code>of(X)</code>ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì•ˆ ì¢‹ìŒ</span></span><br><span class="line"><span class="keyword">return</span> Optional.of(member.getEmail());  <span class="comment">// memberì˜ emailì´ nullì´ë©´ NPE ë°œìƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line"><span class="keyword">return</span> Optional.ofNullable(member.getEmail());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ì•ˆ ì¢‹ìŒ</span></span><br><span class="line"><span class="keyword">return</span> Optional.ofNullable(<span class="string">"READY"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line"><span class="keyword">return</span> Optional.of(<span class="string">"READY"</span>);</span><br></pre></td></tr></table></figure><h2 id="9-Optional-lt-T-gt-ëŒ€ì‹ -OptionalInt-OptionalLong-OptionalDouble"><a href="#9-Optional-lt-T-gt-ëŒ€ì‹ -OptionalInt-OptionalLong-OptionalDouble" class="headerlink" title="9. Optional&lt;T&gt; ëŒ€ì‹  OptionalInt, OptionalLong, OptionalDouble"></a>9. <code>Optional&lt;T&gt;</code> ëŒ€ì‹  <code>OptionalInt</code>, <code>OptionalLong</code>, <code>OptionalDouble</code></h2><blockquote><p><strong><code>Optional</code>ì— ë‹´ê¸¸ ê°’ì´ <code>int</code>, <code>long</code>, <code>double</code>ì´ë¼ë©´ Boxing/Unboxingì´ ë°œìƒí•˜ëŠ” <code>Optional&lt;Integer&gt;</code>, <code>Optional&lt;Long&gt;</code>, <code>Optional&lt;Double&gt;</code>ì„ ì‚¬ìš©í•˜ì§€ ë§ê³ , <code>OptionalInt</code>, <code>OptionalLong</code>, <code>OptionalDouble</code>ì„ ì‚¬ìš©í•˜ì.</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì•ˆ ì¢‹ìŒ</span></span><br><span class="line">Optional&lt;Integer&gt; count = Optional.of(<span class="number">38</span>);  <span class="comment">// boxing ë°œìƒ</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; count.get() ; i++) &#123; ... &#125;  <span class="comment">// unboxing ë°œìƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¢‹ìŒ</span></span><br><span class="line">OptionalInt count = OptionalInt.of(<span class="number">38</span>);  <span class="comment">// boxing ë°œìƒ ì•ˆ í•¨</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; count.getAsInt() ; i++) &#123; ... &#125;  <span class="comment">// unboxing ë°œìƒ ì•ˆ í•¨</span></span><br></pre></td></tr></table></figure><h1 id="ì •ë¦¬"><a href="#ì •ë¦¬" class="headerlink" title="ì •ë¦¬"></a>ì •ë¦¬</h1><blockquote><ol><li><p><code>isPresent()-get()</code> ëŒ€ì‹  <code>orElse()/orElseGet()/orElseThrow()</code></p></li><li><p><code>orElse(new ...)</code> ëŒ€ì‹  <code>orElseGet(() -&gt; new ...)</code></p></li><li><p>ë‹¨ì§€ ê°’ì„ ì–»ì„ ëª©ì ì´ë¼ë©´ <code>Optional</code> ëŒ€ì‹  <code>null</code> ë¹„êµ</p></li><li><p><code>Optional</code> ëŒ€ì‹  ë¹„ì–´ìˆëŠ” ì»¬ë ‰ì…˜ ë°˜í™˜</p></li><li><p><code>Optional</code>ì„ í•„ë“œë¡œ ì‚¬ìš© ê¸ˆì§€</p></li><li><p><code>Optional</code>ì„ ìƒì„±ìë‚˜ ë©”ì„œë“œ ì¸ìë¡œ ì‚¬ìš© ê¸ˆì§€</p></li><li><p><code>Optional</code>ì„ ì»¬ë ‰ì…˜ì˜ ì›ì†Œë¡œ ì‚¬ìš© ê¸ˆì§€</p></li><li><p><code>of()</code>, <code>ofNullable()</code> í˜¼ë™ ì£¼ì˜</p></li><li><p><code>Optional&lt;T&gt;</code> ëŒ€ì‹  <code>OptionalInt</code>, <code>OptionalLong</code>, <code>OptionalDouble</code></p></li></ol></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java-Optional-ë°”ë¥´ê²Œ-ì“°ê¸°&quot;&gt;&lt;a href=&quot;#Java-Optional-ë°”ë¥´ê²Œ-ì“°ê¸°&quot; class=&quot;headerlink&quot; title=&quot;Java Optional ë°”ë¥´ê²Œ ì“°ê¸°&quot;&gt;&lt;/a&gt;Java Optional ë°”ë¥´ê²Œ ì“°ê¸°&lt;/h1&gt;&lt;
      
    
    </summary>
    
      <category term="Technique" scheme="http://homoefficio.github.io/categories/Technique/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="Java8" scheme="http://homoefficio.github.io/tags/Java8/"/>
    
      <category term="Optional" scheme="http://homoefficio.github.io/tags/Optional/"/>
    
      <category term="isPresent" scheme="http://homoefficio.github.io/tags/isPresent/"/>
    
      <category term="ifPresent" scheme="http://homoefficio.github.io/tags/ifPresent/"/>
    
      <category term="orElse" scheme="http://homoefficio.github.io/tags/orElse/"/>
    
      <category term="orElseGet" scheme="http://homoefficio.github.io/tags/orElseGet/"/>
    
      <category term="orElseThrow" scheme="http://homoefficio.github.io/tags/orElseThrow/"/>
    
      <category term="OptionalInt" scheme="http://homoefficio.github.io/tags/OptionalInt/"/>
    
      <category term="OptionalLong" scheme="http://homoefficio.github.io/tags/OptionalLong/"/>
    
      <category term="OptionalDouble" scheme="http://homoefficio.github.io/tags/OptionalDouble/"/>
    
  </entry>
  
  <entry>
    <title>Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì•„í‚¤í…ì²˜ ê°œì„  - 3</title>
    <link href="http://homoefficio.github.io/2019/09/29/Quartz-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%9F%AC-%EC%A0%81%EC%9A%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B0%9C%EC%84%A0-3/"/>
    <id>http://homoefficio.github.io/2019/09/29/Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -3/</id>
    <published>2019-09-29T13:59:33.000Z</published>
    <updated>2019-09-29T14:49:23.929Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -3"><a href="#Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -3" class="headerlink" title="Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì•„í‚¤í…ì²˜ ê°œì„  - 3"></a>Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì•„í‚¤í…ì²˜ ê°œì„  - 3</h1><p><a href="https://homoefficio.github.io/2019/09/28/Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -1/">1í¸</a>ì—ì„œëŠ” Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì‹œ ë³€ê²½ ì£¼ê¸°ê°€ ë‹¤ë¥¸ ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆê³¼ ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì„ ë¶„ë¦¬í•´ì„œ í´ë¦° ì•„í‚¤í…ì²˜ì— ë‹¤ê°€ê°€ëŠ” ë°©ë²•ì„ ì•Œì•„ë´¤ë‹¤.</p><p><a href="https://homoefficio.github.io/2019/09/29/Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -2/">2í¸</a>ì—ì„œëŠ” Quartz ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì— ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë´¤ë‹¤.</p><p>ì´ë ‡ê²Œ ë‘ ê°œì˜ ê³ ê°œë¥¼ ì„±ê³µì ìœ¼ë¡œ ë„˜ì—ˆê³  ë§ˆì§€ë§‰ìœ¼ë¡œ <code>@Tranactional</code> ê³ ê°œê°€ ë‚¨ì•˜ë‹¤.</p><p>ë¨¼ì € ì¼ë°˜ì ì¸ ìƒí™©, ì¦‰ ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì¸ ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆì—ì„œ <code>@Transactional</code>ì„ ì‚¬ìš©í•˜ëŠ” ê°„ë‹¨í•œ ì½”ë“œë¥¼ ì¶”ê°€í•´ì„œ <code>@Transactional</code>ì˜ ë™ì‘ì„ í™•ì¸í•˜ê³ , ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì—ì„œ <code>@Tranactional</code>ì„ ì‚¬ìš©í•´ë³´ì.</p><h1 id="ìŠ¤ì¼€ì¤„ëŸ¬-ëª¨ë“ˆì—ì„œì˜-Transactional-ë™ì‘-í™•ì¸"><a href="#ìŠ¤ì¼€ì¤„ëŸ¬-ëª¨ë“ˆì—ì„œì˜-Transactional-ë™ì‘-í™•ì¸" class="headerlink" title="ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆì—ì„œì˜ @Transactional ë™ì‘ í™•ì¸"></a>ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆì—ì„œì˜ <code>@Transactional</code> ë™ì‘ í™•ì¸</h1><p><code>@Transactional</code> ë™ì‘ì„ í™•ì¸í•˜ê¸° ìœ„í•´ ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆì— <code>Member</code> ì—”í‹°í‹°ì™€ JPA ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì¶”ê°€í•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="title">Member</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Member</span><span class="params">(String name, String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MemberRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Member</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>HelloService</code>ì— <code>@Transactional</code>ì„ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë¥¼ ì¶”ê°€í•œë‹¤. ì €ì¥ í›„ ì¼ë¶€ëŸ¬ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œì¼œì„œ ë¡¤ë°±ë˜ê²Œ í•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MemberRepository memberRepository;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"OOO &#123;&#125;.sayHello() executed"</span>, <span class="keyword">this</span>.getClass().getSimpleName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Member <span class="title">saveMember</span><span class="params">(Member member)</span> </span>&#123;</span><br><span class="line">        Member dbMember = memberRepository.save(member);</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1</span>==<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ê°•ì œë¡œ ë°œìƒì‹œí‚¨ ì˜ˆì™¸"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dbMember;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>InitRunner</code>ì— ë‹¤ìŒê³¼ ê°™ì´ <code>HelloService.saveMember()</code>ë¥¼ í˜¸ì¶œí•˜ê³  ì˜ˆì™¸ë¥¼ ì¡ì•„ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InitRunner</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Scheduler scheduler;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RemoteJobClassLoader remoteJobClassLoader;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HelloService helloService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        log.info(<span class="string">"Init Runner executed."</span>);</span><br><span class="line">        JobKey jobKey = JobKey.jobKey(<span class="string">"jobkey1"</span>, <span class="string">"jobgroup1"</span>);</span><br><span class="line">        JobDetail jobDetail = buildJobDetail(jobKey);</span><br><span class="line">        Trigger trigger = buildJobTrigger(jobKey);</span><br><span class="line">        scheduler.scheduleJob(jobDetail, trigger);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Member dbMember = helloService.saveMember(</span><br><span class="line">                <span class="keyword">new</span> Member(<span class="string">"Homo Efficio"</span>, <span class="string">"homo.efficio@gmail.com"</span>));</span><br><span class="line">            log.info(<span class="string">"TTT íšŒì› [&#123;&#125;] ì¶”ê°€ë¨"</span>, dbMember);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">"TTT íšŒì› ì¶”ê°€ ì¤‘ ì˜ˆì™¸ ë°œìƒ. ë©”ì‹œì§€: &#123;&#125;"</span>,e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ì´í•˜ ìƒëµ..</span></span><br></pre></td></tr></table></figure><p>ì‹¤í–‰í•˜ê³  h2 web consoleë¡œ í™•ì¸í•´ë³´ë©´ ë¡¤ë°±ë˜ì–´ ë ˆì½”ë“œê°€ ì¶”ê°€ë˜ì§€ ì•Šì•˜ìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/ulrRfis.png" alt="Imgur"></p><p><code>HelloService.saveMember()</code>ì—ì„œ <code>@Transactional</code>ì„ ì œê±°í•˜ë©´ ë¡¤ë°±ì´ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë”ë¼ë„ ë ˆì½”ë“œê°€ ì¶”ê°€ëœ ì±„ë¡œ ë‚¨ëŠ”ë‹¤.</p><p><img src="https://i.imgur.com/J2aMQsK.png" alt="Imgur"></p><p>ì´ì œ ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì—ì„œë„ <code>@Transactional</code>ì´ ì ìš©ë˜ëŠ”ì§€ ì•Œì•„ë³´ì.</p><h1 id="ì‘ì—…-í´ë˜ìŠ¤-ëª¨ë“ˆì—ì„œì˜-Transactional-ë™ì‘-í™•ì¸"><a href="#ì‘ì—…-í´ë˜ìŠ¤-ëª¨ë“ˆì—ì„œì˜-Transactional-ë™ì‘-í™•ì¸" class="headerlink" title="ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì—ì„œì˜ @Transactional ë™ì‘ í™•ì¸"></a>ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì—ì„œì˜ <code>@Transactional</code> ë™ì‘ í™•ì¸</h1><p>ê°„ë‹¨í•œ í™•ì¸ì„ ìœ„í•´ <code>RemoteSimpleJob</code> í´ë˜ìŠ¤ì—ì„œ ì§ì ‘ <code>MemberRepository</code>ë¥¼ í†µí•´ <code>Member</code>ë¥¼ ì €ì¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì.</p><p>ë¨¼ì € JPA ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ <code>build.gradle</code>ì— ë‹¤ìŒê³¼ ê°™ì´ spring-data-jpa-starterë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile project(<span class="string">':quartz-scheduler'</span>)</span><br><span class="line"></span><br><span class="line">    compileOnly <span class="string">'org.projectlombok:lombok:1.18.8'</span></span><br><span class="line">    annotationProcessor <span class="string">'org.projectlombok:lombok:1.18.8'</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'org.quartz-scheduler'</span>, <span class="string">name:</span> <span class="string">'quartz'</span>, <span class="string">version:</span> <span class="string">'2.3.1'</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'org.springframework'</span>, <span class="string">name:</span> <span class="string">'spring-context-support'</span>, <span class="string">version:</span> <span class="string">'5.1.9.RELEASE'</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'org.springframework.data'</span>, <span class="string">name:</span> <span class="string">'spring-data-jpa'</span>, <span class="string">version:</span> <span class="string">'2.1.10.RELEASE'</span>  <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line"></span><br><span class="line">    testCompile <span class="string">group:</span> <span class="string">'junit'</span>, <span class="string">name:</span> <span class="string">'junit'</span>, <span class="string">version:</span> <span class="string">'4.12'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="RemoteSimpleJobì—ì„œ-MemberRepositoryë¥¼-í†µí•œ-Member-ì €ì¥"><a href="#RemoteSimpleJobì—ì„œ-MemberRepositoryë¥¼-í†µí•œ-Member-ì €ì¥" class="headerlink" title="RemoteSimpleJobì—ì„œ MemberRepositoryë¥¼ í†µí•œ Member ì €ì¥"></a>RemoteSimpleJobì—ì„œ MemberRepositoryë¥¼ í†µí•œ Member ì €ì¥</h2><p><code>RemoteSimpleJob</code>ì— <code>MemberRepository</code>ë¥¼ ì£¼ì…í•˜ê³  <code>Member</code>ë¥¼ ì €ì¥í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•œë‹¤. ì•„ì§ <code>@Transactional</code>ì€ ì¶”ê°€í•˜ì§€ ì•Šì€ ìƒíƒœë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RemoteSimpleJob</span> <span class="keyword">implements</span> <span class="title">Job</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HelloService helloService;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MemberRepository memberRepository;  <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(JobExecutionContext context)</span> <span class="keyword">throws</span> JobExecutionException </span>&#123;</span><br><span class="line">        log.info(<span class="string">"OOO REMOTE JOB [&#123;&#125;] executed."</span>, <span class="keyword">this</span>.getClass().getSimpleName());</span><br><span class="line">        JobDataMap mergedJobDataMap = context.getMergedJobDataMap();</span><br><span class="line">        mergedJobDataMap.forEach((k, v) -&gt; log.info(<span class="string">"OOOOO &#123;&#125;: &#123;&#125;"</span>, k, v));</span><br><span class="line"></span><br><span class="line">        helloService.sayHello();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Member dbMember = memberRepository.save(<span class="keyword">new</span> Member(<span class="string">"Homo Efficio"</span>, <span class="string">"homo.efficio@gmail.com"</span>));</span><br><span class="line">            log.info(<span class="string">"TTT íšŒì› [&#123;&#125;] ì¶”ê°€ë¨"</span>, dbMember);</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">1</span>==<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ê°•ì œë¡œ ë°œìƒì‹œí‚¨ ì˜ˆì™¸"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">"TTT íšŒì› ì¶”ê°€ ì¤‘ ì˜ˆì™¸ ë°œìƒ. ë©”ì‹œì§€: &#123;&#125;"</span>,e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆì˜ <code>InitRunner</code>ì—ì„œ <code>HelloService.saveMember()</code> ë¶€ë¶„ì„ ë‹¤ìŒê³¼ ê°™ì´ ì£¼ì„ì²˜ë¦¬ í•œë‹¤. ì´ìœ ëŠ” <code>Member</code> ì €ì¥ì„ <code>RemoteSimpleJob</code> ë‚´ì—ì„œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        log.info(<span class="string">"Init Runner executed."</span>);</span><br><span class="line">        JobKey jobKey = JobKey.jobKey(<span class="string">"jobkey1"</span>, <span class="string">"jobgroup1"</span>);</span><br><span class="line">        JobDetail jobDetail = buildJobDetail(jobKey);</span><br><span class="line">        Trigger trigger = buildJobTrigger(jobKey);</span><br><span class="line">        scheduler.scheduleJob(jobDetail, trigger);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Member member = new Member("Homo Efficio", "homo.efficio@gmail.com");</span></span><br><span class="line">        <span class="comment">// try &#123;</span></span><br><span class="line">        <span class="comment">//     Member dbMember = helloService.saveMember(member);</span></span><br><span class="line">        <span class="comment">//     log.info("TTT íšŒì› [&#123;&#125;] ì¶”ê°€ë¨", dbMember);</span></span><br><span class="line">        <span class="comment">// &#125; catch (Exception e) &#123;</span></span><br><span class="line">        <span class="comment">//     log.error("TTT íšŒì› ì¶”ê°€ ì¤‘ ì˜ˆì™¸ ë°œìƒ. ë©”ì‹œì§€: &#123;&#125;",e.getMessage());</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ì‹¤í–‰í•´ë³´ë©´ ë¡¤ë°±ì´ ì ìš©ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì €ì¥ í›„ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë”ë¼ë„ ë ˆì½”ë“œê°€ ì¶”ê°€ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/KOmhtvz.png" alt="Imgur"></p><p><img src="https://i.imgur.com/7cVLJTD.png" alt="Imgur"></p><h2 id="RemoteSimpleJobì—ì„œ-Transactional-ì‚¬ìš©"><a href="#RemoteSimpleJobì—ì„œ-Transactional-ì‚¬ìš©" class="headerlink" title="RemoteSimpleJobì—ì„œ @Transactional ì‚¬ìš©"></a>RemoteSimpleJobì—ì„œ @Transactional ì‚¬ìš©</h2><p>ì´ì œ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì—… í´ë˜ìŠ¤ì˜ <code>execute()</code> ë©”ì„œë“œì— <code>@Transactional</code>ì„ ë¶™ì—¬ì„œ ì‹¤í–‰í•´ë³´ì.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span>  <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(JobExecutionContext context)</span> <span class="keyword">throws</span> JobExecutionException </span>&#123;</span><br><span class="line">    log.info(<span class="string">"OOO REMOTE JOB [&#123;&#125;] executed."</span>, <span class="keyword">this</span>.getClass().getSimpleName());</span><br><span class="line">    JobDataMap mergedJobDataMap = context.getMergedJobDataMap();</span><br><span class="line">    mergedJobDataMap.forEach((k, v) -&gt; log.info(<span class="string">"OOOOO &#123;&#125;: &#123;&#125;"</span>, k, v));</span><br><span class="line"></span><br><span class="line">    helloService.sayHello();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Member dbMember = memberRepository.save(<span class="keyword">new</span> Member(<span class="string">"Homo Efficio"</span>, <span class="string">"homo.efficio@gmail.com"</span>));</span><br><span class="line">        log.info(<span class="string">"TTT íšŒì› [&#123;&#125;] ì¶”ê°€ë¨"</span>, dbMember);</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1</span>==<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ê°•ì œë¡œ ë°œìƒì‹œí‚¨ ì˜ˆì™¸"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        log.error(<span class="string">"TTT íšŒì› ì¶”ê°€ ì¤‘ ì˜ˆì™¸ ë°œìƒ. ë©”ì‹œì§€: &#123;&#125;"</span>,e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì´ë²ˆì—ëŠ” ì•ˆíƒ€ê¹ê²Œë„ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ë¥¼ ë§Œë‚˜ê²Œ ëœë‹¤. ì§€ë©´ì„ ë§ì´ ì°¨ì§€í•˜ë‹ˆ <a href="https://gist.github.com/HomoEfficio/b2c9e030b785827b5eba75a1e719387d" target="_blank" rel="noopener">ì§€ìŠ¤íŠ¸(Gist) ë§í¬</a>ë¡œ ëŒ€ì‹ í•˜ê³ , ì£¼ìš” ë¶€ë¶„ë§Œ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">org.quartz.SchedulerException: Job instantiation failed</span><br><span class="line"></span><br><span class="line">Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;io.homo_efficio.quartz.job.RemoteSimpleJob&apos;: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class io.homo_efficio.quartz.job.RemoteSimpleJob: Common causes of this problem include using a final class or a non-visible class; nested exception is org.springframework.cglib.core.CodeGenerationException: java.lang.NoClassDefFoundError--&gt;io/homo_efficio/quartz/job/RemoteSimpleJob</span><br><span class="line"></span><br><span class="line">Caused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class io.homo_efficio.quartz.job.RemoteSimpleJob: Common causes of this problem include using a final class or a non-visible class; nested exception is org.springframework.cglib.core.CodeGenerationException: java.lang.NoClassDefFoundError--&gt;io/homo_efficio/quartz/job/RemoteSimpleJob</span><br><span class="line"></span><br><span class="line">Caused by: org.springframework.cglib.core.CodeGenerationException: java.lang.NoClassDefFoundError--&gt;io/homo_efficio/quartz/job/RemoteSimpleJob</span><br><span class="line"></span><br><span class="line">Caused by: java.lang.NoClassDefFoundError: io/homo_efficio/quartz/job/RemoteSimpleJob</span><br><span class="line"></span><br><span class="line">Caused by: java.lang.ClassNotFoundException: io.homo_efficio.quartz.job.RemoteSimpleJob</span><br></pre></td></tr></table></figure><p>ê¸´ ë‚´ìš©ì´ì§€ë§Œ ìš”ì•½í•˜ë©´ <code>@Transactional</code> ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ì„œ <code>RemoteSimpleJob</code>ì˜ í”„ë¡ì‹œ ê°ì²´ë¥¼ CGLib ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ì„œ ìƒì„±í•´ì•¼ í•˜ëŠ”ë°, ì´ë•Œ <code>RemoteSimpleJob</code> í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì–˜ê¸°ë‹¤.</p><p><code>@Transactional</code>ì´ ì—†ì„ ë•ŒëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ë§Œë“¤ í•„ìš”ê°€ ì—†ìœ¼ë¯€ë¡œ <code>RemoteSimpleJob</code>ì€ ìš°ë¦¬ê°€ ë§Œë“  ì»¤ìŠ¤í…€ í´ë˜ìŠ¤ë¡œë”ë¥¼ í†µí•´ ì •ìƒì ìœ¼ë¡œ ë¡œë”©ë˜ì–´ ì‹¤í–‰ëœë‹¤. í•˜ì§€ë§Œ <strong><code>@Transactional</code>ì´ ë¶™ì–´ì„œ CGLibì„ í†µí•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ë•ŒëŠ” ìš°ë¦¬ê°€ ë§Œë“  ì»¤ìŠ¤í…€ í´ë˜ìŠ¤ë¡œë”ê°€ ì‚¬ìš©ë˜ì§€ ëª»í•˜ë¯€ë¡œ <code>RemoteSimpleJob</code>ì„ ì°¾ì§€ ëª»í•˜ê³  ìœ„ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.</strong> ê·¸ë¦¼ìœ¼ë¡œ ë³´ë©´ ëŒ€ëµ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><p><img src="https://i.imgur.com/e7GF1s6.png" alt="Imgur"></p><p>ê·¸ëŸ¼ CGLibì´ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤ë¡œë”ê°€ <code>RemoteSimpleJob</code>ì„ ë¡œë”©í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ë©´ ì´ ë¬¸ì œë„ í•´ê²°ë  ê²ƒ ê°™ë‹¤. CGLibëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ë™ í™˜ê²½ì—ì„œ ì •í•´ì§„ í´ë˜ìŠ¤ë¡œë”ë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ëŒ€ëµ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li>Standalone Tomcat í™˜ê²½ì´ë©´ <code>WebAppClassLoader</code></li><li>ìŠ¤í”„ë§ë¶€íŠ¸ì— ë‚´ì¥ëœ Embedded Tomcat í™˜ê²½ì´ë©´ <code>LaunchedURLClassLoader</code></li><li>ìŠ¤í”„ë§ devtoolsë¥¼ ì‚¬ìš©í•˜ëŠ” ë¡œì»¬ í™˜ê²½ì´ë©´ <code>RestartClassLoader</code></li></ul><p>Standalone Tomcat í™˜ê²½ì´ë¼ë©´ <code>context.xml</code> íŒŒì¼ì— <code>&lt;Loader&gt;</code> ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ í†µí•´ ì»¤ìŠ¤í…€ í´ë˜ìŠ¤ë¡œë”ë¥¼ ì§€ì •í•  ìˆ˜ ìˆê³ , ìŠ¤í”„ë§ë¶€íŠ¸ í™˜ê²½ì´ë¼ë©´ <code>PropertiesLauncher</code> í´ë˜ìŠ¤ì™€ <code>loader.path</code> ì†ì„±ìœ¼ë¡œ í´ë˜ìŠ¤ë¡œë”ë¥¼ ì§€ì •í•  ìˆ˜ ìˆê³ , ê°€ì¥ ë²”ìš©ì ìœ¼ë¡œëŠ” manifest íŒŒì¼ì— <code>Class-Path</code>ë¡œ ë¡œë”©í•  í´ë˜ìŠ¤ê°€ í¬í•¨ëœ í´ë˜ìŠ¤íŒ¨ìŠ¤ë¥¼ ì§€ì •í•´ì£¼ë©´ ëœë‹¤.</p><p>ì´ë¡ ì ìœ¼ë¡œëŠ” ê·¸ëŸ°ë° ì‹¤ì œë¡œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ë™ í™˜ê²½ ìì²´ë„ ë¡œì»¬ ê°œë°œ í™˜ê²½, ì„œë²„ í™˜ê²½ ëª¨ë‘ ë‹¤ë¥´ê³ , ê·¸ì— ë”°ë¼ ìŠ¤í”„ë§ ë‚´ë¶€ì—ì„œ êµ¬ë™ë˜ëŠ” CGLibì´ <code>RemoteSimpleJob</code>ì„ ë¡œë”©í•  ìˆ˜ ìˆê²Œ í•˜ë ¤ë©´ ìŠ¤í”„ë§ ë‚´ë¶€ì— ëŒ€í•œ ì‹¬ë„ìˆëŠ” ì§€ì‹ì´ í•„ìš”í•˜ë‹¤. ê·¸ê±¸ë¡œ ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë¼ <code>RemoteSimpleJob</code>ì´ ì°¸ì¡°í•˜ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤, ê·¸ í´ë˜ìŠ¤ê°€ ì°¸ì¡°í•˜ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤, ê·¸ í´ë˜ìŠ¤ê°€ ì°¸ì¡°í•˜ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤â€¦ ë¥¼ ëª¨ë‘ ë¡œë”©í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.</p><p>ì´ê²ƒì €ê²ƒ ì‹œë„í•´ë³´ë‹¤ê°€ CGLibì´ <code>RemoteSimpleJob</code>ì— ëŒ€í•œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ê²Œ ë§Œë“œëŠ” ë° ê°„ì‹ íˆ ì„±ê³µí–ˆë‹¤. TRACE ë¡œê·¸ë¡œ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. (ì´ê±´ ì˜ˆì „ì— í–ˆë˜ ë‚´ìš©ì´ë¼ í´ë˜ìŠ¤ ì´ë¦„ ë“±ì€ í˜„ì¬ ì˜ˆì œì™€ ì¢€ ë‹¤ë¥´ë‹¤ ;;)</p><p><img src="https://i.imgur.com/Vm9NDZf.png" alt="Imgur"></p><p>ê·¸ëŸ°ë° ë¡œê·¸ë¥¼ ìì„¸íˆ ë³´ë©´ <code>&#39;o.s.aop.framework.CglibAopProxy : Unable to apply any optimizations to advised method: [[[@Transactional_ë¶™ì–´ìˆëŠ”_ë©”ì„œë“œ]]]&#39;</code> ëŒ€ëµ ì´ëŸ° ë‚´ìš©ì´ ì°íˆê³ , ì‹¤ì œë¡œë„ íŠ¸ëœì­ì…˜ ë¡¤ë°±ì´ ë™ì‘í•˜ì§€ ì•Šì•˜ë‹¤.</p><p>ë” ê²°ì •ì ì¸ ë¬¸ì œë„ ìˆëŠ”ë° ì´ë ‡ê²Œ <strong>ìŠ¤í”„ë§ì´ ì œê³µí•´ì£¼ëŠ” í”„ë¡ì‹œ ìƒì„± ë¡œì§ì„ í†µí•´ í”„ë¡ì‹œë¡œ ë“±ë¡ë˜ë©´ í•´ë‹¹ í”„ë¡ì‹œëŠ” ìºì‹œëœë‹¤ëŠ” ì ì´ë‹¤. ê·¸ë˜ì„œ ë‚˜ì¤‘ì— <code>RemoteSimpleJob</code>ì˜ ë‚´ìš©ì„ ë°”ê¿”ì„œ ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì˜ jar ë¥¼ ìƒˆë¡œ ìƒì„±í•œ í›„ì— <code>RemoteSimpleJob</code>ì„ ë‹¤ì‹œ ìˆ˜í–‰í•´ë„ ìƒˆ í”„ë¡ì‹œê°€ ìƒì„±ë˜ì§€ ì•Šê³  ê¸°ì¡´ ë‚´ìš©ì„ ê¸°ì¤€ìœ¼ë¡œ ìƒì„±ë˜ì–´ ìºì‹œëœ í”„ë¡ì‹œê°€ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.</strong> ì´ëŸ¬ë©´ ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì„ ë¶„ë¦¬í•œ ì˜ë„ê°€ í‡´ìƒ‰ë˜ì–´ ë²„ë¦¬ëŠ” ê²°ê³¼ê°€ ëœë‹¤.</p><p>ì´ëŸ° ëª¨ë“  ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ í•  ìˆ˜ë„ ìˆê² ì§€ë§Œ ë‚˜ëŠ” ì´ ì •ë„ì—ì„œ ë©ˆì¶”ê¸°ë¡œ í•œë‹¤. ì™œëƒí•˜ë©´ <strong>ìŠ¤í”„ë§ì—ì„œëŠ” <code>@Transactional</code>ì´ ì•„ë‹ˆë¼ë„ <code>PlatformTransactionManager</code>ë¥¼ ì‚¬ìš©í•´ì„œ íŠ¸ëœì­ì…˜ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</strong></p><h2 id="PlatformTransactionManager-ì‚¬ìš©"><a href="#PlatformTransactionManager-ì‚¬ìš©" class="headerlink" title="PlatformTransactionManager ì‚¬ìš©"></a>PlatformTransactionManager ì‚¬ìš©</h2><p>ë‹¤ìŒê³¼ ê°™ì´ <code>@Transactional</code>ì„ ì œê±°í•˜ê³  <code>PlatformTransactionManager</code>ë¥¼ ì‚¬ìš©í•˜ë„ë¡ <code>RemoteSimpleJob</code>ì„ ê°œì„ í•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RemoteSimpleJob</span> <span class="keyword">implements</span> <span class="title">Job</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HelloService helloService;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MemberRepository memberRepository;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> PlatformTransactionManager transactionManager;  <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(JobExecutionContext context)</span> <span class="keyword">throws</span> JobExecutionException </span>&#123;</span><br><span class="line">        log.info(<span class="string">"OOO REMOTE JOB [&#123;&#125;] executed."</span>, <span class="keyword">this</span>.getClass().getSimpleName());</span><br><span class="line">        JobDataMap mergedJobDataMap = context.getMergedJobDataMap();</span><br><span class="line">        mergedJobDataMap.forEach((k, v) -&gt; log.info(<span class="string">"OOOOO &#123;&#125;: &#123;&#125;"</span>, k, v));</span><br><span class="line"></span><br><span class="line">        helloService.sayHello();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line">        TransactionStatus status = transactionManager.getTransaction(<span class="keyword">new</span> DefaultTransactionDefinition());</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Member dbMember = memberRepository.save(<span class="keyword">new</span> Member(<span class="string">"Homo Efficio"</span>, <span class="string">"homo.efficio@gmail.com"</span>));</span><br><span class="line">            log.info(<span class="string">"TTT íšŒì› [&#123;&#125;] ì¶”ê°€ë¨"</span>, dbMember);</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">1</span>==<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ê°•ì œë¡œ ë°œìƒì‹œí‚¨ ì˜ˆì™¸"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            transactionManager.commit(status);  <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">"TTT íšŒì› ì¶”ê°€ ì¤‘ ì˜ˆì™¸ ë°œìƒ. ë©”ì‹œì§€: &#123;&#125;"</span>,e.getMessage());</span><br><span class="line">            transactionManager.rollback(status);  <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì‹¤í–‰í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ <code>TTT íšŒì› [{}] ì¶”ê°€ë¨</code> ë¡œê·¸ëŠ” ì°íˆì§€ë§Œ ê·¸ ì´í›„ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.</p><p><img src="https://i.imgur.com/l0xcJB8.png" alt="Imgur"></p><p>ì´ì œ ë ˆì½”ë“œê°€ ìƒì„±ë˜ì§€ ì•Šì€ ê²ƒì„ h2 web consoleì—ì„œ í™•ì¸í•˜ë©´ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ë¬¸ì œë„ í•´ê²°ëœë‹¤!</p><p><img src="https://i.imgur.com/JDciNBU.png" alt="Imgur"></p><p>ì˜¤ì˜¤~ ì˜ˆìƒëŒ€ë¡œ ë ˆì½”ë“œê°€ ìƒì„±ë˜ì§€ ì•Šì•˜ë‹¤. ì„±ê³µ!</p><p>ì„¸ ë²ˆì§¸ ê³ ê°œì¸ <code>@Transactional</code>ì€ ë„˜ì§€ëŠ” ëª» í–ˆì§€ë§Œ, ëŒì•„ê°€ëŠ” ê¸¸ì„ ì°¾ì•„ëƒˆë‹¤.</p><h1 id="ì •ë¦¬"><a href="#ì •ë¦¬" class="headerlink" title="ì •ë¦¬"></a>ì •ë¦¬</h1><blockquote><ul><li><p>ìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë¶„ë¦¬ë˜ì–´ ë‚˜ê°„ ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì—ì„œëŠ” <code>@Transactional</code>ì„ ì¼ë°˜ì ì¸ ê²½ìš°ì²˜ëŸ¼ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.</p></li><li><p>ì´ìœ ëŠ” <code>@Transactional</code> ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ì„œ <code>RemoteSimpleJob</code>ì˜ í”„ë¡ì‹œ ê°ì²´ë¥¼ CGLib ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ì„œ ìƒì„±í•´ì•¼ í•˜ëŠ”ë°, ì´ë•Œ <code>RemoteSimpleJob</code> í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.</p></li><li><p>ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì—ì„œ <code>@Transactional</code>ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ì§€ë§Œ <code>PlatformTransactionManager</code>ë¥¼ ì´ìš©í•˜ë©´ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.</p></li></ul></blockquote><h1 id="ì‹œë¦¬ì¦ˆ-ë§ˆë¬´ë¦¬"><a href="#ì‹œë¦¬ì¦ˆ-ë§ˆë¬´ë¦¬" class="headerlink" title="ì‹œë¦¬ì¦ˆ ë§ˆë¬´ë¦¬"></a>ì‹œë¦¬ì¦ˆ ë§ˆë¬´ë¦¬</h1><p>ì´ 3í¸ì— ê±¸ì³ Quartz ì ìš© ì•„í‚¤í…ì²˜ë¥¼ ê°œì„ í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë´¤ë‹¤.</p><p>ì´ë¥¼ í†µí•´ <strong>ë³€ê²½ ì£¼ê¸°ê°€ ë‹¤ë¥¸ ìŠ¤ì¼€ì¤„ëŸ¬ì™€ ì‘ì—… í´ë˜ìŠ¤ë¥¼ ë³„ë„ì˜ ëª¨ë“ˆë¡œ ë¶„ë¦¬í•˜ê³ , ë¶„ë¦¬ëœ ëª¨ë“ˆì— ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í•´ì„œ íŠ¸ëœì­ì…˜ê¹Œì§€ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í´ë¦° Quartz ì•„í‚¤í…ì²˜ë¥¼ ì ìš©í•  ìˆ˜ ìˆê²Œ ëë‹¤.</strong></p><h2 id="1í¸-ëª¨ë“ˆ-ë¶„ë¦¬"><a href="#1í¸-ëª¨ë“ˆ-ë¶„ë¦¬" class="headerlink" title="1í¸ ëª¨ë“ˆ ë¶„ë¦¬"></a>1í¸ ëª¨ë“ˆ ë¶„ë¦¬</h2><p><a href="https://homoefficio.github.io/2019/09/28/Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -1/">1í¸</a>ì˜ í‚¤ì›Œë“œëŠ” <strong>ëª¨ë“ˆ ë¶„ë¦¬ì™€  <code>URLClassLoader</code></strong></p><p><img src="https://i.imgur.com/5RHsMzy.png" alt="Imgur"></p><h2 id="2í¸-ì˜ì¡´-ê´€ê³„-ì£¼ì…"><a href="#2í¸-ì˜ì¡´-ê´€ê³„-ì£¼ì…" class="headerlink" title="2í¸ ì˜ì¡´ ê´€ê³„ ì£¼ì…"></a>2í¸ ì˜ì¡´ ê´€ê³„ ì£¼ì…</h2><p><a href="https://homoefficio.github.io/2019/09/29/Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -2/">2í¸</a>ì˜ í‚¤ì›Œë“œëŠ” <strong>ì˜ì¡´ ê´€ê³„ ì£¼ì…ê³¼ <code>SpringBeanJobFactory</code></strong></p><p><img src="https://i.imgur.com/mT6CfNb.png" alt="Imgur"></p><h2 id="3í¸-íŠ¸ëœì­ì…˜-ì²˜ë¦¬"><a href="#3í¸-íŠ¸ëœì­ì…˜-ì²˜ë¦¬" class="headerlink" title="3í¸ íŠ¸ëœì­ì…˜ ì²˜ë¦¬"></a>3í¸ íŠ¸ëœì­ì…˜ ì²˜ë¦¬</h2><p><a href="https://homoefficio.github.io/2019/09/29/Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -3/">3í¸</a>ì˜ í‚¤ì›Œë“œëŠ” <strong>íŠ¸ëœì­ì…˜ ì²˜ë¦¬ì™€ <code>PlatformTransactionManager</code></strong></p><p><img src="https://i.imgur.com/dbHHXDv.png" alt="Imgur"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -3&quot;&gt;&lt;a href=&quot;#Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -3&quot; class=&quot;headerlink&quot; title=&quot;Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì•„í‚¤í…ì²˜ ê°œì„  - 3&quot;&gt;&lt;/a&gt;Quartz ìŠ¤ì¼€ì¤„ëŸ¬ 
      
    
    </summary>
    
      <category term="Technique" scheme="http://homoefficio.github.io/categories/Technique/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="ìë°”" scheme="http://homoefficio.github.io/tags/%EC%9E%90%EB%B0%94/"/>
    
      <category term="Quartz" scheme="http://homoefficio.github.io/tags/Quartz/"/>
    
      <category term="Scheduler" scheme="http://homoefficio.github.io/tags/Scheduler/"/>
    
      <category term="Clean Architecture" scheme="http://homoefficio.github.io/tags/Clean-Architecture/"/>
    
      <category term="Interface Segregation Principle" scheme="http://homoefficio.github.io/tags/Interface-Segregation-Principle/"/>
    
      <category term="Dependency Inversion Principle" scheme="http://homoefficio.github.io/tags/Dependency-Inversion-Principle/"/>
    
      <category term="Dependency Injection" scheme="http://homoefficio.github.io/tags/Dependency-Injection/"/>
    
      <category term="SpringBeanJobFactory" scheme="http://homoefficio.github.io/tags/SpringBeanJobFactory/"/>
    
      <category term="ApplicationContext" scheme="http://homoefficio.github.io/tags/ApplicationContext/"/>
    
      <category term="ApplicationContextAware" scheme="http://homoefficio.github.io/tags/ApplicationContextAware/"/>
    
      <category term="AdaptableJobFactory" scheme="http://homoefficio.github.io/tags/AdaptableJobFactory/"/>
    
      <category term="AutowireCapableBeanFactory" scheme="http://homoefficio.github.io/tags/AutowireCapableBeanFactory/"/>
    
      <category term="SchedulerFactoryBean" scheme="http://homoefficio.github.io/tags/SchedulerFactoryBean/"/>
    
      <category term="Isolation" scheme="http://homoefficio.github.io/tags/Isolation/"/>
    
      <category term="ì¿¼ì¸ " scheme="http://homoefficio.github.io/tags/%EC%BF%BC%EC%B8%A0/"/>
    
      <category term="ìŠ¤ì¼€ì¤„ëŸ¬" scheme="http://homoefficio.github.io/tags/%EC%8A%A4%EC%BC%80%EC%A4%84%EB%9F%AC/"/>
    
      <category term="í´ë¦° ì•„í‚¤í…ì²˜" scheme="http://homoefficio.github.io/tags/%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98/"/>
    
      <category term="ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™" scheme="http://homoefficio.github.io/tags/%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EB%B6%84%EB%A6%AC-%EC%9B%90%EC%B9%99/"/>
    
      <category term="ì˜ì¡´ ê´€ê³„ ì—­ì „ ì›ì¹™" scheme="http://homoefficio.github.io/tags/%EC%9D%98%EC%A1%B4-%EA%B4%80%EA%B3%84-%EC%97%AD%EC%A0%84-%EC%9B%90%EC%B9%99/"/>
    
      <category term="ì˜ì¡´ ê´€ê³„ ì£¼ì…" scheme="http://homoefficio.github.io/tags/%EC%9D%98%EC%A1%B4-%EA%B4%80%EA%B3%84-%EC%A3%BC%EC%9E%85/"/>
    
      <category term="ê²©ë¦¬" scheme="http://homoefficio.github.io/tags/%EA%B2%A9%EB%A6%AC/"/>
    
      <category term="Transaction" scheme="http://homoefficio.github.io/tags/Transaction/"/>
    
      <category term="Transactional" scheme="http://homoefficio.github.io/tags/Transactional/"/>
    
      <category term="CGLib" scheme="http://homoefficio.github.io/tags/CGLib/"/>
    
      <category term="Proxy" scheme="http://homoefficio.github.io/tags/Proxy/"/>
    
      <category term="PlatformTransactionManager" scheme="http://homoefficio.github.io/tags/PlatformTransactionManager/"/>
    
      <category term="íŠ¸ëœì­ì…˜" scheme="http://homoefficio.github.io/tags/%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98/"/>
    
      <category term="í”„ë¡ì‹œ" scheme="http://homoefficio.github.io/tags/%ED%94%84%EB%A1%9D%EC%8B%9C/"/>
    
  </entry>
  
  <entry>
    <title>Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì•„í‚¤í…ì²˜ ê°œì„  - 2</title>
    <link href="http://homoefficio.github.io/2019/09/29/Quartz-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%9F%AC-%EC%A0%81%EC%9A%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B0%9C%EC%84%A0-2/"/>
    <id>http://homoefficio.github.io/2019/09/29/Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -2/</id>
    <published>2019-09-29T03:49:40.000Z</published>
    <updated>2019-10-03T15:05:05.700Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -2"><a href="#Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -2" class="headerlink" title="Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì•„í‚¤í…ì²˜ ê°œì„  - 2"></a>Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì•„í‚¤í…ì²˜ ê°œì„  - 2</h1><p><a href="https://homoefficio.github.io/2019/09/28/Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -1/">1í¸</a>ì—ì„œëŠ” Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì‹œ ë³€ê²½ ì£¼ê¸°ê°€ ë‹¤ë¥¸ ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆê³¼ ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì„ ë¶„ë¦¬í•´ì„œ í´ë¦° ì•„í‚¤í…ì²˜ì— ë‹¤ê°€ê°€ëŠ” ë°©ë²•ì„ ì•Œì•„ë´¤ë‹¤.</p><p>ë¶„ë¦¬ëœ ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì€ DB ì‘ì—…ì„ í•  ìˆ˜ë„ ìˆê³ , í•˜ë‘¡ ì¸í”„ë¼ ê´€ë ¨ ì‘ì—…ì„ í•  ìˆ˜ë„ ìˆê³ , ì•Œë¦¼ ë©”ì¼ë„ ë³´ë‚´ì•¼í•˜ëŠ” ë“± ì—¬ëŸ¬ ì‘ì—…ì„ í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ê·¸ëŸ°ë° ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì€ ë§ ê·¸ëŒ€ë¡œ ì‘ì—… í´ë˜ìŠ¤ë§Œ ëª¨ì•„ ë†“ì€ jar ë¼ì´ë¸ŒëŸ¬ë¦¬ì¼ ë¿ì´ë¼ì„œ JDBC ë“œë¼ì´ë²„ë‚˜ SMTP ë©”ì¼ ì„œë²„ ì„¤ì • ë“±ì„ í¬í•¨í•˜ê³  ìˆì§€ ì•Šìœ¼ë©°, ì´ëŸ° ê²ƒë“¤ì„ ìŠ¤ìŠ¤ë¡œ ê°€ì§€ê³  ìˆëŠ” ê²ƒ ìì²´ë„ Single Responsibility Principle ê´€ì ì—ì„œ ë³´ë©´ ì ì ˆí•˜ì§€ ì•Šë‹¤.</p><p>ê·¸ë˜ì„œ ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì„ ë™ì ìœ¼ë¡œ ë¡œë”©í•˜ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆì´ ì‘ì—… í´ë˜ìŠ¤ê°€ í•„ìš”ë¡œ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì£¼ì…í•´ì£¼ëŠ” êµ¬ì¡°ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤ë©´ ê°€ì¥ ì¢‹ë‹¤. ì¦‰, ë‹¤ìŒê³¼ ê°™ì´ <code>@Autowire</code>ë¥¼ í†µí•´ ì‘ì—… í´ë˜ìŠ¤ì— í•„ìš”í•œ ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í•´ ì¤„ ìˆ˜ ìˆë‹¤ë©´ ë”± ì¢‹ë‹¤. </p><p><img src="https://i.imgur.com/mT6CfNb.png" alt="Imgur"></p><p>ê·¸ëŸ°ë° ë³´í†µ <code>@Autowire</code>ëŠ” ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ êµ¬ë™ë˜ë©´ì„œ beanì„ ìƒì„±í•˜ê³  ê°ì²´ í˜‘ë ¥ë§ì„ êµ¬ì„±í•  ë•Œ ì‘ë™í•œë‹¤. ì§€ê¸ˆì²˜ëŸ¼ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ í¬í•¨í•œ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì™„ì „íˆ êµ¬ë™ëœ í›„ì— ë™ì ìœ¼ë¡œ ì‘ì—… í´ë˜ìŠ¤ë¥¼ ë¡œë”©í•  ë•Œë„ <code>@Autowire</code>ë¥¼ í†µí•´ ì˜ì¡´ ê´€ê³„ ì£¼ì…í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í• ê¹Œ?</p><h1 id="SpringBeanJobFactory"><a href="#SpringBeanJobFactory" class="headerlink" title="SpringBeanJobFactory"></a>SpringBeanJobFactory</h1><p>ê²°ë¡ ë¶€í„° ë§í•˜ë©´ <strong>ìŠ¤í”„ë§ë¶€íŠ¸ê°€ ì œê³µí•˜ëŠ” <code>SpringBeanJobFactory</code>ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ë™ ì™„ë£Œ í›„ì— ë™ì ìœ¼ë¡œ ì¶”ê°€í•˜ëŠ” beanì—ë„ ì˜ì¡´ ê´€ê³„ë¥¼ ì‰½ê²Œ ì£¼ì…í•  ìˆ˜ ìˆë‹¤.</strong></p><p>ì˜ˆì œì—ì„œëŠ” í¸ì˜ìƒ ìŠ¤ì¼€ì¤„ë§ ì§í›„ ì‘ì—…ì´ ìˆ˜í–‰ë˜ë„ë¡ ì‘ì„±í–ˆì§€ë§Œ, ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‘ì—…ì„ ìŠ¤ì¼€ì¤„í•˜ëŠ” ì‹œì ê³¼ ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ” ì‹œì ì´ ë‹¤ë¥´ë‹¤. Quartz ìŠ¤ì¼€ì¤„ëŸ¬ë„ ë§ˆì°¬ê°€ì§€ë©° ìŠ¤ì¼€ì¤„í•˜ëŠ” ì‹œì ì—ë„ ì‘ì—… í´ë˜ìŠ¤ë¥¼ ë¡œë”©í•˜ì§€ë§Œ ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ” ì‹œì ì—ë„ í´ë˜ìŠ¤ë¥¼ ë¡œë”©í•œë‹¤. ê·¸ë¦¬ê³  ì‘ì—…ì„ ì‹¤í–‰í•˜ë ¤ë©´ ì‘ì—… í´ë˜ìŠ¤ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™” í•´ì•¼ í•˜ëŠ”ë°, ì´ ë•Œ <code>JobFactory</code>ê°€ ì‚¬ìš©ëœë‹¤. <a href="https://www.quartz-scheduler.org/api/2.3.1-SNAPSHOT/index.html" target="_blank" rel="noopener">ë¬¸ì„œ</a>ì—ë„ ë‚˜ì™€ìˆëŠ” ê²ƒì²˜ëŸ¼ <strong><code>JobFactory</code>ë¥¼ ì˜ì¡´ ê´€ê³„ ì£¼ì… í†µë¡œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</strong></p><p>ìŠ¤í”„ë§ì€ ê½¤ ì˜¤ë˜ ì „ë¶€í„° Quartzë¥¼ ì§€ì›í•´ì˜¤ê³  ìˆìœ¼ë©°, ìŠ¤í”„ë§ë¶€íŠ¸ì—ë„ quartz starterê°€ ìˆê³  ê·¸ ì•ˆì— <code>JobFactory</code>ë¥¼ êµ¬í˜„í•œ <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/quartz/SpringBeanJobFactory.html" target="_blank" rel="noopener"><code>SpringBeanJobFactory</code></a>ê°€ ìˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ë¡œê·¸ë¥¼ ì‚´í´ë³´ë©´ <code>SpringBeanJobFactory</code>ê°€ ì‚¬ìš©ë˜ê³  ìˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/6cElvr0.png" alt="Imgur"></p><p>ë”°ë¼ì„œ <strong>ìŠ¤í”„ë§ë¶€íŠ¸ë¥¼ í†µí•´ quartzë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´, <code>SpringBeanJobFactory</code> ë•ë¶„ì— ì‘ì—… í´ë˜ìŠ¤ë„ ì¼ë°˜ì ì¸ ìŠ¤í”„ë§ beanê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ê°„ë‹¨í•˜ê²Œ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì´ ê°€ëŠ¥í•˜ë‹¤.</strong> ì´ì œ ê´€ë ¨ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ì„œ ì•Œì•„ë³´ì.</p><h2 id="ì£¼ì…í• -ì»´í¬ë„ŒíŠ¸-ìƒì„±"><a href="#ì£¼ì…í• -ì»´í¬ë„ŒíŠ¸-ìƒì„±" class="headerlink" title="ì£¼ì…í•  ì»´í¬ë„ŒíŠ¸ ìƒì„±"></a>ì£¼ì…í•  ì»´í¬ë„ŒíŠ¸ ìƒì„±</h2><p>ë¨¼ì € ì£¼ì…í•  ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì. ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆ ìª½ì— ë‹¤ìŒê³¼ ê°™ì´ ë‹¨ìˆœí•œ <code>HelloService</code>ë¥¼ ì¶”ê°€í•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"OOO &#123;&#125;.sayHello() executed"</span>, <span class="keyword">this</span>.getClass().getSimpleName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ëª¨ë“ˆ-ì˜ì¡´-ê´€ê³„-ì¶”ê°€"><a href="#ëª¨ë“ˆ-ì˜ì¡´-ê´€ê³„-ì¶”ê°€" class="headerlink" title="ëª¨ë“ˆ ì˜ì¡´ ê´€ê³„ ì¶”ê°€"></a>ëª¨ë“ˆ ì˜ì¡´ ê´€ê³„ ì¶”ê°€</h2><p>ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì— ìˆëŠ” <code>RemoteSimpleJob</code>ê°€ ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆì— ìˆëŠ” <code>HelloService</code>ë¥¼ ì£¼ì… ë°›ìœ¼ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œ ìƒìœ¼ë¡œ <code>HelloService</code>ê°€ ëª…ì‹œë¼ì•¼ í•˜ëŠ”ë°, ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì—ì„œëŠ” <code>HelloService</code>ë¥¼ ì¸ì‹í•  ìˆ˜ ì—†ìœ¼ë©°, ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</p><p>ë”°ë¼ì„œ ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì˜ <code>build.gradle</code> íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì´ ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆ(quartz-scheduler)ì— ëŒ€í•œ ì˜ì¡´ ê´€ê³„ë¥¼ ì¶”ê°€í•œë‹¤.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile project(<span class="string">':quartz-scheduler'</span>)  <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line"></span><br><span class="line">    compileOnly <span class="string">'org.projectlombok:lombok:1.18.8'</span></span><br><span class="line">    annotationProcessor <span class="string">'org.projectlombok:lombok:1.18.8'</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'org.quartz-scheduler'</span>, <span class="string">name:</span> <span class="string">'quartz'</span>, <span class="string">version:</span> <span class="string">'2.3.1'</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'org.springframework'</span>, <span class="string">name:</span> <span class="string">'spring-context-support'</span>, <span class="string">version:</span> <span class="string">'5.1.9.RELEASE'</span></span><br><span class="line"></span><br><span class="line">    testCompile <span class="string">group:</span> <span class="string">'junit'</span>, <span class="string">name:</span> <span class="string">'junit'</span>, <span class="string">version:</span> <span class="string">'4.12'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ì‘ì—…-í´ë˜ìŠ¤ì—-ì˜ì¡´-ê´€ê³„-ì¶”ê°€"><a href="#ì‘ì—…-í´ë˜ìŠ¤ì—-ì˜ì¡´-ê´€ê³„-ì¶”ê°€" class="headerlink" title="ì‘ì—… í´ë˜ìŠ¤ì— ì˜ì¡´ ê´€ê³„ ì¶”ê°€"></a>ì‘ì—… í´ë˜ìŠ¤ì— ì˜ì¡´ ê´€ê³„ ì¶”ê°€</h2><p>ë‹¤ìŒê³¼ ê°™ì´ ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆì— ìˆëŠ” <code>HelloService</code>ë¥¼ ì£¼ì… ë°›ì•„ì„œ ì‚¬ìš©í•˜ëŠ” ì½”ë“œë¥¼ <code>RemoteSimpleJob</code>ì— ì¶”ê°€í•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span>  <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RemoteSimpleJob</span> <span class="keyword">implements</span> <span class="title">Job</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> HelloService helloService;  <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(JobExecutionContext context)</span> <span class="keyword">throws</span> JobExecutionException </span>&#123;</span><br><span class="line">        log.info(<span class="string">"OOO REMOTE JOB [&#123;&#125;] executed."</span>, <span class="keyword">this</span>.getClass().getSimpleName());</span><br><span class="line">        JobDataMap mergedJobDataMap = context.getMergedJobDataMap();</span><br><span class="line">        mergedJobDataMap.forEach((k, v) -&gt; log.info(<span class="string">"OOOOO &#123;&#125;: &#123;&#125;"</span>, k, v));</span><br><span class="line"></span><br><span class="line">        helloService.sayHello();  <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì— ì¶”ê°€í•´ë‘” <code>deployJar</code>ë¥¼ ì‹¤í–‰í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ <code>RemoteSimpleJob</code>ì´ <code>HelloService</code>ë¥¼ ì£¼ì… ë°›ì•„ì„œ ì‚¬ìš©í•¨ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/wBqMrZP.png" alt="Imgur"></p><p>ì ì´ì œ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì´ë¼ëŠ” ë‘ ë²ˆì§¸ ê³ ê°œë¥¼ ë„˜ì—ˆë‹¤. ê·¸ë˜ì„œ DB ì‘ì—…ë„ í•  ìˆ˜ ìˆê²Œ ëë‹¤. ê·¸ëŸ°ë° DB ì‘ì—…ì„ í•  ë•ŒëŠ” íŠ¸ëœì­ì…˜ ì²˜ë¦¬ë¥¼ í•´ì¤˜ì•¼ í•œë‹¤. ìŠ¤í”„ë§ì—ì„œëŠ” <code>@Transactional</code>ì„ í†µí•´ ì•„ì£¼ ì‰½ê²Œ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤. ì‘ì—… í´ë˜ìŠ¤ì—ì„œë„ <code>@Transactional</code>ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œ? ë§ˆì§€ë§‰ ì„¸ ë²ˆì§¸ ê³ ê°œëŠ” <code>@Transactional</code>ì´ë‹¤. <a href="https://homoefficio.github.io/2019/09/29/Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -3/">3í¸</a>ì—ì„œ<br>ë‹¤ë£¬ë‹¤.</p><h1 id="ì •ë¦¬"><a href="#ì •ë¦¬" class="headerlink" title="ì •ë¦¬"></a>ì •ë¦¬</h1><blockquote><ul><li><p>Quartz ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì´ ì‹¤ë¬´ì—ì„œ ë°œìƒí•˜ëŠ” ë‹¤ì–‘í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë ¤ë©´ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ì£¼ì… ë°›ì•„ì•¼ í•œë‹¤.</p></li><li><p>ìŠ¤í”„ë§ë¶€íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” <code>SpringBeanJobFactory</code> ë•ë¶„ì— Quartz ì‘ì—… í´ë˜ìŠ¤ì—ì„œë„ ì¼ë°˜ì ì¸ beanê³¼ ë§ˆì°¬ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì… ë°›ì„ ìˆ˜ ìˆë‹¤.</p></li></ul></blockquote><h1 id="ë²ˆì™¸í¸-ìŠ¤í”„ë§ë¶€íŠ¸ê°€-ì•„ë‹Œ-ê·¸ëƒ¥-ìŠ¤í”„ë§ì¼-ê²½ìš°"><a href="#ë²ˆì™¸í¸-ìŠ¤í”„ë§ë¶€íŠ¸ê°€-ì•„ë‹Œ-ê·¸ëƒ¥-ìŠ¤í”„ë§ì¼-ê²½ìš°" class="headerlink" title="(ë²ˆì™¸í¸) ìŠ¤í”„ë§ë¶€íŠ¸ê°€ ì•„ë‹Œ ê·¸ëƒ¥ ìŠ¤í”„ë§ì¼ ê²½ìš°"></a>(ë²ˆì™¸í¸) ìŠ¤í”„ë§ë¶€íŠ¸ê°€ ì•„ë‹Œ ê·¸ëƒ¥ ìŠ¤í”„ë§ì¼ ê²½ìš°</h1><p>ìŠ¤í”„ë§ë¶€íŠ¸ê°€ ì•„ë‹ˆë¼ ê·¸ëƒ¥ ìŠ¤í”„ë§ì—ì„œ Quartzë¥¼ ì‚¬ìš©í•  ë•Œë„ ì˜ì¡´ ê´€ê³„ ì£¼ì…ì´ ê°€ëŠ¥í•˜ë‹¤.</p><p>Quartzì—ì„œëŠ” <code>JobFactory</code>ë¼ëŠ” ì˜ì¡´ ê´€ê³„ ì£¼ì… í†µë¡œë¥¼ ì œê³µí•˜ê³  ìˆê³ , ìŠ¤í”„ë§ì—ì„œëŠ” <code>JobFactory</code>ì˜ êµ¬í˜„ì²´ì¸ <code>AdaptableJobFactory</code>ë¥¼ ìŠ¤í”„ë§ 2.0ë¶€í„° ì œê³µí•´ì˜¤ê³  ìˆë‹¤. ê·¸ë¦¬ê³  ìŠ¤í”„ë§ì—ëŠ” ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í•˜ë©´ì„œ beanì„ ë§Œë“¤ì–´ ì£¼ëŠ” <code>AutowireCapableBeanFactory</code>ê°€ ìˆë‹¤. ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì»¤ìŠ¤í…€ íŒ©í† ë¦¬ë¥¼ ë§Œë“¤ì–´ì£¼ê³ , ì´ë¥¼ Quartz ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì„¤ì •í•´ì£¼ë©´ ëœë‹¤.</p><h2 id="ì»¤ìŠ¤í…€-ì‘ì—…-íŒ©í† ë¦¬"><a href="#ì»¤ìŠ¤í…€-ì‘ì—…-íŒ©í† ë¦¬" class="headerlink" title="ì»¤ìŠ¤í…€ ì‘ì—… íŒ©í† ë¦¬"></a>ì»¤ìŠ¤í…€ ì‘ì—… íŒ©í† ë¦¬</h2><p>ì»¤ìŠ¤í…€ ì‘ì—… íŒ©í† ë¦¬ì˜ ì—­í• ì€ ì‘ì—… í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ê³¼ ì˜ì¡´ ê´€ê³„ ì£¼ì…í•˜ê¸°, ì´ë ‡ê²Œ ë‘ ê°€ì§€ë‹¤.</p><p>ì‘ì—… í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì€ <code>AdaptableJobFactory</code>ì— ì´ë¯¸ ìˆëŠ” ê¸°ëŠ¥ì´ë‹¤. ì—¬ê¸°ì— ì˜ì¡´ ê´€ê³„ ì£¼ì… ê¸°ëŠ¥ë§Œ ì¶”ê°€í•´ì£¼ë©´ ë˜ë¯€ë¡œ <code>AdaptableJobFactory</code>ë¥¼ ìƒì†ë°›ì•„ì„œ í•´ë‹¹ ë¶€ë¶„ë§Œ ì˜¤ë²„ë¼ì´ë“œ í•˜ë©´ ëœë‹¤.</p><p>ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í•˜ë ¤ë©´ <code>AutowireCapableBeanFactory</code>ê°€ í•„ìš”í•˜ê³ , <code>AutowireCapableBeanFactory</code>ë¥¼ ì–»ìœ¼ë ¤ë©´ <code>ApplicationContext</code>ê°€ í•„ìš”í•˜ë‹¤. ì–´ë–»ê²Œë“  <code>ApplicationContext</code>ë¥¼ ì£¼ì… ë°›ì„ ìˆ˜ ìˆìœ¼ë©´ ê·¸ë§Œì´ì§€ë§Œ ë”± ì´ëŸ° ì—­í• ì„ ì˜ë¯¸í•˜ëŠ” <code>ApplicationContextAware</code>ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ ìˆìœ¼ë‹ˆ êµ¬í˜„í•´ì£¼ì.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuartzJobFactory</span> <span class="keyword">extends</span> <span class="title">AdaptableJobFactory</span> <span class="keyword">implements</span> <span class="title">ApplicationContextAware</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.applicationContext = applicationContext;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">createJobInstance</span><span class="params">(TriggerFiredBundle bundle)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Object jobInstance = <span class="keyword">super</span>.createJobInstance(bundle);</span><br><span class="line">        autowireBean(jobInstance);</span><br><span class="line">        <span class="keyword">return</span> jobInstance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">autowireBean</span><span class="params">(Object jobInstance)</span> </span>&#123;</span><br><span class="line">        AutowireCapableBeanFactory autowireCapableBeanFactory = applicationContext.getAutowireCapableBeanFactory();</span><br><span class="line">        autowireCapableBeanFactory.autowireBean(jobInstance);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ì»¤ìŠ¤í…€-ìŠ¤ì¼€ì¤„ëŸ¬-íŒ©í† ë¦¬-ë°-Configuration-í´ë˜ìŠ¤"><a href="#ì»¤ìŠ¤í…€-ìŠ¤ì¼€ì¤„ëŸ¬-íŒ©í† ë¦¬-ë°-Configuration-í´ë˜ìŠ¤" class="headerlink" title="ì»¤ìŠ¤í…€ ìŠ¤ì¼€ì¤„ëŸ¬ íŒ©í† ë¦¬ ë° @Configuration í´ë˜ìŠ¤"></a>ì»¤ìŠ¤í…€ ìŠ¤ì¼€ì¤„ëŸ¬ íŒ©í† ë¦¬ ë° @Configuration í´ë˜ìŠ¤</h2><p>ìŠ¤í”„ë§ë¶€íŠ¸ëŠ” starterë¥¼ í†µí•´ ìë™ ì„¤ì •í•œ Quartz ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì œê³µí•˜ì§€ë§Œ ìŠ¤í”„ë§ì´ë¼ë©´ ìŠ¤ì¼€ì¤„ëŸ¬ë„ ì§ì ‘ ìƒì„±í•˜ê³  ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤. ê·¸ë¦¬ê³  ì•ì—ì„œ ë§Œë“  ì»¤ìŠ¤í…€ ì‘ì—… íŒ©í† ë¦¬ë¥¼ ì§ì ‘ ìƒì„±í•œ ìŠ¤ì¼€ì¤„ëŸ¬ì— ì„¤ì •í•´ì£¼ë©´ ëœë‹¤.</p><p>ìŠ¤í”„ë§ì—ì„œëŠ” 4.1ë¶€í„° Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ìƒì„± ì‘ì—…ì„ ì‰½ê²Œ í•´ì£¼ëŠ” <code>SchedulerFactoryBean</code>ë„ ì œê³µí•œë‹¤. Quartz 2.1.4 ì´ìƒì´ë©´ í˜¸í™˜ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì»¤ìŠ¤í…€ ìŠ¤ì¼€ì¤„ëŸ¬ íŒ©í† ë¦¬ë¥¼ ë§Œë“¤ì–´ì„œ Autowiring ê¸°ëŠ¥ì´ íƒ‘ì¬ëœ ì»¤ìŠ¤í…€ ì‘ì—… íŒ©í† ë¦¬ë¥¼ ì„¤ì •í•´ì£¼ê³ , Quartz ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ beanìœ¼ë¡œ ë°˜í™˜í•˜ëŠ” ì„¤ì • í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ë©´ ëœë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuartzConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Scheduler <span class="title">scheduler</span><span class="params">(ApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">        SchedulerFactoryBean schedulerFactoryBean = getSchedulerFactoryBean(applicationContext);</span><br><span class="line">        <span class="keyword">return</span> schedulerFactoryBean.getScheduler();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> SchedulerFactoryBean <span class="title">getSchedulerFactoryBean</span><span class="params">(ApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">        QuartzJobFactory quartzJobFactory = <span class="keyword">new</span> QuartzJobFactory();</span><br><span class="line">        quartzJobFactory.setApplicationContext(applicationContext);</span><br><span class="line"></span><br><span class="line">        SchedulerFactoryBean schedulerFactoryBean = <span class="keyword">new</span> SchedulerFactoryBean();</span><br><span class="line">        schedulerFactoryBean.setJobFactory(quartzJobFactory);</span><br><span class="line"><span class="comment">//        schedulerFactoryBean.setXXX(...); // ê¸°íƒ€ ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •ê°’ ì§ì ‘ ì§€ì • í•„ìš”</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> schedulerFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -2&quot;&gt;&lt;a href=&quot;#Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -2&quot; class=&quot;headerlink&quot; title=&quot;Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì•„í‚¤í…ì²˜ ê°œì„  - 2&quot;&gt;&lt;/a&gt;Quartz ìŠ¤ì¼€ì¤„ëŸ¬ 
      
    
    </summary>
    
      <category term="Technique" scheme="http://homoefficio.github.io/categories/Technique/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="ìë°”" scheme="http://homoefficio.github.io/tags/%EC%9E%90%EB%B0%94/"/>
    
      <category term="Quartz" scheme="http://homoefficio.github.io/tags/Quartz/"/>
    
      <category term="Scheduler" scheme="http://homoefficio.github.io/tags/Scheduler/"/>
    
      <category term="Clean Architecture" scheme="http://homoefficio.github.io/tags/Clean-Architecture/"/>
    
      <category term="Interface Segregation Principle" scheme="http://homoefficio.github.io/tags/Interface-Segregation-Principle/"/>
    
      <category term="Dependency Inversion Principle" scheme="http://homoefficio.github.io/tags/Dependency-Inversion-Principle/"/>
    
      <category term="Dependency Injection" scheme="http://homoefficio.github.io/tags/Dependency-Injection/"/>
    
      <category term="SpringBeanJobFactory" scheme="http://homoefficio.github.io/tags/SpringBeanJobFactory/"/>
    
      <category term="ApplicationContext" scheme="http://homoefficio.github.io/tags/ApplicationContext/"/>
    
      <category term="ApplicationContextAware" scheme="http://homoefficio.github.io/tags/ApplicationContextAware/"/>
    
      <category term="AdaptableJobFactory" scheme="http://homoefficio.github.io/tags/AdaptableJobFactory/"/>
    
      <category term="AutowireCapableBeanFactory" scheme="http://homoefficio.github.io/tags/AutowireCapableBeanFactory/"/>
    
      <category term="SchedulerFactoryBean" scheme="http://homoefficio.github.io/tags/SchedulerFactoryBean/"/>
    
      <category term="Isolation" scheme="http://homoefficio.github.io/tags/Isolation/"/>
    
      <category term="ì¿¼ì¸ " scheme="http://homoefficio.github.io/tags/%EC%BF%BC%EC%B8%A0/"/>
    
      <category term="ìŠ¤ì¼€ì¤„ëŸ¬" scheme="http://homoefficio.github.io/tags/%EC%8A%A4%EC%BC%80%EC%A4%84%EB%9F%AC/"/>
    
      <category term="í´ë¦° ì•„í‚¤í…ì²˜" scheme="http://homoefficio.github.io/tags/%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98/"/>
    
      <category term="ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™" scheme="http://homoefficio.github.io/tags/%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EB%B6%84%EB%A6%AC-%EC%9B%90%EC%B9%99/"/>
    
      <category term="ì˜ì¡´ ê´€ê³„ ì—­ì „ ì›ì¹™" scheme="http://homoefficio.github.io/tags/%EC%9D%98%EC%A1%B4-%EA%B4%80%EA%B3%84-%EC%97%AD%EC%A0%84-%EC%9B%90%EC%B9%99/"/>
    
      <category term="ì˜ì¡´ ê´€ê³„ ì£¼ì…" scheme="http://homoefficio.github.io/tags/%EC%9D%98%EC%A1%B4-%EA%B4%80%EA%B3%84-%EC%A3%BC%EC%9E%85/"/>
    
      <category term="ê²©ë¦¬" scheme="http://homoefficio.github.io/tags/%EA%B2%A9%EB%A6%AC/"/>
    
  </entry>
  
  <entry>
    <title>Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì•„í‚¤í…ì²˜ ê°œì„  - 1</title>
    <link href="http://homoefficio.github.io/2019/09/28/Quartz-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%9F%AC-%EC%A0%81%EC%9A%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B0%9C%EC%84%A0-1/"/>
    <id>http://homoefficio.github.io/2019/09/28/Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -1/</id>
    <published>2019-09-28T09:01:09.000Z</published>
    <updated>2019-10-03T13:43:32.300Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -1"><a href="#Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -1" class="headerlink" title="Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì•„í‚¤í…ì²˜ ê°œì„  - 1"></a>Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì•„í‚¤í…ì²˜ ê°œì„  - 1</h1><p>QuartzëŠ” ìŠ¤í”„ë§ì—ì„œë„ ì§€ì›í•˜ê³  ìˆì–´ì„œ ìŠ¤í”„ë§ ê¸°ë°˜ í”„ë¡œì íŠ¸ì—ë„ ì‰½ê²Œ í†µí•©í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë„ë¦¬ ì‚¬ìš©ë˜ê³  ìˆë‹¤. ê²Œë‹¤ê°€ properties íŒŒì¼ ì„¤ì •ë§Œìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•´ì„œ ë¶€í•˜ ë¶„ì‚° ë° fail-overê°€ ê°€ëŠ¥í•œ ê²ƒë„ ì¥ì ì´ë‹¤.</p><p>Quartzì— ë‚˜ì˜¤ëŠ” ì£¼ìš” ë“±ì¥ ì¸ë¬¼ì— ëŒ€í•œ ì„¤ëª…ì´ë‚˜ ê¸°ë³¸ ì‚¬ìš© ë°©ë²•ì€ ê²€ìƒ‰í•´ë³´ë©´ ë§ì´ ë‚˜ì˜¤ë¯€ë¡œ ì—¬ê¸°ì—ì„œëŠ” ìƒëµí•˜ê³  ì‹¤ì œ ì ìš©í•  ë•Œ í•„ìš”í•œ ì•„í‚¤í…ì²˜ ê°œì„ ì—ë§Œ ì´ˆì ì„ ë§ì¶˜ë‹¤. ê´€ë ¨ ì½”ë“œ ì—­ì‹œ ì£¼ìš” ë¶€ë¶„ë§Œ í‘œì‹œí•˜ë©´ì„œ ì§„í–‰í•œë‹¤.</p><p>OpenJDK 9, ê·¸ë ˆì´ë“¤ 5.6.2, ìŠ¤í”„ë§ë¶€íŠ¸ 2.1.8, ìŠ¤í”„ë§ 5.1.9, Quartz 2.3.1 ê¸°ì¤€ì´ë‹¤.</p><h1 id="Quartz-ì‹¤í–‰-íë¦„"><a href="#Quartz-ì‹¤í–‰-íë¦„" class="headerlink" title="Quartz ì‹¤í–‰ íë¦„"></a>Quartz ì‹¤í–‰ íë¦„</h1><p>Quartz ì‹¤í–‰ íë¦„ì€ ë‹¤ìŒ ê·¸ë¦¼ì— ì˜ ì •ë¦¬ë¼ ìˆë‹¤. ê°„ë‹¨í•˜ê²Œ ìš”ì•½í•˜ë©´ <code>Scheduler</code>ê°€ <code>Job</code>ì˜ ì‹¤í–‰ ì •ë³´ë¥¼ í†µí•´ ì •í•´ì§„ ì‹œê°„ì´ë‚˜ ì •í•´ì§„ ì£¼ê¸°ë¡œ <code>Job</code>ì„ ì‹¤í–‰í•œë‹¤.</p><p><img src="https://i.imgur.com/JB5c5mF.jpg" alt="Imgur"></p><p>ê·¸ë¦¼ ì¶œì²˜: <a href="https://examples.javacodegeeks.com/enterprise-java/quartz/java-quartz-architecture-example/" target="_blank" rel="noopener">https://examples.javacodegeeks.com/enterprise-java/quartz/java-quartz-architecture-example/</a></p><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>ê·¸ë¦¼ì—ì„œ ë³´ë“¯ ì‹¤í–‰ íë¦„ ê´€ì ì—ì„œ ë³´ë©´ <code>Scheduler</code>ê°€ <code>Job</code>ì„ ì‚¬ìš©í•˜ë©° <code>Job</code>ì— ì˜ì¡´í•˜ê³  ìˆë‹¤. í•˜ì§€ë§Œ <code>Scheduler</code>ëŠ” ì‚¬ì‹¤ ìƒ Quartz í”„ë ˆì„ì›Œí¬ ê·¸ ìì²´ë¡œì„œ ì•ˆì •ì ì¸ ëª¨ë“ˆì´ê³ , <code>Job</code>ì€ <code>Scheduler</code>ì— ì˜í•´ ì‹¤í–‰ë  ì‹¤ì œ ì‘ì—…ì— ëŒ€í•œ ë¡œì§ì´ í¬í•¨ë¼ ìˆì–´ ë³€ê²½ ë¹ˆë„ê°€ ë” ë†’ê³ , <code>Job</code> ìì²´ê°€ ì¶”ê°€/ì‚­ì œë˜ëŠ” ì¼ë„ ë¹ˆë²ˆí•˜ë¯€ë¡œ ë¶ˆì•ˆì •í•˜ë‹¤. ì•ˆì •ì ì¸ ëª¨ë“ˆì´ ë¶ˆì•ˆì •í•œ ëª¨ë“ˆì— ì˜ì¡´í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šë‹¤. Quartz ê°œë°œìë“¤ì´ ì´ëŸ° ì‚¬ì‹¤ì„ ëª¨ë¥¼ ë¦¬ ì—†ë‹¤.</p><p>ê·¸ë˜ì„œ <code>Job</code>ì€ ì‚¬ì‹¤ ì¸í„°í˜ì´ìŠ¤ë‹¤. ê·¸ë¦¬ê³  <code>Scheduler</code>ì— ì˜í•´ ì‹¤í–‰ë˜ëŠ” ì‹¤ì œ ì‘ì—…ë“¤ì€ <code>Job</code> ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ ë“¤ì´ë‹¤. ì¦‰ Quartz ìì²´ëŠ” <code>Scheduler</code>ì™€ <code>Job</code> êµ¬í˜„ì²´ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆê²Œ ì˜ ì„¤ê³„ë¼ ìˆë‹¤.</p><p>ê·¸ëŸ°ë° ì´ë ‡ê²Œ <strong>ë¶„ë¦¬í•  ìˆ˜ ìˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  <code>Scheduler</code>ì™€ <code>Job</code> ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ë¥¼ ê°™ì€ ëª¨ë“ˆ ì•ˆì— ë‘ë©´ì„œ ë¬¸ì œê°€ ì‹œì‘ëœë‹¤.</strong> ì‘ì—…ì„ ì¶”ê°€í•˜ë ¤ë©´ ìŠ¤ì¼€ì¤„ëŸ¬ê¹Œì§€ ì¬ë°°í¬ë¥¼ í•´ì•¼ ë˜ë©°, ìŠ¤ì¼€ì¤„ëŸ¬ ì¬ë°°í¬ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ì˜ ì¤‘ë‹¨ì„ ì˜ë¯¸í•˜ë¯€ë¡œ ì‹¤í–‰ë˜ëŠ” ì‘ì—…ì´ ì—†ì„ ë•Œë§Œ ê°€ëŠ¥í•˜ë©°, ë§ì€ ì‘ì—…ì´ ìŠ¤ì¼€ì¤„ë§ ë¼ ìˆë‹¤ë©´ ì¬ë°°í¬ íƒ€ì´ë°ì„ ì¡ê¸°ê°€ ì–´ë ¤ì›Œì§„ë‹¤. ë”°ë¼ì„œ ìŠ¤ì¼€ì¤„ëŸ¬ ë³¸ì²´ì¸ <code>Scheduler</code>ì™€ ì‘ì—… í´ë˜ìŠ¤ì¸ <code>Job</code> êµ¬í˜„ì²´ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë¶„ë¦¬í•´ì„œ ë³„ë„ë¡œ ë°°í¬í•  ìˆ˜ ìˆìœ¼ë©´ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/5RHsMzy.png" alt="Imgur"></p><p>í•˜ì§€ë§Œ ì¸í„°ë„·ì—ì„œ ì°¾ì„ ìˆ˜ ìˆëŠ” ëŒ€ë¶€ë¶„ì˜ Quartz ì‚¬ìš©ë²•ì´ë‚˜ ì˜ˆì œëŠ” <code>Scheduler</code>ì™€ <code>Job</code> êµ¬í˜„ì²´ë¥¼ ë™ì¼í•œ ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ì— ì¼ì²´í˜•ìœ¼ë¡œ ë¬¶ì–´ë‘” ì•„í‚¤í…ì²˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•˜ê³  ìˆë‹¤. ì•„ë§ˆë„ Quartzì˜ ì‚¬ìš©ë²• ìì²´ì— ì¤‘ì ì„ ë‘ê¸° ë•Œë¬¸ì´ê² ì§€ë§Œ, ì´ìœ ì•¼ ì–´ì°Œëë“  ìë£Œê°€ ê·¸ëŸ¬í•˜ë¯€ë¡œ ê²°êµ­ ì‹¤ì œ í”„ë¡œì íŠ¸ì— ì ìš©í•  ë•Œë„ ì¼ì²´í˜•ìœ¼ë¡œ êµ¬ì„±í•˜ëŠ” ê³³ì´ ë§ì€ ê²ƒ ê°™ë‹¤.</p><p>ì´ì œ ìŠ¤ì¼€ì¤„ëŸ¬ì™€ ì‘ì—… í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•´ì„œ ë³„ë„ë¡œ ë°°í¬í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ê³  í´ë¦° ì•„í‚¤í…ì²˜ì— í•œ ê±¸ìŒ ë‹¤ê°€ê°€ë³´ì. 3ê°€ì§€ ê³ ê°œë¥¼ ë„˜ì–´ì•¼ í•œë‹¤.</p><h1 id="í´ë˜ìŠ¤ë¡œë”©"><a href="#í´ë˜ìŠ¤ë¡œë”©" class="headerlink" title="í´ë˜ìŠ¤ë¡œë”©"></a>í´ë˜ìŠ¤ë¡œë”©</h1><p>ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì‘ì—…ì„ ìŠ¤ì¼€ì¤„í•˜ë ¤ë©´ ì‘ì—… í´ë˜ìŠ¤ë¥¼ ë¡œë”©í•˜ê³  ì‹¤í–‰ ì£¼ê¸°ë¥¼ ì§€ì •í•´ì•¼ í•œë‹¤. ëŒ€ëµ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InitRunner</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Scheduler scheduler;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        log.info(<span class="string">"Init Runner executed."</span>);</span><br><span class="line">        JobKey jobKey = JobKey.jobKey(<span class="string">"jobkey1"</span>, <span class="string">"jobgroup1"</span>);</span><br><span class="line">        JobDetail jobDetail = buildJobDetail(jobKey);</span><br><span class="line">        Trigger trigger = buildJobTrigger(jobKey);</span><br><span class="line">        scheduler.scheduleJob(jobDetail, trigger);  <span class="comment">// (1)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> JobDetail <span class="title">buildJobDetail</span><span class="params">(JobKey jobKey)</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">        JobDataMap jobDataMap = <span class="keyword">new</span> JobDataMap();</span><br><span class="line">        jobDataMap.put(<span class="string">"key1"</span>, <span class="string">"value1"</span>);</span><br><span class="line">        jobDataMap.put(<span class="string">"key2"</span>, <span class="number">2</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> JobBuilder.newJob(SimpleJob.class)  <span class="comment">// (2)</span></span><br><span class="line">                .withIdentity(jobKey)</span><br><span class="line">                .withDescription(<span class="string">"Simple Quartz Job Detail"</span>)</span><br><span class="line">                .usingJobData(jobDataMap)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Trigger <span class="title">buildJobTrigger</span><span class="params">(JobKey jobKey)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> TriggerBuilder.newTrigger()</span><br><span class="line">                .forJob(jobKey)</span><br><span class="line">                .withDescription(<span class="string">"Simple Quartz Job Trigger"</span>)</span><br><span class="line">                .startNow()  <span class="comment">// ìŠ¤ì¼€ì¤„ë§ ë˜ë©´ ë°”ë¡œ ì‹¤í–‰ë˜ëŠ” ë°©ì‹</span></span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleJob</span> <span class="keyword">implements</span> <span class="title">Job</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(JobExecutionContext context)</span> <span class="keyword">throws</span> JobExecutionException </span>&#123;</span><br><span class="line">        log.info(<span class="string">"OOO JOB [&#123;&#125;] executed."</span>, <span class="keyword">this</span>.getClass().getSimpleName());</span><br><span class="line">        JobDataMap mergedJobDataMap = context.getMergedJobDataMap();</span><br><span class="line">        mergedJobDataMap.forEach((k, v) -&gt; log.info(<span class="string">"OOOOO &#123;&#125;: &#123;&#125;"</span>, k, v));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ìŠ¤ì¼€ì¤„ëŸ¬ì— ì˜í•´ ì‹¤í–‰ë˜ëŠ” <code>SimpleJob</code>ì€ ë‹¨ìˆœí•˜ê²Œ <code>JobExecutionContext</code>ì— ë‹´ê²¨ ìˆëŠ” í‚¤-ë°¸ë¥˜ë¥¼ ì¶œë ¥í•œë‹¤.</p><p>(1)ê³¼ ê°™ì´ <code>JobDetail</code>ê³¼ <code>Trigger</code>ë¥¼ <code>Scheduler</code>ì— ì „ë‹¬í•´ì£¼ë©´ ìŠ¤ì¼€ì¤„ë§ ëœë‹¤. ì‹¤í–‰ë  ì‘ì—…ì˜ í´ë˜ìŠ¤ëŠ” (2)ì™€ ê°™ì´ í´ë˜ìŠ¤ ë¦¬í„°ëŸ´ í˜•íƒœë¡œ <code>JobDetail</code>ì— ì§€ì •ëœë‹¤. <code>Trigger</code>ëŠ” í¸ì˜ìƒ (3)ê³¼ ê°™ì´ ë°”ë¡œ ì‹¤í–‰ë˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì§€ì •í–ˆì§€ë§Œ Cron Expression ë“± ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.</p><p>ì‹¤í–‰í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ <code>SimpleJob</code>ì´ ì‹¤í–‰ëœë‹¤.</p><p><img src="https://i.imgur.com/XDItlAj.png" alt="Imgur"></p><h2 id="ì»¤ìŠ¤í…€-í´ë˜ìŠ¤ë¡œë”"><a href="#ì»¤ìŠ¤í…€-í´ë˜ìŠ¤ë¡œë”" class="headerlink" title="ì»¤ìŠ¤í…€ í´ë˜ìŠ¤ë¡œë”"></a>ì»¤ìŠ¤í…€ í´ë˜ìŠ¤ë¡œë”</h2><p>ì•„í‚¤í…ì²˜ ê´€ì ì—ì„œ ì¤‘ìš”í•œ ì§€ì ì€ (2)ë‹¤. ì¼ì²´í˜•ì¼ ë•ŒëŠ” ìœ„ì™€ ê°™ì´ ì§ì ‘ <code>SimpleJob.class</code>ë¡œ ì§€ì •í•´ì£¼ë©´ ë˜ì§€ë§Œ, ë¶„ë¦¬ë¼ ìˆë‹¤ë©´ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì™¸ë¶€ì—ì„œ ì½ì–´ì™€ì•¼ í•œë‹¤. ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì´ <code>URLClassLoader</code>ë¥¼ í™œìš©í•´ì„œ <code>JOB_REPO</code>ë¡œ ì§€ì •ëœ jar íŒŒì¼ì— ìˆëŠ” ì‘ì—… í´ë˜ìŠ¤ë¥¼ ë¡œë”©í•  ìˆ˜ ìˆëŠ” ì»¤ìŠ¤í…€ í´ë˜ìŠ¤ë¡œë”ê°€ í•„ìš”í•˜ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RemoteJobClassLoader</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String JOB_REPO = <span class="string">"/tmp/homo-efficio/quartz/remote-job-repo/quartz-job.jar"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Class&lt;? extends T&gt; loadClass(String name, Class&lt;T&gt; clazz) <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="keyword">return</span> (Class&lt;? extends T&gt;) getClassLoader().loadClass(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ClassLoader <span class="title">getClassLoader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> URLClassLoader(</span><br><span class="line">                    <span class="keyword">new</span> URL[] &#123;</span><br><span class="line">                            <span class="keyword">new</span> File(JOB_REPO).toURI().toURL()</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="comment">// URLClassLoader ì„¤ì • ì‹œ parentë¥¼ webAppClassLoaderë¡œ ì§€ì •í•´ì¤˜ì•¼</span></span><br><span class="line">                    <span class="comment">// org.quartz.Job ë“± ë‚´ë¶€ ì˜ì¡´ í´ë˜ìŠ¤ ë¡œë”© ê°€ëŠ¥</span></span><br><span class="line">                    <span class="keyword">this</span>.getClass().getClassLoader()</span><br><span class="line">            );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ìë°” í´ë˜ìŠ¤ë¡œë”©ì€ <a href="https://homoefficio.github.io/2018/10/13/Java-í´ë˜ìŠ¤ë¡œë”-í›‘ì–´ë³´ê¸°/">https://homoefficio.github.io/2018/10/13/Java-í´ë˜ìŠ¤ë¡œë”-í›‘ì–´ë³´ê¸°/</a> ì™€ <a href="https://homoefficio.github.io/2018/10/14/Java-URLClassLoaderë¡œ-ì•Œì•„ë³´ëŠ”-í´ë˜ìŠ¤ë¡œë”©/">https://homoefficio.github.io/2018/10/14/Java-URLClassLoaderë¡œ-ì•Œì•„ë³´ëŠ”-í´ë˜ìŠ¤ë¡œë”©/</a> ë¥¼ ë³´ë©´ ë„ì›€ì´ ë  ê²ƒì´ë‹¤.</p><h2 id="ì‘ì—…-í´ë˜ìŠ¤-ì™¸ë¶€í™”"><a href="#ì‘ì—…-í´ë˜ìŠ¤-ì™¸ë¶€í™”" class="headerlink" title="ì‘ì—… í´ë˜ìŠ¤ ì™¸ë¶€í™”"></a>ì‘ì—… í´ë˜ìŠ¤ ì™¸ë¶€í™”</h2><p>ì´ì œ ì‘ì—… í´ë˜ìŠ¤ë¥¼ ì™¸ë¶€ë¡œ ë¶„ë¦¬í•´ë³´ì. ì§€ê¸ˆê¹Œì§€ ë§Œë“  íŒŒì¼ì€ ëª¨ë‘ <code>quartz-scheduler</code>ì— ìˆê³ , ìƒˆë¡œ <code>quartz-job</code> ëª¨ë“ˆì„ ë§Œë“¤ì–´ì„œ ì‘ì—… í´ë˜ìŠ¤ëŠ” ëª¨ë‘ ì´ ëª¨ë“ˆì— ë‘”ë‹¤.</p><p><img src="https://i.imgur.com/4BFS4lx.png" alt="Imgur"></p><p><code>quartz-job</code> ëª¨ë“ˆì˜ <code>build.gradle</code> íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤. jar íŒŒì¼ì„ <code>RemoteJobClassLoader</code>ê°€ ì½ì„ ìˆ˜ ìˆëŠ” ìœ„ì¹˜ì— ë°°í¬í•˜ëŠ” <code>deployJar</code> íƒœìŠ¤í¬ë¥¼ ì¶”ê°€í–ˆë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id &apos;java&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">version &apos;unspecified&apos;</span><br><span class="line"></span><br><span class="line">sourceCompatibility = &apos;9&apos;</span><br><span class="line"></span><br><span class="line">repositories &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compileOnly &apos;org.projectlombok:lombok:1.18.8&apos;</span><br><span class="line">    annotationProcessor &apos;org.projectlombok:lombok:1.18.8&apos;</span><br><span class="line">    compile group: &apos;org.quartz-scheduler&apos;, name: &apos;quartz&apos;, version: &apos;2.3.1&apos;</span><br><span class="line">    compile group: &apos;org.springframework&apos;, name: &apos;spring-context-support&apos;, version: &apos;5.1.9.RELEASE&apos;</span><br><span class="line"></span><br><span class="line">    testCompile group: &apos;junit&apos;, name: &apos;junit&apos;, version: &apos;4.12&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task deployJar(type: Copy) &#123;</span><br><span class="line">    dependsOn(&apos;jar&apos;)</span><br><span class="line">    from &quot;$buildDir/libs/quartz-job.jar&quot;</span><br><span class="line">    into &quot;/tmp/homo-efficio/quartz/remote-job-repo/&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì•„ê¹Œ ë‚˜ì™”ë˜ <code>SimpleJob</code>ê³¼ ê±°ì˜ ë™ì¼í•œ ë‚´ìš©ì˜ <code>RemoteSimpleJob</code> í´ë˜ìŠ¤ë¥¼ <code>quartz-job</code> ì•„ë˜ì— ë§Œë“ ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RemoteSimpleJob</span> <span class="keyword">implements</span> <span class="title">Job</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(JobExecutionContext context)</span> <span class="keyword">throws</span> JobExecutionException </span>&#123;</span><br><span class="line">        log.info(<span class="string">"OOO REMOTE JOB [&#123;&#125;] executed."</span>, <span class="keyword">this</span>.getClass().getSimpleName());</span><br><span class="line">        JobDataMap mergedJobDataMap = context.getMergedJobDataMap();</span><br><span class="line">        mergedJobDataMap.forEach((k, v) -&gt; log.info(<span class="string">"OOOOO &#123;&#125;: &#123;&#125;"</span>, k, v));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì‘ì—… ìŠ¤ì¼€ì¤„ë§ í•˜ëŠ” ë¶€ë¶„ì„ ë‹¤ìŒê³¼ ê°™ì´ <code>RemoteJobClassLoader</code>ë¥¼ ì‚¬ìš©í•´ì„œ ì‘ì—… í´ë˜ìŠ¤ë¥¼ ë¡œë”©í•˜ë„ë¡ ë°”ê¾¼ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InitRunner</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Scheduler scheduler;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RemoteJobClassLoader remoteJobClassLoader;  <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        log.info(<span class="string">"Init Runner executed."</span>);</span><br><span class="line">        JobKey jobKey = JobKey.jobKey(<span class="string">"jobkey1"</span>, <span class="string">"jobgroup1"</span>);</span><br><span class="line">        JobDetail jobDetail = buildJobDetail(jobKey);</span><br><span class="line">        Trigger trigger = buildJobTrigger(jobKey);</span><br><span class="line">        scheduler.scheduleJob(jobDetail, trigger);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> JobDetail <span class="title">buildJobDetail</span><span class="params">(JobKey jobKey)</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">        JobDataMap jobDataMap = <span class="keyword">new</span> JobDataMap();</span><br><span class="line">        jobDataMap.put(<span class="string">"key1"</span>, <span class="string">"value1"</span>);</span><br><span class="line">        jobDataMap.put(<span class="string">"key2"</span>, <span class="number">2</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ì—¬ê¸°!!</span></span><br><span class="line"><span class="comment">//        return JobBuilder.newJob(SimpleJob.class)</span></span><br><span class="line">        <span class="keyword">return</span> JobBuilder.newJob(remoteJobClassLoader.loadClass(<span class="string">"io.homo_efficio.quartz.job.RemoteSimpleJob"</span>, Job.class))</span><br><span class="line">                .withIdentity(jobKey)</span><br><span class="line">                .withDescription(<span class="string">"Simple Quartz Job Detail"</span>)</span><br><span class="line">                .usingJobData(jobDataMap)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Trigger <span class="title">buildJobTrigger</span><span class="params">(JobKey jobKey)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> TriggerBuilder.newTrigger()</span><br><span class="line">                .forJob(jobKey)</span><br><span class="line">                .withDescription(<span class="string">"Simple Quartz Job Trigger"</span>)</span><br><span class="line">                .startNow()</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì´ì œ ë‹¤ì‹œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë¶„ë¦¬ëœ ë³„ë„ì˜ jar íŒŒì¼ì—ì„œ ì‘ì—… í´ë˜ìŠ¤ë¥¼ ë¡œë”©í•´ì„œ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><p><img src="https://i.imgur.com/gF10uft.png" alt="Imgur"></p><p>ìŠ¤ì¼€ì¤„ëŸ¬ìª½ì—ì„œ <code>io.homo_efficio.quartz.job.RemoteSimpleJob</code>ì™€ ê°™ì´ ì™¸ë¶€ jarì— ìˆëŠ” ì‘ì—… í´ë˜ìŠ¤ ìœ„ì¹˜ë¥¼ ë¬¸ìì—´ë¡œ ì§ì ‘ ì°¸ì¡°í•˜ê³  ìˆì–´ì„œ ë§ˆì¹˜ ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆ(quartz-scheduler)ì´ ì‘ì—… ëª¨ë“ˆ(quartz-job)ì— ì˜ì¡´í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ, ì‹¤ë¬´ì—ì„œëŠ” ì‘ì—… í´ë˜ìŠ¤ ìœ„ì¹˜ë‚˜ ì‹¤í–‰ ì£¼ê¸° ì •ë³´ë¥¼ DBì—ì„œ ì½ì–´ì˜¤ë¯€ë¡œ ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” <strong>ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆì€ ì‘ì—… í´ë˜ìŠ¤ ëª¨ë“ˆì„ ëª¨ë¥¸ë‹¤. ë”°ë¼ì„œ ì´ì œë¶€í„°ëŠ” <code>RemoteJob2</code>, <code>RemoteJob3</code> ë“±ì„ ì¶”ê°€í•˜ë”ë¼ë„ <code>quartz-job.jar</code>ë§Œ ë¹Œë“œ/ë°°í¬í•˜ë©´ ë˜ë©°, ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ì¬ë°°í¬í•  í•„ìš”ê°€ ì—†ëŠ” êµ¬ì¡°ê°€ ë§Œë“¤ì–´ì¡Œë‹¤.</strong></p><p>ì´ë ‡ê²Œ í•´ì„œ ìŠ¤ì¼€ì¤„ëŸ¬ì™€ ì‘ì—… í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ëŠ”ë° ì„±ê³µí–ˆë‹¤. ì–´ë µì§€ ì•Šë‹¤. </p><p>ê·¸ëŸ°ë° ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‘ì—… í´ë˜ìŠ¤ë“¤ì´ <code>RemoteSimpleJob</code>ì²˜ëŸ¼ ë‹¨ìˆœí• ë¦¬ëŠ” ì—†ë‹¤. DB ì‘ì—…ë„ ìˆì„ ê²ƒì´ê³  í•˜ë‘¡ ì¸í”„ë¼ì™€ ê´€ë ¨í•œ ì‘ì—…ë„ ìˆì„ ê²ƒì´ë‹¤. ì´ëŸ° ê²ƒë“¤ì´ ê°€ëŠ¥í•˜ë ¤ë©´ ìŠ¤ì¼€ì¤„ëŸ¬ ìª½ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ <code>@Autowire</code>ë¡œ ì£¼ì… ë°›ì•„ì•¼ í•˜ëŠ”ë°, ì§€ê¸ˆì²˜ëŸ¼ ëŸ°íƒ€ì„ì— ë¡œë”©ë˜ëŠ” ë°©ì‹ì—ì„œë„ ê°€ëŠ¥í• ê¹Œ?</p><p>ì²«ë²ˆì§¸ ê³ ê°œë§Œìœ¼ë¡œë„ ì–‘ì´ ì œë²•ë˜ë‹ˆ ì¼ë‹¨ ì—¬ê¸°ì„œ 1íƒ„ì„ ë§ˆë¬´ë¦¬í•˜ê³  <code>@Autowire</code>ëŠ” <a href="https://homoefficio.github.io/2019/09/29/Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -2/">2íƒ„</a>ì—ì„œ ë‹¤ë£¬ë‹¤.</p><h1 id="ì •ë¦¬"><a href="#ì •ë¦¬" class="headerlink" title="ì •ë¦¬"></a>ì •ë¦¬</h1><blockquote><ul><li><p>ìŠ¤ì¼€ì¤„ë§ì„ ë‹´ë‹¹í•˜ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ì™€ ì‹¤í–‰ë˜ëŠ” ì‘ì—…ì€ ë³€ê²½ ì£¼ê¸°ê°€ ë‹¤ë¥´ë‹¤. ê·¸ëŸ°ë° ì´ë¥¼ í•œ ê³³ì— ëª¨ì•„ ì¼ì²´í˜•ìœ¼ë¡œ êµ¬ì„±í•˜ë©´ ìš´ì˜ì´ ë§¤ìš° ë¶ˆí¸í•´ì§„ë‹¤.</p></li><li><p>QuartzëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ì™€ ì‘ì—…ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì–´ ìˆë‹¤.</p></li><li><p>ì‘ì—… í´ë˜ìŠ¤ë¥¼ ë³„ë„ì˜ jarë¡œ ë¬¶ê³ , ìŠ¤ì¼€ì¤„ëŸ¬ ìª½ì—ì„œ <code>URLClassLoader</code>ë¥¼ ì‚¬ìš©í•´ì„œ ì‘ì—… í´ë˜ìŠ¤ë¥¼ ë¡œë”©í•˜ë„ë¡ ê°œì„ í•˜ë©´ ìŠ¤ì¼€ì¤„ëŸ¬ì™€ ì‘ì—… í´ë˜ìŠ¤ì˜ ë°°í¬ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆì–´ ìš´ì˜ ë¶€ë‹´ì„ ëŒ€í­ ì¤„ì¼ ìˆ˜ ìˆë‹¤.</p></li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -1&quot;&gt;&lt;a href=&quot;#Quartz-ìŠ¤ì¼€ì¤„ëŸ¬-ì ìš©-ì•„í‚¤í…ì²˜-ê°œì„ -1&quot; class=&quot;headerlink&quot; title=&quot;Quartz ìŠ¤ì¼€ì¤„ëŸ¬ ì ìš© ì•„í‚¤í…ì²˜ ê°œì„  - 1&quot;&gt;&lt;/a&gt;Quartz ìŠ¤ì¼€ì¤„ëŸ¬ 
      
    
    </summary>
    
      <category term="Technique" scheme="http://homoefficio.github.io/categories/Technique/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="ìë°”" scheme="http://homoefficio.github.io/tags/%EC%9E%90%EB%B0%94/"/>
    
      <category term="Quartz" scheme="http://homoefficio.github.io/tags/Quartz/"/>
    
      <category term="Scheduler" scheme="http://homoefficio.github.io/tags/Scheduler/"/>
    
      <category term="Clean Architecture" scheme="http://homoefficio.github.io/tags/Clean-Architecture/"/>
    
      <category term="Interface Segregation Principle" scheme="http://homoefficio.github.io/tags/Interface-Segregation-Principle/"/>
    
      <category term="Dependency Inversion Principle" scheme="http://homoefficio.github.io/tags/Dependency-Inversion-Principle/"/>
    
      <category term="Isolation" scheme="http://homoefficio.github.io/tags/Isolation/"/>
    
      <category term="ì¿¼ì¸ " scheme="http://homoefficio.github.io/tags/%EC%BF%BC%EC%B8%A0/"/>
    
      <category term="ìŠ¤ì¼€ì¤„ëŸ¬" scheme="http://homoefficio.github.io/tags/%EC%8A%A4%EC%BC%80%EC%A4%84%EB%9F%AC/"/>
    
      <category term="í´ë¦° ì•„í‚¤í…ì²˜" scheme="http://homoefficio.github.io/tags/%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98/"/>
    
      <category term="ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™" scheme="http://homoefficio.github.io/tags/%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EB%B6%84%EB%A6%AC-%EC%9B%90%EC%B9%99/"/>
    
      <category term="ê²©ë¦¬" scheme="http://homoefficio.github.io/tags/%EA%B2%A9%EB%A6%AC/"/>
    
      <category term="ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™" scheme="http://homoefficio.github.io/tags/%EC%9D%98%EC%A1%B4%EA%B4%80%EA%B3%84-%EC%97%AD%EC%A0%84-%EC%9B%90%EC%B9%99/"/>
    
  </entry>
  
  <entry>
    <title>ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ê³¼ ë©”ì‹œì§•</title>
    <link href="http://homoefficio.github.io/2019/07/04/%EA%B0%9D%EC%B2%B4-%EC%A7%80%ED%96%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%EA%B3%BC-%EB%A9%94%EC%8B%9C%EC%A7%95/"/>
    <id>http://homoefficio.github.io/2019/07/04/ê°ì²´-ì§€í–¥-í”„ë¡œê·¸ë˜ë°ê³¼-ë©”ì‹œì§•/</id>
    <published>2019-07-03T15:14:58.000Z</published>
    <updated>2019-11-23T14:23:38.887Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ê°ì²´-ì§€í–¥-í”„ë¡œê·¸ë˜ë°ê³¼-ë©”ì‹œì§•"><a href="#ê°ì²´-ì§€í–¥-í”„ë¡œê·¸ë˜ë°ê³¼-ë©”ì‹œì§•" class="headerlink" title="ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ê³¼ ë©”ì‹œì§•"></a>ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ê³¼ ë©”ì‹œì§•</h1><p>ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì—ì„œ ë©”ì‹œì§•ì´ë€ ë¬´ì–¼ ë§í•˜ëŠ” ê±¸ê¹Œ? ì‰½ê²ŒëŠ” ê·¸ëƒ¥ ë©”ì„œë“œ í˜¸ì¶œì´ë¼ê³  ìƒê°í•´ë„ ë  ê²ƒ ê°™ê¸´ í•˜ì§€ë§Œ ê·¸ê²ƒë§Œì„ ì˜ë¯¸í•˜ëŠ” ê²ƒ ê°™ì§€ëŠ” ì•Šë‹¤. ê·¸ëŸ¼ ë„ëŒ€ì²´ ë­˜ê¹Œ?</p><h2 id="ì›ì¡°ì—ê²Œ-ë°°ìš°ì-ì•¨ëŸ°-ì¼€ì´"><a href="#ì›ì¡°ì—ê²Œ-ë°°ìš°ì-ì•¨ëŸ°-ì¼€ì´" class="headerlink" title="ì›ì¡°ì—ê²Œ ë°°ìš°ì. ì•¨ëŸ° ì¼€ì´"></a>ì›ì¡°ì—ê²Œ ë°°ìš°ì. ì•¨ëŸ° ì¼€ì´</h2><p><code>Object-Oriented</code>ë¼ëŠ” ë§ì„ ì²˜ìŒ ì‚¬ìš©í•œ ê²ƒìœ¼ë¡œ ì•Œë ¤ì§„ ì‚¬ëŒì€ ì•¨ëŸ° ì¼€ì´ë‹¤. <a href="http://www.purl.org/stefan_ram/pub/doc_kay_oop_en" target="_blank" rel="noopener">ì•¨ëŸ° ì¼€ì´ì—ê²Œ OOPë€?</a>ì„ ë³´ë©´ ëë¶€ë¶„ì— ë‹¤ìŒê³¼ ê°™ì€ ê¸€ì´ ë‚˜ì˜¨ë‹¤.</p><blockquote><p>OOP to me means only messaging, local retention and protection and<br>hiding of state-process, and extreme late-binding of all things.</p></blockquote><p>ìš°ë¦¬ë§ë¡œëŠ” ëŒ€ëµ ë‹¤ìŒê³¼ ê°™ì´ ì˜®ê¸¸ ìˆ˜ ìˆê² ë‹¤.</p><blockquote><p>ë‚´ê²Œ OOPë€ ì˜¤ì§ ë‹¤ìŒ 3ê°€ì§€ë¥¼ ì˜ë¯¸í•œë‹¤.  </p><ul><li>ë©”ì‹œì§€ë¥¼ ì£¼ê³  ë°›ëŠ” ê²ƒ  </li><li>ìƒíƒœ ì²˜ë¦¬ê°€ ë¡œì»¬ ë²”ìœ„ ë‚´ì—ì„œë§Œ ë‹¤ë¤„ì§€ë„ë¡ ìœ ì§€í•˜ê³  ìƒíƒœ ì²˜ë¦¬ë¥¼ (ì™¸ë¶€ë¡œë¶€í„°) ë³´í˜¸í•˜ê³  ìˆ¨ê¸°ëŠ” ê²ƒ  </li><li>ëª¨ë“  ê²ƒì— ëŒ€í•œ ê·¹ë‹¨ì ì¸ late-binding (ë˜ëŠ” ëª¨ë“  ê²ƒì´ ê°€ëŠ¥í•œ ê°€ì¥ ëŠ¦ì€ ì‹œì ì— ê²°ì •ë˜ëŠ” ê²ƒ)</li></ul></blockquote><p>ì—¬ê¸°ì„œ ì²« ë²ˆì§¸ ê¼½ëŠ” messagingì´ ë­”ì§€ ì˜ ëª¨ë¥´ê² ë‹¤. ê·¸ë˜ì„œ ë” ì°¾ì•„ë³´ë‹ˆ â€˜ì•¨ëŸ° ì¼€ì´ì—ê²Œ OOPë€?â€™ì— ì´ì–´ <a href="http://wiki.c2.com/?AlanKayOnMessaging" target="_blank" rel="noopener">ì•¨ëŸ° ì¼€ì´ì—ê²Œ ë©”ì‹œì§•ì´ë€?</a>ë„ ìˆì—ˆë‹¤.</p><blockquote><p>The big idea is â€œmessagingâ€ - that is what the kernal of Smalltalk/Squeak<br>is all about (and itâ€™s something that was never quite completed in our<br>Xerox PARC phase). The Japanese have a small word - ma - for â€œthat which<br>is in betweenâ€ - perhaps the nearest English equivalent is â€œinterstitialâ€.<br>The key in making great and growable systems is much more to design how its<br>modules communicate rather than what their internal properties and<br>behaviors should be.</p></blockquote><p>ëŒ€ì¶© ì¤„ì—¬ì„œ ì˜ì—­í•˜ë©´ ëŒ€ëµ ë‹¤ìŒê³¼ ê°™ì€ ëœ»ì´ë‹¤.</p><blockquote><p>ì¤‘ìš”í•œ ê±´ (objectë¼ê¸°ë³´ë‹¤ëŠ”) ë©”ì‹œì§•ì´ì—ˆê³ , ëª¨ë“ˆ ë‚´ì˜ ì†ì„± ë° ë™ì‘ë³´ë‹¤ ëª¨ë“ˆ ê°„ì˜ ì˜ì‚¬ì†Œí†µì„ ì˜ ì„¤ê³„í•˜ëŠ” ê²ƒì´ ì„±ì¥ ê°€ëŠ¥í•œ í›Œë¥­í•œ ì‹œìŠ¤í…œì„ ë§Œë“œëŠ” ë° í›¨ì”¬ ë” ì¤‘ìš”í•˜ë‹¤.</p></blockquote><p>ì—¬ê¸°ì—ì„œë„ ë©”ì‹œì§•ì´ ì¤‘ìš”í•˜ë‹¤ëŠ” ê±´ ì•Œê² ì§€ë§Œ, ê·¸ë˜ì„œ ë©”ì‹œì§•ì´ ì •í™•í•˜ê²Œ ë˜ëŠ” êµ¬ì²´ì ìœ¼ë¡œ ë­˜ ì˜ë¯¸í•˜ëŠ”ì§€ì— ëŒ€í•œ ì–˜ê¸°ëŠ” ìœ„ ê¸€ ì „ì²´ë¥¼ ì½ì–´ë´ë„ ì•ˆ ë‚˜ì˜¨ë‹¤. ì•„ë‹ˆ ì•ˆ ë‚˜ì˜¨ë‹¤ê³  ë‹¨ì •í•˜ê¸´ ì–´ë µê³  ë‚´ ìˆ˜ì¤€ì—ì„œëŠ” ì•ˆ ë³´ì¸ë‹¤. </p><h2 id="ì‘ì-ë¯¸ìƒì˜-ëª…ì–¸"><a href="#ì‘ì-ë¯¸ìƒì˜-ëª…ì–¸" class="headerlink" title="ì‘ì ë¯¸ìƒì˜ ëª…ì–¸"></a>ì‘ì ë¯¸ìƒì˜ ëª…ì–¸</h2><p>ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì˜ ì˜ë¯¸ëŠ” ì•„ë¬´ë˜ë„ ê·¸ ìš©ì–´ë¥¼ ì²˜ìŒ ì“´ ì•¨ëŸ° ì¼€ì´ê°€ í•œ ë§ì´ ê°€ì¥ ì •í™•í•˜ê² ì§€ë§Œ, ë¶€ë¶„ì ì´ë‚˜ë§ˆ ê°€ì¥ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆê²Œ í•´ì¤€ ë§ì€ ë°”ë¡œ ì´ê±°ë‹¤.</p><blockquote><p><strong>ê°ì²´ì—ê²Œ ë°ì´í„°ë¥¼ ìš”êµ¬í•˜ì§€ ë§ê³  ì‘ì—…ì„ ìš”ì²­í•˜ë¼.</strong></p></blockquote><p>ëˆ„ê°€ í•œ ì–˜ê¸°ì¸ì§€ëŠ” ëª¨ë¥´ì§€ë§Œ ë‚˜ëŠ” í† ë¹„ì˜ ìŠ¤í”„ë§ì—ì„œ ì € ë§ì„ ì²˜ìŒ ë´¤ëŠ”ë°, ì±…ì„ ë´ë„ ë‚´ìš©ì„ ê±°ì˜ ê¸°ì–µ ëª» í•˜ëŠ” ë‡Œë¥¼ ê°€ì§€ê³  ìˆì§€ë§Œ ì € ë§ë§Œì€ ìŠíˆì§€ ì•Šì•˜ë‹¤. ì € ë§ì€ ì•¨ëŸ° ì¼€ì´ê°€ ì§šì–´ì¤€ 3ê°€ì§€ ì¤‘ì—ì„œ 1ê³¼ 2ë¥¼ í¬ê´„í•œë‹¤ê³  ìƒê°í•œë‹¤.</p><h2 id="ê±°ì¸ì˜-ì–´ê¹¨-ìœ„ì—ì„œ"><a href="#ê±°ì¸ì˜-ì–´ê¹¨-ìœ„ì—ì„œ" class="headerlink" title="ê±°ì¸ì˜ ì–´ê¹¨ ìœ„ì—ì„œ"></a>ê±°ì¸ì˜ ì–´ê¹¨ ìœ„ì—ì„œ</h2><p>ê·¸ë˜ì„œ ìœ„ 3ê°€ì§€ ê¸€ì„ ê·¼ê±°ë¡œ ë©”ì‹œì§•ì— ëŒ€í•œ ë‚´ ë‚˜ë¦„ì˜ ì •ì˜ë¥¼ ë‚´ë ¤ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><blockquote><p><strong>ë©”ì‹œì§•ì€ ë°ì´í„°ë¥¼ ìš”êµ¬í•˜ëŠ” ë©”ì„œë“œ í˜¸ì¶œì´ ì•„ë‹ˆë¼ ì‘ì—…ì„ ìš”ì²­í•˜ëŠ” ë©”ì„œë“œ í˜¸ì¶œì„ ì˜ë¯¸í•œë‹¤.</strong></p></blockquote><p>ì´ê²ƒë§ˆì €ë„ ì¡°ê¸ˆ ëª¨í˜¸í•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ ì‰½ê²Œ í’€ì–´ ì¨ë³´ì.</p><h3 id="ëŒ€í•™-ì…ì‹œ-ì›ì„œ-ì ‘ìˆ˜-ì‚¬ë¡€"><a href="#ëŒ€í•™-ì…ì‹œ-ì›ì„œ-ì ‘ìˆ˜-ì‚¬ë¡€" class="headerlink" title="ëŒ€í•™ ì…ì‹œ ì›ì„œ ì ‘ìˆ˜ ì‚¬ë¡€"></a>ëŒ€í•™ ì…ì‹œ ì›ì„œ ì ‘ìˆ˜ ì‚¬ë¡€</h3><p>ëŒ€í•™ ì…ì‹œ ì›ì„œ ì ‘ìˆ˜ë¼ëŠ” ìƒí™©ì„ ìƒê°í•´ë³´ì. ì¼ë°˜ì ìœ¼ë¡œëŠ” ì§€ì›ìì˜ ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì§€ë§Œ, ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ê°€ ì—†ëŠ” ì™¸êµ­ì¸ ì§€ì›ìëŠ” ë¹„ì ë²ˆí˜¸ë¥¼ í™•ì¸í•œë‹¤ê³  í•˜ì.</p><p>ì¼ë°˜ì ì¸ ë‚´êµ­ì¸ ì§€ì›ìëŠ” ì¼ë°˜ ì „í˜•ì„ í†µí•´ ëª¨ì§‘í•œë‹¤ê³  í•˜ê³ , ì½”ë“œë¥¼ â€˜Aâ€™ë¼ê³  í•˜ì. ì™¸êµ­ì¸ ì§€ì›ìëŠ” ì™¸êµ­ì¸ ì „í˜•ì„ í†µí•´ ëª¨ì§‘í•œë‹¤ê³  í•˜ê³ , ì½”ë“œë¥¼ â€˜Fâ€™ë¼ê³  í•˜ì. ì§€ì› ì •ë³´ëŠ” <code>application</code>ì— ë‹´ê²¨ìˆë‹¤ê³  í•˜ë©´, ëŒ€ëµ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œê°€ ë‚˜ì˜¬ ê²ƒ ê°™ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì „í˜• íƒ€ì…ì´ë¼ëŠ” ë°ì´í„°ë¥¼ application ê°ì²´ì—ê²Œ ìš”ì²­í•˜ê³ ,</span></span><br><span class="line">String admissionType = application.getAdmissionType();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì™¸êµ­ì¸ ì „í˜• ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ë¹„ìë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì.</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">"F"</span>.equals(admissionType))</span><br><span class="line">    verifyVisaNumber(application.getVisaNumber());</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ì´ì œ ì „í˜•ì„ ì „ê¸°ì™€ í›„ê¸°ë¡œ ë‚˜ëˆ„ì–´ ì¼ ë…„ì— ë‘ ë²ˆ ì ‘ìˆ˜ë¥¼ ë°›ë„ë¡ ì •ì±…ì´ ë°”ë€Œì—ˆë‹¤. ë”°ë¼ì„œ ì™¸êµ­ì¸ ì „í˜•ë„ ì „ê¸° ì „í˜•ì€ ê¸°ì¡´ëŒ€ë¡œ â€˜Fâ€™ ì½”ë“œë¥¼ ì“°ê³ , í›„ê¸° ì „í˜•ì€ â€˜Gâ€™ ì½”ë“œë¥¼ ì“°ê²Œ ë˜ì—ˆë‹¤. ê·¸ëŸ¼ ê¸°ì¡´ì˜ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ì´ ë³€ê²½ë˜ì–´ì•¼ í•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì „í˜• íƒ€ì…ì´ë¼ëŠ” ë°ì´í„°ë¥¼ application ê°ì²´ì—ê²Œ ìš”ì²­í•˜ê³ ,</span></span><br><span class="line">String admissionType = application.getAdmissionType();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¶”ê°€ëœ ì½”ë“œë¥¼ ë°˜ì˜í•˜ê¸° ìœ„í•´ ì†ŒìŠ¤ë¥¼ ë³€ê²½í•œë‹¤.</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">"F"</span>.equals(admissionType) </span><br><span class="line">    || <span class="string">"G"</span>.equals(admissionType))  <span class="comment">// í›„ê¸° ì „í˜• ì¶”ê°€</span></span><br><span class="line">    verifyVisaNumber(application.getVisaNumber());</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ì´ì   ì „ê¸°, í›„ê¸° ë¿ì•„ë‹ˆë¼ ìˆ˜ì‹œ ì „í˜•ì´ ì¶”ê°€ë˜ì—ˆë‹¤. ì™¸êµ­ì¸ ìˆ˜ì‹œ ì „í˜• ì½”ë“œëŠ” â€˜Hâ€™ë¥¼ ì“°ê²Œ ë˜ì—ˆë‹¤. ì½”ë“œê°€ ë˜ ë°”ë€Œì–´ì•¼ í•œë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì „í˜• íƒ€ì…ì´ë¼ëŠ” ë°ì´í„°ë¥¼ application ê°ì²´ì—ê²Œ ìš”ì²­í•˜ê³ ,</span></span><br><span class="line">String admissionType = application.getAdmissionType();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¶”ê°€ëœ ì½”ë“œë¥¼ ë°˜ì˜í•˜ê¸° ìœ„í•´ ì†ŒìŠ¤ë¥¼ ë³€ê²½í•œë‹¤.</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">"F"</span>.equals(admissionType)</span><br><span class="line">    || <span class="string">"G"</span>.equals(admissionType)   <span class="comment">// í›„ê¸° ì „í˜• ì¶”ê°€</span></span><br><span class="line">    || <span class="string">"H"</span>.equals(admissionType))  <span class="comment">//// ìˆ˜ì‹œ ì „í˜• ì¶”ê°€</span></span><br><span class="line">    verifyVisaNumber(application.getVisaNumber());</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ìš”êµ¬ì‚¬í•­ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ê¸°ì¡´ ì½”ë“œì—ë„ ë³€ê²½ì´ í•„ìš”í•˜ë‹¤. ì´ ì •ë„ì˜ ë³€ê²½ì´ë¼ë©´ ê·¸ëƒ¥ í•´ì¤„ ìˆ˜ë„ ìˆë‹¤. í•˜ì§€ë§Œ, ì™¸êµ­ì¸ ì „í˜• ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ì½”ë“œê°€ ìœ„ì™€ ê°™ì´ ë‹¨ í•œ êµ°ë°ë§Œ ì¡´ì¬í• ê¹Œ? ê·¸ë ‡ì§€ ì•Šë‹¤. ì™¸êµ­ì¸ ì§€ì›ìëŠ” ë³¸êµ­ì˜ ë¹„ìƒì—°ë½ì²˜ë„ í•„ìš”í•˜ê³ , ì˜ì–´ ì„±ì ì´ ë©´ì œë  ìˆ˜ë„ ìˆëŠ” ë“± ì™¸êµ­ì¸ ì „í˜• ì—¬ë¶€ í™•ì¸ ë¡œì§ì€ ì•„ë§ˆ ê½¤ ì—¬ëŸ¬êµ°ë° ë“±ì¥í•  ê²ƒì´ë‹¤. </p><p>ê·¸ë¦¬ê³  ìì£¼ ë°œìƒí•˜ì§€ëŠ” ì•Šê² ì§€ë§Œ ì½”ë“œê°€ â€˜Fâ€™, â€˜Gâ€™, â€˜Hâ€™ê°€ ì•„ë‹ˆë¼ â€˜F1â€™, â€˜F2â€™, â€˜F0â€™ ì´ë ‡ê²Œ ë°”ë€ë‹¤ë©´? ì „ê¸°, í›„ê¸°, ìˆ˜ì‹œ ì „í˜•ì— ë˜ ì¡°ê¸° ì „í˜•ì´ ì¶”ê°€ëœë‹¤ë©´? ë³€ê²½ì€ ì•„ì£¼ ê³ ë‹¬í”Œ ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ë³€ê²½ì´ ì•„ë‹ˆë”ë¼ë„ â€˜Fâ€™, â€˜Gâ€™, â€˜Hâ€™ê°€ ê°ê° ì–´ë–¤ ì „í˜•ì„ ì˜ë¯¸í•˜ëŠ”ì§€ ì´ ì½”ë“œë§Œ ë´ì„œëŠ” ì•Œ ìˆ˜ ì—†ì–´ ë¶ˆí¸í•˜ê¸°ë„ í•˜ë‹¤.</p><p>ì´ë ‡ê²Œ <code>application</code> ê°ì²´ì—ê²Œ <code>admissionType</code>ì´ë¼ëŠ” <strong>ë°ì´í„°ë¥¼ ìš”êµ¬í•´ì„œ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì€ ìœ ì§€ê´€ë¦¬ê°€ ê´´ë¡­ë‹¤</strong>ëŠ” ë‹¨ì ì´ ìˆë‹¤. ê·¸ëŸ¼ ì‘ì ë¯¸ìƒì˜ ëª…ì–¸ì²˜ëŸ¼ ë°ì´í„°ë¥¼ ìš”êµ¬í•˜ì§€ ì•Šê³  ì‘ì—…ì„ ìš”ì²­í•˜ë©´ ì–´ë–»ê²Œ ë‹¬ë¼ì§ˆê¹Œ?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ê¸°ì¡´ ì½”ë“œ</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">// ì „í˜• íƒ€ì…ì´ë¼ëŠ” ë°ì´í„°ë¥¼ application ê°ì²´ì—ê²Œ ìš”ì²­í•˜ê³ ,</span></span><br><span class="line"><span class="comment">String admissionType = application.getAdmissionType();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">// ì™¸êµ­ì¸ ì „í˜• ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤.</span></span><br><span class="line"><span class="comment">if ("F".equals(admissionType))</span></span><br><span class="line"><span class="comment">    verifyVisaNumber(application.getVisaNumber());</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="comment">// application ê°ì²´ì—ê²Œ </span></span><br><span class="line"><span class="comment">// ì „í˜• íƒ€ì…ì´ë¼ëŠ” ë°ì´í„°ë¥¼ ìš”êµ¬í•˜ì§€ ë§ê³ ,</span></span><br><span class="line"><span class="comment">// ì™¸êµ­ì¸ ì „í˜• ì—¬ë¶€ í™•ì¸ì´ë¼ëŠ” ì‘ì—…ì„ ìš”ì²­í•˜ì.</span></span><br><span class="line"><span class="keyword">if</span> (application.isForeignAdmission())  <span class="comment">// &lt;-- ë°”ë¡œ ì´ë ‡ê²Œ</span></span><br><span class="line">    verifyVisaNumber(application.getVisaNumber());</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ìœ„ ì½”ë“œì—ì„œ <code>application.isForeignAdmission()</code>ëŠ” <strong>ë‹¨ìˆœíˆ ì™¸êµ­ì¸ ì „í˜• ì½”ë“œë¼ëŠ” ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ê²Œ ì•„ë‹ˆë¼ ì™¸êµ­ì¸ ì „í˜• ì—¬ë¶€ í™•ì¸ì´ë¼ëŠ” ì‘ì—…ì„ ìš”ì²­í•˜ê³  ìˆë‹¤.</strong> ê·¸ë¦¬ê³  <code>isForeignAdmission()</code>ì€ ì™¸êµ­ì¸ ì „í˜• ì—¬ë¶€ í™•ì¸ì´ë¼ëŠ” <strong>ìƒíƒœ ì²˜ë¦¬ë¥¼ ë¡œì»¬ì—ì„œ ìˆ˜í–‰í•˜ê³  ì™¸ë¶€ë¡œë¶€í„° ë³´í˜¸í•˜ê³  ìˆ¨ê¸°ê³  ìˆë‹¤.</strong> </p><p>ë§ì´ ë“¤ì–´ë³¸ ì–˜ê¸° ì•„ë‹Œê°€? ë°”ë¡œ ì•¨ëŸ° ì¼€ì´ê°€ ê°•ì¡°í–ˆë˜ 3ê°€ì§€ ì¤‘ 2ë²ˆ í•­ëª©ì´ë‹¤. ì´ë ‡ê²Œ ì‘ì—…ì„ ìš”ì²­í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°”ê¾¸ê³  ë‚˜ë‹ˆ ì™¸êµ­ì¸ ì „í˜•ì´ í›„ê¸°, ìˆ˜ì‹œë¡œ ì¶”ê°€ëœë‹¤ í•˜ë”ë¼ë„ <code>isForeignAdmission()</code>ì˜ <strong>ë‚´ë¶€ êµ¬í˜„ë§Œ ë°”ë€”ë¿ ì‘ì—…ì„ ìš”ì²­í•˜ëŠ” <code>application.isForeignAdmission()</code> ì´ ì½”ë“œëŠ” ë°”ë€” í•„ìš”ê°€ ì—†ë‹¤.</strong> <strong>ë”°ë¼ì„œ ë‚´ë¶€ êµ¬í˜„ë„ â€˜Fâ€™, â€˜Gâ€™, â€˜Hâ€™ ê°™ì€ ë¬¸ì ì½”ë“œ ëŒ€ì‹  <code>enum</code>ì„ ì“°ëŠ” ë“± ë” ë‚˜ì€ ë¡œì§ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆëŠ” ììœ ë¥¼ ì–»ê²Œ ëœë‹¤.</strong></p><p>ì´ë ‡ê²Œ <strong>ë°ì´í„°ë¥¼ ìš”êµ¬í•˜ëŠ” ë©”ì„œë“œ í˜¸ì¶œì´ ì•„ë‹ˆë¼ ì‘ì—…ì„ ìš”ì²­í•˜ëŠ” ë©”ì„œë“œ í˜¸ì¶œì´ ë°”ë¡œ ê°ì²´ ì§€í–¥ì´ë€ ìš©ì–´ë¥¼ ë§Œë“  ì•¨ëŸ° ì¼€ì´ê°€ ê°€ì¥ ê°•ì¡°í•˜ê³  ì‹¶ì—ˆë˜ ë©”ì‹œì§•</strong>ì´ ì•„ë‹ê¹Œ?</p><hr><p>ì—­ì‹œë‚˜ í—ˆì ‘í•˜ê²Œë¼ë„ ì¨ì„œ ì˜¬ë ¤ì•¼ í”¼ë“œë°±ì„ í†µí•´ ë” ì•Œê²Œ ëœë‹¤. í† ë¹„ë‹˜ì´ ì•¨ëŸ° ì¼€ì´ì˜ ê°•ì—° ì˜ìƒ ìœ íŠœë¸Œ ë§í¬ë¥¼ ì•Œë ¤ì£¼ì…¨ë‹¤.</p><p>(ë¬¼ë¡  ì—¬ì „íˆ í‹€ë¦´ ìˆ˜ë„ ìˆë‹¤ëŠ” ì „ì œí•˜ì—) ê²°ë¡ ë¶€í„° ë§í•˜ë©´ <strong>ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì—ì„œì˜ ë©”ì‹œì§•ì€ ê·¸ëƒ¥ ì¼ë°˜ ëª…ì‚¬ì¸ ë©”ì‹œì§€ ì£¼ê³  ë°›ê¸°ë¼ê³  ë´ë„ ë¬´ë°©í•œ ê²ƒ ê°™ë‹¤.</strong></p><p>ì „ì²´ì ìœ¼ë¡œ 3ì‹œê°„ ê°€ê¹Œìš´ ë¶„ëŸ‰ì¸ë°, ì´ ê¸€ê³¼ ê´€ë ¨ìˆëŠ” ë¶€ë¶„ì€ <a href="https://youtu.be/QjJaFG63Hlo?t=3752" target="_blank" rel="noopener">https://youtu.be/QjJaFG63Hlo?t=3752</a> ì—¬ê¸°ì„œë¶€í„° ë³´ë©´ ëœë‹¤.</p><p>ì¼ë‹¨ ì•¨ëŸ° ì¼€ì´ëŠ” ë‚˜ê°™ì€ ì™¸êµ­ì¸ì´ ì•Œì•„ë“£ê¸°ì— ì‰¬ìš´ ì–´íˆ¬ë¥¼ ê°€ì§„ ì‚¬ëŒì€ ì•„ë‹Œ ê²ƒ ê°™ë‹¤ ã… ã…œ. ë¬¸ì¥ì´ë‚˜ ë§ì„ ëª…ë£Œí•˜ê²Œ ë”±ë”± ëŠëŠ” ê²ƒë„ ì•„ë‹ˆê³  ë°œìŒë„ ì‚´ì§ ë­‰ê°œëŠ” ë¶€ë¶„ë„ ë§ì•„ì„œ, ì§€ê¸ˆì²˜ëŸ¼ í•˜ë‚˜ë„ ë‚¨ê¹€ ì—†ì´ ì™„ë²½í•˜ê²Œ ë“¤ìœ¼ë ¤ê³  í•˜ë©´ ì¢Œì ˆìŠ¤ëŸ¬ìš¸ ë¿ì´ë‹¤. ê²Œë‹¤ê°€ ë‚˜ëŠ” ìŠ¤ëª°í†¡ì„ ì „í˜€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ì •í™•í•˜ê²Œ í•´ì„í•œ ê²ƒì¸ì§€ë„ ì‚¬ì‹¤ ìì‹  ì—†ë‹¤. </p><p>ì˜ìƒì„ ë³´ë©´ <strong>ë©”ì„œë“œë¥¼ ê°ì²´ ë‚´ë¶€ì— ì¡´ì¬í•˜ë©´ì„œ ì™¸ë¶€ì˜ ë©”ì‹œì§€ì™€ ëŒ€ì‘í•˜ëŠ” ê²ƒìœ¼ë¡œ ì„¤ëª…</strong>í•˜ê³  ìˆëŠ”ë°, â€˜ëŒ€ì‘í•˜ëŠ”(corresponding) ê²ƒâ€™ì´ë¼ëŠ” ëª¨í˜¸í•œ ë§ì„ â€˜ë°›ì€ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° í•„ìš”í•œ ê²ƒâ€™ì´ë¼ê³  êµ¬ì²´ì ìœ¼ë¡œ í•´ì„í•œë‹¤ê³  í•´ë„, <strong>ë°›ì€ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë©”ì‹œì§€ë¥¼ ë°›ì€ ê°ì²´ê°€ ì•Œì•„ì„œ í•˜ëŠ” ê²ƒì¼ ë¿, ë©”ì‹œì§• ìì²´ë¥¼ ë©”ì„œë“œ í˜¸ì¶œê³¼ ì§ì ‘ ê´€ë ¨ì§€ì„ í•„ìš”ì¡°ì°¨ ì—†ëŠ” ê±¸ë¡œ ë³´ì¸ë‹¤.</strong></p><p>ê·¸ë¦¬ê³  ë©”ì‹œì§€ì— ë©”ì„œë“œê°€ ì•„ë‹Œ ë‹¨ìˆœí•œ ë°ì´í„°ë„ ëŒ€ì‘ëœë‹¤ê³  ê·¸ë¦¼ê³¼ í•¨ê»˜ ì„¤ëª…í•˜ê³  ìˆìœ¼ë¯€ë¡œ, <strong>ë‹¨ìˆœíˆ ë°ì´í„°ë¥¼ ìš”êµ¬í•˜ëŠ” ê²ƒë„ ì•¨ëŸ° ì¼€ì´ê°€ ë§í•˜ëŠ” ë©”ì‹œì§•ì— í•´ë‹¹ëœë‹¤</strong>ëŠ” ì ì´ë‹¤.</p><p>ë©”ì‹œì§•ì„ ë©”ì„œë“œ í˜¸ì¶œì´ë¼ê³  ë³¼ ìˆ˜ë„ ì—†ê³ , ë‹¨ìˆœíˆ ë°ì´í„°ë¥¼ ìš”êµ¬í•˜ëŠ” ê²ƒë„ ë©”ì‹œì§•ì— í•´ë‹¹ëœë‹¤ë©´ ë©”ì‹œì§•ì€ ê·¸ëƒ¥ ë©”ì‹œì§€ ì£¼ê³  ë°›ê¸°ë¼ëŠ” ëœ» ì´ìƒë„ ì´í•˜ë„ ì•„ë‹ˆë¼ëŠ” ìƒê°ì´ë‹¤.</p><p>ì´ ê²°ë¡ ì´ í‹€ë ¸ë‹¤ê³  ìƒê°í•˜ëŠ” ë¶„ë“¤ì€ ìœ„ ë§í¬ë¥¼ í´ë¦­í•´ì„œ ì§ì ‘ ë³´ì‹œê³  ì¢‹ì€ ì˜ê²¬ ë‚˜ëˆ ì£¼ì‹œë©´ ì •ë§ ê°ì‚¬í•˜ê² ë‹¤.</p><p>ì´ì œ ì˜ìƒ ì£¼ìš” ë¶€ë¶„ í›„ê¸°ë¥¼ ë‚¨ê¸°ë©´ì„œ ì•Œê³  ë³´ë‹ˆ ë³„ ê±´ë”ê¸° ì—†ëŠ” ì£¼ì œê°€ ë¼ë²„ë¦° ê¸€ì„ ë§ˆë¬´ë¦¬ì§€ì–´ ë²„ë¦¬ì.</p><p>ì•„ ê±´ì§„ ê²ƒë„ ìˆë‹¤. <strong>ì›ì¡°ì¸ ì•¨ëŸ° ì¼€ì´ê°€ ë§í•˜ëŠ” ë©”ì„œë“œëŠ” ìë°”ì—ì„œ ë§í•˜ëŠ” ë©”ì„œë“œì™€ëŠ” ë‹¤ë¥´ë‹¤</strong>ëŠ” ê±¸ ì•Œê²Œ ëë‹¤. ê·¸ëŸ¬ë‹ˆ <strong>ê°ì²´ ì§€í–¥ì„ ìë°” ë²„ì „ìœ¼ë¡œ í•´ì„í•  ìˆ˜ëŠ” ìˆê² ì§€ë§Œ, ê°ì²´ ì§€í–¥ì„ ìë°” ê´€ì ìœ¼ë¡œë§Œ íŒë‹¨í•˜ë ¤ëŠ” ì¼ì€ ê²½ê³„í•´ì•¼ í•œë‹¤.</strong></p><p><img src="https://i.imgur.com/9tAlz01.png" alt="Imgur"></p><p>ìœ„ ìº¡ì²˜ëŠ” ì•¨ëŸ° ì¼€ì´ê°€ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì„ ì„¤ëª…í•˜ë©´ì„œ ê·¸ë¦° ê·¸ë¦¼ì´ë‹¤.</p><p>ê·¸ë¦° ìˆœì„œëŒ€ë¡œ ê° ìš”ì†Œì— ëŒ€í•œ ì„¤ëª…ì„ ì§šì–´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ol><li>ê°€ì¥ ë¨¼ì € ë°©ìš¸ ëª¨ì–‘ì˜ í…Œë‘ë¦¬ë¥¼ ê·¸ë ¤ì„œ ë‚´ë¶€ì™€ ì™¸ë¶€ë¥¼ ë¶„ë¦¬(separate)í–ˆê³ ,</li><li>í…Œë‘ë¦¬ì˜ ë°”ê¹¥ìª½ì— ì‘ë‹µ ëŒ€ìƒì¸ ë©”ì‹œì§€(message)ë¥¼ ê·¸ë ¸ê³ ,</li><li>í…Œë‘ë¦¬ì˜ ì•ˆìª½ì— ë©”ì‹œì§€ì™€ ì§ì ‘ ëŒ€ì‘ë˜ëŠ” ë©”ì„œë“œ(method)ë¥¼ ê·¸ë ¸ê³ ,</li><li>í…Œë‘ë¦¬ì˜ ì•ˆìª½ì— ë©”ì‹œì§€ì™€ ì§ì ‘ ëŒ€ì‘ë˜ëŠ” ë°ì´í„° êµ¬ì¡°ë¥¼ ì‘ì€ ì ìœ¼ë¡œ ê·¸ë ¸ê³ ,</li><li>í…Œë‘ë¦¬ì˜ ì•ˆìª½ì— ë©”ì‹œì§€ì™€ ì§ì ‘ ëŒ€ì‘ë˜ì§€ëŠ” ì•ŠëŠ” ë©”ì„œë“œë¥¼ ê·¸ë ¸ê³ ,</li><li>ë§ˆì§€ë§‰ìœ¼ë¡œ (ì™¸ë¶€ì˜) í”„ë¡œí† ì½œê³¼ (ë‚´ë¶€ì˜) ë©”ì„œë“œë¥¼ ë¶„ë¦¬(separate)í–ˆë‹¤.</li></ol><p>ì•ˆíƒ€ê¹ì§€ë§Œ ì—¬ê¸°ì—ì„œë„ ë©”ì‹œì§€ì— ëŒ€í•œ ì§ì ‘ì ì´ê³  ëª…í™•í•œ ì„¤ëª…ì€ ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤. ì•„ë‹ˆ ë“¤ë¦¬ì§€ ì•Šì•˜ë‹¤. <code>messages that we are willing to respond to</code>ë¼ë©° â€˜ì‘ë‹µ ëŒ€ìƒì´ ë˜ëŠ”â€™ì´ë¼ëŠ” ìˆ˜ì‹ì–´ë¥¼ ë¶™ì¼ ë¿ì´ê³ , <code>in effect, some of the messages that the object might be able to receive aren&#39;t directly characterized in terms of some outside protocols</code>ë¼ë©° â€˜ë©”ì‹œì§€ê°€ ì™¸ë¶€ì˜ í”„ë¡œí† ì½œì— ì˜í•´ íŠ¹ì§•ì§€ì–´ì§€ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤â€™ë¼ëŠ” ì• ë§¤í•œ ë¶€ì—° ì„¤ëª…ì´ ìˆì„ ë¿ì´ë‹¤.</p><p>ì˜ìƒì„ ë³´ê¸° ì „ì—ëŠ” ê°ì²´ ì§€í–¥ì€ ë°ì´í„°ë¥¼ ìš”êµ¬í•˜ëŠ” ëŒ€ì‹  ì‘ì—…ì„ ìš”ì²­í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ê³ , ì•¨ëŸ° ì¼€ì´ê°€ ë©”ì‹œì§•ì„ ê·¸í† ë¡ ê°•ì¡°í•œ ê²ƒê³¼ ì—°ê²°ì§€ìœ¼ë©´ ë©”ì‹œì§•ì€ ì‘ì—…ì„ ìš”ì²­í•˜ëŠ” ë©”ì„œë“œ í˜¸ì¶œì¼ ê²ƒì´ë¼ê³  ê²°ë¡ ì§€ì—ˆë‹¤. ê·¸ëŸ°ë° ì•¨ëŸ° ì¼€ì´ëŠ” ìœ„ ê·¸ë¦¼ì„ ì„¤ëª…í•˜ë©´ì„œ ë©”ì‹œì§€ëŠ” ê°ì²´ ë‚´ë¶€ì˜ ë°ì´í„°ì— ëŒ€ì‘ë˜ê¸°ë„ í•œë‹¤ê³  ë¶„ëª…íˆ ë§í•˜ê³  ìˆë‹¤.</p><p>ê²°êµ­ ë©”ì‹œì§•ì´ íŠ¹íˆ ê°•ì¡°ë˜ê¸´ í–ˆì§€ë§Œ ì•¨ëŸ° ì¼€ì´ì˜ ê¸€ì´ë‚˜ ê°•ì—°ì—ì„œ ë©”ì‹œì§• ìì²´ì— ëŒ€í•œ êµ¬ì²´ì ì¸ ì„¤ëª…ì„ ì°¾ê¸° ì–´ë ¤ì› ë˜ ì´ìœ ëŠ”, ë©”ì‹œì§•ì´ ê·¸ëƒ¥ ì¼ë°˜ ëª…ì‚¬ì˜ ì˜ë¯¸ë¼ì„œ ë³„ë„ì˜ ì„¤ëª…ì´ í•„ìš”í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì¸ ê²ƒ ê°™ë‹¤.</p><p><strong>ë©”ì‹œì§• ìì²´ì˜ ì˜ë¯¸ê°€ ì¤‘ìš”í•œ ê²ƒì´ ì•„ë‹ˆë¼, ë‚´/ì™¸ë¶€ë¥¼ ë¶„ë¦¬í•˜ê³  ë¶„ë¦¬ëœ ê°ì²´ë¼ë¦¬ ìƒëŒ€ë°©ì˜ ë‚´ë¶€ëŠ” ëª¨ë¥´ëŠ” ì±„ë¡œ ì˜ì‚¬ì†Œí†µí•´ì•¼ ë³µì¡ì„±ì„ ë‚®ì¶œ ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ë©”ì‹œì§•ì„ ê°•ì¡°í•œ ê²ƒ ê°™ë‹¤.</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ê°ì²´-ì§€í–¥-í”„ë¡œê·¸ë˜ë°ê³¼-ë©”ì‹œì§•&quot;&gt;&lt;a href=&quot;#ê°ì²´-ì§€í–¥-í”„ë¡œê·¸ë˜ë°ê³¼-ë©”ì‹œì§•&quot; class=&quot;headerlink&quot; title=&quot;ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ê³¼ ë©”ì‹œì§•&quot;&gt;&lt;/a&gt;ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ê³¼ ë©”ì‹œì§•&lt;/h1&gt;&lt;p&gt;ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì—ì„œ 
      
    
    </summary>
    
      <category term="Concepts" scheme="http://homoefficio.github.io/categories/Concepts/"/>
    
    
      <category term="Object Oriented Programming" scheme="http://homoefficio.github.io/tags/Object-Oriented-Programming/"/>
    
      <category term="OOP" scheme="http://homoefficio.github.io/tags/OOP/"/>
    
      <category term="Object Oriented" scheme="http://homoefficio.github.io/tags/Object-Oriented/"/>
    
      <category term="Messaging" scheme="http://homoefficio.github.io/tags/Messaging/"/>
    
      <category term="Allen Kay" scheme="http://homoefficio.github.io/tags/Allen-Kay/"/>
    
      <category term="ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°" scheme="http://homoefficio.github.io/tags/%EA%B0%9D%EC%B2%B4-%EC%A7%80%ED%96%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/"/>
    
      <category term="ê°ì²´ ì§€í–¥" scheme="http://homoefficio.github.io/tags/%EA%B0%9D%EC%B2%B4-%EC%A7%80%ED%96%A5/"/>
    
      <category term="ë©”ì‹œì§•" scheme="http://homoefficio.github.io/tags/%EB%A9%94%EC%8B%9C%EC%A7%95/"/>
    
      <category term="ì•¨ëŸ° ì¼€ì´" scheme="http://homoefficio.github.io/tags/%EC%95%A8%EB%9F%B0-%EC%BC%80%EC%9D%B4/"/>
    
  </entry>
  
  <entry>
    <title>ì¬ë¯¸ë¡œ ë³´ëŠ” ì–¸ì–´ë³„ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ë¹„êµ</title>
    <link href="http://homoefficio.github.io/2019/05/08/%EC%9E%AC%EB%AF%B8%EB%A1%9C-%EB%B3%B4%EB%8A%94-%EC%96%B8%EC%96%B4%EB%B3%84-%EC%8A%A4%ED%8A%B8%EB%A6%BC-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/"/>
    <id>http://homoefficio.github.io/2019/05/08/ì¬ë¯¸ë¡œ-ë³´ëŠ”-ì–¸ì–´ë³„-ìŠ¤íŠ¸ë¦¼-ì²˜ë¦¬-ë¹„êµ/</id>
    <published>2019-05-08T13:32:35.000Z</published>
    <updated>2019-05-09T11:30:32.488Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ì¬ë¯¸ë¡œ-ë³´ëŠ”-ì–¸ì–´ë³„-ìŠ¤íŠ¸ë¦¼-ì²˜ë¦¬-ë¹„êµ"><a href="#ì¬ë¯¸ë¡œ-ë³´ëŠ”-ì–¸ì–´ë³„-ìŠ¤íŠ¸ë¦¼-ì²˜ë¦¬-ë¹„êµ" class="headerlink" title="ì¬ë¯¸ë¡œ ë³´ëŠ” ì–¸ì–´ë³„ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ë¹„êµ"></a>ì¬ë¯¸ë¡œ ë³´ëŠ” ì–¸ì–´ë³„ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ë¹„êµ</h1><p>NBAë¥¼ ì¦ê²¨ë³´ëŠ”ë° ê°‘ìê¸° ì—­ëŒ€ MVPê°€ ê¶ê¸ˆí•´ì„œ ì°¾ì•„ë³´ë‹ˆ <a href="https://www.nba.com/history/awards/mvp" target="_blank" rel="noopener">https://www.nba.com/history/awards/mvp</a> ì—¬ê¸°ì—ì„œ ë³¼ ìˆ˜ ìˆì—ˆë‹¤. ì—°ë„ë³„ë¡œ ì£¼ìš± ë‚˜ì—´ë˜ì–´ ìˆëŠ”ë° <strong>ìˆ˜ìƒíšŸìˆ˜ ê¸°ì¤€ìœ¼ë¡œ ì§‘ê³„í•´ì„œ ë‚´ë¦¼ì°¨ìˆœ</strong>ìœ¼ë¡œ ë³´ê³  ì‹¶ì—ˆë‹¤.</p><p>ê·¸ë˜ì„œ ì—°ìŠµë„ í•  ê²¸ ìë°”ë¡œ ë¨¼ì € ì§œë´¤ëŠ”ë° ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì§œì£¼ì‹  ë¶„ë“¤ë„ ê³„ì…”ì„œ <strong>ì¬ë¯¸ë¡œ ë¹„êµ</strong>ë¥¼ í•´ë³´ë ¤ í•œë‹¤. ì–¸ì–´ì˜ ì „ë°˜ì ì¸ ìš°ì—´ì„ ê°€ë¦¬ëŠ” ëª©ì ì´ ì „í˜€ ì•„ë‹ˆë¯€ë¡œ êµ¬ê²½í•˜ëŠ” ì¬ë¯¸ë¡œë§Œ ì°¸ê³ í•˜ë©´ ì¢‹ê² ë‹¤.</p><p>ìë°” ì™¸ì— ë‹¤ë¥¸ ì–¸ì–´ì— ëŒ€í•œ ì§€ì‹ì´ ë§ì§€ ì•Šìœ¼ë¯€ë¡œ ì˜ëª»ëœ ì •ë³´ê°€ í¬í•¨ë  ìˆ˜ë„ ìˆìœ¼ë©° ì´ ë¶€ë¶„ì€ ëŒ“ê¸€ë¡œ ë°”ë¡œì¡ì•„ì£¼ì‹œë©´ ì •ë§ ê°ì‚¬ë“œë¦¬ë©° ë°”ë¡œ ë°˜ì˜í•˜ê² ë‹¤.</p><p>ì ì´ì œ ì‹œì‘í•´ë³´ì. ì—°ë„ë³„ NBA MVP ëª…ë‹¨ ë°ì´í„°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">String MVPS = <span class="string">""</span> +</span><br><span class="line">            <span class="string">"2017-18     James Harden, Houston Rockets (Voting)\n"</span> +</span><br><span class="line">            <span class="string">"2016-17     Russell Westbrook, Oklahoma City Thunder (Voting)\n"</span> +</span><br><span class="line">            <span class="string">"2015-16     Stephen Curry, Golden State Warriors (Voting)\n"</span> +</span><br><span class="line">            <span class="string">"2014-15     Stephen Curry, Golden State Warriors\n"</span> +</span><br><span class="line">            <span class="string">"2013-14     Kevin Durant, Oklahoma City Thunder\n"</span> +</span><br><span class="line">            <span class="string">"2012-13     LeBron James, Miami Heat\n"</span> +</span><br><span class="line">            <span class="string">"2011-12     LeBron James, Miami Heat\n"</span> +</span><br><span class="line">            <span class="string">"2010-11     Derrick Rose, Chicago Bulls\n"</span> +</span><br><span class="line">            <span class="string">"2009-10     LeBron James, Cleveland Cavaliers\n"</span> +</span><br><span class="line">            <span class="string">"2008-09     LeBron James, Cleveland Cavaliers\n"</span> +</span><br><span class="line">            <span class="string">"2007-08     Kobe Bryant, Los Angeles Lakers\n"</span> +</span><br><span class="line">            <span class="string">"2006-07     Dirk Nowitzki, Dallas Mavericks\n"</span> +</span><br><span class="line">            <span class="string">"2005-06     Steve Nash, Phoenix Suns\n"</span> +</span><br><span class="line">            <span class="string">"2004-05     Steve Nash, Phoenix Suns\n"</span> +</span><br><span class="line">            <span class="string">"2003-04     Kevin Garnett, Minnesota Timberwolves\n"</span> +</span><br><span class="line">            <span class="string">"2002-03     Tim Duncan, San Antonio Spurs\n"</span> +</span><br><span class="line">            <span class="string">"2001-02     Tim Duncan, San Antonio Spurs\n"</span> +</span><br><span class="line">            <span class="string">"2000-01     Allen Iverson, Philadelphia 76ers\n"</span> +</span><br><span class="line">            <span class="string">"1999-00     Shaquille O'Neal, Los Angeles Lakers\n"</span> +</span><br><span class="line">            <span class="string">"1998-99     Karl Malone, Utah Jazz\n"</span> +</span><br><span class="line">            <span class="string">"1997-98     Michael Jordan, Chicago Bulls\n"</span> +</span><br><span class="line">            <span class="string">"1996-97     Karl Malone, Utah Jazz\n"</span> +</span><br><span class="line">            <span class="string">"1995-96     Michael Jordan, Chicago Bulls\n"</span> +</span><br><span class="line">            <span class="string">"1994-95     David Robinson, San Antonio Spurs\n"</span> +</span><br><span class="line">            <span class="string">"1993-94     Hakeem Olajuwon, Houston Rockets\n"</span> +</span><br><span class="line">            <span class="string">"1992-93     Charles Barkley, Phoenix Suns\n"</span> +</span><br><span class="line">            <span class="string">"1991-92     Michael Jordan, Chicago Bulls\n"</span> +</span><br><span class="line">            <span class="string">"1990-91     Michael Jordan, Chicago Bulls\n"</span> +</span><br><span class="line">            <span class="string">"1989-90     Magic Johnson, Los Angeles Lakers\n"</span> +</span><br><span class="line">            <span class="string">"1988-89     Magic Johnson, Los Angeles Lakers\n"</span> +</span><br><span class="line">            <span class="string">"1987-88     Michael Jordan, Chicago Bulls\n"</span> +</span><br><span class="line">            <span class="string">"1986-87     Magic Johnson, Los Angeles Lakers\n"</span> +</span><br><span class="line">            <span class="string">"1985-86     Larry Bird, Boston Celtics\n"</span> +</span><br><span class="line">            <span class="string">"1984-85     Larry Bird, Boston Celtics\n"</span> +</span><br><span class="line">            <span class="string">"1983-84     Larry Bird, Boston Celtics\n"</span> +</span><br><span class="line">            <span class="string">"1982-83     Moses Malone, Philadelphia 76ers\n"</span> +</span><br><span class="line">            <span class="string">"1981-82     Moses Malone, Houston Rockets\n"</span> +</span><br><span class="line">            <span class="string">"1980-81     Julius Erving, Philadelphia 76ers\n"</span> +</span><br><span class="line">            <span class="string">"1979-80     Kareem Abdul-Jabbar, Los Angeles Lakers\n"</span> +</span><br><span class="line">            <span class="string">"1978-79     Moses Malone, Houston Rockets\n"</span> +</span><br><span class="line">            <span class="string">"1977-78     Bill Walton, Portland Trail Blazers\n"</span> +</span><br><span class="line">            <span class="string">"1976-77     Kareem Abdul-Jabbar, Los Angeles Lakers\n"</span> +</span><br><span class="line">            <span class="string">"1975-76     Kareem Abdul-Jabbar, Los Angeles Lakers\n"</span> +</span><br><span class="line">            <span class="string">"1974-75     Bob McAdoo, Buffalo Braves\n"</span> +</span><br><span class="line">            <span class="string">"1973-74     Kareem Abdul-Jabbar, Milwaukee Bucks\n"</span> +</span><br><span class="line">            <span class="string">"1972-73     Dave Cowens, Boston Celtics\n"</span> +</span><br><span class="line">            <span class="string">"1971-72     Kareem Abdul-Jabbar, Milwaukee Bucks\n"</span> +</span><br><span class="line">            <span class="string">"1970-71     Kareem Abdul-Jabbar, Milwaukee Bucks\n"</span> +</span><br><span class="line">            <span class="string">"1969-70     Willis Reed, New York Knicks\n"</span> +</span><br><span class="line">            <span class="string">"1968-69     Wes Unseld, Baltimore Bullets\n"</span> +</span><br><span class="line">            <span class="string">"1967-68     Wilt Chamberlain, Philadelphia 76ers\n"</span> +</span><br><span class="line">            <span class="string">"1966-67     Wilt Chamberlain, Philadelphia 76ers\n"</span> +</span><br><span class="line">            <span class="string">"1965-66     Wilt Chamberlain, Philadelphia 76ers\n"</span> +</span><br><span class="line">            <span class="string">"1964-65     Bill Russell, Boston Celtics\n"</span> +</span><br><span class="line">            <span class="string">"1963-64     Oscar Robertson, Cincinnati Royals\n"</span> +</span><br><span class="line">            <span class="string">"1962-63     Bill Russell, Boston Celtics\n"</span> +</span><br><span class="line">            <span class="string">"1961-62     Bill Russell, Boston Celtics\n"</span> +</span><br><span class="line">            <span class="string">"1960-61     Bill Russell, Boston Celtics\n"</span> +</span><br><span class="line">            <span class="string">"1959-60     Wilt Chamberlain, Philadelphia Warriors\n"</span> +</span><br><span class="line">            <span class="string">"1958-59     Bob Pettit, St. Louis Hawks\n"</span> +</span><br><span class="line">            <span class="string">"1957-58     Bill Russell, Boston Celtics\n"</span> +</span><br><span class="line">            <span class="string">"1956-57     Bob Cousy, Boston Celtics\n"</span> +</span><br><span class="line">            <span class="string">"1955-56     Bob Pettit, St. Louis Hawks"</span>;</span><br></pre></td></tr></table></figure><h1 id="êµ¬í˜„-ë¹„êµ"><a href="#êµ¬í˜„-ë¹„êµ" class="headerlink" title="êµ¬í˜„ ë¹„êµ"></a>êµ¬í˜„ ë¹„êµ</h1><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><p>Java 8ì˜ Stream APIë¥¼ í™œìš©í•´ì„œ ì‘ì„±í•œ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    String[] lines = MVPS.split(<span class="string">"\\n"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> mvpCount = Stream.of(lines)</span><br><span class="line">            .collect(groupingBy(line -&gt; line.substring(<span class="number">12</span>, line.indexOf(<span class="string">','</span>)), counting()))</span><br><span class="line">            .entrySet().stream()</span><br><span class="line">            .sorted(comparingByValue(reverseOrder()))</span><br><span class="line">            .peek(e -&gt; out.println(e.getKey() + <span class="string">": "</span> + e.getValue()))</span><br><span class="line">            .mapToLong(Map.Entry::getValue)</span><br><span class="line">            .sum();</span><br><span class="line"></span><br><span class="line">    out.println(lines.length == mvpCount);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>í° íë¦„ì€ <code>í‚¤(ì„ ìˆ˜ ì´ë¦„) ì¶”ì¶œ</code>, <code>groupBy</code>, <code>ìˆ˜ìƒíšŸìˆ˜ ì§‘ê³„</code>, <code>ì •ë ¬</code>, <code>ì¶œë ¥</code>, <code>ì „ì²´ í•©ê³„</code>ë¡œ êµ¬ì„±ëœë‹¤.</p><p><strong>ìë°”ì—ëŠ” íŠœí”Œì´ ì—†ë‹¤.</strong> ê·¸ë˜ì„œ <code>groupingBy()</code>ì˜ ê²°ê³¼ëŠ” Mapìœ¼ë¡œ collectë˜ê³  ì´ ê³¼ì •ì—ì„œ ìµœì´ˆì˜ ìŠ¤íŠ¸ë¦¼ì´ ì¢…ê²°ëœë‹¤. ê·¸ë¦¬ê³  Mapì—ì„œ <code>entrySet().stream()</code>ì„ í†µí•´ ìƒˆ ìŠ¤íŠ¸ë¦¼ì„ ë§Œë“¤ê³  ì •ë ¬, ì¶œë ¥, í•©ê³„ ë“±ì„ ì²˜ë¦¬í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ <code>ìˆ˜ìƒíšŸìˆ˜ ì§‘ê³„</code>ì™€ <code>ì •ë ¬</code> ì‚¬ì´ì— ìŠ¤íŠ¸ë¦¼ ìƒì„±ì´ í•˜ë‚˜ ì¶”ê°€ëœë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.</p><p>ê°’(MVP ìˆ˜ìƒíšŸìˆ˜) ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ì€ <code>.sorted(comparingByValue(reverseOrder()))</code>ë¡œ ê¹”ë”í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ëŠ” ìˆì§€ë§Œ ì¡°ê¸ˆ ì¥í™©í•´ë³´ì´ê¸°ë„ í•˜ë‹¤. ì•ìœ¼ë¡œ ì‚´í´ë³¼ ë‹¤ë¥¸ ì–¸ì–´ êµ¬í˜„ì²´ì™€ ë¹„êµí•˜ë©´ ì‹¤ì œë¡œë„ ì¢€ ê¸¸ê¸´ í•˜ë‹¤.</p><p><code>peek()</code>ì´ ìˆì–´ì„œ ìŠ¤íŠ¸ë¦¼ì˜ ë°ì´í„°ë¥¼ ì™„ì „ ì†Œë¹„(consume)í•˜ì§€ ì•Šìœ¼ë©´ì„œë„ ì¶œë ¥í•  ìˆ˜ ìˆì–´ì„œ, ì¶œë ¥ê³¼ í•©ê³„ë¥¼ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.</p><blockquote><p>í•œ ì¤„ í‰: Stream API ë•ì— ê¹”ë”í•œ êµ¬ì¡°ë¡œ ì‘ì„±í•  ìˆ˜ ìˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ë©”ì„œë“œ ì´ë¦„ì´ ê¸¸ì–´ì„œ ì „ë°˜ì ìœ¼ë¡œ ì¥í™©í•´ë³´ì¸ë‹¤.</p></blockquote><h2 id="Scala"><a href="#Scala" class="headerlink" title="Scala"></a>Scala</h2><p>ìŠ¤ì¹¼ë¼ ë²„ì „ì€ <strong>Kevin Lee ë‹˜</strong>ê»˜ì„œ ì‘ì„±í•´ì£¼ì‹  ê±¸ ì‚´ì§ ë‹¤ë“¬ì—ˆë‹¤.</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> lines = <span class="type">MVPS</span>.split(<span class="string">"\n"</span>)</span><br><span class="line"><span class="keyword">val</span> mvpList = lines</span><br><span class="line">  .groupBy(_.drop(<span class="number">12</span>).takeWhile(_ != ','))  </span><br><span class="line">  .mapValues(_.size)</span><br><span class="line">  .toList</span><br><span class="line">  .sortBy(_._2)(<span class="type">Ordering</span>.<span class="type">Int</span>.reverse)</span><br><span class="line"></span><br><span class="line">println(mvpList.map &#123; <span class="keyword">case</span> (name, count) =&gt; <span class="string">s"<span class="subst">$name</span>: <span class="subst">$count</span>"</span> &#125;.mkString(<span class="string">"\n"</span>))</span><br><span class="line">println(lines.size == mvpList.map(_._2).sum)</span><br></pre></td></tr></table></figure><p>ìŠ¤ì¹¼ë¼ì—ì„œë„ í° íë¦„ì€ <code>í‚¤(ì„ ìˆ˜ ì´ë¦„) ì¶”ì¶œ</code>, <code>groupBy</code>, <code>ìˆ˜ìƒíšŸìˆ˜ ì§‘ê³„</code>, <code>ì •ë ¬</code>, <code>ì¶œë ¥</code>, <code>ì „ì²´ í•©ê³„</code>ë¡œ ë‹¬ë¼ì§„ ê²ƒì€ ì—†ë‹¤. </p><p>í‚¤ ì¶”ì¶œì´ ìë°”ì™€ ì¡°ê¸ˆ ë‹¤ë¥´ê²Œ êµ¬í˜„ë˜ì—ˆì§€ë§Œ ì¥í™©í•œ ì ì€ ë¹„ìŠ·í•´ ë³´ì´ê³ , ìë°”ì˜ <code>groupingBy()</code>ì—ì„œ í‚¤ ë³„ ë¶„ë¥˜ì™€ ìˆ˜ìƒíšŸìˆ˜ ì§‘ê³„ë¥¼ í•¨ê»˜ ì²˜ë¦¬í•  ìˆ˜ ìˆì—ˆì§€ë§Œ, ìŠ¤ì¹¼ë¼ì˜ <code>groupBy()</code>ëŠ” í‚¤ ë³„ ë¶„ë¥˜ë§Œ ê°€ëŠ¥í•˜ê³  ìˆ˜ìƒíšŸìˆ˜ì˜ ì§‘ê³„ëŠ” <code>mapValues(_.size)</code>ë¥¼ í†µí•´ ë”°ë¡œ ì²˜ë¦¬í•˜ëŠ” ì ì´ ë‹¤ë¥´ë‹¤.</p><p>ì •ë ¬í•˜ê¸° ì „ì— ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“œëŠ” ê³¼ì •(<code>toList</code>)ì´ í•˜ë‚˜ ì¶”ê°€ë˜ëŠ” ê²ƒë„ ì ˆì°¨ìƒìœ¼ë¡œëŠ” <code>entrySet().stream()</code>ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¼ì„ ìƒˆë¡œ ë§Œë“œëŠ” ìë°”ì™€ ë¹„ìŠ·í•˜ê³ , ì •ë ¬ ê³¼ì •ë„ ìë°”ì™€ ë¹„ìŠ·í•˜ë‹¤. </p><p><strong><code>(_.drop(12))</code>, <code>(_.size)</code>, <code>(_._2)</code> ê°™ì€ í‘œí˜„ë²•ìœ¼ë¡œ <code>-&gt;</code> ì—†ì´ë„ ëŒë‹¤ì‹ì„ í‘œí˜„í•  ìˆ˜ ìˆê³ , <code>getKey()</code>, <code>getValue()</code> ëŒ€ì‹  <code>._1</code>, <code>._2</code>ë¡œ ì§§ê²Œ í‘œí˜„í•  ìˆ˜ ìˆì–´ì„œ ë¹„ìŠ·í•œ êµ¬ì¡°ì„ì—ë„ ìë°”ë³´ë‹¤ í›¨ì”¬ ê°„ê²°í•´ë³´ì¸ë‹¤.</strong> í•˜ì§€ë§Œ <code>_</code>ë¥¼ ì“°ì§€ ì•ŠëŠ”ë‹¤ë©´ <code>map { case (name, count) =&gt; ... }</code>ì—ì„œì²˜ëŸ¼ <code>=&gt;</code>ë¿ ì•„ë‹ˆë¼ <code>case</code>ë„ ë‚˜ì˜¤ë©´ì„œ ì¡°ê¸ˆ ë³µì¡í•´ì§„ë‹¤.</p><p>ìë°”ì˜ <code>peek()</code> ê°™ì€ ë©”ì„œë“œê°€ ì—†ì–´ì„œì¸ì§€ ì¶œë ¥ê³¼ ì „ì²´ í•©ê³„ë¥¼ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ê³  ë³„ë„ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒë„ ë‹¤ë¥´ë‹¤.</p><blockquote><p>í•œ ì¤„ í‰: <code>_</code>ë¥¼ ì˜ ì“°ë©´ ìë°”ë³´ë‹¤ í›¨ì”¬ ê°„ê²°í•˜ê²Œ ì§¤ ìˆ˜ ìˆë‹¤.</p></blockquote><h2 id="Kotlin"><a href="#Kotlin" class="headerlink" title="Kotlin"></a>Kotlin</h2><p>ì½”í‹€ë¦° ë²„ì „ì€ <strong>ë¶€ì¢…ë¯¼ ë‹˜</strong>ê»˜ì„œ ì§œì£¼ì‹  ê±¸ ì‚´ì§ ê°œì„ í•´ë´¤ë‹¤.</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> lines = MVPS.split(<span class="string">"\n"</span>)</span><br><span class="line">    <span class="keyword">val</span> totalCount = lines</span><br><span class="line">        .groupingBy &#123; it.substring(<span class="number">12</span>, it.indexOf(<span class="string">','</span>)) &#125;</span><br><span class="line">        .eachCount()</span><br><span class="line">        .toList()</span><br><span class="line">        .sortedByDescending &#123; it.second &#125;</span><br><span class="line">        .onEach &#123; println(it) &#125;</span><br><span class="line">        .map &#123; it.second &#125;</span><br><span class="line">        .sum()</span><br><span class="line"></span><br><span class="line">    println(lines.size == totalCount)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì½”í‹€ë¦°ì€ íë¦„ì´ ìŠ¤ì¹¼ë¼ì™€ ê±°ì˜ ë™ì¼í•˜ë‹¤.</p><p><code>substring()</code>ì€ ìë°”ì™€ ë™ì¼í•˜ê³  ì›í•œë‹¤ë©´ ìŠ¤ì¹¼ë¼ì²˜ëŸ¼ <code>drop()</code>, <code>takeWhile()</code>ì„ ì“¸ ìˆ˜ë„ ìˆë‹¤.</p><p><code>groupingBy {}</code> ì—ì„œëŠ” ìŠ¤ì¹¼ë¼ì™€ ë§ˆì°¬ê°€ì§€ë¡œ í‚¤ ê¸°ì¤€ ë¶„ë¥˜ë§Œ ê°€ëŠ¥í•˜ê³  ì§‘ê³„ëŠ” <code>eachCount()</code>ë¡œ ë”°ë¡œ í•´ì¤˜ì•¼ í•œë‹¤. ì •ë ¬í•˜ê¸° ì „ì— <code>toList()</code>ë¡œ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“œëŠ” ê²ƒë„ ë™ì¼í•˜ë‹¤. </p><p>ìŠ¤ì¹¼ë¼ì— íŠœí”Œì´ ìˆë‹¤ë©´ <strong>ì½”í‹€ë¦°ì—ëŠ” <code>Pair</code>ê°€ ìˆë‹¤. ê·¸ë˜ì„œ ìë°”ì²˜ëŸ¼ <code>getKey()</code>, <code>getValue()</code> ê°™ì€ ë©”ì„œë“œë¥¼ ì“°ì§€ ì•Šê³  <code>it.first</code>, <code>it.second</code>ì™€ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ì§§ê²Œ í‘œí˜„ ê°€ëŠ¥í•˜ë‹¤.</strong> ê·¸ë˜ë„ <code>first</code>ë‚˜ <code>second</code>ë³´ë‹¤ëŠ” <code>_1</code>, <code>_2</code>ì²˜ëŸ¼ ë” ì§§ê²Œ í‘œí˜„ ê°€ëŠ¥í•œ ìŠ¤ì¹¼ë¼ ìª½ì´ ë” ë‚˜ì•„ ë³´ì¸ë‹¤.</p><p>ëŒë‹¤ì‹ì„ <code>{ }</code>ë¥¼ ì¨ì„œ ì¸ìë¡œ ë°›ëŠ” ê²ƒì—ì„œ ì•½ê°„ì˜ ì´ì§ˆê°ì´ ëŠê»´ì§€ì§€ë§Œ, <strong><code>it</code>ë¼ëŠ” built-in í‚¤ì›Œë“œë¥¼ ì¨ì„œ <code>-&gt;</code> ì—†ì´ë„ ëŒë‹¤ì‹ì„ ì§§ê²Œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ì </strong>ë„ ìŠ¤ì¹¼ë¼ì™€ ë¹„ìŠ·í•˜ë‹¤.</p><p>ìë°”ì˜ <code>peek()</code>ê³¼ ë™ì¼í•œ ì—­í• ì„ í•˜ëŠ” <code>onEach()</code>ê°€ ìˆì–´ì„œ ì¶œë ¥ê³¼ ì „ì²´ í•©ê³„ë¥¼ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ì—ì„œ ëª¨ë‘ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì€ ìŠ¤ì¹¼ë¼ì™€ ë‹¤ë¥´ë‹¤.</p><blockquote><p>í•œ ì¤„ í‰: ìŠ¤ì¹¼ë¼ì™€ ê±°ì˜ ë¹„ìŠ·í•œ ì‘ì„± ë°©ì‹ê³¼ ê°„ê²°í•¨ì„ ë³´ì—¬ì£¼ë©´ì„œë„, ìŠ¤ì¹¼ë¼ì— ì—†ëŠ” <code>onEach()</code>ë¥¼ ê°€ì§€ê³  ìˆì–´ì„œ ìë°”ì˜ ì¥ì ë„ ê°€ì§€ê³  ìˆë‹¤.</p></blockquote><h2 id="ë½•-ë§ì€-ìë°”-feat-jooL"><a href="#ë½•-ë§ì€-ìë°”-feat-jooL" class="headerlink" title="ë½• ë§ì€ ìë°”(feat. jooL)"></a>ë½• ë§ì€ ìë°”(feat. jooL)</h2><p><strong>ë°•ì„±ì²  ë‹˜</strong>ê»˜ì„œ ë°”ë‹ë¼ ìë°”ëŠ” ì“°ëŠ” ê²Œ ì•„ë‹ˆë¼ê³  í•˜ì‹œë©´ì„œ <code>jooL ë¼ì´ë¸ŒëŸ¬ë¦¬</code>(<a href="https://github.com/jOOQ/jOOL" target="_blank" rel="noopener">https://github.com/jOOQ/jOOL</a>) ë¥¼ ì‚¬ìš©í•´ì„œ ì‘ì„±í•´ì£¼ì‹  ë²„ì „ì„ ë³´ë©´ â€˜ì˜¤~~ ì´ê²Œ ì •ë…• ìë°”ë€ ë§ì”€ì…ë‹ˆê¹Œ?â€™ë€ ì†Œë¦¬ê°€ ë‚˜ì˜¬ ì •ë„ë¡œ ê°ë™ì ì´ë‹¤. ìŠ¤ì¹¼ë¼ë‚˜ ì½”í‹€ë¦°ë³´ë‹¤ ë” ê°„ê²°í•˜ë‹¤!!</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    String[] lines = MVPS.split(<span class="string">"\\n"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> mvpCount = Seq.of(lines)</span><br><span class="line">            .grouped(line -&gt; line.substring(<span class="number">12</span>, line.indexOf(<span class="string">','</span>)), counting()))</span><br><span class="line">            .sorted(t -&gt; - t.v2)</span><br><span class="line">            .peek(t -&gt; out.println(t.v1 + <span class="string">": "</span> + t.v2))</span><br><span class="line">            .sumLong(t -&gt; t.v2);</span><br><span class="line"></span><br><span class="line">    out.println(lines.length == mvpCount);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ìŠ¤ì¹¼ë¼ë‚˜ ì½”í‹€ë¦°ì²˜ëŸ¼ <strong>íŠœí”Œì´ ìˆì–´ì„œ <code>t.v2</code>ê°™ì€ ê°„ëµí•œ í‘œí˜„ì´ ê°€ëŠ¥</strong>í•´ì¡Œê³ , íŠ¹íˆ <strong>ê°’ ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ì„ <code>sorted(t -&gt; - t.v2)</code>ë¡œ ê°„ë‹¨ ëª…ë£Œí•˜ê²Œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ì ì´ ëˆˆì— ëˆë‹¤.</strong> ê·¸ë¦¬ê³  groupBy í›„ì— <code>entrySet().stream()</code>ì´ë‚˜ <code>toList</code> ì—†ì´ë„ í´ë¡œì €ì²˜ëŸ¼ ë°”ë¡œ ì •ë ¬í•  ìˆ˜ ìˆë‹¤.</p><blockquote><p>í•œ ì¤„ í‰: ë°”ë‹ë¼ ìë°”ëŠ” ì“°ëŠ” ê²Œ ì•„ë‹ˆë‹¤.</p></blockquote><h2 id="Clojure"><a href="#Clojure" class="headerlink" title="Clojure"></a>Clojure</h2><p>í´ë¡œì €ëŠ” ë²„ì „ì´ ë‘ ê°œì¸ë° <code>-&gt;&gt;</code> ë§¤í¬ë¡œë¥¼ ì‚¬ìš©í•œ ë²„ì „ì€ <strong>ë°•ìƒê·œ ë‹˜</strong>ê»˜ì„œ ë§Œë“¤ì–´ì£¼ì…¨ë‹¤.</p><p><strong>ì§§ì„ ì¤„ì€ ì•Œì•˜ì§€ë§Œ ìƒê°ë³´ë‹¤ ë” ì§§ë‹¤..</strong></p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">run!</span> prn </span><br><span class="line">    (<span class="name"><span class="builtin-name">sort-by</span></span> val &gt; </span><br><span class="line">        (<span class="name">frequencies</span> (<span class="name"><span class="builtin-name">map</span></span> #(<span class="name">subs</span> % <span class="number">12</span> (<span class="name">index-of</span> % <span class="string">","</span>)) lines))))</span><br></pre></td></tr></table></figure><p>í´ë¡œì €ëŠ” ì•ì—ì„œ ë‹¤ë£¬ ì–¸ì–´ì™€ëŠ” ì¢€ ë‹¤ë¥´ê²Œ Lisp ê³„ì—´ì˜ ì–¸ì–´ì´ë©°, í•¨ìˆ˜ì˜ chainingì´ ì•„ë‹ˆë¼ nestingì„ ì‚¬ìš©í•˜ë¯€ë¡œ <strong>ì½”ë“œì˜ íë¦„ì´ ì˜ì‹ì˜ íë¦„ì— ì—­í–‰í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì—¬ì„œ ì´ì§ˆê°ì´ ë§¤ìš° í¬ë‹¤.</strong> í•˜ì§€ë§Œ ì´ë¥¼ ë³´ì™„í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆìœ¼ë‹ˆ ë°”ë¡œ <strong><code>-&gt;&gt;</code> ë§¤í¬ë¡œ</strong>ë‹¤.</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">-&gt;&gt;</span></span> lines</span><br><span class="line">  (<span class="name"><span class="builtin-name">map</span></span> #(<span class="name">subs</span> % <span class="number">12</span> (<span class="name">index-of</span> % <span class="string">","</span>)))</span><br><span class="line">  frequencies </span><br><span class="line">  (<span class="name"><span class="builtin-name">sort-by</span></span> val &gt;)</span><br><span class="line">  (<span class="name">run!</span> prn))</span><br></pre></td></tr></table></figure><p>ì´ë ‡ê²Œ <strong><code>-&gt;&gt;</code> ë§¤í¬ë¡œë¥¼ ì‚¬ìš©í•˜ë©´ í´ë¡œì € íŠ¹ìœ ì˜ ê°„ê²°í•¨ì„ ìœ ì§€í•˜ë©´ì„œë„ ì˜ì‹ì˜ íë¦„ê³¼ ì½”ë“œ íë¦„ì˜ ë¶ˆì¼ì¹˜ë¥¼ ê·¹ë³µí•  ìˆ˜ë„ ìˆë‹¤.</strong></p><p><code>map</code>ì€ ë‹¤ë¥¸ ì–¸ì–´ì™€ ë‹¤ë¥¼ ê²Œ ì—†ë‹¤. <code>#()</code>ë¥¼ ì¨ì„œ ìµëª… í•¨ìˆ˜ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê³ , <code>%</code>ë¡œ ìµëª… í•¨ìˆ˜ì˜ ì¸ìë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ”ë° <code>%1</code>, <code>%2</code>ì™€ ê°™ì´ ë‘ ê°œ ì´ìƒì˜ ì¸ìë„ í‘œí˜„ ê°€ëŠ¥í•˜ë‹¤.</p><p><code>frequencies</code><br><code>groupingBy(key, counting())</code><br><code>groupBy(key).mapValues(_.size)</code><br><code>groupingBy { key }.eachCount()</code></p><p>ìœ„ ë„¤ ê°€ì§€ëŠ” ëª¨ë‘ ë™ì¼í•œ ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ”ë°, ì½”ë“œì˜ ì–‘ìœ¼ë¡œ ë³´ë‚˜ ì˜ë¯¸ ì „ë‹¬ë ¥ìœ¼ë¡œ ë³´ë‚˜ í´ë¡œì €ì˜ <code>frequencies</code>ì— ê°€ì¥ ë†’ì€ ì ìˆ˜ë¥¼ ì¤„ ìˆ˜ ìˆê² ë‹¤.</p><p>ì½”ë“œì— ë‚˜íƒ€ë‚˜ì§€ ì•Šì€ ê°€ì¥ í° ì°¨ì´ì ì´ í•˜ë‚˜ ìˆë‹¤. ìë°”, ìŠ¤ì¹¼ë¼, ì½”í‹€ë¦°ì—ì„œëŠ” groupByë¥¼ í•œ í›„ ë‹¤ì‹œ ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“¤ì–´ì¤˜ì•¼ ì •ë ¬ì„ í•  ìˆ˜ê°€ ìˆëŠ”ë°, í´ë¡œì €ì—ì„œëŠ” <code>frequencies</code>ê°€ ë°˜í™˜í•˜ëŠ” <strong>ë§µ ìì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê°’ ê¸°ì¤€ ì •ë ¬ì´ ê°€ëŠ¥í•˜ë‹¤.</strong></p><p><code>sort-by val &gt;</code><br><code>sorted(comparingByValue(reverseOrder()))</code><br><code>sortBy(_._2)(Ordering.Int.reverse)</code><br><code>sortedByDescending { it.second }</code></p><p>ìœ„ ë„¤ ê°€ì§€ë„ ëª¨ë‘ ë™ì¼í•œ ì—­í• ì„ í•˜ëŠ”ë°, ì´ë²ˆì—ë„ í´ë¡œì €ì˜ <code>sort-by val &gt;</code>ì— ê°€ì¥ ë†’ì€ ì ìˆ˜ë¥¼ ì¤„ ìˆ˜ ìˆê² ë‹¤. <strong>ê°’(val) ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ(&gt;)ìœ¼ë¡œ ì •ë ¬í•˜ë¼(sort-by)ëŠ” ì˜ë¯¸ë¥¼ <code>sort-by val &gt;</code>ë¡œ ì •ë§ ê°„ë‹¨ ëª…ë£Œí•˜ê²Œ í‘œí˜„</strong>í•˜ê³  ìˆë‹¤.</p><p>ë‹¤ë§Œ í´ë¡œì €ë„ ìŠ¤ì¹¼ë¼ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ìë°”ì˜ <code>peek()</code>ì´ë‚˜ ì½”í‹€ë¦°ì˜ <code>onEach()</code> ê°™ì€ ê¸°ëŠ¥ì˜ í•¨ìˆ˜ê°€ ì—†ì–´ì„œ ì¶œë ¥ê³¼ í•©ê³„ë¥¼ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ì—ì„œ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ëŠ” ê²ƒì€ ë‹¨ì ì´ë‹¤. ìŠ¤ì¹¼ë¼ì²˜ëŸ¼ Lazy Sequenceë¥¼ ë³€ìˆ˜ì— ë‹´ì•„ë‘ê³  ì¶œë ¥ì— ì‚¬ìš©í•˜ê³ , í•©ê³„ ê³„ì‚°ì— ì‚¬ìš©í•˜ë©´ ë í…ë° ê·¸ ë¶€ë¶„ì€ ì•„ì˜ˆ ì‘ì„±ì„ ëª» í–ˆë‹¤. ã…‹ã…‹</p><blockquote><p>í•œ ì¤„ í‰: ê°„ê²°í•¨ìœ¼ë¡œëŠ” íƒ€ì˜ ì¶”ì¢…ì„ ë¶ˆí—ˆí•˜ì§€ë§Œ, Lispì— ìµìˆ™í•´ì§€ê¸°ëŠ” ì‰½ì§€ ì•Šë‹¤.</p></blockquote><h2 id="Rust"><a href="#Rust" class="headerlink" title="Rust"></a>Rust</h2><p>ìŠ¤íƒì˜¤ë²„í”Œë¡œìš° ê¸°ì¤€ ì˜¬í•´ê¹Œì§€ 4ë…„ ì—°ì† ê°€ì¥ ì‚¬ë‘ë°›ëŠ” ì–¸ì–´ ëŸ¬ìŠ¤íŠ¸ë„ í•œ ë²ˆ ì‹œë„í•´ë´¤ë‹¤.</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> mvps_count = MVPS.lines()</span><br><span class="line">        .map(|line| &amp;line[<span class="number">12</span>..line.find(<span class="string">','</span>).unwrap_or(line.len())])</span><br><span class="line">        .into_iter()</span><br><span class="line">        .sorted()</span><br><span class="line">        .group_by(|name| *name)</span><br><span class="line">        .into_iter()</span><br><span class="line">        .map(|(key, group)| (key, group.count()))</span><br><span class="line">        .sorted_by(|a, b| (b.<span class="number">1</span>).cmp(&amp;a.<span class="number">1</span>))</span><br><span class="line">        .inspect(|(key, count)| <span class="built_in">println!</span>(<span class="string">"&#123;&#125;: &#123;&#125;"</span>, key, count))</span><br><span class="line">        .map(|(_key, count)| count)</span><br><span class="line">        .fold(<span class="number">0</span> <span class="keyword">as</span> <span class="built_in">usize</span>, |a, b| a + b);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, MVPS.lines().count() == mvps_count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ëŸ¬ìŠ¤íŠ¸ëŠ”.. ìì„¸í•œ ì„¤ëª…ì€ ìƒëµ.. í•˜ê³  ì‹¶ì§€ë§Œ..</p><p>ë‹¤ë¥¸ ì–¸ì–´ì™€ ê°€ì¥ í¬ê²Œ ë‹¤ë¥¸ ì ì€ <strong><code>group_by</code>ì „ì— ë°˜ë“œì‹œ <code>sorted()</code>ë¥¼ í•´ì¤˜ì•¼ ì œëŒ€ë¡œ í‚¤ ê¸°ì¤€ ë¶„ë¥˜ê°€ ì‘ë™</strong>í•œë‹¤ëŠ” ì ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ <code>[a, a, b, a, c, a]</code>ì— <code>group_by</code>ì™€ <code>map</code>ìœ¼ë¡œ í‚¤ ë³„ ë¶„ë¥˜ì™€ ì§‘ê³„ë¥¼ ì ìš©í•˜ë©´ <code>[(a, 4), (b, 1), (c, 1)]</code>ì´ ë‚˜ì˜¬ ê²ƒì´ ì˜ˆìƒë˜ê³  ë‹¤ë¥¸ ì–¸ì–´ëŠ” ëª¨ë‘ ì˜ˆìƒëŒ€ë¡œ ë™ì‘í•˜ì§€ë§Œ, ëŸ¬ìŠ¤íŠ¸ëŠ” <code>[(a, 2), (b, 1), (a, 1), (c, 1), (a, 1)]</code>ë¼ëŠ” ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤. ë”°ë¼ì„œ í‚¤ ê¸°ì¤€ìœ¼ë¡œ ë¨¼ì € ì •ë ¬ì„ í•´ì¤˜ì•¼ ì˜ˆìƒëŒ€ë¡œ ë™ì‘í•˜ê²Œ ëœë‹¤.</p><p>ìë°”ì˜ <code>peek()</code>, ì½”í‹€ë¦°ì˜ <code>onEach()</code>ì²˜ëŸ¼ ëŸ¬ìŠ¤íŠ¸ì—ë„ <code>inspect()</code>ê°€ ìˆì–´ì„œ ì¶œë ¥ê³¼ ì „ì²´ í•©ê³„ë¥¼ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.</p><blockquote><p>í•œ ì¤„ í‰: ëŸ¬ìŠ¤íŠ¸ëŠ” ì‚¬ë‘ìŠ¤ëŸ¬ìš¸ì§€ì–¸ì • ì–´ë µê³  ì–´ì§€ëŸ½ë‹¤.</p></blockquote><h1 id="ë¬¸ì„œ-ë¹„êµ"><a href="#ë¬¸ì„œ-ë¹„êµ" class="headerlink" title="ë¬¸ì„œ ë¹„êµ"></a>ë¬¸ì„œ ë¹„êµ</h1><p>ì‚¬ì‹¤ ë‹¤ë¥¸ ì–¸ì–´ëŠ” ì˜ ëª¨ë¥´ëŠ” ì±„ë¡œ ì‹œë„í•´ë´¤ë˜ ê±°ë¼ ê²€ìƒ‰ê³¼ ë¬¸ì„œì— í¬ê²Œ ì˜ì¡´í•  ìˆ˜ ë°–ì— ì—†ì—ˆë‹¤. ê°œì¸ ì·¨í–¥ì— ë”°ë¼ ëª¨ë‘ ë‹¤ë¥¼í…Œì§€ë§Œ, ì´ì™• ë¹„êµí•œ ê±° êµ¬í˜„ ë§ê³  ë¬¸ì„œë„ êµ¬ê²½í•˜ê¸° ìˆ˜ì¤€ìœ¼ë¡œ ë¹„êµí•´ë³´ì. ê·¸ë˜ë„ ê³µì •í•œ ë¹„êµë¥¼ ìœ„í•´ <code>groupBy</code>ë¥¼ ì„¤ëª…í•˜ëŠ” ë¬¸ì„œë¡œ ë¹„êµí•œë‹¤.</p><h2 id="Java-1"><a href="#Java-1" class="headerlink" title="Java"></a>Java</h2><p><img src="https://i.imgur.com/NyfU0Gq.png" alt="Imgur"></p><p>ë¬´ì‹œë¬´ì‹œí•œ ì € ë©”ì„œë“œ ì‹œê·¸ë„ˆì²˜ë¡œ ì‹œì‘í•´ì„œ êµ¬êµ¬ì ˆì ˆ ì„¤ëª…ì„ ì´ì–´ê°„ë‹¤. ê·¸ë˜ë„ ì´ <code>groupingBy</code>ëŠ” ê³ ë§™ê²Œë„ ì‹¤ì œ ì‚¬ìš© ì˜ˆì œë¥¼ í•˜ë‚˜ ë˜ì ¸ì£¼ì…¨ëŠ”ë° ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•´ ì´ëŸ° ì˜ˆì œê°€ ì œê³µë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ê·¸ë˜ì„œ ì˜ˆì œê°€ í’ë¶€í•˜ê²Œ ì œê³µë˜ëŠ” <a href="http://www.baeldung.com" target="_blank" rel="noopener">www.baeldung.com</a> ê°™ì€ ì‚¬ì´íŠ¸ë¥¼ ë§ì´ ì°¸ê³ í•˜ê²Œ ëœë‹¤.</p><h2 id="Scala-1"><a href="#Scala-1" class="headerlink" title="Scala"></a>Scala</h2><p><img src="https://i.imgur.com/iBoGbKT.png" alt="Imgur"></p><p>ìŠ¤ì¹¼ë¼ëŠ” ë¬¸ì„œë„ ê°„ê²°í•˜ë‹¤. ë„ˆë¬´ ê°„ê²°í•´ì„œ ì˜ˆì œë„ ì—†ë‹¤..</p><h2 id="Kotlin-1"><a href="#Kotlin-1" class="headerlink" title="Kotlin"></a>Kotlin</h2><p><img src="https://i.imgur.com/WVi56uS.png" alt="Imgur"></p><p>ì½”í‹€ë¦°ì€ <strong>ì˜ˆì œë¥¼ ë‹¨ìˆœí•œ í…ìŠ¤íŠ¸ê°€ ì•„ë‹ˆë¼ ì‹¤í–‰ ê°€ëŠ¥í•œ í™˜ê²½ê³¼ í•¨ê»˜ ì œê³µ</strong>í•œë‹¤!! ê·¸ë˜ì„œ ìš”ë¦¬ì¡°ë¦¬ ì§ì ‘ ë°”ê¿”ê°€ë©° ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°”ë¡œ í™•ì¸í•´ ë³¼ ìˆ˜ ìˆë‹¤!! ì´ëŸ° ì°¸ì‹ í•¨ì—ëŠ” ë†’ì€ ì ìˆ˜ë¥¼ ì£¼ê³  ì‹¶ë‹¤. ê·¸ëŸ°ë° ì˜ˆì œê°€ í’ë¶€í•˜ì§€ëŠ” ì•Šë‹¤.</p><p>ìœ„ì— ì‘ì„±í•œ ì½”ë“œì—ëŠ” <code>groupBy</code>ê°€ í‚¤ ë¶„ë¥˜ë§Œ ê°€ëŠ¥í•˜ê²Œ ë˜ì–´ ìˆëŠ”ë° ë¬¸ì„œë¥¼ ë³´ë‹ˆ í‚¤ ë¶„ë¥˜ë¿ ì•„ë‹ˆë¼ í•­ëª© ì§‘ê³„ë„ ê°€ëŠ¥í•œ ê±¸ë¡œ ë³´ì¸ë‹¤. í•˜ì§€ë§Œ ê´€ë ¨ ì˜ˆì œê°€ ì—†ì–´ì„œ ì–´ë–»ê²Œ í•˜ë©´ ì›í•˜ëŠ” ëŒ€ë¡œ ë°”ê¿€ ìˆ˜ ìˆì„ì§€ ë°”ë¡œ ì•Œ ìˆ˜ëŠ” ì—†ì—ˆë‹¤.</p><h2 id="Clojure-1"><a href="#Clojure-1" class="headerlink" title="Clojure"></a>Clojure</h2><p><img src="https://i.imgur.com/VWlC5NZ.png" alt="Imgur"></p><p>í´ë¡œì €ëŠ” ë¬¸ì„œë„ ê°€ì¥ ê°„ê²°í•˜ë‹¤. </p><p>ê·¸ëŸ°ë° ê·¸ë³´ë‹¤ ë” ì¤‘ìš”í•œ ê²ƒì€ <strong>ë‹¤ë¥¸ ì–¸ì–´ ë¬¸ì„œë“¤ê³¼ ë‹¬ë¦¬ ê³µì‹ ë¬¸ì„œê°€ ì˜¤í”ˆ ë°©ì‹</strong>ì´ë¼ëŠ” ê²ƒì´ë‹¤. ë¡œê·¸ì¸ë§Œ í•˜ë©´ ì‚¬ìš©ìê°€ ì§ì ‘ ë‹¤ì–‘í•œ ì˜ˆì œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆê²Œ ë˜ì–´ ìˆì„ë¿ ì•„ë‹ˆë¼ í™”ë©´ì—ëŠ” ì•ˆ ë‚˜ì™”ì§€ë§Œ ì§ˆì˜ ì‘ë‹µë„ ê°€ëŠ¥í•˜ê²Œ ì™„ì „íˆ ì—´ë ¤ìˆë‹¤. </p><p>ë•ë¶„ì— í´ë¡œì €ë¥¼ ê±°ì˜ ëª¨ë¥´ëŠ” ë‚˜ê°™ì€ ë¬¸ì™¸í•œë„ MVP ìˆ˜ìƒíšŸìˆ˜ ì§‘ê³„ ì˜ˆì œ ì •ë„ëŠ” í´ë¡œì € ë¬¸ì„œ ì‚¬ì´íŠ¸ë§Œìœ¼ë¡œë„ ê·¸ëŸ­ì €ëŸ­ ì§¤ ìˆ˜ ìˆì—ˆë‹¤. ì‹¤ìš©ì„± ë©´ì—ì„œëŠ” ê°€ì¥ ë†’ì€ ì ìˆ˜ë¥¼ ì¤„ ë§Œí•˜ë‹¤.</p><h2 id="Rust-1"><a href="#Rust-1" class="headerlink" title="Rust"></a>Rust</h2><p><img src="https://i.imgur.com/W1rg6ZV.png" alt="Imgur"></p><p>ì¼ë‹¨ ìœ„ ì˜ˆì œì—ì„œ ì‚¬ìš©í•œ <code>group_by</code>ëŠ” ëŸ¬ìŠ¤íŠ¸ ìì²´ì— í¬í•¨ëœ ê²ƒì€ ì•„ë‹ˆê³ , <code>itertools</code>ë¼ëŠ” í¬ë ˆì´íŠ¸(crate, ê·¸ëƒ¥ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¼ê³  ì´í•´í•´ë„ í¬ê²Œ í‹€ë¦¬ì§€ ì•ŠìŒ)ì—ì„œ ì œê³µí•˜ëŠ” ê²ƒì¸ë°, ë¬¸ì„œì˜ í¬ë§·ì€ ëŸ¬ìŠ¤íŠ¸ì˜ ê³µì‹ ë¬¸ì„œ ì‚¬ì´íŠ¸ì™€ ë™ì¼í•˜ë‹¤.</p><p>ì ì ˆí•œ ì„¤ëª…ê³¼ í•¨ê»˜ ì˜ˆì œê°€ ì œê³µëœë‹¤. ì˜ˆì œì— ì£¼ì„ìœ¼ë¡œ ê³ ë§ˆìš´ ì„¤ëª…ì´ ë‹¬ë ¤ìˆê¸´ í•˜ì§€ë§Œ í´ë¡œì €ì²˜ëŸ¼ ì˜¤í”ˆ ë°©ì‹ì´ ì•„ë‹ˆë¼ì„œ ì˜ˆì œê°€ ë‹¤ì–‘í•˜ì§€ëŠ” ì•Šë‹¤.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ì¬ë¯¸ë¡œ-ë³´ëŠ”-ì–¸ì–´ë³„-ìŠ¤íŠ¸ë¦¼-ì²˜ë¦¬-ë¹„êµ&quot;&gt;&lt;a href=&quot;#ì¬ë¯¸ë¡œ-ë³´ëŠ”-ì–¸ì–´ë³„-ìŠ¤íŠ¸ë¦¼-ì²˜ë¦¬-ë¹„êµ&quot; class=&quot;headerlink&quot; title=&quot;ì¬ë¯¸ë¡œ ë³´ëŠ” ì–¸ì–´ë³„ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ë¹„êµ&quot;&gt;&lt;/a&gt;ì¬ë¯¸ë¡œ ë³´ëŠ” ì–¸ì–´ë³„ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ë¹„êµ&lt;/h1&gt;&lt;
      
    
    </summary>
    
      <category term="Language" scheme="http://homoefficio.github.io/categories/Language/"/>
    
    
      <category term="Java" scheme="http://homoefficio.github.io/tags/Java/"/>
    
      <category term="ìë°”" scheme="http://homoefficio.github.io/tags/%EC%9E%90%EB%B0%94/"/>
    
      <category term="Stream" scheme="http://homoefficio.github.io/tags/Stream/"/>
    
      <category term="ìŠ¤íŠ¸ë¦¼" scheme="http://homoefficio.github.io/tags/%EC%8A%A4%ED%8A%B8%EB%A6%BC/"/>
    
      <category term="Scala" scheme="http://homoefficio.github.io/tags/Scala/"/>
    
      <category term="Kotlin" scheme="http://homoefficio.github.io/tags/Kotlin/"/>
    
      <category term="Clojure" scheme="http://homoefficio.github.io/tags/Clojure/"/>
    
      <category term="Rust" scheme="http://homoefficio.github.io/tags/Rust/"/>
    
      <category term="groupBy" scheme="http://homoefficio.github.io/tags/groupBy/"/>
    
      <category term="groupingBy" scheme="http://homoefficio.github.io/tags/groupingBy/"/>
    
      <category term="sort by value" scheme="http://homoefficio.github.io/tags/sort-by-value/"/>
    
      <category term="map" scheme="http://homoefficio.github.io/tags/map/"/>
    
      <category term="reduce" scheme="http://homoefficio.github.io/tags/reduce/"/>
    
      <category term="fold" scheme="http://homoefficio.github.io/tags/fold/"/>
    
      <category term="peek" scheme="http://homoefficio.github.io/tags/peek/"/>
    
      <category term="onEach" scheme="http://homoefficio.github.io/tags/onEach/"/>
    
      <category term="inspect" scheme="http://homoefficio.github.io/tags/inspect/"/>
    
      <category term="Tuple" scheme="http://homoefficio.github.io/tags/Tuple/"/>
    
      <category term="Pair" scheme="http://homoefficio.github.io/tags/Pair/"/>
    
      <category term="it" scheme="http://homoefficio.github.io/tags/it/"/>
    
      <category term="_" scheme="http://homoefficio.github.io/tags//"/>
    
      <category term="jooL" scheme="http://homoefficio.github.io/tags/jooL/"/>
    
      <category term="reference doc" scheme="http://homoefficio.github.io/tags/reference-doc/"/>
    
      <category term="ìŠ¤ì¹¼ë¼" scheme="http://homoefficio.github.io/tags/%EC%8A%A4%EC%B9%BC%EB%9D%BC/"/>
    
      <category term="ì½”í‹€ë¦°" scheme="http://homoefficio.github.io/tags/%EC%BD%94%ED%8B%80%EB%A6%B0/"/>
    
      <category term="í´ë¡œì €" scheme="http://homoefficio.github.io/tags/%ED%81%B4%EB%A1%9C%EC%A0%80/"/>
    
      <category term="ëŸ¬ìŠ¤íŠ¸" scheme="http://homoefficio.github.io/tags/%EB%9F%AC%EC%8A%A4%ED%8A%B8/"/>
    
      <category term="ë³€í™˜" scheme="http://homoefficio.github.io/tags/%EB%B3%80%ED%99%98/"/>
    
      <category term="ì§‘ê³„" scheme="http://homoefficio.github.io/tags/%EC%A7%91%EA%B3%84/"/>
    
      <category term="íŠœí”Œ" scheme="http://homoefficio.github.io/tags/%ED%8A%9C%ED%94%8C/"/>
    
      <category term="í˜ì–´" scheme="http://homoefficio.github.io/tags/%ED%8E%98%EC%96%B4/"/>
    
      <category term="ê°’ìœ¼ë¡œ ì •ë ¬" scheme="http://homoefficio.github.io/tags/%EA%B0%92%EC%9C%BC%EB%A1%9C-%EC%A0%95%EB%A0%AC/"/>
    
      <category term="ê°’ ê¸°ì¤€ ì •ë ¬" scheme="http://homoefficio.github.io/tags/%EA%B0%92-%EA%B8%B0%EC%A4%80-%EC%A0%95%EB%A0%AC/"/>
    
  </entry>
  
</feed>
