<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="뒤태지존의 끄적거림">
    <title>Java Quartz Scheduler - Job Chaining 구현 - 뒤태지존의 끄적거림</title>
    <meta name="author" content="HomoEfficio">
    <meta name="description" content="뒤태지존의 끄적거림">
    
        <link rel="icon" href="/assets/images/favicon.ico">
    
    
        <link rel="alternative" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="Java Quartz Scheduler - Job Chaining 구현Java로 Job Scheduling을 쉽게(참 조심스러운 단어.. ㅋㅋ) 할 수 있게 해주는 쿼츠(Quartz) 스케줄러가 있다. 이 사이트에 나와있는 문서들은 여태 본 기술 사이트 문서 중에 가장 맘에 드는 스타일로 구성되어 있다. 길지 않은 설명, 간략하면서도 필요한 정보를 모두 담">
<meta name="keywords" content="Java,자바,Quartz,Scheduler,쿼츠,스케줄러,Job Chaining,Template Method Pattern,Job 연속 실행,Job 순차 실행,템플릿 메서드 패턴">
<meta property="og:type" content="blog">
<meta property="og:title" content="Java Quartz Scheduler - Job Chaining 구현">
<meta property="og:url" content="http://homoefficio.github.io/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/index.html">
<meta property="og:site_name" content="뒤태지존의 끄적거림">
<meta property="og:description" content="Java Quartz Scheduler - Job Chaining 구현Java로 Job Scheduling을 쉽게(참 조심스러운 단어.. ㅋㅋ) 할 수 있게 해주는 쿼츠(Quartz) 스케줄러가 있다. 이 사이트에 나와있는 문서들은 여태 본 기술 사이트 문서 중에 가장 맘에 드는 스타일로 구성되어 있다. 길지 않은 설명, 간략하면서도 필요한 정보를 모두 담">
<meta property="og:locale" content="ko">
<meta property="og:updated_time" content="2019-04-28T17:03:55.376Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java Quartz Scheduler - Job Chaining 구현">
<meta name="twitter:description" content="Java Quartz Scheduler - Job Chaining 구현Java로 Job Scheduling을 쉽게(참 조심스러운 단어.. ㅋㅋ) 할 수 있게 해주는 쿼츠(Quartz) 스케줄러가 있다. 이 사이트에 나와있는 문서들은 여태 본 기술 사이트 문서 중에 가장 맘에 드는 스타일로 구성되어 있다. 길지 않은 설명, 간략하면서도 필요한 정보를 모두 담">
    
        <meta rel="publisher" content="https://plus.google.com/+오명운"/>
    
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/30f0244ab86396288cdb62c3591c0c30?s=640"/>
    
    
        <meta property="og:image" content="/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/https:/avatars1.githubusercontent.com/u/5505009?s=200&v=4"/>
        <meta class="swiftype" name="image" data-type="enum" content="http://homoefficio.github.io/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/https://avatars1.githubusercontent.com/u/5505009?s=200&v=4" />
    
    
        <meta property="og:image" content="/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/cover-quartz-background.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="http://homoefficio.github.io/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/cover-quartz-background.png" />
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-79893978-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6494847158566766",
    enable_page_level_ads: true
  });
</script>
</head>

    <body>
        <div id="blog">
            <header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">뒤태지존의 끄적거림</a>
    </h1>
    
        <a class="header-right-picture" href="/#about">
            <img class="header-picture" src="https://www.gravatar.com/avatar/30f0244ab86396288cdb62c3591c0c30?s=90"/>
        </a>
    
</header>
            <nav id="sidebar" data-behavior="1">
    
    <div class="sidebar-profile">
        <a href="/#about">
            
            <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/30f0244ab86396288cdb62c3591c0c30?s=90"/>
            
        </a>
        <span class="sidebar-profile-name">HomoEfficio</span>
    </div>
    
    
    <ul class="sidebar-buttons">
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/ 
                    ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/all-categories
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">Categories</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/all-tags
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/all-archives
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">Archives</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link st-search-show-outputs"
                    href="#search
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">Search</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="#about
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">About me</span>
                </a>
        </li>
        
    </ul>
    
    <ul class="sidebar-buttons">
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="https://github.com/HomoEfficio" target="_blank">
            
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link " href="mailto:homo.efficio@gmail.com" target="_blank">
            
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">Mail</span>
                </a>
        </li>
        
    </ul>
    
    <ul class="sidebar-buttons">
        
        <li class="sidebar-button">
            
                <a  class="sidebar-button-link "
                    href="/atom.xml
                            ">
            
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>
            <div id="main" data-behavior="1">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
        <div class="post-header-cover" style="background-image:url('/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/cover-quartz-background.png');">
            <div class="post-header main-content-wrap">
    
        <h1 class="post-title" itemprop="headline">Java Quartz Scheduler - Job Chaining 구현</h1>
    
    <div class="post-meta">
    <time  itemprop="datePublished" content="Sun Aug 12 2018 09:07:12 GMT+0900">
        Aug 12, 2018
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Technique/">Technique</a>


    
</div>
</div>
        </div>
    
    <div class="post-content markdown main-content-wrap" itemprop="articleBody">
        
            <h1 id="Java-Quartz-Scheduler-Job-Chaining-구현"><a href="#Java-Quartz-Scheduler-Job-Chaining-구현" class="headerlink" title="Java Quartz Scheduler - Job Chaining 구현"></a>Java Quartz Scheduler - Job Chaining 구현</h1><p>Java로 Job Scheduling을 쉽게(참 조심스러운 단어.. ㅋㅋ) 할 수 있게 해주는 <a href="http://www.quartz-scheduler.org/" target="_blank" rel="noopener">쿼츠(Quartz) 스케줄러</a>가 있다.</p>
<p>이 사이트에 나와있는 문서들은 여태 본 기술 사이트 문서 중에 가장 맘에 드는 스타일로 구성되어 있다. 길지 않은 설명, 간략하면서도 필요한 정보를 모두 담고 있는 다양한 기본 예제와 실무형 Cookbook까지 정말 마음에 쏙 든다. 게다가 스프링부트 스타터로도 제공되므로 더욱 편리하게 프로젝트에서 사용할 수 있다.</p>
<p>그런데 옥의 티랄까.. 독립적인 Job은 훌륭한 문서와 쉬운 Fluent API 덕에 간단하게 구현할 수 있는데, 연속적인 Job 실행은 간단하게 구현할 수 있는 방법이 없는 것 같다. 그래서 검색을 해보니 결국에는 Job 실행에 사용되는 Context 객체 안에 다음에 실행할 Job을 넣어주고 스케줄링하는 방식으로 연속적인 Job 실행을 구현할 수 있다. </p>
<p>그래서 간단하면서도 용도에 맞게 조금만 확장하면 아주 쓸만한 구현 예제를 만들어 봤다. 전체 코드는 <a href="https://github.com/HomoEfficio/quartz-scratchpad" target="_blank" rel="noopener">https://github.com/HomoEfficio/quartz-scratchpad</a> 에 있다.</p>
<h2 id="Quartz-기초-개념"><a href="#Quartz-기초-개념" class="headerlink" title="Quartz 기초 개념"></a>Quartz 기초 개념</h2><p>쿼츠에 대한 감을 잡는 데는 단 한 줄이면 충분하다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scheduler.scheduleJob(jobDetail, trigger);</span><br></pre></td></tr></table></figure>
<ul>
<li><code>jobDetail</code>에는 Job의 실제 구현 내용과 Job 실행에 필요한 제반 상세 정보가 담겨 있다.</li>
<li><code>trigger</code>에는 Job을 언제, 어떤 주기로, 언제부터 언제까지 실행할지에 대한 정보가 담겨 있다.</li>
<li>scheduler는 <code>jobDetail</code>과 <code>trigger</code>에 담긴 정보를 이용해서 실제 Job의 실행 스케줄링을 담당한다.</li>
</ul>
<h2 id="Quartz-기초-예제"><a href="#Quartz-기초-예제" class="headerlink" title="Quartz 기초 예제"></a>Quartz 기초 예제</h2><p>쿼츠 스케줄링을 통해 로그를 찍는 간단한 예제를 살펴보자.</p>
<h3 id="HelloJob"><a href="#HelloJob" class="headerlink" title="HelloJob"></a>HelloJob</h3><p>단순히 로그를 찍는 Job</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> io.homo.efficio.scratchpad.quartz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.quartz.Job;</span><br><span class="line"><span class="keyword">import</span> org.quartz.JobExecutionContext;</span><br><span class="line"><span class="keyword">import</span> org.quartz.JobExecutionException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> homo.efficio@gmail.com</span></span><br><span class="line"><span class="comment"> * created on 2018-08-12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloJob</span> <span class="keyword">implements</span> <span class="title">Job</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(JobExecutionContext context)</span> <span class="keyword">throws</span> JobExecutionException </span>&#123;</span><br><span class="line">        log.info(<span class="string">"### Hello Job is being executed!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="QuartzTest"><a href="#QuartzTest" class="headerlink" title="QuartzTest"></a>QuartzTest</h3><p>HelloJob을 스케줄링하고 실행하는 테스트. 물론 <code>public static void main()</code>으로 해도 무방하다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> io.homo.efficio.scratchpad.quartz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.quartz.JobDetail;</span><br><span class="line"><span class="keyword">import</span> org.quartz.Scheduler;</span><br><span class="line"><span class="keyword">import</span> org.quartz.SchedulerException;</span><br><span class="line"><span class="keyword">import</span> org.quartz.Trigger;</span><br><span class="line"><span class="keyword">import</span> org.quartz.impl.StdSchedulerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.JobBuilder.newJob;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.quartz.TriggerBuilder.newTrigger;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> homo.efficio@gmail.com</span></span><br><span class="line"><span class="comment"> * created on 2018-08-12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuartzTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">helloJob</span><span class="params">()</span> <span class="keyword">throws</span> SchedulerException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Job 구현 내용이 담긴 HelloJob으로 JobDetail 생성</span></span><br><span class="line">        JobDetail jobDetail = newJob(HelloJob.class)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 실행 시점을 결정하는 Trigger 생성</span></span><br><span class="line">        Trigger trigger = newTrigger()</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 스케줄러 실행 및 JobDetail과 Trigger 정보로 스케줄링</span></span><br><span class="line">        Scheduler defaultScheduler = StdSchedulerFactory.getDefaultScheduler();</span><br><span class="line">        defaultScheduler.start();</span><br><span class="line">        defaultScheduler.scheduleJob(jobDetail, trigger);</span><br><span class="line">        Thread.sleep(<span class="number">3</span> * <span class="number">1000</span>);  <span class="comment">// Job이 실행될 수 있는 시간 여유를 준다</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 스케줄러 종료</span></span><br><span class="line">        defaultScheduler.shutdown(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="테스트-결과"><a href="#테스트-결과" class="headerlink" title="테스트 결과"></a>테스트 결과</h3><p>다음과 같이 HelloJob에 구현된 로그 출력이 성공적으로 수행된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">00:53:15.137 [DefaultQuartzScheduler_Worker-1] INFO io.homo.efficio.scratchpad.quartz.HelloJob - ### Hello Job is being executed!</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="Job-Chaining-기본-틀-구현"><a href="#Job-Chaining-기본-틀-구현" class="headerlink" title="Job Chaining 기본 틀 구현"></a>Job Chaining 기본 틀 구현</h2><p>이제 위의 간단한 HelloJob을 넘어서 Job을 연속적으로 실행할 수 있는 Job Chaining을 구현해보자.</p>
<p>연속 실행 기능을 가질 추상 클래스인 <code>BaseJob</code>을 만들고, 실제 구현 내용을 담은 HelloJob은 <code>BaseJob</code>을 상속하게 만든다.</p>
<h3 id="BaseJob"><a href="#BaseJob" class="headerlink" title="BaseJob"></a>BaseJob</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> io.homo.efficio.scratchpad.quartz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.quartz.Job;</span><br><span class="line"><span class="keyword">import</span> org.quartz.JobExecutionContext;</span><br><span class="line"><span class="keyword">import</span> org.quartz.JobExecutionException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> homo.efficio@gmail.com</span></span><br><span class="line"><span class="comment"> * created on 2018-08-12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseJob</span> <span class="keyword">implements</span> <span class="title">Job</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(JobExecutionContext context)</span> <span class="keyword">throws</span> JobExecutionException </span>&#123;</span><br><span class="line">        doExecute(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">doExecute</span><span class="params">(JobExecutionContext context)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="HelloJob-1"><a href="#HelloJob-1" class="headerlink" title="HelloJob"></a>HelloJob</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> io.homo.efficio.scratchpad.quartz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.quartz.Job;</span><br><span class="line"><span class="keyword">import</span> org.quartz.JobExecutionContext;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> homo.efficio@gmail.com</span></span><br><span class="line"><span class="comment"> * created on 2018-08-12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloJob</span> <span class="keyword">extends</span> <span class="title">BaseJob</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doExecute</span><span class="params">(JobExecutionContext context)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"### Hello Job is being executed!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="테스트-재실행"><a href="#테스트-재실행" class="headerlink" title="테스트 재실행"></a>테스트 재실행</h3><p>테스트 코드는 바꿀 필요 없다. 실행해보면 전과 마찬가지로 로그가 성공적으로 출력된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">01:22:41.393 [DefaultQuartzScheduler_Worker-1] INFO io.homo.efficio.scratchpad.quartz.HelloJob - ### Hello Job is being executed!</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h3 id="템플릿-메서드-패턴-적용"><a href="#템플릿-메서드-패턴-적용" class="headerlink" title="템플릿 메서드 패턴 적용"></a>템플릿 메서드 패턴 적용</h3><p><code>BaseJob</code>에 템플릿 메서드 패턴을 적용해서 Job 실행 <code>전처리</code>, <code>Job 실행</code>, <code>후처리</code>, <code>다음 Job Scheduling</code>이라는 파이프라인을 구성한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> io.homo.efficio.scratchpad.quartz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.quartz.Job;</span><br><span class="line"><span class="keyword">import</span> org.quartz.JobExecutionContext;</span><br><span class="line"><span class="keyword">import</span> org.quartz.JobExecutionException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> homo.efficio@gmail.com</span></span><br><span class="line"><span class="comment"> * created on 2018-08-12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseJob</span> <span class="keyword">implements</span> <span class="title">Job</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(JobExecutionContext context)</span> <span class="keyword">throws</span> JobExecutionException </span>&#123;</span><br><span class="line">        beforeExecute(context);</span><br><span class="line">        doExecute(context);</span><br><span class="line">        afterExecute(context);</span><br><span class="line">        scheduleNextJob(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">beforeExecute</span><span class="params">(JobExecutionContext context)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"%%% Before executing job"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">doExecute</span><span class="params">(JobExecutionContext context)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">afterExecute</span><span class="params">(JobExecutionContext context)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"%%% After executing job"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">scheduleNextJob</span><span class="params">(JobExecutionContext context)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"$$$ Schedule Next Job"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="테스트-재실행-1"><a href="#테스트-재실행-1" class="headerlink" title="테스트 재실행"></a>테스트 재실행</h3><p>테스트를 재실행해보면 다음과 같이 <code>전처리</code>, <code>Job 실행</code>, <code>후처리</code>, <code>다음 Job 스케줄링</code>이 실행됨을 알 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="number">01</span>:<span class="number">41</span>:<span class="number">16.254</span> [DefaultQuartzScheduler_Worker-<span class="number">1</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - %%% Before executing job</span><br><span class="line">01:41:16.254 [DefaultQuartzScheduler_Worker-1] INFO io.homo.efficio.scratchpad.quartz.HelloJob - ### Hello Job is being executed!</span><br><span class="line"><span class="number">01</span>:<span class="number">41</span>:<span class="number">16.254</span> [DefaultQuartzScheduler_Worker-<span class="number">1</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - %%% After executing job</span><br><span class="line"><span class="number">01</span>:<span class="number">41</span>:<span class="number">16.254</span> [DefaultQuartzScheduler_Worker-<span class="number">1</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - $$$ Schedule Next Job</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="Job-Chaining-실제-구현"><a href="#Job-Chaining-실제-구현" class="headerlink" title="Job Chaining 실제 구현"></a>Job Chaining 실제 구현</h2><p>여기에서는 쿼츠에 대한 부연 설명이 조금 필요하다.</p>
<p><code>execute()</code> 메서드에 넘겨지는 <code>JobExecutionContext</code>에는 Job 실행에 필요한 다양한 정보를 담을 수 있다. 그 중에서도 <code>JobDataMap</code>을 이용하면 자유롭게 Key-Value 데이터를 담을 수 있다. 다음과 같이 테스트 코드를 바꿔서 정보를 담아보자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">helloJob</span><span class="params">()</span> <span class="keyword">throws</span> SchedulerException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// JobDataMap을 이용해서 원하는 정보 담기</span></span><br><span class="line">    JobDataMap jobDataMap = <span class="keyword">new</span> JobDataMap();</span><br><span class="line">    jobDataMap.put(<span class="string">"JobName"</span>, <span class="string">"Job Chain 1"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Job 구현 내용이 담긴 HelloJob으로 JobDetail 생성</span></span><br><span class="line">    JobDetail jobDetail = newJob(HelloJob.class)</span><br><span class="line">            .usingJobData(jobDataMap)  <span class="comment">// &lt;- jobDataMap 주입</span></span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">    ... 이하 생략 ...</span><br></pre></td></tr></table></figure>
<p>그리고 <code>HelloJob</code> 클래스도 <code>JobDataMap</code>에 담긴 정보를 사용하도록 바꿔보자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloJob</span> <span class="keyword">extends</span> <span class="title">BaseJob</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doExecute</span><span class="params">(JobExecutionContext context)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"### &#123;&#125; is being executed!"</span>,</span><br><span class="line">                context.getJobDetail().getJobDataMap().get(<span class="string">"JobName"</span>).toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>테스트를 재실행하면 다음과 같이 <code>JobDataMap</code>에 담은 정보가 함께 출력된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">01</span>:<span class="number">57</span>:<span class="number">06.889</span> [DefaultQuartzScheduler_Worker-<span class="number">1</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - %%% Before executing job</span><br><span class="line">01:57:06.889 [DefaultQuartzScheduler_Worker-1] INFO io.homo.efficio.scratchpad.quartz.HelloJob - ### Job Chain 1 is being executed!</span><br><span class="line"><span class="number">01</span>:<span class="number">57</span>:<span class="number">06.891</span> [DefaultQuartzScheduler_Worker-<span class="number">1</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - %%% After executing job</span><br><span class="line"><span class="number">01</span>:<span class="number">57</span>:<span class="number">06.891</span> [DefaultQuartzScheduler_Worker-<span class="number">1</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - $$$ Schedule Next Job</span><br></pre></td></tr></table></figure>
<p>이제 <code>JobDataMap</code>에 다음 Job에 대한 정보를 담으면 Job Chaining을 할 수 있을 것 같다.</p>
<h3 id="Chaining-기본-아이디어"><a href="#Chaining-기본-아이디어" class="headerlink" title="Chaining 기본 아이디어"></a>Chaining 기본 아이디어</h3><p>Job과 JobDataMap은 일대일 관계이므로, </p>
<ul>
<li>Chaining 할 모든 Job 정보를 큐에 담고, </li>
<li>그 큐를 처음 실행되는 Job의 <code>JobDataMap</code>에 담은 후에, </li>
<li>Job 실행이 완료되면 후처리 단계에서 실행이 완료된 Job을 큐에서 하나씩 빼주고,</li>
<li>다음 Job을 실행할 때 그 큐를 다음 Job의 <code>JobDataMap</code>에 넣어주고 스케줄링</li>
<li>큐가 비워지면 Chaining은 종료된다. </li>
</ul>
<h3 id="Chaining-할-여러-Job-생성"><a href="#Chaining-할-여러-Job-생성" class="headerlink" title="Chaining 할 여러 Job 생성"></a>Chaining 할 여러 Job 생성</h3><p>Job 3개를 Chaining해서 실행할 수 있도록 테스트 코드를 변경한다. </p>
<p>예제에서는 편의상 3개의 Job에 모두 <code>HelloJob.class</code>만을 사용했지만, 실제로는 서로 다른 클래스를 사용해도 무방하다. 또한 <a href="http://www.quartz-scheduler.org/api/2.2.1/org/quartz/JobBuilder.html" target="_blank" rel="noopener">JobBuilder API</a>를 참고하면 Job마다 원하는 대로 식별자를 줄 수도 있고 오류 시 재실행 옵션 등 다양하게 설정할 수 있다. <a href="http://www.quartz-scheduler.org/api/2.2.1/org/quartz/TriggerBuilder.html" target="_blank" rel="noopener">TriggerBuilder API</a>를 참고하면 <code>Trigger</code>도 원하는 대로 더 다양하게 구성할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuartzTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">helloJob</span><span class="params">()</span> <span class="keyword">throws</span> SchedulerException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Job 1 구성</span></span><br><span class="line">        JobDataMap jobDataMap1 = <span class="keyword">new</span> JobDataMap();</span><br><span class="line">        jobDataMap1.put(<span class="string">"JobName"</span>, <span class="string">"Job Chain 1"</span>);</span><br><span class="line">        JobDetail jobDetail1 = newJob(HelloJob.class)</span><br><span class="line">                .usingJobData(jobDataMap1)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Job 2 구성</span></span><br><span class="line">        JobDataMap jobDataMap2 = <span class="keyword">new</span> JobDataMap();</span><br><span class="line">        jobDataMap2.put(<span class="string">"JobName"</span>, <span class="string">"Job Chain 2"</span>);</span><br><span class="line">        JobDetail jobDetail2 = newJob(HelloJob.class)</span><br><span class="line">                .usingJobData(jobDataMap2)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Job 3 구성</span></span><br><span class="line">        JobDataMap jobDataMap3 = <span class="keyword">new</span> JobDataMap();</span><br><span class="line">        jobDataMap3.put(<span class="string">"JobName"</span>, <span class="string">"Job Chain 3"</span>);</span><br><span class="line">        JobDetail jobDetail3 = newJob(HelloJob.class)</span><br><span class="line">                .usingJobData(jobDataMap3)</span><br><span class="line">                .build();</span><br></pre></td></tr></table></figure>
<h3 id="Job-정보를-JobDataMap에-저장"><a href="#Job-정보를-JobDataMap에-저장" class="headerlink" title="Job 정보를 JobDataMap에 저장"></a>Job 정보를 JobDataMap에 저장</h3><p>실행할 모든 Job의 <code>JobDetail</code>를 첫 번째 <code>JobDetail</code>의 <code>JobDataMap</code>에 담는다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 실행할 모든 Job의 JobDetail를 jobDetail1의 JobDataMap에 담는다.</span></span><br><span class="line">List&lt;JobDetail&gt; jobDetailQueue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">jobDetailQueue.add(jobDetail1);</span><br><span class="line">jobDetailQueue.add(jobDetail2);</span><br><span class="line">jobDetailQueue.add(jobDetail3);</span><br><span class="line"><span class="comment">// 주의사항: 아래와 같이 jopDataMap1에 저장하면 반영되지 않는다.</span></span><br><span class="line"><span class="comment">// jobDataPam1.put("JobDetailQueue", jobDetailQueue);</span></span><br><span class="line"><span class="comment">// 아래와 같이 jobDetail1에서 getJobDataMap()으로 새로 가져온 JobDataMap에 저장해야 한다.</span></span><br><span class="line">jobDetail1.getJobDataMap().put(<span class="string">"JobDetailQueue"</span>, jobDetailQueue);</span><br></pre></td></tr></table></figure>
<p>테스트 코드의 나머지 부분은 변경할 것이 없다.</p>
<p>나머지는 <code>BaseJob</code>에서 처리한다.</p>
<h3 id="후처리-단계에서-완료된-Job을-큐에서-제거"><a href="#후처리-단계에서-완료된-Job을-큐에서-제거" class="headerlink" title="후처리 단계에서 완료된 Job을 큐에서 제거"></a>후처리 단계에서 완료된 Job을 큐에서 제거</h3><p><code>BaseJob</code>의 후처리 메서드인 <code>afterExecute()</code>를 다음과 같이 작성해서 큐에서 완료된 Job을 제거한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">afterExecute</span><span class="params">(JobExecutionContext context)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">"%%% After executing job"</span>);</span><br><span class="line">    Object object = context.getJobDetail().getJobDataMap().get(<span class="string">"JobDetailQueue"</span>);</span><br><span class="line">    List&lt;JobDetail&gt; jobDetailQueue = (List&lt;JobDetail&gt;) object;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (jobDetailQueue.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        jobDetailQueue.remove(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="다음-Job-스케줄링"><a href="#다음-Job-스케줄링" class="headerlink" title="다음 Job 스케줄링"></a>다음 Job 스케줄링</h3><p><code>scheduleNextJob()</code> 메서드를 다음과 같이 변경해서, 완료된 Job이 제거된 큐를 <code>JobDataMap</code>에 담고 즉시 실행하는 <code>Trigger</code>를 만들어서 스케줄링 한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">scheduleNextJob</span><span class="params">(JobExecutionContext context)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">"$$$ Schedule Next Job"</span>);</span><br><span class="line">    Object object = context.getJobDetail().getJobDataMap().get(<span class="string">"JobDetailQueue"</span>);</span><br><span class="line">    List&lt;JobDetail&gt; jobDetailQueue = (List&lt;JobDetail&gt;) object;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (jobDetailQueue.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        JobDetail nextJobDetail = jobDetailQueue.get(<span class="number">0</span>);</span><br><span class="line">        nextJobDetail.getJobDataMap().put(<span class="string">"JobDetailQueue"</span>, jobDetailQueue);</span><br><span class="line">        Trigger nowTrigger = newTrigger().startNow().build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 아래의 팩토리 메서드는 이름이 같으면 여러번 호출해도 항상 동일한 스케줄러를 반환한다.</span></span><br><span class="line">            Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler();</span><br><span class="line">            scheduler.start();</span><br><span class="line">            scheduler.scheduleJob(nextJobDetail, nowTrigger);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SchedulerException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="테스트-재실행-2"><a href="#테스트-재실행-2" class="headerlink" title="테스트 재실행"></a>테스트 재실행</h3><p>다음과 같이 Job 1, 2, 3이 모두 연속적으로 실행되는 것을 확인할 수 있다. 각 Job마다 서로 다른 워커 스레드에서 실행되는 것도 확인할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="number">02</span>:<span class="number">33</span>:<span class="number">47.650</span> [DefaultQuartzScheduler_Worker-<span class="number">1</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - %%% Before executing job</span><br><span class="line">02:33:47.650 [DefaultQuartzScheduler_Worker-1] INFO io.homo.efficio.scratchpad.quartz.HelloJob - ### Job Chain 1 is being executed!</span><br><span class="line"><span class="number">02</span>:<span class="number">33</span>:<span class="number">47.651</span> [DefaultQuartzScheduler_Worker-<span class="number">1</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - %%% After executing job</span><br><span class="line"><span class="number">02</span>:<span class="number">33</span>:<span class="number">47.652</span> [DefaultQuartzScheduler_Worker-<span class="number">1</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - $$$ Schedule Next Job</span><br><span class="line">...</span><br><span class="line"><span class="number">02</span>:<span class="number">33</span>:<span class="number">47.655</span> [DefaultQuartzScheduler_Worker-<span class="number">2</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - %%% Before executing job</span><br><span class="line">02:33:47.656 [DefaultQuartzScheduler_Worker-2] INFO io.homo.efficio.scratchpad.quartz.HelloJob - ### Job Chain 2 is being executed!</span><br><span class="line"><span class="number">02</span>:<span class="number">33</span>:<span class="number">47.656</span> [DefaultQuartzScheduler_Worker-<span class="number">2</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - %%% After executing job</span><br><span class="line"><span class="number">02</span>:<span class="number">33</span>:<span class="number">47.656</span> [DefaultQuartzScheduler_Worker-<span class="number">2</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - $$$ Schedule Next Job</span><br><span class="line">...</span><br><span class="line"><span class="number">02</span>:<span class="number">33</span>:<span class="number">47.658</span> [DefaultQuartzScheduler_Worker-<span class="number">3</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - %%% Before executing job</span><br><span class="line">02:33:47.658 [DefaultQuartzScheduler_Worker-3] INFO io.homo.efficio.scratchpad.quartz.HelloJob - ### Job Chain 3 is being executed!</span><br><span class="line"><span class="number">02</span>:<span class="number">33</span>:<span class="number">47.658</span> [DefaultQuartzScheduler_Worker-<span class="number">3</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - %%% After executing job</span><br><span class="line"><span class="number">02</span>:<span class="number">33</span>:<span class="number">47.659</span> [DefaultQuartzScheduler_Worker-<span class="number">3</span>] INFO io.homo.efficio.scratchpad.quartz.BaseJob - $$$ Schedule Next Job</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>예제에서는 단순함을 위해 연속적으로 실행될 여러 Job을 관리하는 객체를 따로 만들지 않고 테스트 객체가 그 역할을 담당했지만, 실무에서는 예를 들면 <code>Batch</code> 같은 객체를 두고 그 안에 <code>List&lt;Job&gt;</code>을 둬서 책임 분리를 하는 것도 좋다.</p>
<h2 id="정리"><a href="#정리" class="headerlink" title="정리"></a>정리</h2><blockquote>
<p>쿼츠 스케줄러(Quartz Scheduler)는 문서화가 정말로 잘 되어 있고 API 설계도 잘 되어 있어서 정말 금방 익혀서 사용할 수 있다.</p>
<p>다만, 연속적으로 Job을 실행할 수 있는 Job Chaining이 기본 사항으로 지원되지 않아 아쉽지만,</p>
<p>템플릿 메서드 패턴을 적용하면 어렵지 않게 Job Chaining을 구현해서 적용할 수 있다.</p>
</blockquote>

        
        
            
        
        <hr/>
        <div>
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="크리에이티브 커먼즈 라이선스" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><a href='https://github.com/homoefficio' target='_blank'>HomoEfficio</a>가 작성한 이 저작물은(는) <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">크리에이티브 커먼즈 저작자표시-비영리-동일조건변경허락 4.0 국제 라이선스</a>에 따라 이용할 수 있습니다.
        </div>
    </div>
    <div class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Java/">Java</a> <a class="tag tag--primary tag--small t-link" href="/tags/Job-Chaining/">Job Chaining</a> <a class="tag tag--primary tag--small t-link" href="/tags/Job-순차-실행/">Job 순차 실행</a> <a class="tag tag--primary tag--small t-link" href="/tags/Job-연속-실행/">Job 연속 실행</a> <a class="tag tag--primary tag--small t-link" href="/tags/Quartz/">Quartz</a> <a class="tag tag--primary tag--small t-link" href="/tags/Scheduler/">Scheduler</a> <a class="tag tag--primary tag--small t-link" href="/tags/Template-Method-Pattern/">Template Method Pattern</a> <a class="tag tag--primary tag--small t-link" href="/tags/스케줄러/">스케줄러</a> <a class="tag tag--primary tag--small t-link" href="/tags/자바/">자바</a> <a class="tag tag--primary tag--small t-link" href="/tags/쿼츠/">쿼츠</a> <a class="tag tag--primary tag--small t-link" href="/tags/템플릿-메서드-패턴/">템플릿 메서드 패턴</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/08/27/스펙따라-만들어보는-OAuth-1-0a-Client/"  data-tooltip="스펙따라 만들어보는 OAuth 1.0a Client">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/07/09/EOS-계정-생성/" data-tooltip="EOS 계정 생성">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://homoefficio.github.io/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://homoefficio.github.io/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://homoefficio.github.io/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>
        
            <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 HomoEfficio. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="1">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/08/27/스펙따라-만들어보는-OAuth-1-0a-Client/"  data-tooltip="스펙따라 만들어보는 OAuth 1.0a Client">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/07/09/EOS-계정-생성/" data-tooltip="EOS 계정 생성">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://homoefficio.github.io/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://homoefficio.github.io/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://homoefficio.github.io/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>
                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="1">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://homoefficio.github.io/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/">
                <i class="fa fa-google-plus"></i><span class="">Share on Google Plus</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://homoefficio.github.io/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/">
                <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://homoefficio.github.io/2018/08/12/Java-Quartz-Scheduler-Job-Chaining-구현/">
                <i class="fa fa-twitter"></i><span>Share on Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        <div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/30f0244ab86396288cdb62c3591c0c30?s=110"/>
        
            <h4 id="about-card-name">HomoEfficio</h4>
        
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Seoul, Korea.
            </h5>
        
    </div>
</div>
        <div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/script.min.js"></script>
<!--SCRIPTS END-->

    <script type="text/javascript">
        var disqus_shortname = 'hanmomhanda';
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>



</html>
